/*!
 * SAP APF Analysis Path Framework
 * 
 * (c) Copyright 2012-2014 SAP AG. All rights reserved
 */
jQuery.sap.declare('sap.apf.utils.pathContextHandler');jQuery.sap.require('sap.apf.utils.hashtable');
sap.apf.utils.PathContextHandler=function(f,m){var u=1;var c={};var a;this.add=function(e){c[u]=e;f.setContext(b());return u++};this.update=function(i,e){if(i&&typeof i=='number'){m.check((i>0&&i<u),'Passed unknown numeric identifier during update of path context handler');if(!(i>0&&i<u)){return}}else if(!i||typeof i!='string'){m.check(i,'Passed falsy dentifier during update of path context handler');return}c[i]=e;f.setContext(b())};this.get=function(i){switch(typeof i){case'number':m.check((i>0&&i<u),'Passed unknown numeric identifier during get from path context handler');break;case'string':m.check(c[i],'Passed unknown string identifier during get from path context handler')}return c[i]};this.getAllIds=function(){var r=[];for(property in c){if(c.hasOwnProperty(property)){r.push(d(property))}}return r};this.serialize=function(){var s={};for(property in c){if(c.hasOwnProperty(property)){s[property]=c[property].serialize()}}return s};this.deserialize=function(e){u=1;c={};for(property in e){if(e.hasOwnProperty(property)){c[property]=new sap.apf.utils.Filter(m).deserialize(e[property]);u++}}return this};this.saveInitialContext=function(e){var p,i,l;var g={};var h={};if(e){for(p in a){if(a.hasOwnProperty(p)){g[p]=new sap.apf.utils.Filter(m).deserialize(a[p])}}for(i=0,l=e.length;i<l;i++){g[e[i]]=c[e[i]]}for(p in g){h[p]=g[p].serialize()}a=h}else{a=this.serialize()}};this.restoreInitialContext=function(i){var e={};var p;if(a){if(i){for(p in c){if(i.indexOf(d(p))==-1){e[p]=c[p]}}}this.deserialize(a);for(p in e){c[p]=e[p]}f.setContext(b())}};function b(){var e=[];for(var g in c){if(c.hasOwnProperty(g)){e.push(c[g])}}return new sap.apf.utils.Filter(m).intersectWith(e)}function d(p){if(isNaN(Number(p))){return p}else{return Number(p)}}};
