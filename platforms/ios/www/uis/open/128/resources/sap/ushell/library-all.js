sap.ui.controller("sap.ushell.components.factsheet.views.ThingViewer",{setService:function(u){this.getView().setModel(new sap.ui.model.odata.ODataModel(u))}});window.f2pMonitor=(function(){'use strict';jQuery.sap.declare("sap.ushell.components.perf.monitor");jQuery.sap.require("sap.m.library");var p,r,I,P;function s(c){for(var i=0;i<c.length;i++){var d=c[i].getIcon();if(d&&d.indexOf('alert')!==-1){c[i].addStyleClass('PerfMonitorRedIcon')}else if(d&&d.indexOf('accept')!==-1){c[i].addStyleClass('PerfMonitorGreenIcon')}}}function _(e){e.stopImmediatePropagation();var c,C,n,N;c=e.srcControl.getBindingContext();C=P.getProperty('/currentListPath');n=C+c.sPath.replace('/currentModel','');N=P.getProperty('/data'+n);if(N.items&&N.items.length){P.setProperty('/currentListPath',n);P.setProperty('/currentModel',N)}}function a(e){var n,N,c=P.getProperty('/currentListPath');if(c){n=c.substring(0,c.lastIndexOf('/'));n=n.substring(0,n.lastIndexOf('/'));N=P.getProperty('/data'+n);P.setProperty('/currentListPath',n);P.setProperty('/currentModel',N)}else{p.backToTop()}}I=new sap.m.ObjectListItem({title:"{title}",type:"{type}",number:"{number}",numberUnit:"{i18n>milliseconds}",icon:"{icon}"}).addEventDelegate({onclick:_});function b(d,c,e){var o,l=new sap.m.List({inset:false});P.setProperty("/currentListPath","");P.setProperty('/currentModel',P.getProperty('/data'));l.setModel(P);l.bindItems("/currentModel/items",I);l.onBeforeRendering=function(f){s(f.srcControl.getItems())};o=new sap.m.Page(d.id,{title:"{i18n>fioriLaunchPadMonitor}",showNavButton:e,content:[l]}).addEventDelegate({onclick:a});p.addPage(o)}return{_getStaticJSON:function(){return{id:"overview",title:"Overview",items:[{id:"homepage",title:"All Groups",type:"Navigation",number:10500,items:[{title:"Self Service Group",number:100},{id:"salesGroup",title:"Sales Group",type:"Navigation",number:10250,items:[{title:"Create Sales Order Tile",number:300},{title:"Product HT-1000 Tile",number:250},{title:"Approve Shopping Cart Tile",number:350},{title:"Sales Order 27 Tile",number:8000},{title:"Npr News Tile",number:250}]}]},{id:"shell",title:"Shell bootstrap",number:1000},{id:"searches",title:"Searches Terms",number:1000},{id:"appNavigation",title:"App Navigation",number:250}]}},open:function(){if(!p){this.init()}else{this.update()}p.to(r)},close:function(){if(p){p.backToTop()}},load:function(l){var d=l();if(!P){P=new sap.ui.model.json.JSONModel()}P.setProperty('/data',d);r=d.id;b(d,"/items/",true)},registerWindowKeyCombo:function(){jQuery(document).keydown(function(e){if(e.ctrlKey&&e.altKey&&e.keyCode===76){if(!p){this.init()}else{this.update()}p.to(r)}if(e.keyCode===27){if(p){p.backToTop()}}}.bind(this))},update:function(){if(window.f2p){var d=f2p.get();P.setProperty('/data',d);P.setProperty('/currentModel',d)}},init:function(n){if(n){p=n}else{return}if(window.f2p)this.load(f2p.get);else this.load(this._getStaticJSON)}}}());
//Copyright (c) 2013 SAP AG, All Rights Reserved
(function(){"use strict";sap.ui.jsview("sap.ushell.components.tiles.applauncher.StaticTile",{getControllerName:function(){return"sap.ushell.components.tiles.applauncher.StaticTile"},createContent:function(c){jQuery.sap.require('sap.ushell.ui.tile.StaticTile');this.setHeight('100%');this.setWidth('100%');return new sap.ushell.ui.tile.StaticTile({title:"{/config/display_title_text}",subtitle:"{/config/display_subtitle_text}",info:"{/config/display_info_text}",actions:"{/config/actions}",infoState:"Neutral",icon:"{/config/display_icon_url}",targetURL:"{/nav/navigation_target_url}",highlightTerms:"{/search/display_highlight_terms}",press:[c.onPress,c]})}})}());(function(){"use strict";sap.ui.jsview("sap.ushell.components.tiles.applauncherdynamic.DynamicTile",{getControllerName:function(){return"sap.ushell.components.tiles.applauncherdynamic.DynamicTile"},createContent:function(c){jQuery.sap.require('sap.ushell.ui.tile.DynamicTile');this.setHeight('100%');this.setWidth('100%');return new sap.ushell.ui.tile.DynamicTile({title:"{/data/display_title_text}",subtitle:"{/data/display_subtitle_text}",info:"{/data/display_info_text}",infoState:"{/data/display_info_state}",icon:"{/data/display_icon_url}",numberUnit:"{/data/display_number_unit}",numberValue:"{/data/display_number_value}",numberDigits:"{/data/display_number_digits}",numberState:"{/data/display_number_state}",numberFactor:"{/data/display_number_factor}",actions:"{/data/actions}",stateArrow:"{/data/display_state_arrow}",targetURL:"{/nav/navigation_target_url}",highlightTerms:"{/search/display_highlight_terms}",press:[c.onPress,c]})}})}());(function(){"use strict";sap.ui.controller("tiles.indicatorArea.AreaChartTile",{onInit:function(){var t=this;this.firstTimeVisible=false;this.oKpiTileView=this.getView();this.oViewData=this.oKpiTileView.getViewData(),this.oTileApi=this.oViewData.chip;if(this.oTileApi.visible){this.oTileApi.visible.attachVisible(this.visibleHandler.bind(this))}this.system=this.oTileApi.url.getApplicationSystem();this.oKpiTileView.oGenericTile.setState(sap.suite.ui.commons.LoadState.Loading);try{sap.ushell.components.tiles.indicatorTileUtils.util.getParsedChip(this.oTileApi.configuration.getParameterValueAsString("tileConfiguration"),function(c){t.oConfig=c;t.setTextInTile();if(t.oTileApi.preview){t.oTileApi.preview.setTargetUrl(sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(t.oConfig,t.system))}if(t.oTileApi.preview.isEnabled()){t._updateTileModel({footer:"",description:"",width:"100%",height:"100%",chart:{color:"Good",data:[{day:0,balance:0},{day:30,balance:20},{day:60,balance:20},{day:100,balance:80}]},target:{color:"Error",data:[{day:0,balance:0},{day:30,balance:30},{day:60,balance:40},{day:100,balance:90}]},maxThreshold:{color:"Good",data:[{day:0,balance:0},{day:30,balance:40},{day:60,balance:50},{day:100,balance:100}]},innerMaxThreshold:{color:"Error",data:[]},innerMinThreshold:{color:"Neutral",data:[]},minThreshold:{color:"Error",data:[{day:0,balance:0},{day:30,balance:20},{day:60,balance:30},{day:100,balance:70},]},minXValue:0,maxXValue:100,minYValue:0,maxYValue:100,firstXLabel:{label:"June 123",color:"Error"},lastXLabel:{label:"June 30",color:"Error"},firstYLabel:{label:"0M",color:"Good"},lastYLabel:{label:"80M",color:"Critical"},minLabel:{},maxLabel:{}});t.oKpiTileView.oGenericTile.setState(sap.suite.ui.commons.LoadState.Loaded)}else{t.oKpiTileView.oGenericTile.attachPress(function(){sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(t.trendChartODataReadRef);sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,null);window.location.hash=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(t.oConfig,t.system)});if(Number(t.oTileApi.configuration.getParameterValueAsString("isSufficient"))){sap.ushell.components.tiles.indicatorTileUtils.cache.setEvaluationById(t.oConfig.TILE_PROPERTIES.id,t.oConfig);t.flowWithoutDesignTimeCall()}else{t.flowWithDesignTimeCall()}}})}catch(e){this.logError(e)}},getTile:function(){return this.oKpiTileView.oGenericTile},_setLocalModelToTile:function(){if(this.getTile().getModel()){}else{this.getTile().setModel(new sap.ui.model.json.JSONModel({}))}},_updateTileModel:function(n){var m=this.getTile().getModel().getData();jQuery.extend(m,n);this.getTile().getModel().setData(m)},onAfterFinalEvaluation:function(){var t=this;var u=this.DEFINITION_DATA.EVALUATION.ODATA_URL;var E=this.DEFINITION_DATA.EVALUATION.ODATA_ENTITYSET;var m=this.DEFINITION_DATA.EVALUATION.COLUMN_NAME;var v=sap.ushell.components.tiles.indicatorTileUtils.util.prepareFilterStructure(this.DEFINITION_DATA.EVALUATION_FILTERS,this.DEFINITION_DATA.ADDITIONAL_FILTERS);var d=this.DEFINITION_DATA.TILE_PROPERTIES.dimension;if(d==undefined){this.logError();return}var s=this.DEFINITION_DATA.EVALUATION.SCALING;var g=this.DEFINITION_DATA.EVALUATION.GOAL_TYPE;var c=this.DEFINITION_DATA.EVALUATION_VALUES;var n=null;if(this.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){var f=m;switch(g){case"MI":t.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","MEASURE");t.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","MEASURE");t.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");t.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");if(t.sWarningHigh&&t.sCriticalHigh&&t.sTarget)f+=","+t.sWarningHigh+","+t.sCriticalHigh+","+t.sTarget;break;case"MA":t.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","MEASURE");t.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","MEASURE");t.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");t.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");if(t.sWarningLow&&t.sCriticalLow&&t.sTarget)f+=","+t.sWarningLow+","+t.sCriticalLow+","+t.sTarget;break;case"RA":t.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","MEASURE");t.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","MEASURE");t.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");t.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");t.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","MEASURE");t.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","MEASURE");if(t.sWarningLow&&t.sCriticalLow&&t.sTarget&&t.sWarningHigh&&t.sCriticalHigh)f+=","+t.sWarningLow+","+t.sCriticalLow+","+t.sTarget+","+t.sWarningHigh+","+t.sCriticalHigh;break}var q=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(t.oTileApi.url.addSystemToServiceUrl(u),E,f,d,v)}else{var q=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(t.oTileApi.url.addSystemToServiceUrl(u),E,m,d,v)}var h=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(t.oConfig.TILE_PROPERTIES.id);if(!h){if(q){this.queryUriForTrendChart=q.uri;var w={};try{this.trendChartODataReadRef=q.model.read(q.uri,null,null,true,function(a){if(a&&a.results&&a.results.length){if(q.unit){t.unit=a.results[0][q.unit.name];w.unit=q.unit;w.unit.name=q.unit.name}t.queryUriResponseForTrendChart=a;d=sap.ushell.components.tiles.indicatorTileUtils.util.findTextPropertyForDimension(t.oTileApi.url.addSystemToServiceUrl(u),E,d);a.firstXlabel=a.results[0][d];a.lastXlabel=a.results[a.results.length-1][d];w.data=a;w.dimensionName=d;sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,w);var b=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(t.oConfig,t.system);t.oKpiTileView.oGenericTile.$().wrap("<a href ='"+b+"'/>");t.oKpiTileView.oGenericTile.setState(sap.suite.ui.commons.LoadState.Loaded);_(a,t.DEFINITION_DATA.EVALUATION.VALUES_SOURCE)}else{t.logError("no Response from QueryServiceUri")}},function(a){if(a&&a.response){t.logError("Data call failed")}})}catch(e){t.logError(e)}}else{t.logError()}}else{try{if(h.unit){t.unit=h.data.results[0][h.unit.name]}t.queryUriResponseForTrendChart=h.data;d=h.dimensionName;t.oKpiTileView.oGenericTile.setState(sap.suite.ui.commons.LoadState.Loaded);_(h.data,t.DEFINITION_DATA.EVALUATION.VALUES_SOURCE)}catch(e){t.logError(e)}}function _(j,k){var l=[];var o=[];var p=[];var r=[];var x=[];var y=[];var z=j.results.length;var A=j.firstXlabel;var B,C,D,F,G;var H=j.lastXlabel;var I=Number(j.results[0][m]);var J=Number(j.results[j.results.length-1][m]);for(i in j.results){j.results[i][d]=Number(i);j.results[i][m]=Number(j.results[i][m]);t.sWarningHigh?j.results[i][t.sWarningHigh]=Number(j.results[i][t.sWarningHigh]):"";t.sCriticalHigh?j.results[i][t.sCriticalHigh]=Number(j.results[i][t.sCriticalHigh]):"";t.sCriticalLow?j.results[i][t.sCriticalLow]=Number(j.results[i][t.sCriticalLow]):"";t.sWarningLow?j.results[i][t.sWarningLow]=Number(j.results[i][t.sWarningLow]):"";t.sTarget?j.results[i][t.sTarget]=Number(j.results[i][t.sTarget]):"";t.sWarningHigh?p.push(j.results[i][t.sWarningHigh]):"";t.sCriticalHigh?r.push(j.results[i][t.sCriticalHigh]):"";t.sCriticalLow?x.push(j.results[i][t.sCriticalLow]):"";t.sWarningLow?y.push(j.results[i][t.sWarningLow]):"";l.push(j.results[i][d]);o.push(j.results[i][m])}try{A=sap.ushell.components.tiles.indicatorTileUtils.util.formatOdataObjectToString(A);H=sap.ushell.components.tiles.indicatorTileUtils.util.formatOdataObjectToString(H)}catch(e){t.logError(e)}var K=Number(I);if(t.oConfig.EVALUATION.SCALING==-2)K*=100;var L=Math.min.apply(Math,o);var M=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(K,t.oConfig.EVALUATION.SCALING);if(t.oConfig.EVALUATION.SCALING==-2)M+=" %";var N=M.toString();var O=Number(J);if(t.oConfig.EVALUATION.SCALING==-2)O*=100;var P=Math.max.apply(Math,o);var Q=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(O,t.oConfig.EVALUATION.SCALING);if(t.oConfig.EVALUATION.SCALING==-2)Q+=" %";var R=Q.toString();try{var S=sap.ushell.components.tiles.indicatorTileUtils.util.formatOdataObjectToString(Math.min.apply(Math,l));var T=sap.ushell.components.tiles.indicatorTileUtils.util.formatOdataObjectToString(Math.max.apply(Math,l))}catch(e){t.logError(e)}if(k=="MEASURE"){(p.length!=0)?(t.firstwH=p[S])&&(t.lastwH=p[T]):"";(r.length!=0)?(t.firstcH=r[S])&&(t.lastcH=r[T]):"";(x.length!=0)?(t.firstcL=x[S])&&(t.lastcL=x[T]):"";(y.length!=0)?(t.firstwL=y[S])&&(t.lastwL=y[T]):""}var U={width:"100%",height:"100%",unit:t.unit||"",chart:{color:"Neutral",data:j.results},size:"Auto",minXValue:S,maxXValue:T,minYValue:L,maxYValue:P,firstXLabel:{label:A+"",color:"Neutral"},lastXLabel:{label:H+"",color:"Neutral"},firstYLabel:{label:N+"",color:"Neutral"},lastYLabel:{label:R+"",color:"Neutral"},minLabel:{},maxLabel:{}};switch(g){case"MA":for(i in c){if(c[i].TYPE=="CL"){U.minThreshold={color:"Error",};var V=new Object();V[d]="";V[m]=Number(c[i].FIXED);t.cl=Number(c[i].FIXED);U.minThreshold.data=(k=="MEASURE")?j.results:[V];B=(k=="MEASURE")?t.sCriticalLow:m}else if(c[i].TYPE=="WL"){U.maxThreshold={color:"Good"};var V=new Object();V[d]="";V[m]=Number(c[i].FIXED);U.maxThreshold.data=(k=="MEASURE")?j.results:[V];C=(k=="MEASURE")?t.sWarningLow:m;t.wl=Number(c[i].FIXED)}else if(c[i].TYPE=="TA"){var V=new Object();V[d]="";V[m]=Number(c[i].FIXED);U.target={color:"Neutral",};U.target.data=(k=="MEASURE")?j.results:[V];G=(k=="MEASURE")?t.sTarget:m}}U.innerMinThreshold={data:[]};U.innerMaxThreshold={data:[]};if(k=="FIXED"){U.firstYLabel.color=I<t.cl?"Error":((t.cl<=I)&&(I<=t.wl))?"Critical":(I>t.wl)?"Good":"Neutral";U.lastYLabel.color=J<t.cl?"Error":((t.cl<=J)&&(J<=t.wl))?"Critical":(J>t.wl)?"Good":"Neutral"}else if(k=="MEASURE"&&t.firstwL&&t.lastwL&&t.firstcL&&t.lastcL){U.firstYLabel.color=I<t.firstcL?"Error":((t.firstcL<=I)&&(I<=t.firstwL))?"Critical":(I>t.firstwL)?"Good":"Neutral";U.lastYLabel.color=J<t.lastcL?"Error":((t.lastcL<=J)&&(J<=t.lastwL))?"Critical":(J>t.lastwL)?"Good":"Neutral"}break;case"MI":for(i in c){if(c[i].TYPE=="CH"){var V=new Object();V[d]="";V[m]=Number(c[i].FIXED);t.ch=Number(c[i].FIXED);U.maxThreshold={color:"Error",};U.maxThreshold.data=(k=="MEASURE")?j.results:[V];C=(k=="MEASURE")?t.sCriticalHigh:m}else if(c[i].TYPE=="WH"){var V=new Object();V[d]="";V[m]=Number(c[i].FIXED);t.wh=Number(c[i].FIXED);U.minThreshold={color:"Good",};U.minThreshold.data=(k=="MEASURE")?j.results:[V];B=(k=="MEASURE")?t.sWarningHigh:m}else if(c[i].TYPE=="TA"){var V=new Object();V[d]="";V[m]=Number(c[i].FIXED);U.target={color:"Neutral",};U.target.data=(k=="MEASURE")?j.results:[V];G=(k=="MEASURE")?t.sTarget:m}}if(k=="FIXED"){U.firstYLabel.color=I>t.ch?"Error":((t.wh<=I)&&(I<=t.ch))?"Critical":(I<t.wh)?"Good":"Neutral";U.lastYLabel.color=J>t.ch?"Error":((t.wh<=J)&&(J<=t.ch))?"Critical":(J<t.wh)?"Good":"Neutral"}else if(k=="MEASURE"&&t.firstwH&&t.lastwH&&t.firstcH&&t.lastcH){U.firstYLabel.color=I>t.firstcH?"Error":((t.firstwH<=I)&&(I<=t.firstcH))?"Critical":(I<t.firstwH)?"Good":"Neutral";U.lastYLabel.color=J>t.lastcH?"Error":((t.lastwH<=J)&&(J<=t.lastcH))?"Critical":(J<t.lastwH)?"Good":"Neutral"}U.innerMaxThreshold={data:[]};U.innerMinThreshold={data:[]};break;case"RA":for(i in c){if(c[i].TYPE=="CH"){var V=new Object();V[d]="";V[m]=Number(c[i].FIXED);t.ch=Number(c[i].FIXED);U.maxThreshold={color:"Error",};U.maxThreshold.data=(k=="MEASURE")?j.results:[V];C=(k=="MEASURE")?t.sCriticalHigh:m}else if(c[i].TYPE=="WH"){var V=new Object();V[d]="";V[m]=Number(c[i].FIXED);t.wh=Number(c[i].FIXED);U.innerMaxThreshold={color:"Good",};U.innerMaxThreshold.data=(k=="MEASURE")?j.results:[V];F=(k=="MEASURE")?t.sWarningHigh:m}else if(c[i].TYPE=="WL"){var V=new Object();V[d]="";V[m]=Number(c[i].FIXED);t.wl=Number(c[i].FIXED);U.innerMinThreshold={color:"Good",};U.innerMinThreshold.data=(k=="MEASURE")?j.results:[V];D=(k=="MEASURE")?t.sWarningLow:m}else if(c[i].TYPE=="CL"){var V=new Object();V[d]="";V[m]=Number(c[i].FIXED);t.cl=Number(c[i].FIXED);U.minThreshold={color:"Error",};U.minThreshold.data=(k=="MEASURE")?j.results:[V];B=(k=="MEASURE")?t.sCriticalLow:m}else if(c[i].TYPE=="TA"){var V=new Object();V[d]="";V[m]=Number(c[i].FIXED);U.target={color:"Neutral",};U.target.data=(k=="MEASURE")?j.results:[V];G=(k=="MEASURE")?t.sTarget:m}}if(k=="FIXED"){U.firstYLabel.color=(I>t.ch||I<t.cl)?"Error":((t.wh<=I)&&(I<=t.ch))||((t.cl<=I)&&(I<=t.wl))?"Critical":((I>=t.wl)&&(I<=t.wh))?"Good":"Neutral";U.lastYLabel.color=(J>t.ch||J<t.cl)?"Error":((t.wh<=J)&&(J<=t.ch))||((t.cl<=J)&&(J<=t.wl))?"Critical":((J>=t.wl)&&(J<=t.wh))?"Good":"Neutral"}else if(k=="MEASURE"&&t.firstwL&&t.lastwL&&t.firstcL&&t.lastcL&&t.firstwH&&t.lastwH&&t.firstcH&&t.lastcH){U.firstYLabel.color=(I>t.firstcH||I<t.firstcL)?"Error":((t.firstwH<=I)&&(I<=t.firstcH))||((t.firstcL<=I)&&(I<=t.firstwL))?"Critical":((I>=t.firstwL)&&(I<=t.firstwH))?"Good":"Neutral";U.lastYLabel.color=(J>t.lastcH||J<t.lastcL)?"Error":((t.lastwH<=J)&&(J<=t.lastcH))||((t.lastcL<=J)&&(J<=t.lastwL))?"Critical":((J>=t.lastwL)&&(J<=t.lastwH))?"Good":"Neutral"}break}var W=function(X,a,b,k){return new sap.suite.ui.commons.MicroAreaChartItem({color:"{/"+X+"/color}",points:{path:"/"+X+"/data",template:new sap.suite.ui.commons.MicroAreaChartPoint({x:"{"+a+"}",y:"{"+b+"}"})}})};t.getTile().getTileContent()[0].getContent().setTarget(W("target",d,G));t.getTile().getTileContent()[0].getContent().setInnerMinThreshold(W("innerMinThreshold",d,D));t.getTile().getTileContent()[0].getContent().setInnerMaxThreshold(W("innerMaxThreshold",d,F));t.getTile().getTileContent()[0].getContent().setMinThreshold(W("minThreshold",d,B));t.getTile().getTileContent()[0].getContent().setMaxThreshold(W("maxThreshold",d,C));t.getTile().getTileContent()[0].getContent().setChart(W("chart",d,m));t._updateTileModel(U)}},flowWithoutDesignTimeCall:function(){var t=this;this.DEFINITION_DATA=this.oConfig;this._updateTileModel(this.DEFINITION_DATA);if(this.oTileApi.visible.isVisible()&&!this.firstTimeVisible)this.firstTimeVisible=true;this.onAfterFinalEvaluation()},flowWithDesignTimeCall:function(){var t=this;try{var a=sap.ushell.components.tiles.indicatorTileUtils.cache.getEvaluationById(this.oConfig.EVALUATION.ID);if(a){t.oConfig.EVALUATION_FILTERS=a.EVALUATION_FILTERS;t.flowWithoutDesignTimeCall()}else{sap.ushell.components.tiles.indicatorTileUtils.util.getFilterFromRunTimeService(this.oConfig,function(f){t.oConfig.EVALUATION_FILTERS=f;sap.ushell.components.tiles.indicatorTileUtils.cache.setEvaluationById(t.oConfig.TILE_PROPERTIES.id,t.oConfig);t.flowWithoutDesignTimeCall()})}}catch(e){this.logError(e)}},setTextInTile:function(){var t=this;this._updateTileModel({header:t.oTileApi.preview.getTitle()||sap.ushell.components.tiles.indicatorTileUtils.util.getChipTitle(t.oConfig),subheader:t.oTileApi.preview.getDescription()||sap.ushell.components.tiles.indicatorTileUtils.util.getChipSubTitle(t.oConfig)})},logError:function(e){this.oKpiTileView.oGenericTile.setState(sap.suite.ui.commons.LoadState.Failed);this.oKpiTileView.oGenericTile.setState(sap.suite.ui.commons.LoadState.Failed);sap.ushell.components.tiles.indicatorTileUtils.util.logError(e)},refreshHandler:function(c){if(!c.firstTimeVisible){if(Number(this.oTileApi.configuration.getParameterValueAsString("isSufficient")))c.flowWithoutDesignTimeCall();else c.flowWithDesignTimeCall()}},visibleHandler:function(a){var t=this;if(!a){this.firstTimeVisible=false;sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.trendChartODataReadRef)}if(a){this.refreshHandler(this)}},onExit:function(){sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.trendChartODataReadRef)}})}());sap.ui.controller("tiles.indicatorcomparison.ComparisonTile",{onInit:function(){var t=this;this.firstTimeVisible=false;this.oComparisonTileView=this.getView();this.oChip=this.oComparisonTileView.getViewData().chip;if(this.oChip.visible){this.oChip.visible.attachVisible(this.visibleHandler.bind(this))}this.system=this.oChip.url.getApplicationSystem();this.oComparisonTileView.oGenericTile.setState(sap.suite.ui.commons.LoadState.Loading);try{sap.ushell.components.tiles.indicatorTileUtils.util.getParsedChip(this.oChip.configuration.getParameterValueAsString("tileConfiguration"),function(c){t.oConfig=c;if(t.oChip.preview){t.oChip.preview.setTargetUrl(sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(t.oConfig,t.system))}if(t.oChip.preview.isEnabled()){t.setTitle();t._updateTileModel({value:8888,size:sap.suite.ui.commons.InfoTileSize.Auto,frameType:"OneByOne",state:sap.suite.ui.commons.LoadState.Loading,valueColor:sap.suite.ui.commons.InfoTileValueColor.Error,indicator:sap.suite.ui.commons.DeviationIndicator.None,title:"Liquidity Structure",footer:"Current Quarter",description:"Apr 1st 2013 (B$)",data:[{title:"Measure 1",value:1.2,color:"Good"},{title:"Measure 2",value:0.78,color:"Good"},{title:"Measure 3",value:1.4,color:"Error"}],});t.oComparisonTileView.oGenericTile.setState(sap.suite.ui.commons.LoadState.Loaded)}else{t.oConfig.TILE_PROPERTIES.FINALVALUE;t.setTitle();t.oComparisonTileView.oGenericTile.attachPress(function(){sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(t.comparisionChartODataRef);sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,null);window.location.hash=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(t.oConfig,t.system)});if(Number(t.oChip.configuration.getParameterValueAsString("isSufficient"))){sap.ushell.components.tiles.indicatorTileUtils.cache.setEvaluationById(t.oConfig.TILE_PROPERTIES.id,t.oConfig);t.flowWithoutDesignTimeCall()}else{t.flowWithDesignTimeCall()}}})}catch(e){this.logError(e)}},getTile:function(){return this.oComparisonTileView.oGenericTile},setTitle:function(){var t=this;this._updateTileModel({header:t.oChip.preview.getTitle()||sap.ushell.components.tiles.indicatorTileUtils.util.getChipTitle(t.oConfig),subheader:t.oChip.preview.getDescription()||sap.ushell.components.tiles.indicatorTileUtils.util.getChipSubTitle(t.oConfig)})},_updateTileModel:function(n){var m=this.getTile().getModel().getData();jQuery.extend(m,n);this.getTile().getModel().setData(m)},flowWithoutDesignTimeCall:function(){var t=this;this.DEFINITION_DATA=this.oConfig;this._updateTileModel(this.DEFINITION_DATA);if(this.oChip.visible.isVisible()&&!this.firstTimeVisible){this.firstTimeVisible=true;this.fetchKpiValue(function(k){this.CALCULATED_KPI_VALUE=k;if(t.oConfig.TILE_PROPERTIES.frameType=="TwoByOne"){t.oComparisonTileView.oGenericTile.setFrameType("TwoByOne");t.oComparisonTileView.oGenericTile.removeAllTileContent();t.oComparisonTileView.oGenericTile.addTileContent(t.oComparisonTileView.oNumericTile);t.oComparisonTileView.oGenericTile.addTileContent(t.oComparisonTileView.oComparisonTile)}else{t.oComparisonTileView.oGenericTile.setFrameType("OneByOne");t.oComparisonTileView.oGenericTile.removeAllTileContent();t.oComparisonTileView.oGenericTile.addTileContent(t.oComparisonTileView.oComparisonTile)}this._updateTileModel({data:this.CALCULATED_KPI_VALUE});var n=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(t.oConfig,t.system);t.oComparisonTileView.oGenericTile.$().wrap("<a href ='"+n+"'/>");this.oComparisonTileView.oGenericTile.setState(sap.suite.ui.commons.LoadState.Loaded)},this.logError)}},flowWithDesignTimeCall:function(){var t=this;try{var a=sap.ushell.components.tiles.indicatorTileUtils.cache.getEvaluationById(this.oConfig.EVALUATION.ID);if(a){t.oConfig.EVALUATION_FILTERS=a.EVALUATION_FILTERS;t.flowWithoutDesignTimeCall()}else{sap.ushell.components.tiles.indicatorTileUtils.util.getFilterFromRunTimeService(this.oConfig,function(f){t.oConfig.EVALUATION_FILTERS=f;sap.ushell.components.tiles.indicatorTileUtils.cache.setEvaluationById(t.oConfig.TILE_PROPERTIES.id,t.oConfig);t.flowWithoutDesignTimeCall()})}}catch(e){this.logError(e)}},fetchKpiValue:function(s,E){var t=this;try{var u=this.oConfig.EVALUATION.ODATA_URL;var a=this.oConfig.EVALUATION.ODATA_ENTITYSET;if(this.oConfig.TILE_PROPERTIES.semanticMeasure){var m=this.oConfig.EVALUATION.COLUMN_NAME+","+this.oConfig.TILE_PROPERTIES.semanticMeasure}else{var m=this.oConfig.EVALUATION.COLUMN_NAME;var b=m;for(var j=0;j<this.oConfig.EVALUATION.COLUMN_NAMES.length;j++){if(this.oConfig.EVALUATION.COLUMN_NAMES[j].COLUMN_NAME!=this.oConfig.EVALUATION.COLUMN_NAME)b=b+","+this.oConfig.EVALUATION.COLUMN_NAMES[j].COLUMN_NAME}}var d=this.oConfig.EVALUATION_VALUES;var c=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(t.oConfig.TILE_PROPERTIES.id);if(!c){var v=sap.ushell.components.tiles.indicatorTileUtils.util.prepareFilterStructure(this.oConfig.EVALUATION_FILTERS,this.oConfig.ADDITIONAL_FILTERS);var o={};o["0"]=m+",asc";o["1"]=m+",desc";var f=o[this.oConfig.TILE_PROPERTIES.sortOrder||"0"].split(",");var g=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(t.oChip.url.addSystemToServiceUrl(u),a,b,null,v,3);if(this.oConfig.TILE_PROPERTIES.semanticMeasure)g.uri+="&$top=3&$orderby="+f[0]+" "+f[2];else g.uri+="&$top=3&$orderby="+f[0]+" "+f[1];this.comparisionChartODataRef=g.model.read(g.uri,null,null,false,function(d){var w={};if(g.unit){t._updateTileModel({unit:d.results[0][g.unit.name]});w.unit=g.unit;w.unit.name=g.unit.name}if(d&&d.results&&d.results.length){t.oConfig.TILE_PROPERTIES.FINALVALUE=d;t.oConfig.TILE_PROPERTIES.FINALVALUE=t._processDataForComparisonChart(t.oConfig.TILE_PROPERTIES.FINALVALUE,b.split(",")[0]);w.data=d;sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,w);s.call(t,t.oConfig.TILE_PROPERTIES.FINALVALUE)}else if(d.results.length==0){t.oConfig.TILE_PROPERTIES.FINALVALUE=d;w.data=d;sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,w);s.call(t,t.oConfig.TILE_PROPERTIES.FINALVALUE)}else{E.call(t,"no Response from QueryServiceUri")}},function(h){if(h&&h.response){jQuery.sap.log.error(h.message+" : "+h.request.requestUri);E.call(t,h)}})}else{if(c.unit){t._updateTileModel({unit:c.data.results[0][c.unit.name]})}if(c.data&&c.data.results&&c.data.results.length){t.oConfig.TILE_PROPERTIES.FINALVALUE=c.data;t.oConfig.TILE_PROPERTIES.FINALVALUE=t._processDataForComparisonChart(t.oConfig.TILE_PROPERTIES.FINALVALUE,b);s.call(t,t.oConfig.TILE_PROPERTIES.FINALVALUE)}else if(d.results.length==0){t.oConfig.TILE_PROPERTIES.FINALVALUE=c.data;s.call(t,t.oConfig.TILE_PROPERTIES.FINALVALUE)}else{E.call(t,"no Response from QueryServiceUri")}}}catch(e){E.call(t,e)}},_processDataForComparisonChart:function(d,m){var f=[],L={},i,t,l;var a;var T=[];var b=this;for(i=0;i<d.results.length;i++){var e=d.results[i]}T=sap.ushell.components.tiles.indicatorTileUtils.util.getAllMeasuresWithLabelText(this.oConfig.EVALUATION.ODATA_URL,this.oConfig.EVALUATION.ODATA_ENTITYSET);for(i=0,l=T.length;i<l;i++){t=T[i];L[t.key]=t.value}for(i=0;i<b.oConfig.EVALUATION.COLUMN_NAMES.length;i++){var c={};var g=b.oConfig.EVALUATION.COLUMN_NAMES[i];c.value=Number(e[g.COLUMN_NAME]);var h=Number(e[g.COLUMN_NAME]);if(b.oConfig.EVALUATION.SCALING==-2)h*=100;a=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(h,b.oConfig.EVALUATION.SCALING);if(b.oConfig.EVALUATION.SCALING==-2)a+=" %";c.displayValue=a.toString();c.color=g.semanticColor;c.title=L[g.COLUMN_NAME]||g.COLUMN_NAME;f.push(c)}return f},logError:function(e){this.oComparisonTileView.oGenericTile.setState(sap.suite.ui.commons.LoadState.Failed);this.oComparisonTileView.oGenericTile.setState(sap.suite.ui.commons.LoadState.Failed);sap.ushell.components.tiles.indicatorTileUtils.util.logError(e)},refreshHandler:function(c){if(!c.firstTimeVisible){if(Number(this.oChip.configuration.getParameterValueAsString("isSufficient")))c.flowWithoutDesignTimeCall();else c.flowWithDesignTimeCall()}},visibleHandler:function(i){if(!i){this.firstTimeVisible=false;sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.comparisionChartODataRef)}if(i){this.refreshHandler(this)}},onExit:function(){sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.comparisionChartODataRef)}});sap.ui.controller("tiles.indicatorcontribution.ContributionTile",{onInit:function(){var t=this;this.firstTimeVisible=false;this.oContributionTileView=this.getView();this.oChip=this.oContributionTileView.getViewData().chip;if(this.oChip.visible){this.oChip.visible.attachVisible(this.visibleHandler.bind(this))}this.system=this.oChip.url.getApplicationSystem();this.oContributionTileView.oGenericTile.setState(sap.suite.ui.commons.LoadState.Loading);try{sap.ushell.components.tiles.indicatorTileUtils.util.getParsedChip(this.oChip.configuration.getParameterValueAsString("tileConfiguration"),function(c){t.oConfig=c;if(t.oChip.preview){t.oChip.preview.setTargetUrl(sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(t.oConfig,t.system))}if(t.oChip.preview.isEnabled()){t.setTitle();t._updateTileModel({value:8888,size:sap.suite.ui.commons.InfoTileSize.Auto,frameType:"OneByOne",state:sap.suite.ui.commons.LoadState.Loading,valueColor:sap.suite.ui.commons.InfoTileValueColor.Error,indicator:sap.suite.ui.commons.DeviationIndicator.None,title:"US Profit Margin",footer:"Current Quarter",description:"Maximum deviation",data:[{title:"Americas",value:10,color:"Neutral"},{title:"EMEA",value:50,color:"Neutral"},{title:"APAC",value:-20,color:"Neutral"}],});t.oContributionTileView.oGenericTile.setState(sap.suite.ui.commons.LoadState.Loaded)}else{t.oConfig.TILE_PROPERTIES.FINALVALUE;t.setTitle();t.oContributionTileView.oGenericTile.attachPress(function(){sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(t.comparisionChartODataRef);sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,null);window.location.hash=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(t.oConfig,t.system)});if(Number(t.oChip.configuration.getParameterValueAsString("isSufficient"))){sap.ushell.components.tiles.indicatorTileUtils.cache.setEvaluationById(t.oConfig.TILE_PROPERTIES.id,t.oConfig);t.flowWithoutDesignTimeCall()}else{t.flowWithDesignTimeCall()}}})}catch(e){this.logError(e)}},getTile:function(){return this.oContributionTileView.oGenericTile},setTitle:function(){var t=this;this._updateTileModel({header:t.oChip.preview.getTitle()||sap.ushell.components.tiles.indicatorTileUtils.util.getChipTitle(t.oConfig),subheader:t.oChip.preview.getDescription()||sap.ushell.components.tiles.indicatorTileUtils.util.getChipSubTitle(t.oConfig)})},_updateTileModel:function(n){var m=this.getTile().getModel().getData();jQuery.extend(m,n);this.getTile().getModel().setData(m)},flowWithoutDesignTimeCall:function(){var t=this;this.DEFINITION_DATA=this.oConfig;this._updateTileModel(this.DEFINITION_DATA);if(this.oChip.visible.isVisible()&&!this.firstTimeVisible){this.firstTimeVisible=true;this.fetchKpiValue(function(k){this.CALCULATED_KPI_VALUE=k;if(t.oConfig.TILE_PROPERTIES.frameType=="TwoByOne"){t.oContributionTileView.oGenericTile.setFrameType("TwoByOne");t.oContributionTileView.oGenericTile.removeAllTileContent();t.oContributionTileView.oGenericTile.addTileContent(t.oContributionTileView.oNumericTile);t.oContributionTileView.oGenericTile.addTileContent(t.oContributionTileView.oComparisonTile)}else{t.oContributionTileView.oGenericTile.setFrameType("OneByOne");t.oContributionTileView.oGenericTile.removeAllTileContent();t.oContributionTileView.oGenericTile.addTileContent(t.oContributionTileView.oComparisonTile)}this._updateTileModel({data:this.CALCULATED_KPI_VALUE});var n=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(t.oConfig,t.system);t.oContributionTileView.oGenericTile.$().wrap("<a href ='"+n+"'/>");this.oContributionTileView.oGenericTile.setState(sap.suite.ui.commons.LoadState.Loaded)},this.logError)}},flowWithDesignTimeCall:function(){var t=this;try{var a=sap.ushell.components.tiles.indicatorTileUtils.cache.getEvaluationById(this.oConfig.EVALUATION.ID);if(a){t.oConfig.EVALUATION_FILTERS=a.EVALUATION_FILTERS;t.flowWithoutDesignTimeCall()}else{sap.ushell.components.tiles.indicatorTileUtils.util.getFilterFromRunTimeService(this.oConfig,function(f){t.oConfig.EVALUATION_FILTERS=f;sap.ushell.components.tiles.indicatorTileUtils.cache.setEvaluationById(t.oConfig.TILE_PROPERTIES.id,t.oConfig);t.flowWithoutDesignTimeCall()})}}catch(e){this.logError(e)}},fetchKpiValue:function(s,E){var t=this;try{var u=this.oConfig.EVALUATION.ODATA_URL;var a=this.oConfig.EVALUATION.ODATA_ENTITYSET;if(this.oConfig.TILE_PROPERTIES.semanticMeasure){var m=this.oConfig.EVALUATION.COLUMN_NAME+","+this.oConfig.TILE_PROPERTIES.semanticMeasure}else{var m=this.oConfig.EVALUATION.COLUMN_NAME}var d=this.oConfig.TILE_PROPERTIES.dimension;var b=this.oConfig.EVALUATION_VALUES;var c=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(t.oConfig.TILE_PROPERTIES.id);if(!c){var v=sap.ushell.components.tiles.indicatorTileUtils.util.prepareFilterStructure(this.oConfig.EVALUATION_FILTERS,this.oConfig.ADDITIONAL_FILTERS);var o={};o["0"]=m+",asc";o["1"]=m+",desc";o["2"]=d+",asc";o["3"]=d+",desc";var f=o[this.oConfig.TILE_PROPERTIES.sortOrder||"0"].split(",");var g=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(t.oChip.url.addSystemToServiceUrl(u),a,m,d,v,3);if(this.oConfig.TILE_PROPERTIES.semanticMeasure)g.uri+="&$top=3&$orderby="+f[0]+" "+f[2];else g.uri+="&$top=3&$orderby="+f[0]+" "+f[1];this.comparisionChartODataRef=g.model.read(g.uri,null,null,false,function(b){var w={};if(g.unit){t._updateTileModel({unit:b.results[0][g.unit.name]});w.unit=g.unit;w.unit.name=g.unit.name}if(b&&b.results&&b.results.length){d=sap.ushell.components.tiles.indicatorTileUtils.util.findTextPropertyForDimension(t.oChip.url.addSystemToServiceUrl(u),a,d);w.dimension=d;t.oConfig.TILE_PROPERTIES.FINALVALUE=b;t.oConfig.TILE_PROPERTIES.FINALVALUE=t._processDataForComparisonChart(t.oConfig.TILE_PROPERTIES.FINALVALUE,m.split(",")[0],d);w.data=b;sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,w);s.call(t,t.oConfig.TILE_PROPERTIES.FINALVALUE)}else if(b.results.length==0){t.oConfig.TILE_PROPERTIES.FINALVALUE=b;w.data=b;sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,w);s.call(t,t.oConfig.TILE_PROPERTIES.FINALVALUE)}else{E.call(t,"no Response from QueryServiceUri")}},function(h){if(h&&h.response){jQuery.sap.log.error(h.message+" : "+h.request.requestUri);E.call(t,h)}})}else{if(c.unit){t._updateTileModel({unit:c.data.results[0][c.unit.name]})}if(c.data&&c.data.results&&c.data.results.length){d=c.dimension;t.oConfig.TILE_PROPERTIES.FINALVALUE=c.data;t.oConfig.TILE_PROPERTIES.FINALVALUE=t._processDataForComparisonChart(t.oConfig.TILE_PROPERTIES.FINALVALUE,m.split(",")[0],d);s.call(t,t.oConfig.TILE_PROPERTIES.FINALVALUE)}else if(b.results.length==0){t.oConfig.TILE_PROPERTIES.FINALVALUE=c.data;s.call(t,t.oConfig.TILE_PROPERTIES.FINALVALUE)}else{E.call(t,"no Response from QueryServiceUri")}}}catch(e){E.call(t,e)}},_processDataForComparisonChart:function(d,m,a){var s=this.oConfig.TILE_PROPERTIES.semanticColorContribution;var f=[];var t;var b=this;for(var i=0;i<d.results.length;i++){var c=d.results[i];var g={};try{g.title=c[a].toString()}catch(e){g.title=""};g.value=Number(c[m]);var h=Number(c[m]);if(this.oConfig.EVALUATION.SCALING==-2)h*=100;t=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(h,this.oConfig.EVALUATION.SCALING);if(this.oConfig.EVALUATION.SCALING==-2)t+=" %";g.displayValue=t.toString();if(typeof s==='undefined'){g.color="Neutral"}else{g.color=s}f.push(g)}return f},logError:function(e){this.oContributionTileView.oGenericTile.setState(sap.suite.ui.commons.LoadState.Failed);this.oContributionTileView.oGenericTile.setState(sap.suite.ui.commons.LoadState.Failed);sap.ushell.components.tiles.indicatorTileUtils.util.logError(e)},refreshHandler:function(c){if(!c.firstTimeVisible){if(Number(this.oChip.configuration.getParameterValueAsString("isSufficient")))c.flowWithoutDesignTimeCall();else c.flowWithDesignTimeCall()}},visibleHandler:function(i){if(!i){this.firstTimeVisible=false;sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.comparisionChartODataRef)}if(i){this.refreshHandler(this)}},onExit:function(){sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.comparisionChartODataRef)}});(function(){"use strict";sap.ui.controller("tiles.indicatordeviation.DeviationTile",{onInit:function(){var t=this;this.firstTimeVisible=false;this.oKpiTileView=this.getView();this.oViewData=this.oKpiTileView.getViewData(),this.oTileApi=this.oViewData.chip;if(this.oTileApi.visible){this.oTileApi.visible.attachVisible(this.visibleHandler.bind(this))}this.system=this.oTileApi.url.getApplicationSystem();this.oKpiTileView.oGenericTile.setState(sap.suite.ui.commons.LoadState.Loading);try{sap.ushell.components.tiles.indicatorTileUtils.util.getParsedChip(this.oTileApi.configuration.getParameterValueAsString("tileConfiguration"),function(c){t.oConfig=c;t.setTextInTile();if(t.oTileApi.preview){t.oTileApi.preview.setTargetUrl(sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(t.oConfig,t.system))}if(t.oTileApi.preview.isEnabled()){t._updateTileModel({actual:{value:120,color:sap.suite.ui.commons.InfoTileValueColor.Good},targetValue:100,thresholds:[{value:0,color:sap.suite.ui.commons.InfoTileValueColor.Error},{value:50,color:sap.suite.ui.commons.InfoTileValueColor.Critical},{value:150,color:sap.suite.ui.commons.InfoTileValueColor.Critical},{value:200,color:sap.suite.ui.commons.InfoTileValueColor.Error}],showActualValue:true,showTargetValue:true});t.oKpiTileView.oGenericTile.setState(sap.suite.ui.commons.LoadState.Loaded)}else{t.oKpiTileView.oGenericTile.attachPress(function(){sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(t.queryServiceUriODataReadRef);sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,null);window.location.hash=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(t.oConfig,t.system)});if(Number(t.oTileApi.configuration.getParameterValueAsString("isSufficient"))){sap.ushell.components.tiles.indicatorTileUtils.cache.setEvaluationById(t.oConfig.TILE_PROPERTIES.id,t.oConfig);t.flowWithoutDesignTimeCall()}else{t.flowWithDesignTimeCall()}}})}catch(e){this.logError(e)}},_setLocalModelToTile:function(){if(this.getTile().getModel()){}else{this.getTile().setModel(new sap.ui.model.json.JSONModel({}))}},getTile:function(){return this.oKpiTileView.oGenericTile},_updateTileModel:function(n){var m=this.getTile().getModel().getData();jQuery.extend(m,n);this.getTile().getModel().setData(m)},fetchKpiValue:function(s,E){var t=this;var k=0;try{var u=this.DEFINITION_DATA.EVALUATION.ODATA_URL;var a=this.DEFINITION_DATA.EVALUATION.ODATA_ENTITYSET;var T=this.setThresholdValues();var m=T.fullyFormedMeasure;var c=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(t.oConfig.TILE_PROPERTIES.id);if(!c){var v=sap.ushell.components.tiles.indicatorTileUtils.util.prepareFilterStructure(this.DEFINITION_DATA.EVALUATION_FILTERS,this.DEFINITION_DATA.ADDITIONAL_FILTERS);var q=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(t.oTileApi.url.addSystemToServiceUrl(u),a,m,null,v);if(q){this.QUERY_SERVICE_MODEL=q.model;this.queryUriForKpiValue=q.uri;try{this.queryServiceUriODataReadRef=this.QUERY_SERVICE_MODEL.read(q.uri,null,null,true,function(d){var w={};if(d&&d.results&&d.results.length){k=d.results[0][t.DEFINITION_DATA.EVALUATION.COLUMN_NAME];if(q.unit){t._updateTileModel({unit:d.results[0][q.unit.name]});w.unit=q.unit;w.unit.name=q.unit.name}w.data=d;sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,w);if(t.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){T.criticalHighValue=d.results[0][T.sCriticalHigh];T.criticalLowValue=d.results[0][T.sCriticalLow];T.warningHighValue=d.results[0][T.sWarningHigh];T.warningLowValue=d.results[0][T.sWarningLow];T.targetValue=d.results[0][T.sTarget];T.trendValue=d.results[0][T.sTrend]}s.call(t,k,T)}else{E.call(t,"no Response from QueryServiceUri")}},function(b){if(b&&b.response){E.call(t,b.message)}})}catch(e){t.logError("Error in Query Service URI")}}}else{if(c.data&&c.data.results&&c.data.results.length){k=c.data.results[0][t.DEFINITION_DATA.EVALUATION.COLUMN_NAME];if(c.unit){t._updateTileModel({unit:c.data.results[0][c.unit.name]})}if(t.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){T.criticalHighValue=c.data.results[0][T.sCriticalHigh];T.criticalLowValue=c.data.results[0][T.sCriticalLow];T.warningHighValue=c.data.results[0][T.sWarningHigh];T.warningLowValue=c.data.results[0][T.sWarningLow];T.targetValue=c.data.results[0][T.sTarget];T.trendValue=c.data.results[0][T.sTrend]}s.call(t,k,T)}else{E.call(t,"no Response from QueryServiceUri")}}}catch(e){E.call(t,e)}},getThresholdsObjAndColor:function(t){try{var T={};T.arrObj=[];T.returnColor=sap.suite.ui.commons.InfoTileValueColor.Neutral;var i=this.DEFINITION_DATA.EVALUATION.GOAL_TYPE;var a=this.DEFINITION_DATA.EVALUATION_VALUES;var w,c,b,d;if(i==="MI"){b=Number(t.criticalHighValue)||0;d=Number(t.warningHighValue)||0;if(b&&d){b=window.parseFloat(b);d=window.parseFloat(d);T.arrObj.push({value:b,color:sap.suite.ui.commons.InfoTileValueColor.Error});T.arrObj.push({value:d,color:sap.suite.ui.commons.InfoTileValueColor.Critical});if(this.CALCULATED_KPI_VALUE<d){T.returnColor=sap.suite.ui.commons.InfoTileValueColor.Good}else if(this.CALCULATED_KPI_VALUE<=b){T.returnColor=sap.suite.ui.commons.InfoTileValueColor.Critical}else{T.returnColor=sap.suite.ui.commons.InfoTileValueColor.Error}}}else if(i==="MA"){c=Number(t.criticalLowValue)||0;w=Number(t.warningLowValue)||0;if(c&&w){c=window.parseFloat(c);w=window.parseFloat(w);T.arrObj.push({value:c,color:sap.suite.ui.commons.InfoTileValueColor.Error});T.arrObj.push({value:w,color:sap.suite.ui.commons.InfoTileValueColor.Critical});if(this.CALCULATED_KPI_VALUE<c){T.returnColor=sap.suite.ui.commons.InfoTileValueColor.Error}else if(this.CALCULATED_KPI_VALUE<=w){T.returnColor=sap.suite.ui.commons.InfoTileValueColor.Critical}else{T.returnColor=sap.suite.ui.commons.InfoTileValueColor.Good}}}else{b=Number(t.criticalHighValue)||0;d=Number(t.warningHighValue)||0;c=Number(t.criticalLowValue)||0;w=Number(t.warningLowValue)||0;if(w&&d&&c&&c){b=window.parseFloat(b);d=window.parseFloat(d);w=window.parseFloat(w);c=window.parseFloat(c);T.arrObj.push({value:b,color:sap.suite.ui.commons.InfoTileValueColor.Error});T.arrObj.push({value:d,color:sap.suite.ui.commons.InfoTileValueColor.Critical});T.arrObj.push({value:w,color:sap.suite.ui.commons.InfoTileValueColor.Critical});T.arrObj.push({value:c,color:sap.suite.ui.commons.InfoTileValueColor.Error});if(this.CALCULATED_KPI_VALUE<c||this.CALCULATED_KPI_VALUE>b){T.returnColor=sap.suite.ui.commons.InfoTileValueColor.Error}else if((this.CALCULATED_KPI_VALUE>=c&&this.CALCULATED_KPI_VALUE<=w)||(this.CALCULATED_KPI_VALUE>=d&&this.CALCULATED_KPI_VALUE<=b)){T.returnColor=sap.suite.ui.commons.InfoTileValueColor.Critical}else{T.returnColor=sap.suite.ui.commons.InfoTileValueColor.Good}}}return T}catch(e){this.logError(e)}},flowWithoutDesignTimeCall:function(){var t=this;var f,a;this.DEFINITION_DATA=this.oConfig;this._updateTileModel(this.DEFINITION_DATA);if(this.oTileApi.visible.isVisible()&&!this.firstTimeVisible){this.firstTimeVisible=true;this.fetchKpiValue(function(k,b){var c=Number(k);if(this.oConfig.EVALUATION.SCALING==-2)c*=100;f=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(c),this.oConfig.EVALUATION.SCALING);if(this.oConfig.EVALUATION.SCALING==-2)f+=" %";this.CALCULATED_KPI_VALUE=Number(k);var d={};var e=this.getThresholdsObjAndColor(b);var g={value:Number(k),color:e.returnColor};d.actualValueLabel=f.toString();d.actual=g;d.thresholds=[];d.thresholds=e.arrObj;var h=this.DEFINITION_DATA.EVALUATION_VALUES;if(this.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){var i=Number(b.targetValue);if(this.oConfig.EVALUATION.SCALING==-2)i*=100;a=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(i,this.oConfig.EVALUATION.SCALING);if(this.oConfig.EVALUATION.SCALING==-2)a+="%";d.targetValue=Number(b.targetValue);d.targetValueLabel=a.toString()}else{for(var j=0;j<h.length;j++){if(h[j].TYPE==="TA"){var i=Number(h[j].FIXED);if(this.oConfig.EVALUATION.SCALING==-2)i*=100;a=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(i);if(this.oConfig.EVALUATION.SCALING==-2)a+="%";d.targetValue=Number(h[j].FIXED);d.targetValueLabel=a.toString()}}}this._updateTileModel(d);var n=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(t.oConfig,t.system);t.oKpiTileView.oGenericTile.$().wrap("<a href ='"+n+"'/>");this.oKpiTileView.oGenericTile.setState(sap.suite.ui.commons.LoadState.Loaded)},this.logError)}},flowWithDesignTimeCall:function(){var t=this;try{var a=sap.ushell.components.tiles.indicatorTileUtils.cache.getEvaluationById(this.oConfig.EVALUATION.ID);if(a){t.oConfig.EVALUATION_FILTERS=a.EVALUATION_FILTERS;t.flowWithoutDesignTimeCall()}else{sap.ushell.components.tiles.indicatorTileUtils.util.getFilterFromRunTimeService(this.oConfig,function(f){t.oConfig.EVALUATION_FILTERS=f;sap.ushell.components.tiles.indicatorTileUtils.cache.setEvaluationById(t.oConfig.TILE_PROPERTIES.id,t.oConfig);t.flowWithoutDesignTimeCall()})}}catch(e){this.logError(e)}},setTextInTile:function(){var t=this;this._updateTileModel({header:t.oTileApi.preview.getTitle()||sap.ushell.components.tiles.indicatorTileUtils.util.getChipTitle(t.oConfig),subheader:t.oTileApi.preview.getDescription()||sap.ushell.components.tiles.indicatorTileUtils.util.getChipSubTitle(t.oConfig)})},logError:function(e){this.oKpiTileView.oGenericTile.setState(sap.suite.ui.commons.LoadState.Failed);this.oKpiTileView.oGenericTile.setState(sap.suite.ui.commons.LoadState.Failed);sap.ushell.components.tiles.indicatorTileUtils.util.logError(e)},setThresholdValues:function(){var t=this;var T={};T.fullyFormedMeasure=this.DEFINITION_DATA.EVALUATION.COLUMN_NAME;if(this.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){switch(this.DEFINITION_DATA.EVALUATION.GOAL_TYPE){case"MI":T.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","MEASURE");T.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","MEASURE");T.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");T.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");T.fullyFormedMeasure+=t.formSelectStatement(T);break;case"MA":T.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","MEASURE");T.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","MEASURE");T.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");T.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");T.fullyFormedMeasure+=t.formSelectStatement(T);break;case"RA":T.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","MEASURE");T.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","MEASURE");T.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");T.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");T.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","MEASURE");T.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","MEASURE");T.fullyFormedMeasure+=t.formSelectStatement(T);break}}else{T.criticalHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","FIXED");T.criticalLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","FIXED");T.warningHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","FIXED");T.warningLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","FIXED");T.targetValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","FIXED");T.trendValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","FIXED")}return T},formSelectStatement:function(o){var t=Object.keys(o);var f="";for(var i=0;i<t.length;i++)if((o[t[i]]!==undefined)&&(o.fullyFormedMeasure))f+=","+o[t[i]];return f},refreshHandler:function(c){if(!c.firstTimeVisible){if(Number(this.oTileApi.configuration.getParameterValueAsString("isSufficient")))c.flowWithoutDesignTimeCall();else c.flowWithDesignTimeCall()}},visibleHandler:function(i){if(!i){this.firstTimeVisible=false;sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.queryServiceUriODataReadRef)}if(i){this.refreshHandler(this)}},onExit:function(){sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.queryServiceUriODataReadRef)}})}());(function(){"use strict";sap.ui.controller("tiles.indicatornumeric.NumericTile",{onInit:function(){var t=this;this.firstTimeVisible=false;this.oKpiTileView=this.getView();this.oViewData=this.oKpiTileView.getViewData();this.oTileApi=this.oViewData.chip;if(this.oTileApi.visible){this.oTileApi.visible.attachVisible(this.visibleHandler.bind(this))}this.system=this.oTileApi.url.getApplicationSystem();this.oKpiTileView.oGenericTile.setState(sap.suite.ui.commons.LoadState.Loading);try{sap.ushell.components.tiles.indicatorTileUtils.util.getParsedChip(t.oTileApi.configuration.getParameterValueAsString("tileConfiguration"),function(c){t.oConfig=c;t.setTextInTile();if(t.oTileApi.preview){t.oTileApi.preview.setTargetUrl(sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(t.oConfig,t.system))}if(t.oTileApi.preview.isEnabled()){t._updateTileModel({value:"10.34",scale:"M",valueColor:sap.suite.ui.commons.InfoTileValueColor.Neutral,indicator:sap.suite.ui.commons.DeviationIndicator.None});t.oKpiTileView.oGenericTile.setState(sap.suite.ui.commons.LoadState.Loaded)}else{t.oKpiTileView.oGenericTile.attachPress(function(){sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(t.queryServiceUriODataReadRef);sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,null);window.location.hash=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(t.oConfig,t.system)});if(Number(t.oTileApi.configuration.getParameterValueAsString("isSufficient"))){sap.ushell.components.tiles.indicatorTileUtils.cache.setEvaluationById(t.oConfig.TILE_PROPERTIES.id,t.oConfig);t.flowWithoutDesignTimeCall()}else{t.flowWithDesignTimeCall()}}})}catch(e){this.logError(e)}},_setLocalModelToTile:function(){if(this.getTile().getModel()){}else{this.getTile().setModel(new sap.ui.model.json.JSONModel({}))}},getTile:function(){return this.oKpiTileView.oGenericTile},_updateTileModel:function(n){var m=this.getTile().getModel().getData();jQuery.extend(m,n);this.getTile().getModel().setData(m)},fetchKpiValue:function(s,E){var t=this;var k=0;var a=0;var c=0;var b=0;var w=0;var d=0;var f=0;try{var u=this.DEFINITION_DATA.EVALUATION.ODATA_URL;var g=this.DEFINITION_DATA.EVALUATION.ODATA_ENTITYSET;var T=this.setThresholdValues();var m=T.fullyFormedMeasure;var h=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(t.oConfig.TILE_PROPERTIES.id);if(!h){var v=sap.ushell.components.tiles.indicatorTileUtils.util.prepareFilterStructure(this.DEFINITION_DATA.EVALUATION_FILTERS,this.DEFINITION_DATA.ADDITIONAL_FILTERS);var q=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(t.oTileApi.url.addSystemToServiceUrl(u),g,m,null,v);if(q){this.QUERY_SERVICE_MODEL=q.model;this.queryUriForKpiValue=q.uri;this.queryServiceUriODataReadRef=this.QUERY_SERVICE_MODEL.read(q.uri,null,null,true,function(i){if(i&&i.results&&i.results.length){k=i.results[0][t.DEFINITION_DATA.EVALUATION.COLUMN_NAME];var j={};if(q.unit){t._updateTileModel({unit:i.results[0][q.unit.name]});j.unit=q.unit;j.unit.name=q.unit.name}j.data=i;sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,j);if(t.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){T.criticalHighValue=i.results[0][T.sCriticalHigh];T.criticalLowValue=i.results[0][T.sCriticalLow];T.warningHighValue=i.results[0][T.sWarningHigh];T.warningLowValue=i.results[0][T.sWarningLow];T.targetValue=i.results[0][T.sTarget];T.trendValue=i.results[0][T.sTrend]}s.call(t,k,T)}else{E.call(t,"no Response from QueryServiceUri")}},function(i){if(i&&i.response){E.call(t,i.message)}})}else{E.call(t,"Error Preparing Query Service URI")}}else{if(h.data&&h.data.results&&h.data.results.length){k=h.data.results[0][t.DEFINITION_DATA.EVALUATION.COLUMN_NAME];if(h.unit){t._updateTileModel({unit:h.data.results[0][h.unit.name]})}if(t.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){T.criticalHighValue=h.data.results[0][T.sCriticalHigh];T.criticalLowValue=h.data.results[0][T.sCriticalLow];T.warningHighValue=h.data.results[0][T.sWarningHigh];T.warningLowValue=h.data.results[0][T.sWarningLow];T.targetValue=h.data.results[0][T.sTarget];T.trendValue=h.data.results[0][T.sTrend]}s.call(t,k,T)}else{E.call(t,"no Response from QueryServiceUri")}}}catch(e){E.call(t,e)}},getTrendColor:function(c,a,w,b,t){var d=this;try{var i=this.DEFINITION_DATA.EVALUATION.GOAL_TYPE;var f=this.DEFINITION_DATA.EVALUATION_VALUES;var r=sap.suite.ui.commons.InfoTileValueColor.Neutral;if(i==="MI"){if(c&&w){c=Number(c);w=Number(w);if(this.CALCULATED_KPI_VALUE<w){r=sap.suite.ui.commons.InfoTileValueColor.Good}else if(this.CALCULATED_KPI_VALUE<=c){r=sap.suite.ui.commons.InfoTileValueColor.Critical}else{r=sap.suite.ui.commons.InfoTileValueColor.Error}}}else if(i==="MA"){if(a&&b){a=Number(a);b=Number(b);if(this.CALCULATED_KPI_VALUE<a){r=sap.suite.ui.commons.InfoTileValueColor.Error}else if(this.CALCULATED_KPI_VALUE<=b){r=sap.suite.ui.commons.InfoTileValueColor.Critical}else{r=sap.suite.ui.commons.InfoTileValueColor.Good}}}else{if(b&&w&&a&&c){c=Number(c);w=Number(w);b=Number(b);a=Number(a);if(this.CALCULATED_KPI_VALUE<a||this.CALCULATED_KPI_VALUE>c){r=sap.suite.ui.commons.InfoTileValueColor.Error}else if((this.CALCULATED_KPI_VALUE>=a&&this.CALCULATED_KPI_VALUE<=b)||(this.CALCULATED_KPI_VALUE>=w&&this.CALCULATED_KPI_VALUE<=c)){r=sap.suite.ui.commons.InfoTileValueColor.Critical}else{r=sap.suite.ui.commons.InfoTileValueColor.Good}}}return r}catch(e){d.logError(e)}},getTrendIndicator:function(t){var a=this;t=Number(t);try{var b=sap.suite.ui.commons.DeviationIndicator.None;if(t>this.CALCULATED_KPI_VALUE){b=sap.suite.ui.commons.DeviationIndicator.Down}else if(t<this.CALCULATED_KPI_VALUE){b=sap.suite.ui.commons.DeviationIndicator.Up}return b}catch(e){a.logError(e)}},flowWithoutDesignTimeCall:function(){var t=this;this.DEFINITION_DATA=this.oConfig;this._updateTileModel(this.DEFINITION_DATA);if(this.oTileApi.visible.isVisible()&&!this.firstTimeVisible){this.firstTimeVisible=true;this.fetchKpiValue(function(k,T){this.CALCULATED_KPI_VALUE=k;var e=this.DEFINITION_DATA.EVALUATION_VALUES;var a=this.getTrendColor(T.criticalHighValue,T.criticalLowValue,T.warningHighValue,T.warningLowValue,T.targetValue);var b=this.getTrendIndicator(T.trendValue);var s="";var c=this.CALCULATED_KPI_VALUE;if(this.oConfig.EVALUATION.SCALING==-2){c*=100;this.getView().oNVConfContS.setFormatterValue(false)}s=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(c),this.oConfig.EVALUATION.SCALING);if(this.oConfig.EVALUATION.SCALING==-2)this._updateTileModel({scale:"%"});this._updateTileModel({value:s.toString(),valueColor:a,indicator:b});var n=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(t.oConfig,t.system);t.oKpiTileView.oGenericTile.$().wrap("<a href ='"+n+"'/>");this.oKpiTileView.oGenericTile.setState(sap.suite.ui.commons.LoadState.Loaded)},this.logError)}},flowWithDesignTimeCall:function(){var t=this;try{var a=sap.ushell.components.tiles.indicatorTileUtils.cache.getEvaluationById(this.oConfig.EVALUATION.ID);if(a){t.oConfig.EVALUATION_FILTERS=a.EVALUATION_FILTERS;t.flowWithoutDesignTimeCall()}else{sap.ushell.components.tiles.indicatorTileUtils.util.getFilterFromRunTimeService(this.oConfig,function(f){t.oConfig.EVALUATION_FILTERS=f;sap.ushell.components.tiles.indicatorTileUtils.cache.setEvaluationById(t.oConfig.TILE_PROPERTIES.id,t.oConfig);t.flowWithoutDesignTimeCall()})}}catch(e){this.logError(e)}},setThresholdValues:function(){var t=this;try{var T={};T.fullyFormedMeasure=this.DEFINITION_DATA.EVALUATION.COLUMN_NAME;if(this.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){switch(this.DEFINITION_DATA.EVALUATION.GOAL_TYPE){case"MI":T.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","MEASURE");T.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","MEASURE");T.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");T.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");T.fullyFormedMeasure+=t.formSelectStatement(T);break;case"MA":T.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","MEASURE");T.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","MEASURE");T.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");T.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");T.fullyFormedMeasure+=t.formSelectStatement(T);break;case"RA":T.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","MEASURE");T.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","MEASURE");T.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");T.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");T.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","MEASURE");T.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","MEASURE");T.fullyFormedMeasure+=t.formSelectStatement(T);break}}else{T.criticalHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","FIXED");T.criticalLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","FIXED");T.warningHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","FIXED");T.warningLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","FIXED");T.targetValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","FIXED");T.trendValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","FIXED")}return T}catch(e){t.logError(e)}},formSelectStatement:function(o){var t=Object.keys(o);var f="";for(var i=0;i<t.length;i++)if((o[t[i]]!==undefined)&&(o.fullyFormedMeasure))f+=","+o[t[i]];return f},setTextInTile:function(){var t=this;this._updateTileModel({header:t.oTileApi.preview.getTitle()||sap.ushell.components.tiles.indicatorTileUtils.util.getChipTitle(t.oConfig),subheader:t.oTileApi.preview.getDescription()||sap.ushell.components.tiles.indicatorTileUtils.util.getChipSubTitle(t.oConfig)})},logError:function(e){this._updateTileModel({value:"",scale:"",unit:""});this.oKpiTileView.oGenericTile.setState(sap.suite.ui.commons.LoadState.Failed);this.oKpiTileView.oGenericTile.setState(sap.suite.ui.commons.LoadState.Failed);sap.ushell.components.tiles.indicatorTileUtils.util.logError(e)},refreshHandler:function(c){if(!c.firstTimeVisible){if(Number(this.oTileApi.configuration.getParameterValueAsString("isSufficient")))c.flowWithoutDesignTimeCall();else c.flowWithDesignTimeCall()}},visibleHandler:function(i){if(!i){this.firstTimeVisible=false;sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.queryServiceUriODataReadRef)}if(i){this.refreshHandler(this)}},onExit:function(){sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.queryServiceUriODataReadRef)}})}());(function(){"use strict";function l(u,s,e){var x=new XMLHttpRequest();x.open("GET",u,true);x.onreadystatechange=function(){if(this.readyState!==4){return}if(this.status===200){s(x.responseText)}else{e(x.responseText)}};x.send()}self.onmessage=function(e){if(e.data.action){switch(e.data.action){case'loadResource':l(e.data.url,function(r){self.postMessage(r)},function(m){self.postMessage({error:m})});break}}}}());
// Copyright (c) 2013 SAP AG, All Rights Reserved
(function(){"use strict";sap.ui.controller("sap.ushell.renderers.fiori2.launchpad.catalog.Catalog",{onInit:function(){sap.ui.getCore().getEventBus().subscribe("showCatalogEvent",this.onShow,this);sap.ui.getCore().byId("catalogSelect").addEventDelegate({onBeforeRendering:this.onBeforeSelectRendering},this)},onExit:function(){sap.ui.getCore().getEventBus().unsubscribe("showCatalogEvent",this.onShow);this.getView().aDanglingControls.forEach(function(c){c.destroy()})},onAfterRendering:function(){var m=sap.ui.getCore().byId("navContainer").getModel(),t=this;if(!m.getProperty('/catalogs').length){m.setProperty('/catalogs',[{title:sap.ushell.resources.i18n.getText('catalogsLoading'),"static":true,tiles:[],numIntentSupportedTiles:-1}])}sap.ui.getCore().byId("catalogSelect").setSelectedItemId();if(!this.PagingManager){this.lastCatalogId=0;jQuery.sap.require("sap.ushell.renderers.fiori2.launchpad.PagingManager");this.PagingManager=new sap.ushell.renderers.fiori2.launchpad.PagingManager('catalogPaging',{elementClassName:'sapUshellTile',containerHeight:window.innerHeight,containerWidth:window.innerWidth})}if(this.PagingManager.currentPageIndex===0){t.allocateNextPage()}if(sap.ui.Device.system.desktop){jQuery("#catalogTilesPage-cont").scroll(function(e){var p=sap.ui.getCore().byId('catalogTilesPage'),s=p.getScrollDelegate(),c=s.getScrollTop(),a=s.getMaxScrollTop();if(a-c<=30+t.PagingManager.getTileHeight()){t.allocateNextPage()}})}else{setTimeout(function(){var t=this;this.oCatalogTilesPage=sap.ui.getCore().byId("catalogTilesPage");this.oScroller=this.oCatalogTilesPage.getScrollDelegate();if(this.oScroller&&this.oScroller._scroller){if(!this.oOriginalScrollMove){this.oOriginalScrollMove=this.oScroller._scroller.options.onScrollMove}this.oScroller._scroller.options.onScrollMove=function(e){t.oOriginalScrollMove.apply(t.oScroller);var c=t.oScroller.getScrollTop(),a=t.oScroller.getMaxScrollTop();if(a-c<=30+t.PagingManager.getTileHeight()){t.allocateNextPage()}}}else{jQuery("#catalogTilesPage-cont").scroll(function(e){var p=sap.ui.getCore().byId('catalogTilesPage'),s=p.getScrollDelegate(),c=s.getScrollTop(),a=s.getMaxScrollTop();if(a-c<=30+t.PagingManager.getTileHeight()){t.allocateNextPage()}})}}.bind(this),1500)}},onShow:function(c,e,d){var l=sap.ui.getCore().byId('loadingDialog');l.close();var m=sap.ui.getCore().byId("navContainer").getModel(),C=m.getProperty("/catalogTiles")||[],D=d.params,p=(D&&D.targetGroup&&D.targetGroup.length&&D.targetGroup[0])||"/groups/0",i;d.groupContext=m.getContext(p);$.extend(this.getView().getViewData(),d);if(this.PagingManager){this.resetPageFilter()}this.categoryFilter=(D&&D.catalogSelector&&D.catalogSelector.length&&D.catalogSelector[0])||null;this.searchFilter=(D&&D.tileFilter&&D.tileFilter.length&&D.tileFilter[0])||"";m.setProperty("/showCatalogHeaders",true);m.setProperty("/catalogSearchFilter",this.searchFilter);for(i=0;i<C.length;i=i+1){C[i].active=false}if(this.categoryFilter||this.searchFilter){sap.ui.getCore().byId("catalogSelect").rerender()}else{sap.ui.getCore().byId("catalogSelect").setSelectedItemId("")}this.oRenderingFilter=new sap.ui.model.Filter('','EQ','a');this.oRenderingFilter.fnTest=function(v){if(v.catalogIndex<this.lastCatalogId){return true}if(this.allocateTiles>0){this.lastCatalogId=v.catalogIndex;this.allocateTiles--;return true}return false}.bind(this);if(this.PagingManager){this.applyTileFilters()}},resetPageFilter:function(){this.lastCatalogId=0;this.allocateTiles=this.PagingManager.getNumberOfAllocatedElements()},allocateNextPage:function(){this.PagingManager.moveToNextPage();this.allocateTiles=this.PagingManager._calcElementsPerPage();this.applyTileFilters()},onBeforeSelectRendering:function(){var s=sap.ui.getCore().byId("catalogSelect"),i=jQuery.grep(s.getItems(),jQuery.proxy(function(I){return I.getBindingContext().getObject().id===this.categoryFilter},this));if(!i.length){i.push(s.getItemAt(0))}if(i[0]&&s.getSelectedItemId()!==i[0].getId()){window.setTimeout($.proxy(s.setSelectedItem,s,i[0].getId()),500)}},setCategoryFilter:function(f){sap.ushell.renderers.fiori2.Navigation.openCatalogByHash({groupContext:this.getView().getViewData().groupContext,categoryFilter:f,searchFilter:this.searchFilter},false)},setSearchFilter:function(f){sap.ushell.renderers.fiori2.Navigation.openCatalogByHash({groupContext:this.getView().getViewData().groupContext,categoryFilter:this.categoryFilter,searchFilter:f},false)},applyTileFilters:function(){var f=[],s,c;if(this.searchFilter){s=new sap.ui.model.Filter($.map(this.searchFilter.split(/[\s,]+/),function(v){return(v&&new sap.ui.model.Filter("keywords",sap.ui.model.FilterOperator.Contains,v))||(v&&new sap.ui.model.Filter("title",sap.ui.model.FilterOperator.Contains,v))||undefined}),true);f.push(s)}if(this.categoryFilter){c=new sap.ui.model.Filter("catalogId",sap.ui.model.FilterOperator.EQ,this.categoryFilter);f.push(c)}f.push(new sap.ui.model.Filter("isTileIntentSupported",sap.ui.model.FilterOperator.EQ,true));if(this.oRenderingFilter){f.push(this.oRenderingFilter)}sap.ui.getCore().byId("catalogTiles").getBinding("tiles").filter(f)},onLiveFilter:function(e){var q=e.getParameter("newValue");if(q){this.setSearchFilter(q)}else{this.setSearchFilter()}},onCategoryFilter:function(e){var s=e.getParameter("selectedItem"),S=s.getBindingContext(),m=S.getModel();if(m.getProperty("static",S)){m.setProperty("/showCatalogHeaders",true);this.setCategoryFilter();this.selectedCategory=undefined}else{m.setProperty("/showCatalogHeaders",false);this.setCategoryFilter(s.getBindingContext().getObject().id);this.selectedCategory=s.getId()}},onTileAfterRendering:function(e){var f=e.getSource().getFootItems()[0];if(f!==undefined){if(f.getIcon()=="sap-icon://add"){f.addStyleClass("sapUshellCatalogPlusIcon")}else{f.addStyleClass("sapUshellCatalogVIcon")}}},onTileFooterClick:function(E){var s=E.getSource(),S=s.getBindingContext(),t=this,o,O,c,h,p,a,b=E.oSource,d=b.getDomRef(),n,f=this.createPopoverData(E),g=192,i=sap.ui.getCore().byId("mainShell"),j=i.oDashboardManager,l=new sap.m.List({mode:sap.m.ListMode.MultiSelect}),L=new sap.m.DisplayListItem({label:"{title}",selected:"{selected}",tooltip:"{title}"});var k=null;if(this.getView().getModel().getProperty('/enableHideGroups')){k=[new sap.ui.model.Filter("isGroupVisible",sap.ui.model.FilterOperator.EQ,true)]}l.bindItems("/",L,null,k);o=new sap.ui.model.json.JSONModel(f.userGroupList);l.setModel(o);l.addEventDelegate({onsapup:function(E){try{E.preventDefault();if(sap.ui.getCore().byId('shell').getModel().getData().groups.length){var u=jQuery(":focus");if(u.index()==0){var v=jQuery("#newGroupItem");v.focus();E._bIsStopHandlers=true}}}catch(e){}}});n=new sap.m.Input({id:"newGroupNameInput",type:"Text",placeholder:sap.ushell.resources.i18n.getText("newGroupPlaceholder")});var B=new sap.m.Button({icon:sap.ui.core.IconPool.getIconURI("nav-back"),press:function(E){p.removeAllContent();if(!sap.ui.Device.system.phone){p.setContentHeight(g+"px")}else{p.setContentHeight("100%")}p.setVerticalScrolling(true);p.addContent(r);p.setTitle(sap.ushell.resources.i18n.getText("addTileToGroups_popoverTitle"));p.setCustomHeader();n.enabled=false;n.setValue('')},tooltip:sap.ushell.resources.i18n.getText("newGroupGoBackBtn_tooltip")});B.addStyleClass("catalogNewGroupBackButton");var N=new sap.m.Label({text:sap.ushell.resources.i18n.getText("newGroup_popoverTitle")}),H=new sap.m.Bar({contentLeft:[B],contentMiddle:[N]}),m=new sap.m.StandardListItem({id:"newGroupItem",title:sap.ushell.resources.i18n.getText("newGroup_listItemText"),type:"Navigation",press:function(){t._navigateToCreateNewGroupPanel(p,n,H)}}),q=new sap.m.List({});q.addItem(m);q.addEventDelegate({onsapdown:function(E){try{E.preventDefault();E._bIsStopHandlers=true;if(sap.ui.getCore().byId('shell').getModel().getData().groups.length){var u=jQuery("#popoverContainer .sapMListModeMultiSelect li").first();u.focus()}}catch(e){}},onsaptabnext:function(E){try{E.preventDefault();E._bIsStopHandlers=true;var u=jQuery("#okButton");u.focus()}catch(e){}}});var r=this._setPopoverContainer(q,l,g);if(document.body.clientHeight-d.getBoundingClientRect().bottom>=310){a="Bottom"}else{a="Auto"}p=new sap.m.ResponsivePopover({id:"groupsPopover",placement:a,content:[r],enableScrolling:true,title:sap.ushell.resources.i18n.getText("addTileToGroups_popoverTitle"),contentWidth:'20rem',afterClose:function(){p.destroy();n.destroy();m.destroy();O.destroy();c.destroy();r.destroy()}});if(!sap.ui.Device.system.phone){p.setContentHeight(g+"px")}else{p.setContentHeight("100%")}O=this.createOkButton(S,o,f,t,p,n,H);O.addEventDelegate({onsaptabprevious:function(E){try{E.preventDefault();E._bIsStopHandlers=true;var u=jQuery("#newGroupItem");if(!u.length){u=jQuery("#newGroupNameInput input")}u.focus()}catch(e){}}});c=new sap.m.Button({id:"cancelButton",press:function(E){E.preventDefault();E._bIsStopHandlers=true;p.close()},text:sap.ushell.resources.i18n.getText("cancelBtn")});p.setBeginButton(O);p.setEndButton(c);p.setInitialFocus('newGroupItem');p.openBy(b)},_navigateToCreateNewGroupPanel:function(p,n,h){p.removeAllContent();p.addContent(n.addStyleClass("catalogNewGroupInput"));p.setCustomHeader(h);p.setContentHeight("");n.setValueState(sap.ui.core.ValueState.None);n.setPlaceholder(sap.ushell.resources.i18n.getText("newGroupPlaceholder"));n.enabled=true;n.focus()},createOkButton:function(s,o,p,g,P,n,h){var O=new sap.m.Button({id:"okButton",press:function(e){e.preventDefault();e._bIsStopHandlers=true;var a=[],d=[],b={},c=sap.ushell.Container.getService("LaunchPage"),f,i,t,j,r,k=0,l=0,m,q,u=s.getModel().getProperty(s.getPath()).id,E=sap.ui.getCore().getEventBus(),v,w=n.getValue().trim(),x=sap.ushell.resources.i18n.getText("newGroup_listItemText"),y=[],z=this;for(i=0;i<p.userGroupList.length;i=i+1){t=this.oData[i];r=c.getGroupId(t.object);b[r]=t.title;if(t.selected){a.push(r);j=new sap.ui.model.Context(s.getModel(),"/groups/"+i);if(!o.oData[i].initiallySelected){y.push(g._addTile(s,j));o.oData[i].initiallySelected=true;k=k+1;if(k==1){m=t.title}}}else if((!t.selected)&&(o.oData[i].initiallySelected)){y.push(g._removeTile(u,i));o.oData[i].initiallySelected=false;l=l+1;if(l==1){q=t.title}}}if(n.enabled){if(w.length>0){v=w}else{v=x}y.push(g._createGroupAndSaveTile(s,v));k++;m=v}jQuery.when.apply(jQuery,y).then(function(){if(!(k==0&&l==0)){var A=false,B=false,C=[];for(i=0;i<arguments.length&&(!A||!B);i++){if(arguments[i].action=="addTileToNewGroup"&&arguments[i].status==1){var t=z.oData[z.oData.length-1],c=sap.ushell.Container.getService("LaunchPage"),r=c.getGroupId(t.object);a.push(r);B=true}if(!arguments[i].status){A=true;C.push(arguments[i])}}if(A){var D=sap.ui.getCore().byId("mainShell"),F=g.prepareErrorMessage(C,p.tileTitle),G=D.oDashboardManager;G._resetGroupsOnFailure(F.messageId,F.parameters)}else{s.getModel().setProperty("/catalogTiles/"+p.tileIndex+"/associatedGroups",a);f=g.prepareDetailedMessage(p.tileTitle,k,l,m,q);sap.m.MessageToast.show(f,{duration:3000,width:"15em",my:"center bottom",at:"center bottom",of:window,offset:"0 -50",collision:"fit fit"})}}});P.close()}.bind(o),text:sap.ushell.resources.i18n.getText("okBtn")});return O},prepareErrorMessage:function(e,t){var g,a,f,F,n=0,N=0,c=false,m;for(var i in e){g=e[i].group;a=e[i].action;if(a=='add'){n++;if(n==1){f=g.title}}else if(a=='remove'){N++;if(N==1){F=g.title}}else if(a=='addTileToNewGroup'){n++;if(n==1){f=g.title}}else{c=true}}if(c){if(e.length==1){m=sap.ushell.resources.i18n.getText({messageId:"fail_tile_operation_create_new_group"})}else{m=sap.ushell.resources.i18n.getText({messageId:"fail_tile_operation_some_actions"})}}else if(e.length==1){if(n){m=sap.ushell.resources.i18n.getText({messageId:"fail_tile_operation_add_to_group",parameters:[t,f]})}else{m=sap.ushell.resources.i18n.getText({messageId:"fail_tile_operation_remove_from_group",parameters:[t,F]})}}else{if(N==0){m=sap.ushell.resources.i18n.getText({messageId:"fail_tile_operation_add_to_several_groups",parameters:[t]})}else if(n==0){m=sap.ushell.resources.i18n.getText({messageId:"fail_tile_operation_remove_from_several_groups",parameters:[t]})}else{m=sap.ushell.resources.i18n.getText({messageId:"fail_tile_operation_some_actions"})}}return m},prepareDetailedMessage:function(t,n,a,f,b){var m;if(n==0){if(a==1){m=sap.ushell.resources.i18n.getText("tileRemovedFromSingleGroup",[t,b])}else if(a>1){m=sap.ushell.resources.i18n.getText("tileRemovedFromSeveralGroups",[t,a])}}else if(n==1){if(a==0){m=sap.ushell.resources.i18n.getText("tileAddedToSingleGroup",[t,f])}else if(a==1){m=sap.ushell.resources.i18n.getText("tileAddedToSingleGroupAndRemovedFromSingleGroup",[t,f,b])}else if(a>1){m=sap.ushell.resources.i18n.getText("tileAddedToSingleGroupAndRemovedFromSeveralGroups",[t,f,a])}}else if(n>1){if(a==0){m=sap.ushell.resources.i18n.getText("tileAddedToSeveralGroups",[t,n])}else if(a==1){m=sap.ushell.resources.i18n.getText("tileAddedToSeveralGroupsAndRemovedFromSingleGroup",[t,n,b])}else if(a>1){m=sap.ushell.resources.i18n.getText("tileAddedToSeveralGroupsAndRemovedFromSeveralGroups",[t,n,a])}}return m},createPopoverData:function(e){var s=e.getSource(),S=s.getBindingContext(),a=sap.ushell.Container.getService("LaunchPage"),i,m,p,t,r,u=S.getModel().getProperty("/groups"),c=this.getCatalogTileDataFromModel(S),b=c.tileData.associatedGroups,d=c.tileIndex;for(i=0;i<u.length;i=i+1){r=a.getGroupId(u[i].object);u[i].selected=!($.inArray(r,b)==-1);u[i].initiallySelected=u[i].selected}p=S.getPath(0);m=S.getModel();t=m.getProperty(p).title;return{userGroupList:u,catalogTile:c,tileTitle:t,tileIndex:d}},getCatalogTileDataFromModel:function(s){var t=s.sPath,a=t.split("/"),b=a[a.length-1];return{tileData:s.getModel().getProperty("/catalogTiles/"+b),tileIndex:b}},onAddTile:function(e){var s=e.getParameter("control").getBindingContext();if(!s.getProperty("active")){this._addTile(s,e.getSource().getBindingContext())}},onNavButtonPress:function(e){var n=sap.ui.getCore().byId("navContainer");if(location.hash===''||location.hash==='#'){n.to("dashboardPage")}else{location.hash=''}},_addTile:function(t,g){var s=sap.ui.getCore().byId("mainShell"),d=s.oDashboardManager,a=jQuery.Deferred(),p=d._createTile({catalogTileContext:t,groupContext:g});p.done(function(b){a.resolve(b)});return a},_removeTile:function(t,i){var s=sap.ui.getCore().byId("mainShell"),d=s.oDashboardManager,a=jQuery.Deferred(),p=d._deleteCatalogTileFromGroup({tileId:t,groupIndex:i});p.done(function(b){a.resolve(b)});return a},_createGroupAndSaveTile:function(t,n){var s=sap.ui.getCore().byId("mainShell"),d=s.oDashboardManager,a=jQuery.Deferred(),p=d._createGroupAndSaveTile({catalogTileContext:t,newGroupName:n});p.done(function(b){a.resolve(b)});return a},_setPopoverContainer:function(n,l,p){var a="popoverContainer",b=new sap.m.ScrollContainer({id:a,horizontal:false,vertical:true});if(!sap.ui.Device.system.phone){b.setHeight((p-2)+"px")}else{b.setHeight("100%")}b.addContent(n);b.addContent(l);return b}})}());(function(){"use strict";sap.ui.controller("sap.ushell.renderers.fiori2.launchpad.group_list.GroupList",{onInit:function(){this.sViewId="#"+this.getView().getId();this.sGroupListId="#"+this.getView().oGroupList.getId();jQuery(".sapUshellGroupList").data("dropGroup",null);this.iOutEventCounter=0;this.iOverEventCounter=0;this.iOutEventFlag=false;this.oDashboard=document.getElementById('dashboard');this.handleMobileScroll=this._fHandleMobileScroll.bind(this)},onAfterRendering:function(){this.jqView=jQuery(this.sViewId);this.jgGroupList=jQuery(this.sGroupListId);var e=sap.ui.getCore().getEventBus();e.unsubscribe("grouplist","ScrollAnimationEnd",this._handleScrollAnimationEnd,this);e.subscribe("grouplist","ScrollAnimationEnd",this._handleScrollAnimationEnd,this);jQuery("#__area1").appendTo("#shellPage");if(sap.ui.Device.browser.internet_explorer){this._bindResizeHandler()}var d=jQuery("#dashboardPage-cont"),t=this;if(sap.ui.Device.system.desktop){var a;d.unbind('scroll');d.scroll(function(){clearTimeout(a);a=setTimeout(function(){var n=jQuery("#dashboardPage-cont").scrollTop();t._fHandleScroll(n)},300)})}else{this.oDashboard.addEventListener('scroll',t.handleMobileScroll)}},onGroupTitleChange:function(e){this._publishAsync("launchpad","changeGroupTitle",{groupId:e.getSource().getGroupId(),newTitle:e.getParameter("newTitle")});e.getSource().addStyleClass('sapUshellOver')},makeSortable:function(){this.jgGroupList=jQuery(this.sGroupListId);this._sortable()},_getJqAllListItems:function(){this.jqView=jQuery(this.sViewId);return this.jqView.find(".sapUshellGroupListItem")},_getJqGroupListItems:function(){this.jgGroupList=jQuery(this.sGroupListId);return this.jgGroupList.find(".sapUshellGroupListItem")},_getGroupTopOffset:function(g){var G=0,d=sap.ui.getCore().byId("groupListPage");G+=g.parent().parent().position().top;G+=g.position().top;G-=g.parent().parent().parent().position().top;return G},_sortable:function(){var t=this,j=jQuery("#shell-container");t.bActive=false;this.jgGroupList.find(".sapMListUl").sortable({containment:j,items:'>:not(.sapUshellDefaultGroupItem)',placeholder:"sapUshellGroupLI-placeholder",helper:function(e,a){var c=a.clone(),b=jQuery(".sapUshellGroupListItem");c.addClass("sapUshellSortableHelperClone");c.addClass("sapUshellClonedGrouplistItem");c.removeClass("li");c.css("font-size",a.css("font-size"));c.css("width",b.first().parent().width());c.css("height",b.first().height()+parseInt(b.first().css("border-bottom-width")));c.hide();window.setTimeout(function(){c.appendTo('body');c.show()},1);return c},revert:jQuery.proxy(this._handleSortableRevert,this),start:jQuery.proxy(this._handleSortableStart,this),stop:jQuery.proxy(this._handleSortableStop,this),change:jQuery.proxy(this._handleSortableChange,this)});if(!sap.ui.Device.system.desktop){this.jgGroupList.find(".sapMListUl").sortable('disable')}},_bindGroupListItemEvents:function(e){var g=e.getSource();if(!sap.ui.Device.system.tablet){return}var t=this;jQuery.sap.byId(g.sId).bind("mousedown",function(a){var _=jQuery(this);if(t.bActive===false&&!_.hasClass("sapUshellDefaultGroupItem")){var b=a;jQuery(".sapUshellGroupItemList").find(".ui-sortable").sortable('disable');clearTimeout(this.fdownTimer);this.fdownTimer=setTimeout(function(){t.bActive=true;jQuery(_).effect("shake",{times:1,distance:5,complete:function(){if(!t.bActive){return}jQuery(".sapUshellGroupItemList").find(".ui-sortable").sortable('enable');var G=sap.ui.getCore().byId("groupListPage"),s=G.getScrollDelegate();if(s&&s._scroller){s._scroller.disable()}_.trigger(b)}},50)},150)}});jQuery.sap.byId(g.sId).bind("mouseup",function(a){clearTimeout(this.fdownTimer);t.bActive=false;if(!sap.ui.Device.system.desktop){var G=sap.ui.getCore().byId("groupListPage"),s=G.getScrollDelegate();if(s&&s._scroller){if(!s._scroller.enabled){s._scroller.enable();s._scroller.scrollTo(s._scroller.absStartX,s._scroller.absStartY)}}}});jQuery.sap.byId(g.sId).bind("mousemove",function(a){clearTimeout(this.fdownTimer);t.bActive=false})},_handleSortableRevert:function(e,u){return 250},_handleSortableStart:function(e,u){var U=this.getView().oGroupList;var a=U.getItems();var t=this;this.sortableInfo={jqGroupPage:jQuery(this.getView().getDomRef()),jqGroupList:jQuery(U.getDomRef())};this.sortableInfo.jqCloneArea=this.sortableInfo.jqGroupPage.find(".sapUshellCloneArea");if(!this.sortableInfo.jqCloneArea.length){this.sortableInfo.jqCloneArea=jQuery("<div id='cloneArea' class='sapUshellCloneArea'></div>").appendTo(this.sortableInfo.jqGroupList)}this.sortableInfo.jqGroupListItems=[];for(var i=0,l=a.length;i<l;i++){var b=a[i].getDomRef();if(b.id==u.item.id)continue;this.sortableInfo.jqGroupListItems.push(jQuery(b))}this.sortableInfo.jqFirstItem=this.sortableInfo.jqGroupListItems[0];this.sortableInfo.fontSize=this.sortableInfo.jqFirstItem.css("font-size");this.sortableInfo.width=this.sortableInfo.jqFirstItem.parent().width();this.sortableInfo.height=this.sortableInfo.jqFirstItem.height()+parseInt(this.sortableInfo.jqFirstItem.css("border-bottom-width"));sap.ui.getCore().getEventBus().publish("launchpad","sortableStart");this.sortableInfo.cloneGroupsArr=[];for(var i=0,l=this.sortableInfo.jqGroupListItems.length;i<l;i++){var j=this.sortableInfo.jqGroupListItems[i];var c=j.clone();var g=t._getGroupTopOffset(j);c.addClass("sapUshellClonedGrouplistItem");j.data("clone",c);c.css("top",g+"px");c.css({"font-size":this.sortableInfo.fontSize,"width":this.sortableInfo.width,"height":this.sortableInfo.height});t.sortableInfo.jqCloneArea.append(c);j.css("visibility","hidden");this.sortableInfo.cloneGroupsArr.push(c)}u.item.startPos=u.item.index();this.oView.oGrouplistDeleteArea.show()},_updateGroupSelection:function(){var m=this.getView().getModel();if(!m||!m.getProperty("/currentState/showPane")){return}if(jQuery(".ui-sortable-helper").length>0){return}if(sap.ui.Device.system.desktop){var n=jQuery("#dashboardPage-cont").scrollTop()}else{var n=this.oDashboard.scrollTop}this._fHandleScroll(n)},_fHandleMobileScroll:function(){var n=this.oDashboard.scrollTop;this._fHandleScroll(n)},_fHandleScroll:function(n){var j=jQuery('#dashboardGroups').find('.sapUshellTileContainer'),o=jQuery('#dashboardGroups').offset(),f=o&&o.top||0,e=o&&o.top,a=1200,c=[],m=this.getView().getModel();if(!j||!o){return}j.each(function(){var b=jQuery(this).parent().offset().top;c.push([b,b+jQuery(this).parent().height()])});if(!m.getProperty("/groupList-skipScrollToGroup")){var w=n+f;jQuery.each(c,function(i,b){if(b[0]<=w&&w<=b[1]){jQuery('#groupList .sapUshellDefaultGroupItem, #groupList .sapUshellGroupListItem').removeClass('sapUshellOver').eq(i).addClass('sapUshellOver')}})}sap.ushell.utils.handleTilesVisibility()},_handleSortableStop:function(e,u){for(var i=0,l=this.sortableInfo.cloneGroupsArr.length;i<l;i++){this.sortableInfo.cloneGroupsArr[i].remove()}this.oView.oGrouplistDeleteArea.hide();var g=sap.ui.getCore().byId(u.item[0].id),t=u.item.index();if(g){if(!g.bDeletionFlag){this._handleGroupMove(e,u)}else{g.bDeletionFlag=false}}for(var i=0,l=this.sortableInfo.jqGroupListItems.length;i<l;i++){this.sortableInfo.jqGroupListItems[i].css("visibility","")}this.jgGroupList.find(".sapMListUl").sortable('cancel');if(!sap.ui.Device.system.desktop){this.bActive=false;this.jgGroupList.find(".sapMListUl").sortable('disable')}if(e.scrollToGroup===undefined||e.scrollToGroup==true){window.setTimeout(jQuery.proxy(function(){this._handleScrollToGroup(this.oView.oGroupList.getItems()[t],true)},this),500)}delete this.sortableInfo;sap.ui.getCore().getEventBus().publish("launchpad","sortableStop")},_handleDrop:function(e,u){var j=jQuery(u);this.oView.oGrouplistDeleteArea.hide();var g=sap.ui.getCore().byId(j.attr("id")),G=g.getParent(),w,r,d=jQuery(".sapUshellDeleteArea_grouplist_functional"),E=sap.ui.getCore().getEventBus(),n=j.index();if(g){if(d.data("groupOver")===true){r=g.getRemovable();E.publish("launchpad",r?"deleteGroup":"resetGroup",{groupId:g.getGroupId()});d.data("groupOver",false)}else{j.startPos=parseInt(j.attr('startPos'));G.removeItem(g,true);G.insertItem(g,n,true);this.getView().getModel().setProperty("/groupList-skipScrollToGroup",true);w={item:j};this._handleGroupMove(e,w);setTimeout(function(){g.firePress()},1)}}},_handleSortableChange:function(e,u){for(var i=0,l=this.sortableInfo.jqGroupListItems.length;i<l;i++){var j=this.sortableInfo.jqGroupListItems[i];var c=j.data("clone");var g=this._getGroupTopOffset(j);if(c){c.stop(true,false);c.animate({top:g+"px"},{duration:250},{easing:"swing"})}}},_handleGroupCreate:function(){var f=jQuery(':focus');if(f){f.blur()}this._publishAsync("launchpad","createGroup",{title:sap.ushell.resources.i18n.getText("new_group_name")})},_handleGroupListItemPress:function(e){var s=e.getSource();var f=e.getParameter("action")==="sapenter";this._handleScrollToGroup(s,false,f);this._updateGroupSelection()},_handleScrollToGroup:function(g,a,f){if(!g){return}var t=this;this.oDashboard.removeEventListener('scroll',t.handleMobileScroll);this._publishAsync("launchpad","scrollToGroup",{group:g,groupChanged:a,focus:f})},_handleScrollAnimationEnd:function(){var t=this;this.oDashboard.addEventListener('scroll',t.handleMobileScroll)},_handleGroupMove:function(e,u){var f=u.item.startPos,t=u.item.index();if(f!==t&&t!==-1){this._publishAsync("launchpad","moveGroup",{fromIndex:f,toIndex:t})}},onCategoryFilter:function(e){var b=sap.ui.getCore().getEventBus(),q=e.getParameter("selectedItem").getText();window.setTimeout(jQuery.proxy(b.publish,b,"catalog","categoryFilter",{category:(q!=="All")?q:null}),1)},_publishAsync:function(c,e,d){var b=sap.ui.getCore().getEventBus();window.setTimeout($.proxy(b.publish,b,c,e,d),1)},_handleGroupListItemOver:function(e){if(this.iOutEventCounter===0&&this.iOverEventCounter===0){this._handleGroupListOver(e)}this.iOutEventFlag=true;var E=sap.ui.getCore().getEventBus();E.publish("grouplist","GroupListItemOver",e);this.iOutEventCounter++},_handleGroupListItemOut:function(e){this.iOutEventCounter--;this.iOutEventFlag=false;var t=this;setTimeout(function(){if(t.iOutEventFlag===false){if(t.iOutEventCounter===0&&t.iOverEventCounter===1){t._handleGroupListOut(e)}}},1);var E=sap.ui.getCore().getEventBus();E.publish("grouplist","GroupListItemOut",e)},_handleGroupListItemDrop:function(e){this.iOutEventCounter=0;this.iOverEventCounter=0;this.iOutEventFlag=false;var E=sap.ui.getCore().getEventBus();E.publish("grouplist","GroupListItemDrop",e)},_handleGroupListOver:function(e){this.iOverEventCounter++;var E=sap.ui.getCore().getEventBus();E.publish("grouplist","GroupListOver",e)},_handleGroupListOut:function(e){this.iOverEventCounter=0;var E=sap.ui.getCore().getEventBus();E.publish("grouplist","GroupListOut",e)},_bindResizeHandler:function(){var r=function(e){var j=jQuery("#groupList"),a=jQuery(".sapMSLITitleOnly"),b=jQuery(".sapUshellGroupLI").find(".sapMInput");a.css("width",(j.width()-parseInt(a.css("padding-left"),10))+"px");b.css("width",(j.width()-(2*parseInt(b.css("margin-left"),10)))+"px")};jQuery(window).unbind("resize",r);jQuery(window).bind("resize",r)}})}());
//Copyright (c) 2013 SAP AG, All Rights Reserved
(function(g){"use strict";sap.m.Link.extend("sap.ushell.renderers.fiori2.search.DataSourcePill",{metadata:{properties:{dataSourceName:"string",},events:{press:{}}},renderer:function(r,c){r.write('<div tabindex=0');r.writeControlData(c);r.addClass("sapUshellDataSourcePill");r.addClass("sapUshellDataSourceListPill");r.writeClasses();r.write(">");r.write('<div class="sapUiUfdShellSearchBoxPillDsName">'+c.getDataSourceName()+'</div>');r.write("</div>")},onclick:function(e){this.firePress()},onkeyup:function(e){if(event.keyCode==13){this.firePress()}}});sap.ui.core.Control.extend("sap.ushell.renderers.fiori2.search.DataSourceList",{metadata:{properties:{"dataSources":{type:"object[]"}},events:{dsPress:{}}},renderer:function(r,c){r.write("<div");r.writeControlData(c);r.addClass("sapUshellDataSourceList");r.writeClasses();r.write('>');var d=sap.ui.Device.media.getCurrentRange(sap.ushell.renderers.fiori2.search.DataSourceList.RANGESET);var n=sap.ushell.renderers.fiori2.search.DataSourceList._columns[d.name];var a=[];for(var i=0;i<n;i++){var h;if(i===0){h="Left"}else if(i===n-1){h="Left"}else{h="Left"}a.push(new sap.m.Column({hAlign:h}))}var b=c.getDataSources();if(b&&b.length!==0){$.each(b,function(i,v){var e=v.label||v.objectName.label||v.objectName.value;if(!e||e==="")e=v.objectName.value;var p=new sap.ushell.renderers.fiori2.search.DataSourcePill({dataSourceName:e,press:function(){c.fireDsPress({ds:v})}}).addStyleClass("sapUshellDataSourcePill");r.renderControl(p)})}r.write("</div>")},_handleMediaChange:function(){this.rerender()},});sap.ushell.renderers.fiori2.search.DataSourceList.RANGESET="DataSourceLayoutRangeSet";sap.ushell.renderers.fiori2.search.DataSourceList._columns={Phone:1,Tablet:2,Desktop:3};sap.ushell.renderers.fiori2.search.DataSourceList.prototype.init=function(){sap.ui.Device.media.initRangeSet(sap.ushell.renderers.fiori2.search.DataSourceList.RANGESET,[500,1024],"px",["Phone","Tablet","Desktop"]);sap.ui.Device.media.attachHandler(this._handleMediaChange,this,sap.ushell.renderers.fiori2.search.DataSourceList.RANGESET)}}(window));
// Copyright (c) 2013 SAP AG, All Rights Reserved
(function(){"use strict";sap.ui.controller("sap.ushell.renderers.fiori2.search.ResultFilterInfo",{onInit:function(){var m=new sap.ui.model.json.JSONModel();m.setData({filter:[]});this.getView().setModel(m,"filter");sap.ui.getCore().getEventBus().subscribe("search",this.searchInvoked,this);sap.ui.getCore().getEventBus().subscribe("searchDataSourceChange",this.dataSourceSelected,this)},onExit:function(){sap.ui.getCore().getEventBus().unsubscribe("search",this.searchInvoked,this);sap.ui.getCore().getEventBus().unsubscribe("searchDataSourceChange",this.dataSourceSelected,this)},dataSourceSelected:function(c,e,d){this.setResultFilterInfo([d])},searchInvoked:function(c,e,d){if(d.dataSource&&d.dataSource.label){this.setResultFilterInfo([d.dataSource])}else{this.setResultFilterInfo([])}},setResultFilterInfo:function(f){var m=this.getView().getModel("filter");if(f.length>0&&f[0].objectName&&(f[0].objectName==="$$ALL$$"||f[0].objectName.value==="$$ALL$$")){f.splice(0,1)}if(f.length>0){sap.ui.getCore().byId("searchResultPage").removeStyleClass("sapSearchResultFilterInfoHidden");this.showCategoryMarker=true;m.setProperty("/filter",f)}else{sap.ui.getCore().byId("searchResultPage").addStyleClass("sapSearchResultFilterInfoHidden");this.showCategoryMarker=false;m.setProperty("/filter",[])}},onBeforeRendering:function(){this.getView().getModel().setProperty("/states/searchResults/showCategoryMarker",this.showCategoryMarker)}})}());
//Copyright (c) 2013 SAP AG, All Rights Reserved
(function(){"use strict";sap.ui.jsview("sap.ushell.renderers.fiori2.search.ResultFilterInfo",{createContent:function(c){return new sap.m.HBox({visible:{path:"/currentState/showCurtainPane",formatter:function(s){return!s}},items:{path:"filter>/filter",factory:function(i,C){var f=new sap.m.HBox(),F=C.getModel().getProperty("/filter");if(F.indexOf(C.getObject())===0){f.addItem(new sap.m.Text({text:{path:"i18n>searchedIn"},layoutData:new sap.m.FlexItemData({alignSelf:sap.m.FlexAlignSelf.Center})}))}return f.addItem(new sap.m.Text({text:{path:"filter>label"},layoutData:new sap.m.FlexItemData({alignSelf:sap.m.FlexAlignSelf.Center})}).addStyleClass("sapSearchResultFilterInfoLabel"))}}}).addStyleClass("sapSearchResultFilterInfo")},getControllerName:function(){return"sap.ushell.renderers.fiori2.search.ResultFilterInfo"}})}());
// // Copyright (c) 2013 SAP AG, All Rights Reserved
// //Copyright (c) 2013 SAP AG, All Rights Reserved
//Copyright (c) 2013 SAP AG, All Rights Reserved
(function(g){"use strict";sap.ui.core.Control.extend("SearchResultListWithDetail",{metadata:{properties:{},aggregations:{"resultList":{type:"sap.ui.core.Control",multiple:false},"preview":{type:"sap.ui.core.Control",multiple:false}}},renderer:function(r,c){r.write("<div");r.writeControlData(c);r.addClass("searchResultListWithDetail");r.writeClasses();r.write('>');r.write('<div class="searchLayout-left">');if(c.getResultList()){r.renderControl(c.getResultList())}r.write('</div>');r.write('<div');r.addClass("searchLayout-right");r.writeClasses();r.write('>');if(c.getPreview()){r.renderControl(c.getPreview())}r.write('</div>');r.write("</div>")},onAfterRendering:function(){var s=this;var p=$(this.getDomRef()).find('.searchResultListItemDetail');var h=$("#searchPage-cont")?$("#searchPage-cont").offset().top:$("#searchResultPage-cont").offset().top;var u=function(){if($("#searchResultPage-scroll").length>0||$("#searchPage-scroll").length>0){var r=$('.searchResultListWithDetail');if(r.length>0){if(r.offset().top-h<0){p.css('margin-top',-r.offset().top+h)}else{p.css('margin-top',0)}}}d()};var d=function(){if(s.lastScrollTimeout){window.clearTimeout(s.lastScrollTimeout)}s.lastScrollTimeout=setTimeout(function(){u()},1000)};$("#searchResultPage-cont").on("scroll",u);$("#searchResultPage-cont").bind('touchmove',function(e){e.preventDefault();u()});$("#searchPage-cont").on("scroll",u);$("#searchPage-cont").bind('touchmove',function(e){e.preventDefault();u()});u()}});sap.ui.core.Control.extend("SearchLayout",{metadata:{properties:{showMainHeader:{type:"boolean",defaultValue:false},enableNoResults:{type:"boolean",defaultValue:false},searchTerm:"string",topHeader:"string",topCount:"int",bottomHeader:"string",bottomHeaderIsUnspecific:{type:"boolean",defaultValue:true},bottomCount:"int",searchBusy:{type:"boolean",defaultValue:false},showBottomList:{type:"boolean",defaultValue:true}},aggregations:{"topList":{type:"sap.ui.core.Control",multiple:false},"bottomList":{type:"sap.ui.core.Control",multiple:false},"facets":{type:"sap.ui.core.Control",multiple:false}}},renderer:function(r,c){c.renderResultPage=false;c.renderNoResultPage=false;r.write("<div");r.writeControlData(c);r.addClass("searchLayout");r.writeClasses();r.write('>');this.busy=new sap.m.BusyIndicator({size:"50px"});this.busy.addStyleClass('searchBusyIcon');this.busy.addStyleClass('hidden');if(c.getSearchBusy()===true){this.busy.removeStyleClass('hidden');r.write("<div");r.addClass("searchBusy");r.writeClasses();r.write('>');r.renderControl(this.busy);r.write("</div>");r.write("<div");r.addClass("searchBusyBG");r.writeClasses();r.write('>');r.write("</div>");c.renderResultPage=false;c.renderNoResultPage=false}var t=0;if(c.getTopCount())t=t+c.getTopCount();if(c.getBottomCount())t=t+c.getBottomCount();var s=t===0&&c.getEnableNoResults();if(c.getShowMainHeader()===true&&c.getSearchBusy()===false){r.write('<div class="searchLayout-mainHeader">');r.renderControl((new sap.m.Label({text:sap.ushell.resources.i18n.getText("searchResults")})).addStyleClass('searchLayout-mainHeaderName'));r.renderControl((new sap.m.Label({text:'('+t+')'})).addStyleClass('searchLayout-mainHeaderCount'));r.write('</div>')}if(s&&c.getSearchBusy()===false){var e=$('<div>').text(c.getSearchTerm()).html();r.write('<div class="no-result"><div class="no-result-icon">');r.writeIcon(sap.ui.core.IconPool.getIconURI("travel-request"));r.write('</div><div class="no-result-text">');r.write('<div class="no-result-info">'+sap.ushell.resources.i18n.getText("no_results_info").replace('&1',e)+'</div>');r.write('<div class="no-result-tips">'+sap.ushell.resources.i18n.getText("no_results_tips")+'</div> ');r.write('</div></div>');c.renderNoResultPage=true;c.renderResultPage=false}if(c.getFacets()){r.write('<div class="searchLayout-facets">');r.renderControl(c.getFacets());r.write('</div>')}if(c.getTopList()&&c.getTopHeader()&&c.getSearchBusy()===false){r.write('<div class="searchLayout-bucket">');if(c.getTopHeader()&&c.getTopList()){r.renderControl((new sap.m.Label({text:c.getTopHeader()})).addStyleClass('searchLayout-bucketName'))}if(c.getTopCount())r.renderControl((new sap.m.Label({text:'('+c.getTopCount()+')'})).addStyleClass('searchLayout-bucketCount'));r.write('</div>')}if(c.getTopList()&&c.getSearchBusy()===false){r.renderControl(c.getTopList())}if(c.getShowBottomList()&&c.getBottomList()&&c.getBottomHeader()&&c.getSearchBusy()===false){if(c.getBottomHeaderIsUnspecific()===true&&c.getTopCount()===0||s){}else{r.write('<div class="searchLayout-bucket">');if(c.getBottomHeader()&&c.getBottomList())r.renderControl((new sap.m.Label({text:c.getBottomHeader()})).addStyleClass('searchLayout-bucketName'));if(c.getBottomCount())r.renderControl((new sap.m.Label({text:'('+c.getBottomCount()+')'})).addStyleClass('searchLayout-bucketCount'));r.write('</div>')}}if(c.getShowBottomList()&&c.getBottomList()){r.renderControl(c.getBottomList())}if(t!==0){c.renderResultPage=true}else{c.renderResultPage=false}r.write("</div>")}})}(window));(function(g){"use strict";var s=g.sap;var c=g.console;var T=function(){this.init.apply(this,arguments)};T.prototype={init:function(t){this.text=t||"";this.lower=this.text.toLocaleLowerCase();this.globalBold=false;this.bold=new Array(this.text.length);for(var i=0;i<this.bold.length;++i){this.bold[i]=false}},highlight:function(t){if(t===""||this.lower==="")return;t=t.toLowerCase();var a=-1;while(a<this.lower.length){a=this.lower.indexOf(t,a);if(a>=0){for(var i=a;i<a+t.length;++i){this.bold[i]=true;this.globalBold=true}a+=t.length}else{break}}},render:function(){if(!this.globalBold){return this.text}var b=false;var r=[];var a=0;for(var i=0;i<this.text.length;++i){if(b&&!this.bold[i]||!b&&this.bold[i]){r.push(this.text.substring(a,i));if(b){r.push("</b>")}else{r.push("<b>")}b=!b;a=i}}r.push(this.text.substring(a,i));if(b){r.push("</b>")}return r.join("")}};s.ui.model.json.JSONModel.extend("sap.ushell.renderers.fiori2.search.SearchModel",{searchInit:function(){var a=this;a.sina=s.ushell.Container.getService("Search").getSina();var p={templateFactsheet:true};a.suggestionid=0;a.suggestionQuery=a.sina.createSuggestionQuery();this.oUserRecentsService=s.ushell.Container.getService("UserRecents");a.query=a.sina.createPerspectiveQuery(p);a.searchRequestID=0;a.setProperty('/dataSourceName','');a.setProperty('/dataSourceLabelRaw','');a.setProperty('/searchBoxTerm','');a.setProperty('/headSelectedDataSource',{});a.setProperty('/facets',{});a.setProperty('/facets/dataSources',[]);a.setProperty('/facets/attributes',[]);a.setProperty('/results',[]);a.setProperty('/detail',{});a.setProperty('/detail',{});a.setProperty('/detail/title',"");a.setProperty('/detail/titleUrl',"");a.setProperty('/detail/type',"");a.setProperty('/detail/data',{});a.setProperty('/count',0);a.setProperty('/isResultAppended',false);a.setProperty('/attributeFacetFilterLists',[]);a.resetDataSource(false);a.resetDataSources(false);a.resetAttributeFacets(false);a.resetFilterConditions(false);a.dsSuggestionQuery=a.sina.createPerspectiveQuery(p);if(jQuery.device.is.phone){this.appSuggestionLimit=3;this.normalAppSuggestionLimit=3;this.singleAppSuggestionLimit=5;this.normalSuggestionLimit=5;this.dataSourceSuggestionLimit=5}else{this.appSuggestionLimit=3;this.normalAppSuggestionLimit=3;this.singleAppSuggestionLimit=7;this.normalSuggestionLimit=7;this.dataSourceSuggestionLimit=7}if(s.ui.getCore().byId("mainShell").getViewData().config.searchBusinessObjects){a.setProperty('/isNormalSearchEnable',s.ui.getCore().byId("mainShell").getViewData().config.searchBusinessObjects!=="hidden")}else{a.setProperty('/isNormalSearchEnable',true)}a.setProperty("/tiles",[]);var d=[];if(a.isNormalSearchEnable()){d.push({dataSourceLabel:s.ushell.resources.i18n.getText("label_all"),label:s.ushell.resources.i18n.getText("label_all"),labelRaw:"$$ALL$$"})}d.push({dataSourceLabel:s.ushell.resources.i18n.getText("label_apps"),label:s.ushell.resources.i18n.getText("label_apps"),labelRaw:"$$APP$$"});a.setProperty("/connectors",d);var h=function(b){var e=[];e.push({dataSourceLabel:s.ushell.resources.i18n.getText("label_all"),label:s.ushell.resources.i18n.getText("label_all"),labelRaw:"$$ALL$$"});e.push({dataSourceLabel:s.ushell.resources.i18n.getText("label_apps"),label:s.ushell.resources.i18n.getText("label_apps"),labelRaw:"$$APP$$"});for(var i=0;i<b.length;i++){var f=b[i];if(f.DESCRIPTION&&f.OBJECT_NAME){var j;if(f.DESCRIPTION.value!==null){j={dataSourceLabel:a.getHighlightingForTerms(f.DESCRIPTION.value,"*"),label:f.DESCRIPTION.value,labelRaw:f.OBJECT_NAME.value,}}else{j={dataSourceLabel:a.getHighlightingForTerms(f.DESCRIPTION.value,"*"),label:f.OBJECT_NAME.value,labelRaw:f.OBJECT_NAME.value,}}if(j.label&&j.labelRaw){e.push(j)}}}a.setProperty("/connectors",e)};if(a.isNormalSearchEnable()){a.getConnectors(h,function(){})}},isNormalSearchEnable:function(){return this.getProperty("/isNormalSearchEnable")},doSuggestion:function(){var a=this;if(a.suggestionTimeoutId){g.clearTimeout(a.suggestionTimeoutId)}a.suggestionTimeoutId=g.setTimeout(function(){var b=a.getProperty("/searchBoxTerm");a.setProperty("/appSection",[]);a.setProperty("/dataSourceSection",[]);a.setProperty("/suggestSection",[]);a.setProperty("/mixedSection",[]);a.suggestionid=a.suggestionid+1;if(a.isNormalSearchEnable()){if((b.length>=3||!a.isAllCategory())&&!a.isAppCategory()){a.doNormalSuggestions(b,a.suggestionid)}if(!a.isAppCategory()){a.appSuggestionLimit=a.normalAppSuggestionLimit}else{a.appSuggestionLimit=a.singleAppSuggestionLimit}if(a.isAllCategory()||a.isAppCategory()){a.doAppSuggestions(b,a.suggestionid)}if(a.isAllCategory()){a.doDataSourceSuggestions(b)}}else{a.appSuggestionLimit=a.singleAppSuggestionLimit;a.doAppSuggestions(b,a.suggestionid)}},400)},isAllCategory:function(){var d=this.getProperty("/dataSource");if((d&&d.objectName&&d.objectName.value&&d.objectName.value.toLowerCase()==="$$all$$")||(d&&d.objectName&&d.objectName.toLowerCase&&d.objectName.toLowerCase()==="$$all$$"))return true;return false},isAppCategory:function(){var d=this.getProperty("/dataSource");if(d&&d.objectName&&d.objectName.value==="$$APP$$")return true;return false},doAppSuggestions:function(a,b){var d=this;var q={searchTerm:a,top:d.appSuggestionLimit};var e=s.ushell.Container.getService("Search").queryApplications(q).done(function(r){var R=r.getElements();var u=[];if(b!==d.suggestionid)return;for(var i=0;i<R.length;++i){var f=R[i];var h={pos:i,label:f.title,icon:f.icon,targetURL:f.url,labelRaw:"",mixedLabel:f.title};u.push(h)}d.setProperty("/appSection",u);var k=d.getProperty("/appSection");var l=d.getProperty("/dataSourceSection");var n=d.getProperty("/suggestSection");var m=k.concat(l).concat(n);for(var j=0;j<m.length;j++){var o=m[j];if(d.isAllCategory()&&o.dataSourceLabel){o.mixedLabel=o.label+" <i>in "+o.dataSourceLabel+"</i>"}else{o.mixedLabel=o.label}}d.setProperty("/mixedSection",m)})},doDataSourceSuggestions:function(a){var b=this;b.suggestDataSources(a,2)},suggestDataSources:function(a,l){var b=this;var d=a.replace(/([.+?^=!:${}()|\[\]\/\\])/g,"\\$1");d=d.replace(/\*/g,".*");var e=new RegExp('\\b'+d,'i');var t=b.tokenizeSuggestionTerm(a);var f=b.getProperty("/connectors");if(f){var h=[];for(var i=0;i<f.length;++i){var j=f[i];if(e.test(j.label)&&j.label.toLowerCase()!=='all'&&j.label.toLowerCase()!=='apps'){var k={};k.label='<i>'+s.ushell.resources.i18n.getText("searchIn")+': </i>'+b.getHighlightingForTerms(j.label,t);k.labelRaw=j.labelRaw;k.mixedLabel=k.label;k.suggestType="dataSourceSuggest";h.push(k);if(h.length===l){break}}}b.setProperty("/dataSourceSection",h);var m=b.getProperty("/appSection");var n=b.getProperty("/dataSourceSection");var o=b.getProperty("/suggestSection");var p=m.concat(n).concat(o);b.setProperty("/mixedSection",p)}},getConnectors:function(o,a){var b=this;var d=b.sina.sinaSystem();d.getServerInfo().done(function(){var e;if(d&&d.properties&&d.properties.rawServerInfo&&d.properties.rawServerInfo.ServerInfo)e=d.properties.rawServerInfo.ServerInfo.SystemId;var f=d.properties.rawServerInfo.ServerInfo.Client;b.searchConnector=e+f+"~ESH_CONNECTOR~";var h=b.sina.createDataSource({objectName:b.searchConnector,packageName:"ABAP",type:"Connector",label:""});b.dsSuggestionQuery.setDataSource(h);b.dsSuggestionQuery.setSearchTerms("*");b.dsSuggestionQuery.setTop(1000);b.dsSuggestionQuery.setOrderBy({orderBy:'DESCRIPTION',sortOrder:'ASC'});b.dsSuggestionQuery.getResultSet(jQuery.proxy(function(r){var i=r.searchresultset.getElements();o(i)},this),function(i){a(i)})})},getDataSourceSuggestions:function(a,o,b){var d=this;var e=d.sina.sinaSystem();e.getServerInfo().done(function(){var f;if(e&&e.properties&&e.properties.rawServerInfo&&e.properties.rawServerInfo.ServerInfo)f=e.properties.rawServerInfo.ServerInfo.SystemId;var h=e.properties.rawServerInfo.ServerInfo.Client;d.searchConnector=f+h+"~ESH_CONNECTOR~";var i=d.sina.createDataSource({objectName:d.searchConnector,packageName:"ABAP",type:"Connector",label:""});d.dsSuggestionQuery.setDataSource(i);d.dsSuggestionQuery.setSearchTerms(a);d.dsSuggestionQuery.setTop(1000);d.dsSuggestionQuery.setOrderBy({orderBy:'DESCRIPTION',sortOrder:'ASC'});d.dsSuggestionQuery.getResultSet(jQuery.proxy(function(r){var j=r.searchresultset.getElements();o(j)},this),function(j){b(j)})})},doNormalSuggestions:function(a,b){var d=this;d.suggestionQuery.setSuggestionTerm(a);d.suggestionQuery.setDataSource(d.getProperty("/dataSource"));d.suggestionQuery.getResultSet(function(r){if(b!==d.suggestionid)return;var e=r.getElements();var f=[];var t=d.tokenizeSuggestionTerm(a);for(var i=0;i<e.length;i++){var h=e[i];var j;if(i===0){j=h.labelRaw}if(h.attribute.value!=="$$AllAttributes$$"){continue}if(d.isAllCategory()){if(h.dataSource.getObjectName().value!=="$$AllDataSources$$"){if(j!==h.labelRaw){continue}h.dataSourceLabel=d.getLabelForSinaDataSource(h.dataSource)}else{h.dataSource=d.sina.createDataSource({objectName:"$$ALL$$",packageName:"ABAP",type:"Category",label:"All Categories"})}}else{if(h.dataSource.getObjectName().value!=="$$AllDataSources$$"){continue}else{h.dataSource=d.sina.createDataSource({objectName:"$$ALL$$",packageName:"ABAP",type:"Category",label:"All Categories"})}h.dataSource=d.getProperty("/dataSource");h.dataSourceLabel=d.getLabelForSinaDataSource(h.dataSource)}h.label=d.getHighlightingForTerms(h.labelRaw,t);f.push(h);if(d.normalSuggestionLimit===f.length)break}d.setProperty("/suggestSection",f);var k=d.getProperty("/appSection");var l=d.getProperty("/dataSourceSection");var n=d.getProperty("/suggestSection");var m=k.concat(l).concat(n);for(var i=0;i<m.length;i++){var o=m[i];if(d.isAllCategory()&&o.dataSourceLabel){o.mixedLabel=o.label+" <i>in "+o.dataSourceLabel+"</i>"}else{o.mixedLabel=o.label}}d.setProperty("/mixedSection",m)})},addTitle:function(t,i){if(i.length!==0){i.unshift({isTitle:true,title:t})}},createAllDataSource:function(){return this.sina.createDataSource({objectName:{label:"$$ALL$$",value:"$$ALL$$"},packageName:{label:"ABAP",value:"ABAP"},type:"Category",label:"All Categories"})},createAppDataSource:function(){return this.sina.createDataSource({objectName:{label:"$$APP$$",value:"$$APP$$"},packageName:"",type:"",label:"App Category"})},getLabelForSinaDataSource:function(d){var a=d.label||d.objectName.label||d.objectName.value;return a},getHighlightingForTerms:function(t,a){var m=new T(t);for(var j=0;j<a.length;++j){var b=a[j];m.highlight(b)}return m.render()},tokenizeSuggestionTerm:function(a){var t=a;var b=t.split(" ");var n=[];$.each(b,function(i,d){d=$.trim(d);if(d.length>0){var e=d.split("*");$.each(e,function(i,f){if(f.length>0){n.push(f)}})}});return n},correctServerErrorHighlighting:function(a,t){var m;var b=/<b>[^<]+<\/b>/igm;while(m=b.exec(a)){var d=m.index;var e=b.lastIndex-4;var S=a.substring(d+3,e);var f=new T(S);for(var i=0;i<t.length;++i){m={};var h=t[i];f.highlight(h)}S=f.render();a=a.substring(0,d)+S+a.substring(e+4)}return a},buildSuggestions:function(S,a){var r={};var t=a;var b=t.split(" ");var n=[];$.each(b,function(i,e){e=$.trim(e);if(e.length>0){var f=e.split("*");$.each(f,function(i,h){if(h.length>0){h=h.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");n.push(h)}})}});t=n;var d=/<b>[^<]+<\/b>/igm;jQuery.each(S,function(i,v){if(v.filter.attribute!=="$$AllAttributes$$"){return}if(!r[v.labelRaw]){r[v.labelRaw]=v;r[v.labelRaw].categories=[];r[v.labelRaw].visible=true;r[v.labelRaw].type="suggestion"}var e=r[v.labelRaw].label;if(e.length===0){r[v.labelRaw].label=v.labelRaw;e=r[v.labelRaw].label}var m;while(m=d.exec(e)){var f=m.index;var h=d.lastIndex-4;var j=e.substring(f+3,h);var k=new T(j);for(i=0;i<t.length;++i){m={};var l=t[i];var o=new RegExp(l,"ig");if(j!==l){var p=j.match(o);if(p&&p instanceof Array&&p.length>0){k.highlight(l)}}}j=k.render();e=e.substring(0,f)+j+e.substring(h+4)}r[v.labelRaw].label=e;if(v.dataSource.getObjectName().value!=="$$AllDataSources$$"){r[v.labelRaw].categories.push({label:v.dataSource.getObjectName().label,data:v})}});return jQuery.map(r,function(v,k){return[v]})},addFilterCondition:function(a,o,v,f){var b=this;b.query.addFilterCondition(a,o,v);if(f||f===undefined){b._searchFireQuery()}},addFilterConditionGroup:function(a,f){var b=this;b.query.getFilter().addFilterConditionGroup(a);if(f||f===undefined){b._searchFireQuery()}},resetFilterConditions:function(f){var a=this;a.query.resetFilterConditions();a.query.addFilterCondition('$$RenderingTemplatePlatform$$','=','html');a.query.addFilterCondition('$$RenderingTemplateTechnology$$','=','Tempo');a.query.addFilterCondition('$$RenderingTemplateVariant$$','=','');a.query.addFilterCondition('$$RenderingTemplateType$$','=','ItemDetails');a.query.addFilterCondition('$$RenderingTemplateType$$','=','ResultItem');if(f||f===undefined){a._searchFireQuery()}},resetAttributeFacets:function(f){var a=this;a.setProperty('/facets/attributes',[]);if(f||f===undefined){a._searchFireQuery()}},getDataSources:function(){var a=this;return a.getProperty("/facets/dataSources")},resetDataSources:function(f){var a=this;a.setProperty('/facets/dataSources',[]);if(f||f===undefined){a._searchFireQuery()}},getResultList:function(){var a=this;return a.perspective.getSearchResultSet()},getFacets:function(){var a=this;return a.perspective.getChartFacets()},getFilter:function(){var a=this;return a.query.getFilter()},setFilter:function(f,a){var b=this;b.query.setFilter(f);if(a||a===undefined){b._searchFireQuery()}},getTop:function(){var a=this;return a.query.getTop()},setTop:function(t,f){var a=this;a.query.setTop(t);if(f||f===undefined){a._searchFireQuery()}},getSkip:function(){var a=this;return a.query.getSkip()},setSkip:function(a,f){var b=this;b.query.setSkip(a);if(f||f===undefined){b._searchFireQuery()}},resetDataSource:function(f){var a=this;if(s.bc===undefined)return;var d=a.sina.createDataSource({objectName:"$$ALL$$",packageName:"ABAP",type:"Category",label:"All Categories"});a.setDataSource(d,f)},getDataSource:function(){var a=this;return a.query.getDataSource()},getDataSourceJson:function(){var a=this;var d=a.getProperty("/dataSource");var j={"SchemaName":{"label":d.getSchemaName().label,"value":d.getSchemaName().value},"PackageName":{"label":d.getPackageName().label,"value":d.getPackageName().value},"ObjectName":{"label":d.getObjectName().label,"value":d.getObjectName().value}};if(d.getType().value){j.Type=d.getType().value}return j},setDataSource:function(d,f){var a=this;d=a.sina.createDataSource(d);var b=d.getLabel();a.setProperty('/dataSourceName',b);a.setProperty('/dataSourceLabelRaw',d.objectName.value);a.setSkip(0,false);a.setProperty("/dataSource",d);if(a.isAllCategory()){a.setProperty('/dataSourceName',"");a.setProperty('/dataSourceLabelRaw',"$$ALL$$")}this.oUserRecentsService.noticeDataSource(d);if(f||f===undefined){a._searchFireQuery()}},getSearchTerm:function(){var a=this;return a.getProperty("/searchBoxTerm")},setSearchTerm:function(a,f){var b=this;b.setProperty("/searchBoxTerm",a);if(f||f===undefined){b._searchFireQuery()}},getResultsForDataSource:function(d,r){var a=[];for(var i=0;i<r.length;i++){var b=r[i];var e=b.$$DataSourceMetaData$$;if(d.objectName.value===e.objectName.value){a.push(b)}}return a},_searchFireQuery:function(){var a=this;if(!a.sina){jQuery.sap.log.info("Current Search adapter does not support Sina queries");return}var b=a.getProperty('/searchBoxTerm');var d=a.getProperty("/dataSource");s.ui.getCore().getEventBus().publish("search",{searchTerm:b,dataSource:d});if(a.getSkip()>0&&a.query.getSearchTerms()===b&&a.query.getDataSource().equals(d)){a.setProperty("/isResultAppended",true)}else{a.setProperty("/results",[]);a.setProperty("/isResultAppended",false)}a.query.setSearchTerms(b);a.query.setDataSource(d);a.searchRequestID=a.searchRequestID+1;var e=a.searchRequestID;s.ui.getCore().getEventBus().publish("searchStarted");var p=2;var f=function(){if(!--p){s.ui.getCore().getEventBus().publish("allSearchFinished")}};a.setProperty("/tiles",[]);if(a.isAllCategory()||a.isAppCategory()){var h={searchTerm:a.getProperty('/searchBoxTerm'),searchInKeywords:true};s.ushell.Container.getService("Search").queryApplications(h).done(function(r){if(e!==a.searchRequestID){jQuery.sap.log.debug("Searchrequest deprecated");return}var m=[];var t=r.getElements();a.setProperty("/tiles",t);s.ui.getCore().getEventBus().publish("appSearchFinished",r)})}else{s.ui.getCore().getEventBus().publish("appSearchFinished")}f();a.perspective=a.getEmptyPerspective();if(a.isNormalSearchEnable()&&!a.isAppCategory()){var j=a.query.getResultSet();j.always(function(i){if(this.state()!=="resolved"){i=a.getEmptyPerspective()}if(e!==a.searchRequestID){jQuery.sap.log.debug("Searchrequest deprecated");return}a.perspective=i;a._afterSearchPrepareResultList(i,a.getProperty("/isResultAppended"));s.ui.getCore().getEventBus().publish("searchFinished",{append:a.getProperty("/isResultAppended"),resultset:i})});j.fail(function(k){var l=["ESH_FED_MSG016"];if(k&&k.responseText){var m=true;var n=jQuery.parseJSON(k.responseText);var o='Search Error: ';var q='';if(n.Error){if(n.Error.Message){o+=''+n.Error.Message}if(n.Error.Code){o+=' (Code '+n.Error.Code+').'}}if(n.ErrorDetails){q+='';for(var i=0;i<n.ErrorDetails.length;i++){q+=n.ErrorDetails[i].Message+' (Code '+n.ErrorDetails[i].Code+')';if(l.indexOf(n.ErrorDetails[i].Code)!==-1){m=false}}}jQuery.sap.log.error(o+' Details: '+q);if(m){jQuery.sap.require("sap.ca.ui.message.message");s.ca.ui.message.showMessageBox({type:s.ca.ui.message.Type.ERROR,message:o,details:q})}}});j.always(function(i){f()})}else{f()}},getEmptyPerspective:function(r){return{getSearchResultSet:function(){return{getElements:function(){return[]},totalcount:0}}}},_searchGetGenericResults:function(r){function d(h){var A={imageUrl:'',name:''};for(var p in h){if(h[p].label&&h[p].value){if(h[p].value&&jQuery.type(h[p].value)==='string'&&(h[p].value.split('.').pop()==='jpg'||h[p].value.split('.').pop()==='png')){A.imageUrl=h[p].value;A.name=p;return A}}}return A}var m=function(w,a){var l=w.length;while(l--){if(w[l].labelRaw===a.labelRaw&&a!==undefined){a.value=w[l].value;a.whyfound=true;w.splice(l,1)}}};var e=function(a,b){return a.displayOrder-b.displayOrder};var f=[];for(var i=0;i<r.length;i++){var h=r[i];var u='';var j=h.$$RelatedActions$$;for(var k in j){if(j[k].type==="Navigation"){u=j[k].uri}}var w=h.$$WhyFound$$||[];var n=[];var o=[];var t='';for(var p in h){if(h[p].label&&h[p].$$MetaData$$){var q=h[p].$$MetaData$$.presentationUsage||[];if(q&&q.length>0){if(q.indexOf("Title")>-1&&h[p].value){m(w,h[p]);t=t+" "+h[p].value}if(q.indexOf("Summary")>-1){n.push({property:p,displayOrder:h[p].$$MetaData$$.displayOrder})}else if(q.indexOf("Detail")>-1){o.push({property:p,displayOrder:h[p].$$MetaData$$.displayOrder})}}}}n.sort(e);o.sort(e);var v=n.concat(o);var x=1;var y={};var A=d(h);y.imageUrl=A.imageUrl;y.dataSourceName=this._highlight(h.$$DataSourceMetaData$$.label);y.uri=u;y.$$Name$$='';for(var z=0;z<v.length;z++){var B=v[z].property;if(B!==A.name){m(w,h[B]);y["attr"+x+"Name"]=h[B].label;y["attr"+x]=h[B].value;if(h[B].whyfound){y["attr"+x+"Whyfound"]=h[B].whyfound}x=x+1}}y.$$Name$$=t.trim();y.numberofattributes=v.length;y.title=h.title;y.whyfounds=w;f.push(y)}return f},_highlight:function(t){var a=this.query.filter.searchTerms;a=a.replace(new RegExp("[*]","g"),"");a=a.split(" ");var n=[];a=$.each(a,function(i,b){b=$.trim(b);if(b.length>0){n.push(b)}});a=n;var m=new T(t);for(var i=0;i<a.length;++i){var b=a[i];m.highlight(b)}return m.render()},_afterSearchPrepareResultList:function(r,a){var b=this;var v=b.getProperty("/results");var d;if(a){v.pop()}var e=r.getSearchResultSet().getElements();e=b._searchGetGenericResults(e);d=v.concat(e);if(d.length<r.getSearchResultSet().totalcount){var f={};f.type="footer";d.push(f)}b.setProperty("/resultListHeading",s.ushell.resources.i18n.getText("searchResults"));b.setProperty("/count",r.getSearchResultSet().totalcount);b.setProperty("/results",d);if(window.f2p)window.f2p.add(window.f2p.m.endSearch,{st:""})},mockScopes:function(){var a=[{label:'Supplier',labelRaw:'Q7D004~VENDOR_H~',objectName:{label:'Supplier',value:'Q7D004~VENDOR_H~'},packageName:{label:"",value:""},schemaName:{label:"",value:""}},{label:'Goods Issue',labelRaw:'Q7D004~GOODS_ISSUE_H~',objectName:{label:'Goods Issue',value:'Q7D004~GOODS_ISSUE_H~'},packageName:{label:"",value:""},schemaName:{label:"",value:""}},{label:'Material',labelRaw:'Q7D004~MATERIAL_H~',objectName:{label:'Material',value:'Q7D004~MATERIAL_H~'},packageName:{label:"",value:""},schemaName:{label:"",value:""}},{label:'Purchasing Info Record',labelRaw:'Q7D004~PURCHASE_INFO_REC_H~',objectName:{label:'Purchasing Info Record',value:'Q7D004~PURCHASE_INFO_REC_H~'},packageName:{label:"",value:""},schemaName:{label:"",value:""}},{label:'Purchase Order',labelRaw:'Q7D004~PURCHASE_ORDER_H~',objectName:{label:'Purchase Order',value:'Q7D004~PURCHASE_ORDER_H~'},packageName:{label:"",value:""},schemaName:{label:"",value:""}},{label:'Sales Order',labelRaw:'Q7D004~SALES_ORDER_H~',objectName:{label:'Sales Order',value:'Q7D004~SALES_ORDER_H~'},packageName:{label:"",value:""},schemaName:{label:"",value:""}}];return a},_searchInvoked:function(C,e,d){var a=this;if(window.f2p){window.f2p.add(window.f2p.m.startSearch,{st:d.searchTerm})}if(d.searchTerm.toLowerCase().indexOf(a.getSearchTerm().toLowerCase())===-1){a.resetDataSource(false)}a.setSearchTerm(d.searchTerm,false);if(d.dataSource){a.setDataSource(d.dataSource,false)}a.setSkip(0,false);a.setTop(10)},_afterSearchPrepareFacets:function(){var a=this;var f=a.getFacets();var d=f.filter(function(e){return e.facetType==="datasource"});a._afterSearchPrepareDataSourceFacet(d);var b=f.filter(function(e){return e.facetType==="attribute"});a._afterSearchPrepareAttributeFacet(b)},_afterSearchPrepareDataSourceFacet:function(d){var a=this;var b=a.getProperty("/facets/dataSources");if(d.length>0){d=d[0];if(d.query.resultSet&&d.query.resultSet.elements&&d.query.resultSet.elements.length>0){for(var i=0;i<d.query.resultSet.elements.length;i++){var e={id:d.query.resultSet.elements[i].dataSource.label+(i+1),text:d.query.resultSet.elements[i].dataSource.label,count:d.query.resultSet.elements[i].valueRaw,dataSource:d.query.resultSet.elements[i].dataSource,selected:a.getDataSource()===d.query.resultSet.elements[i].dataSource};b.push(e)}}}a.setProperty("/facets/dataSources",b)},_afterSearchPrepareAttributeFacet:function(a){var b=this;function f(m){var r=false;for(var i=0,l=m.items.length;i<l;i++){var n=m.items[i];if(n.selected){r=true;break}}return r}var d=b.getProperty("/facets/attributes").filter(f);for(var i=0,l=a.length;i<l;i++){var e={title:a[i].title,dimension:a[i].dimension,items:[],allCount:0};for(var j=0,h=a[j].query.resultSet.elements.length;j<h;j++){var m=a[i].query.resultSet.elements[j];var n={text:m.label,count:m.valueRaw,filterCondition:m.labelRaw,selected:false};e.items.push(n);e.allCount+=n.count}var o=false;for(var k=0,p=d.length;k<p;k++){var q=d[k];if(q.title===e.title&&q.dimension===e.dimension){o=true;break}}if(!o){d.push(e)}}b.setProperty("/facets/attributes",d)}})})(window);
// Copyright (c) 2013 SAP AG, All Rights Reserved
(function(){"use strict";sap.ui.core.Control.extend("SearchResultListItemButton",{metadata:{properties:{status:"string",},events:{press:{}}},renderer:function(r,c){r.write('<a href="javascript:void(0);"');r.writeControlData(c);r.addClass("searchResultListItemButton");r.writeClasses();r.write(">");var o=new sap.ui.core.Icon({src:sap.ui.core.IconPool.getIconURI("open-command-field")});r.renderControl(o);r.write("</a>")},onclick:function(e){this.firePress()}});sap.m.ListItemBase.extend("SearchResultListItem",{metadata:{properties:{title:"string",titleUrl:"string",type:"string",imageUrl:"string",status:"string",previewButton:"string",data:"object",visibleAttributes:"int"},events:{navigate:{},previewOpen:{},previewClose:{}}},renderer:function(r,c){var l,v,a,b;r.write("<div");r.writeAttribute("tabindex","-1");r.writeControlData(c);if(c.getStatus()==="open"||c.getData()['selected']===true){r.addClass("searchResultListItem-open")}r.addClass("searchResultListItem");r.writeClasses();r.write(">");r.write('<div class="searchResultListItem-main"><div>');r.write('<div class="searchResultListItem-left">');if(c.getImageUrl()){r.write('<div class="searchResultListItem-image searchResultListItem-image1" style="background-image:url(\'');r.write(c.getImageUrl());r.write('\')"></div>')}var t=new sap.m.Text({text:c.getTitle(),href:c.getTitleUrl()});t.setTooltip((''+c.getTitle()).replace(/<b>/gi,'').replace(/<\/b>/gi,''));t.addStyleClass("searchResultListItem-title");r.renderControl(t);var d=new sap.m.Text({text:c.getType()});d.setTooltip((''+c.getType()).replace(/<b>/gi,'').replace(/<\/b>/gi,''));d.addStyleClass("searchResultListItem-type searchResultListItem-type1");r.renderControl(d);var e=new sap.m.Text({text:c.getType()});e.setTooltip((''+c.getType()).replace(/<b>/gi,'').replace(/<\/b>/gi,''));e.addStyleClass("searchResultListItem-type searchResultListItem-type2");r.renderControl(e);r.write('<div class="searchResultListItem-attributes">');for(var i=1;i<=c.getVisibleAttributes();i++){var f="attr"+i+"Name";var g="attr"+i;l=c.getData()[f];v=c.getData()[g];if(l===undefined||v===undefined){continue}r.write('<div class="searchResultListItem-attribute">');a=new sap.m.Label({text:l});a.setTooltip((''+l).replace(/<b>/gi,'').replace(/<\/b>/gi,''));a.addStyleClass("searchResultListItem-attribute-label");r.renderControl(a);b=new sap.m.Text({text:v});b.setTooltip((''+v).replace(/<b>/gi,'').replace(/<\/b>/gi,''));b.addStyleClass("searchResultListItem-attribute-value");r.renderControl(b);r.write("</div>")}r.write("</div>");r.write("</div>");if(c.getImageUrl()){r.write('<div class="searchResultListItem-image2Container"><div class="searchResultListItem-image searchResultListItem-image2" style="background-image:url(\'');r.write(c.getImageUrl());r.write('\')"></div></div>')}r.write("</div></div>");if(c.getPreviewButton()!=="false"){this.button=new SearchResultListItemButton({status:c.getStatus(),press:function(){if(c.getStatus()==="open"){c.firePreviewClose()}else{c.firePreviewOpen()}}});r.renderControl(this.button)}r.write("</div>")},fireNavigate:function(u){return function(){if(u){window.location.href=u}}},setSafeText:function(o){o.each(function(i,d){var a=$(d);var s=a.text().replace(/<b>/gi,'').replace(/<\/b>/gi,'');if(s.indexOf('<')===-1){a.html(a.text())}var p=a.html().indexOf("<b>");if(p>-1&&d.offsetWidth<d.scrollWidth){var e="..."+a.html().substring(p);a.html(e)}})}});sap.m.ListItemBase.extend("SearchResultListItemFooter",{metadata:{properties:{showSpinner:{type:"boolean",defaultValue:false},text:"string"},aggregations:{content:{singularName:"content"}},events:{showMore:{}}},renderer:function(r,c){var f=new sap.m.Label({text:c.getText()});f.addStyleClass('resultListMoreFooter');var d=new sap.ui.core.Icon({src:sap.ui.core.IconPool.getIconURI("sys-overflow")});this.busy=new sap.m.BusyIndicator({size:"22px"});this.busy.addStyleClass('resultListBusyFooter');if(c.getShowSpinner()===false){this.busy.addStyleClass('hidden')}r.write("<div");r.writeAttribute("tabindex","-1");r.writeControlData(c);r.addClass("resultListFooterContainer");r.writeClasses();r.write(">");r.write("<div class='resultListFooterContent'>");r.renderControl(d);r.renderControl(f);r.renderControl(this.busy);r.write("</div>");r.write("</div>")},onAfterRendering:function(r,c){var s=this;var a=$(this.getDomRef());a.click(function(){s.setShowSpinner(true);s.fireShowMore();a.off('click')});a.keyup(function(){if(event.keyCode==13){this.click()}})}});sap.m.ListItemBase.extend("CategoryTreeItem",{metadata:{properties:{name:"string",count:"int"},events:{clicked:{}}},renderer:function(r,c){r.write("<div");r.writeControlData(c);r.addClass("resultListFooterContainer");r.writeClasses();r.write(">");r.write("<div class='resultListFooterContent'>");r.write("</div>");r.write("</div>")},onAfterRendering:function(r,c){var s=this;var a=$(this.getDomRef());a.click(function(){s.fireClicked()})}})}());(function(){"use strict";sap.ui.core.Control.extend("SearchResultListItemDetail",{metadata:{properties:{itemTitle:"string",itemTitleUrl:"string",itemType:"string",itemData:"object",firstDetailAttribute:{type:"int",defaultValue:4},maxDetailAttributes:{type:"int",defaultValue:8}}},renderer:function(r,c){r.write('<div');r.writeControlData(c);r.addClass('searchResultListItemDetail');r.writeClasses();r.write('>');r.write('<div class="searchResultListItemDetail-content">');r.write('<div class="searchResultListItemDetail-contentTitle">');r.write("</div>");r.write('<div class="searchResultListItemDetail-attributes">');if(c.getItemData()){var d=c.getFirstDetailAttribute()+c.getMaxDetailAttributes();var w={};var p=function(i,s,t){r.write('<div class="searchResultListItemDetail-attribute">');var u=new sap.m.Label({text:i});u.setTooltip((''+i).replace(/<b>/gi,'').replace(/<\/b>/gi,''));u.addStyleClass("searchResultListItemDetail-attribute-label");r.renderControl(u);var x=new sap.m.Text({text:s});x.setTooltip((''+s).replace(/<b>/gi,'').replace(/<\/b>/gi,''));x.addStyleClass("searchResultListItemDetail-attribute-value");r.renderControl(x);r.write("</div>")};for(var j=c.getFirstDetailAttribute();j<d;j++){var a="attr"+j+"Name";var b="attr"+j;var l=c.getItemData()[a];var v=c.getItemData()[b];if(l===undefined||v===undefined){continue}p(l,v,false)}for(var z=d;z<=c.getItemData().numberofattributes;z++){var e="attr"+z+"Whyfound";if(c.getItemData()[e]===true){var f="attr"+z+"Name";var g="attr"+z;if(!(c.getItemData()[f]in w)){w[c.getItemData()[f]]=c.getItemData()[g]}}}if($.isArray(c.getItemData().whyfounds)&&c.getItemData().whyfounds.length>0){c.getItemData().whyfounds.forEach(function(s,i){w[s.label]=s.valueHighlighted})}var h=true;for(var k in w){h=false;break}if(h===false){r.write('<div class="searchResultListItemDetail-whyfound-container">');var m=0;for(var n in w){var o=n;var q=w[n];if(o===undefined||q===undefined){continue}else{m=m+1;if(m<3){p(o,q,true)}else{break}}}r.write("</div>")}}r.write("</div>");r.write("</div>");r.write("</div>")},setSafeText:function(o){o.each(function(i,d){var a=$(d);var s=a.text().replace(/<b>/gi,'').replace(/<\/b>/gi,'');if(s.indexOf('<')===-1){a.html(a.text())}var p=a.html().indexOf("<b>");if(p>-1&&d.offsetWidth<d.scrollWidth){var e="..."+a.html().substring(p);a.html(e)}})}})}());(function(){"use strict";sap.ui.controller("sap.ushell.renderers.fiori2.search.SearchSuggestions",{onInit:function(){},onExit:function(){sap.ui.getCore().getEventBus().unsubscribe("searchSuggest",this.doSuggestion,this);sap.ui.getCore().getEventBus().unsubscribe("search",this.closeSuggestions,this)},removeFocus:function(){sap.ui.getCore().byId("sfOverlay").getFocusDomRef().blur()},closeSuggestions:function(c,e,d){var a=[];for(var i=0;i<this.objSuggestionLimit;++i){a.push({visible:false,type:"suggestion"})}a.push({visible:false,type:"suggestion",isGroupFooter:true});a.push({visible:false,type:"app",isGroupHeader:true,label:sap.ushell.resources.i18n.getText("suggestion_found_apps")});for(i=0;i<this.appSuggestionLimit;++i){a.push({visible:false,type:"app"})}this.getView().getModel("suggestions").setData({items:a,suggestionsVisible:false,visible:false})},dataSourceSelected:function(c,e,d){if(this.getView().getModel("suggestions").getProperty("/visible")){this.doSuggestion(null,null,{searchTerm:this.lastSearchTerm})}},onClickSuggestion:function(e){var s=e.getSource().getBindingContext("suggestions").getObject(),d,S,c=false;if(s.type==="app"){if(s.targetURL){window.location=s.targetURL}}else{if(s.data){S=s.data.labelRaw;d=s.data.dataSource;d.label=d.objectName.label;c=true}else{S=s.labelRaw;d={label:"All",level:0,objectName:{label:"ALL",value:"$$ALL$$"},packageName:{label:"ABAP",value:"ABAP"},schemaName:{label:"",value:""},type:{label:"Category",value:"Category"}}}sap.ui.getCore().getEventBus().publish("externalSearch",{searchTerm:S,dataSource:d,categorySuggested:c})}},doSuggestion:function(c,e,d){var f=new sap.ui.model.Filter("visible",sap.ui.model.FilterOperator.EQ,true),m=this.getView().getModel("suggestions"),a,q;if(d.activeViews&&d.activeViews.indexOf(this.getView().getId())===-1){return}if(d.searchTerm.length===0){this.closeSuggestions();return}m.setProperty("/visible",true);this.lastSearchTerm=d.searchTerm;this.doAppSuggestions(d);if(d.searchTerm.length>=3&&this.objSuggestionsActive()){this.doObjSuggestions(d)}else{this.clearObjSuggestions(m)}},objSuggestionsActive:function(){if(window.searchConfig&&window.searchConfig.objSuggestions!==undefined){return window.searchConfig.objSuggestions}else{return true}},clearObjSuggestions:function(m){var f=new sap.ui.model.Filter("visible",sap.ui.model.FilterOperator.EQ,true);for(var i=0;i<=this.objSuggestionLimit;i=i+1){m.setProperty("/items/"+i+"/visible",false)}this.getView().getContent()[0].getBinding("items").filter([f])},doAppSuggestions:function(d){var f=new sap.ui.model.Filter("visible",sap.ui.model.FilterOperator.EQ,true),m=this.getView().getModel("suggestions"),a;a=sap.ushell.Container.getService("Search").queryApplications(d.searchTerm,jQuery.proxy(function(r){var b=r.getElements();for(var i=0;i<this.appSuggestionLimit;++i){if(i<b.length){var c=b[i];m.setProperty("/items/"+(this.objSuggestionLimit+2+i),{label:c.label,icon:c.icon,targetURL:c.targetURL,app:c,visible:true,type:"app"})}else{m.setProperty("/items/"+(this.objSuggestionLimit+2+i)+"/visible",false)}}if(b.length>0){m.setProperty("/items/"+(this.objSuggestionLimit+1)+"/visible",true)}else{m.setProperty("/items/"+(this.objSuggestionLimit+1)+"/visible",false)}this.getView().getContent()[0].getBinding("items").filter([f])},this),this.appSuggestionLimit)},doObjSuggestions:function(d){var f=new sap.ui.model.Filter("visible",sap.ui.model.FilterOperator.EQ,true),m=this.getView().getModel("suggestions"),s=this;s.query.setSuggestionTerm(d.searchTerm);s.query.dataSource({objectName:"$$ALL$$",packageName:"ABAP",type:"Category"});s.query.getResultSet(jQuery.proxy(function(r){var a=r.getElements(),S=[],i=0;if(a.length>0){S=this.buildSuggestions(a,d);m.setProperty("/suggestionsVisible",true)}else{m.setProperty("/suggestionsVisible",false)}for(i;i<this.objSuggestionLimit;i=i+1){if(S[i]&&i<this.objSuggestionLimit){m.setProperty("/items/"+i,S[i])}else{m.setProperty("/items/"+i+"/visible",false)}}if(S.length>0){m.setProperty("/items/"+(this.objSuggestionLimit),{visible:true,type:"suggestion",isGroupFooter:true})}else{m.setProperty("/items/"+(this.objSuggestionLimit)+"/visible",false)}this.getView().getContent()[0].getBinding("items").filter([f])},this))},buildSuggestions:function(s,d){var r={};var t=d.searchTerm;var a=t.split(" ");var n=[];$.each(a,function(i,c){c=$.trim(c);if(c.length>0){var e=c.split("*");$.each(e,function(i,f){if(f.length>0){f=f.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");n.push(f)}})}});t=n;var b=/<b>[^<]+<\/b>/igm;jQuery.each(s,function(i,v){if(v.filter.attribute!=="$$AllAttributes$$"){return}if(!r[v.labelRaw]){r[v.labelRaw]=v;r[v.labelRaw].categories=[];r[v.labelRaw].visible=true;r[v.labelRaw].type="suggestion"}var c=r[v.labelRaw].label;if(c.length===0){r[v.labelRaw].label=v.labelRaw;c=r[v.labelRaw].label}while(g=b.exec(c)){var e=g.index;var f=b.lastIndex-4;var S=c.substring(e+3,f);var m=new T(S);for(var i=0;i<t.length;++i){var g={};var h=t[i];var j=new RegExp(h,"ig");if(S!==h){var k=S.match(j);if(k&&k instanceof Array&&k.length>0){m.highlight(h)}}}S=m.render();c=c.substring(0,e)+S+c.substring(f+4)}r[v.labelRaw].label=c;if(v.dataSource.getObjectName().value!=="$$AllDataSources$$"){r[v.labelRaw].categories.push({label:v.dataSource.getObjectName().label,data:v})}});return jQuery.map(r,function(v,k){return[v]})}});var T=function(){this.init.apply(this,arguments)};T.prototype={init:function(t){this.text=t;this.lower=t.toLocaleLowerCase();this.globalBold=false;this.bold=new Array(this.text.length);for(var i=0;i<this.bold.length;++i){this.bold[i]=false}},highlight:function(t){t=t.toLowerCase();var a=-1;while(a<this.lower.length){var a=this.lower.indexOf(t,a);if(a>=0){for(var i=a;i<a+t.length;++i){this.bold[i]=true;this.globalBold=true}a+=t.length}else{break}}},render:function(){if(!this.globalBold){return this.text}var b=false;var r=[];var s=0;for(var i=0;i<this.text.length;++i){if(b&&!this.bold[i]||!b&&this.bold[i]){r.push(this.text.substring(s,i));if(b){r.push("</b>")}else{r.push("<b>")}b=!b;s=i}}r.push(this.text.substring(s,i));if(b){r.push("</b>")}return r.join("")}}}());
//Copyright (c) 2013 SAP AG, All Rights Reserved
(function(g){"use strict";sap.ui.jsview("sap.ushell.renderers.fiori2.search.container.App",{createContent:function(){var s=this;s.aDanglingControls=[];s.suggestionsEnabled=true;sap.ui.getCore().getEventBus().subscribe("search",function(){this.onSearch()},this);sap.ui.getCore().getEventBus().subscribe("allSearchFinished",function(){this.onSearchFinished()},this);var a=sap.ui.getCore().getModel("searchModel");if(!a){a=new sap.ushell.renderers.fiori2.search.SearchModel();a.setSizeLimit(200);sap.ui.getCore().setModel(a,"searchModel");a.searchInit()}a.setSkip(0,false);s.setModel(a,"searchModel");s.setModel(sap.ushell.resources.i18nModel,"i18n");if(!s.oSearchSelect){s.oSearchSelect=new sap.m.Select("containerSs",{name:"SearchSelect",autoAdjustWidth:true,items:{path:"searchModel>/connectors",template:new sap.ui.core.Item({key:"{searchModel>labelRaw}",text:"{searchModel>label}"})}}).addStyleClass('sapUshellContainerSearchSelect');s.oSearchSelect.addEventDelegate({onAfterRendering:function(){s.oSearchSelect.setSelectedKey(a.getProperty("/dataSourceLabelRaw"))}},s.oSearchSelect)}s.oSearchSelect.attachChange(function(e){var b=s.oSearchSelect.getSelectedItem();var j={};if(b.getKey()==="$$ALL$$"){j=a.createAllDataSource()}else if(b.getKey()==="$$APP$$"){j=a.createAppDataSource()}else{j=a.sina.createDataSource({objectName:{label:b.getText(),value:b.getKey()},packageName:{label:"",value:""},schemaName:{label:"",value:""},label:""})}if(b.getKey()!=="$$ALL$$"){s.oSearchInput.setPlaceholder(sap.ushell.resources.i18n.getText("searchIn")+": "+b.getText())}else{s.oSearchInput.setPlaceholder(sap.ushell.resources.i18n.getText("search"))}a.setProperty("/dataSource",j);s.handleHash(a);s.oSearchInput.destroySuggestionRows()},this);if(!s.oSearchInput){s.oSearchInput=new sap.m.Input("containerSi",{name:"SearchInput",width:"50%",showValueStateMessage:false,showTableSuggestionValueHelp:false,showSuggestion:true,filterSuggests:true,suggestionColumns:[new sap.m.Column({})],liveChange:function(e){s.inputLiveChange(e)},suggest:function(e){s.handleSuggest(e)},suggestionItemSelected:function(e){if(s.changeTimer){window.clearTimeout(s.changeTimer);s.changeTimer=null}s.selectSuggest(e)},change:function(e){s.changeTimer=window.setTimeout(function(){var a=s.getModel("searchModel");s.handleHash(a);s.oSearchInput.destroySuggestionRows();s.changeTimer=null},100)}}).addStyleClass('sapUshellContainerSearchInput').setFilterFunction(function(){return s.suggestionsEnabled});s.oSearchInput.addEventDelegate({onAfterRendering:function(){var b=s.oSearchSelect.getSelectedItem();if(b){if(b.getKey()!=="$$ALL$$"){s.oSearchInput.setPlaceholder(sap.ushell.resources.i18n.getText("searchIn")+": "+b.getText())}else{s.oSearchInput.setPlaceholder(sap.ushell.resources.i18n.getText("search"))}}}},s.oSearchInput)}s.oSearchInput.bindAggregation("suggestionRows","searchModel>/mixedSection",function(p,d){var l=new sap.m.Label({text:"{searchModel>mixedLabel}"}).addStyleClass('sapUshellSuggestText').addStyleClass('sapUshellSearchSuggestionNavItem');l.addEventDelegate({onAfterRendering:function(){s.bTagUnescaper(this.getDomRef())}},l);l.data("labelRaw","{searchModel>labelRaw}");l.data("targetURL","{searchModel>targetURL}");l.data("dataSource","{searchModel>dataSource}");l.data("suggestType","{searchModel>suggestType}");var i=new sap.ui.core.Icon({src:"{searchModel>icon}"}).addStyleClass('sapUshellSuggestIcon');var b=new sap.m.Label({text:{path:"searchModel>icon",formatter:function(v){if(v){return"<i>"+sap.ushell.resources.i18n.getText("label_app")+"</i>"}return""}}}).addStyleClass('sapUshellSuggestText').addStyleClass('sapUshellSearchSuggestionNavItem');b.addEventDelegate({onAfterRendering:function(){s.bTagUnescaper(this.getDomRef())}},b);var c=new sap.m.CustomListItem({type:sap.m.ListType.Active,content:[b,i,l]});c.getText=function(){return l.data("labelRaw")};if(!s.oSearchInput.getValue())return null;return new sap.m.ColumnListItem({cells:[c],type:"Active"})});s.oSearchInput.addEventDelegate({onfocusin:function(e){s.closeHeadSearchBox()}},s.oSearchInput);if(!s.oSearchBtn){s.oSearchBtn=new sap.m.Button("containerSb",{name:"SearchBtn",icon:sap.ui.core.IconPool.getIconURI("search"),press:function(e){s.handleHash(a);s.oSearchInput.destroySuggestionRows()}})}s.oSearchResults=sap.ui.getCore().byId("searchContainerResultsView");if(!s.oSearchResults){s.oSearchResults=sap.ui.view({id:"searchContainerResultsView",tooltip:"{i18n>searchResultsView_tooltip}",viewName:"sap.ushell.renderers.fiori2.search.Search",type:sap.ui.core.mvc.ViewType.JS})}s.oSearchResults.viewSwitcher=s.getController();s.aDanglingControls.push(s.oSearchResults);s.oSearchResults.setModel(a);s.oPage=s.pageFactory("searchPage",[s.oSearchSelect,s.oSearchInput,s.oSearchBtn,s.oSearchResults]);s.updateSearchModelFromURL(a);return s.oPage},onSearch:function(){var s=this;s.suggestionsEnabled=false},onSearchFinished:function(){var s=this;s.suggestionsEnabled=true},bTagUnescaper:function(d){var i=d.innerHTML;while(i.indexOf('&lt;b&gt;')+i.indexOf('&lt;/b&gt;')>=-1){i=i.replace('&lt;b&gt;','<b>');i=i.replace('&lt;/b&gt;','</b>')}while(i.indexOf('&lt;i&gt;')+i.indexOf('&lt;/i&gt;')>=-1){i=i.replace('&lt;i&gt;','<i>');i=i.replace('&lt;/i&gt;','</i>')}d.innerHTML=i},closeHeadSearchBox:function(){if(sap.ui.getCore().byId('headSearchBox')!==undefined){if(sap.ui.getCore().byId('headSearchBox').getVisible()){jQuery('.headSearchDiv').animate({'maxWidth':'38rem'},{duration:100,complete:function(){sap.ui.getCore().byId('headSearchBox').setVisible(false)}})}}},handleHash:function(s){var a=this;if(a.oSearchInput.getValue()==="")return;var h="#Action-search&/searchTerm="+encodeURIComponent(a.oSearchInput.getValue())+"&dataSource="+encodeURIComponent(JSON.stringify(s.getDataSourceJson()));if(window.location.hash===h){return}else{window.location.href=h;s.setProperty("/searchBoxTerm",a.oSearchInput.getValue());a.closeHeadSearchBox()}},inputLiveChange:function(e){var s=this.getModel("searchModel");if(!this.oSearchInput.getValue()){s.setProperty("/appSection",[]);s.setProperty("/suggestSection",[]);s.setProperty("/mixedSection",[])}},handleSuggest:function(e){this.oSearchInput.destroySuggestionItems();var s=this.oSearchInput.getValue();var a=this.getModel("searchModel");a.setProperty("/searchBoxTerm",s);a.doSuggestion()},selectSuggest:function(e){var s=sap.ui.getCore().getModel("searchModel");var a=e.getParameter("selectedRow").getCells()[0].getContent()[2].data("suggestType");var b=e.getParameter("selectedRow").getCells()[0].getContent()[2].data("labelRaw");var d=e.getParameter("selectedRow").getCells()[0].getContent()[2].data("dataSource");var t=e.getParameter("selectedRow").getCells()[0].getContent()[2].data("targetURL");if(a==="dataSourceSuggest"){s.setProperty("/searchBoxTerm","");this.oSearchInput.setValue("");this.oSearchSelect.setSelectedKey(b);var c=this.oSearchSelect.getSelectedItem();var j={};if(c.getKey()==="$$ALL$$"){j=s.createAllDataSource()}else if(c.getKey()==="$$APP$$"){j=s.createAppDataSource()}else{j=s.sina.createDataSource({objectName:{label:c.getText(),value:c.getKey()},packageName:{label:"",value:""},schemaName:{label:"",value:""},label:""})}s.setProperty("/dataSource",j);if(c.getKey()!=="$$ALL$$"){this.oSearchInput.setPlaceholder(sap.ushell.resources.i18n.getText("searchIn")+": "+c.getText())}else{this.oSearchInput.setPlaceholder(sap.ushell.resources.i18n.getText("search"))}return}var h;if(t){h=t}else{s.setSearchTerm(b,false);s.setDataSource(d,false);h="#Action-search&/searchTerm="+encodeURIComponent(s.getProperty("/searchBoxTerm"))+"&dataSource="+encodeURIComponent(JSON.stringify(s.getDataSourceJson()))}if(window.location.hash!==h){if(h.charAt(0)==='#')window.location.href=h;else window.open(h)}},updateSearchModelFromURL:function(s){var u=sap.ushell.Container.getService("URLParsing");var a=u.splitHash(window.location.hash).appSpecificRoute;if(!a)return;var p=u.parseParameters("?"+a.substring(2));if(!p.searchTerm)return;var b=decodeURI(p.searchTerm[0]);s.setSearchTerm(b,false);var d;if(p.dataSource){var c=JSON.parse(decodeURI(p.dataSource[0]));d=s.sina.createDataSource(c);s.setDataSource(d,false)}else{s.resetDataSource(false)}this.oSearchResults.searchLayout.setShowBottomList(s.getProperty("/isNormalSearchEnable"));if(!s.getProperty("/isNormalSearchEnable"))this.oSearchResults.searchLayout.setBottomCount(0);this.oSearchInput.setValue(s.getProperty('/searchBoxTerm'));s._searchFireQuery()},containerFactory:function(i,c,d){var C=new sap.m.ScrollContainer({id:i,content:c});C.addStyleClass('sapUshellSubContainer');return C},pageFactory:function(i,c,d){var p=new sap.m.Page({id:i,showNavButton:true,content:c,enableScrolling:true,navButtonPress:function(a){window.history.back(1)}}),e=["onAfterHide","onAfterShow","onBeforeFirstShow","onBeforeHide","onBeforeShow"],D={};jQuery.each(e,function(I,E){D[E]=jQuery.proxy(function(a){jQuery.each(this.getContent(),function(I,c){c._handleEvent(a)})},p)});p.addEventDelegate(D);if(!sap.ui.Device.system.desktop){p._bUseIScroll=true}if(d){this.disableBouncing(p)}p.setTitle("{i18n>search}");return p},getControllerName:function(){return"sap.ushell.renderers.fiori2.search.container.App"}})}(window));jQuery.sap.declare('sap.ushell.library-all');jQuery.sap.declare('sap.ushell.components.factsheet.views.ThingViewer.controller');jQuery.sap.declare('sap.ushell.components.perf.monitor');jQuery.sap.declare('sap.ushell.components.tiles.applauncher.StaticTile.view');jQuery.sap.declare('sap.ushell.components.tiles.applauncherdynamic.DynamicTile.view');jQuery.sap.declare('sap.ushell.components.tiles.indicatorArea.AreaChartTile.controller');jQuery.sap.declare('sap.ushell.components.tiles.indicatorcomparison.ComparisonTile.controller');jQuery.sap.declare('sap.ushell.components.tiles.indicatorcontribution.ContributionTile.controller');jQuery.sap.declare('sap.ushell.components.tiles.indicatordeviation.DeviationTile.controller');jQuery.sap.declare('sap.ushell.components.tiles.indicatornumeric.NumericTile.controller');jQuery.sap.declare('sap.ushell.loader');jQuery.sap.declare('sap.ushell.renderers.fiori2.launchpad.catalog.Catalog.controller');jQuery.sap.declare('sap.ushell.renderers.fiori2.launchpad.group_list.GroupList.controller');jQuery.sap.declare('sap.ushell.renderers.fiori2.search.DataSourceList');jQuery.sap.declare('sap.ushell.renderers.fiori2.search.ResultFilterInfo.controller');jQuery.sap.declare('sap.ushell.renderers.fiori2.search.ResultFilterInfo.view');jQuery.sap.declare('sap.ushell.renderers.fiori2.search.SearchFilter.controller');jQuery.sap.declare('sap.ushell.renderers.fiori2.search.SearchFilter.view');jQuery.sap.declare('sap.ushell.renderers.fiori2.search.SearchLayout');jQuery.sap.declare('sap.ushell.renderers.fiori2.search.SearchModel');jQuery.sap.declare('sap.ushell.renderers.fiori2.search.SearchResultListItem');jQuery.sap.declare('sap.ushell.renderers.fiori2.search.SearchResultListItemDetail');jQuery.sap.declare('sap.ushell.renderers.fiori2.search.SearchSuggestions.controller');jQuery.sap.declare('sap.ushell.renderers.fiori2.search.container.App.view');if(!jQuery.sap.isDeclared('sap.ushell.System')){
// Copyright (c) 2013 SAP AG, All Rights Reserved
(function(){"use strict";jQuery.sap.declare("sap.ushell.System");sap.ushell.System=function(d){this.getAlias=function(){return d.alias};this.getBaseUrl=function(){return d.baseUrl};this.getClient=function(){return d.client};this.getName=function(){return d.system};this.getPlatform=function(){return d.platform};this.adjustUrl=function(u){if(u.indexOf('/')!==0||u==='/'){throw new Error("Invalid URL: "+u)}if(d.baseUrl===";o="){if(d.alias){u=u+";o="+d.alias}}else if(d.baseUrl){u=d.baseUrl.replace(/\/$/,"")+u}if(d.client){u+=(u.indexOf("?")>=0?"&":"?")+"sap-client="+d.client}return u};this.toString=function(){return JSON.stringify(d)}}}())};if(!jQuery.sap.isDeclared('sap.ushell.UserActivityLog')){(function(){"use strict";jQuery.sap.declare("sap.ushell.UserActivityLog");var U=function(){};U.prototype={_maxLoggedMessages:30,_maxMessageByteSize:2048,_maxQueueByteSize:30720,_isActive:false,_observedLaunchpadActions:["createGroup","deleteGroup","resetGroup","changeGroupTitle","moveGroup","addTile","deleteTile","moveTile","externalSearch","openApp","addBookmarkTile"],_observedGeneralActions:["showCatalog","openApp"],messageType:{ACTION:0,ERROR:1},_tileOntapOrigFunc:undefined,activate:function(c){if(this._isActive){return}this._isActive=true;var e=sap.ui.getCore().getEventBus(),s=this;this._observedLaunchpadActions.forEach(function(a,i,b){e.subscribe("launchpad",a,s._handleAction,s)});this._observedGeneralActions.forEach(function(a,i,b){e.subscribe(a,s._handleAction,s)});jQuery.sap.log.addLogListener(this);setTimeout(function(){s._tileOntapOrigFunc=sap.ushell.ui.launchpad.Tile.prototype.ontap;sap.ushell.ui.launchpad.Tile.prototype.ontap=s._tileOnTapDecorator(s._tileOntapOrigFunc)},0)},deactivate:function(){if(!this._isActive){return}this._isActive=false;var e=sap.ui.getCore().getEventBus(),s=this;this._observedLaunchpadActions.forEach(function(a,i,b){e.unsubscribe("launchpad",a,s._handleAction,s)});this._observedGeneralActions.forEach(function(a,i,b){e.unsubscribe(a,s._handleAction,s)});jQuery.sap.log.removeLogListener(this);sap.ushell.ui.launchpad.Tile.prototype.ontap=this._tileOntapOrigFunc},addMessage:function(t,m,a){if(this._isActive){this._addMessageInternal(t,m,a)}},getLog:function(){return this._getLoggingQueueFromStorage()},getMessageInfo:function(u){var r={userDetails:this._getUserDetails(),shellState:this._getShellState(),navigationData:this._getLastNavActionFromStorage(),userLog:this.getLog()};return r},getMessageInfoAsString:function(u){return JSON.stringify(this.getMessageInfo(u))},onLogEntry:function(d){var e=(typeof d.details!="undefined"&&(d.details!==""))?(d.message+" , "+d.details):d.message;this.addMessage(this.messageType.ERROR,e)},onAttachToLog:function(){},onDetachFromLog:function(){},_tileOnTapDecorator:function(o){var s=this,n,l,t,a,b,c;return function(e,u){var d=this.getMetadata().getName();if(d=="sap.ushell.ui.launchpad.PlusTile"){s.addMessage(s.messageType.ACTION,"Open Catalog for empty group "+this.getGroupId())}else if(d=="sap.ushell.ui.launchpad.Tile"){n=jQuery(e.currentTarget).find('a').first().attr('href');if(n){var f=sap.ushell.Container.getService("URLParsing");var g=f.parseShellHash(n);n='#'+f.constructShellHash({target:{semanticObject:g.semanticObject,action:g.action}})}l=s._getLastNavActionFromStorage();l.time=new Date();l.navigationHash=n;l.tileDebugInfo=this.getDebugInfo();t=sap.ui.getCore().byId(this.getId());a=t.getModel();b=this.getBindingContext();c=b.getPath();l.tileTitle=b.getModel().getProperty(c).title;s._putInLocalStorage("sap.ushell.UserActivityLog.lastNavigationActionData",JSON.stringify(l));s.addMessage(s.messageType.ACTION,"Click on Tile: "+a.getData().title+" Tile debugInfo: "+this.getDebugInfo())}o.apply(this,arguments)}},_addMessageInternal:function(t,m,a){var l=this._getLoggingQueueFromStorage(),b={type:null},p;for(p in this.messageType){if(t==this.messageType[p]){b.type=p;break}}if(b.type===null){return}jQuery.extend(b,{messageID:a,messageText:m,time:new Date(),toString:function(){var c=[this.type,this.time];if(typeof this.messageID!=="undefined"){c.push(this.messageID)}c.push(this.messageText);return c.join(" :: ")}});l.push(b);if(l.length>this._maxLoggedMessages){l.shift()}this._putInLocalStorage("sap.ushell.UserActivityLog.loggingQueue",JSON.stringify(l))},_handleAction:function(c,e,d){var m;switch(e){case'deleteTile':m="Delete Tile "+(d.tileId||"");break;case'moveTile':m="Move Tile "+(d.sTileId||"")+" to Group "+(d.toGroupId||"");break;case'createGroup':m="Create Group";break;case'changeGroupTitle':m="Change Group Title of "+(d.groupId||"")+" to "+(d.newTitle||"");break;case'deleteGroup':m="Delete Group "+(d.groupId||"");break;case'addTile':var t=d.catalogTileContext.oModel.oData,T=d.catalogTileContext.sPath,a=this._findInModel(T,t),b=a.id,g=d.groupContext.oModel.oData,G=d.groupContext.sPath,f=this._findInModel(G,g),h=f.groupId;m="Add Tile "+(b||"")+" to Group "+(h||"");break;case'moveGroup':m="Move Group from index "+(d.fromIndex||"")+" to index "+(d.toIndex||"");break;case'openApp':m="Open application "+d.action;var l=this._getLastNavActionFromStorage();l.applicationInformation=d.oApplication;if(!this._hashSegmentsEqual(l.navigationHash,d.sShellHash)){l.tileDebugInfo=""}l.navigationHash=d.sShellHash;this._putInLocalStorage("sap.ushell.UserActivityLog.lastNavigationActionData",JSON.stringify(l));break;case'addBookmarkTile':m="Add Bookmark "+(d.title||"")+" "+(d.subtitle||"")+" for URL: "+(d.url||"");break;case'showCatalog':m="Show Catalog";break}this.addMessage(this.messageType.ACTION,m)},_findInModel:function(p,m){var a,b=m,i,c;try{a=p.split("/");for(i=0;i<a.length;i=i+1){if(c!==a[i]){continue}b=b[c]}}catch(e){return undefined}return b},_getUserDetails:function(u){var a=sap.ushell.Container.getUser();return{fullName:a.getFullName()||"",userId:a.getId()||"",eMail:a.getEmail()||"",Language:a.getLanguage()||""}},_getShellState:function(){var n=sap.ui.getCore().byId("navContainer"),m,r="";if(n!==undefined){m=n.getModel();r=m.getProperty("/currentState/stateName")}return r},_getLoggingQueueFromStorage:function(){var l=this._getFromLocalStorage("sap.ushell.UserActivityLog.loggingQueue");var q=[];if(l){try{q=JSON.parse(l)}catch(e){}}return q},_getLastNavActionFromStorage:function(){var l=this._getFromLocalStorage("sap.ushell.UserActivityLog.lastNavigationActionData");return(l?JSON.parse(l):{})},_hashSegmentsEqual:function(u,a){if((!u)||(!a)){return false}return(this._getHashSegment(u)==this._getHashSegment(a))?true:false},_getHashSegment:function(u){var i=u.indexOf("~"),a;if(i>-1){return u.substring(0,i)}a=u.indexOf("?");if(a>-1){return u.substring(0,a)}return u},_getFromLocalStorage:function(k){var r=null;try{r=localStorage.getItem(k)}catch(e){}return r},_putInLocalStorage:function(k,v){try{localStorage.setItem(k,v)}catch(e){}}};sap.ushell.UserActivityLog=new U()})()};if(!jQuery.sap.isDeclared('sap.ushell.components.factsheet.Component')){jQuery.sap.declare("sap.ushell.components.factsheet.Component");jQuery.sap.require('sap.ui.core.UIComponent');sap.ui.core.UIComponent.extend("sap.ushell.components.factsheet.Component",{oMainView:null,metadata:{version:"1.24.5",library:"sap.ushell.components.factsheet",includes:["css/custom.css"],dependencies:{libs:["sap.m","sap.ui.vbm","sap.suite.ui.commons","sap.ui.layout","sap.viz"],components:[]}},createContent:function(){var c=this.getComponentData();var s=(c&&c.startupParameters)||{};this.oMainView=sap.ui.view({type:sap.ui.core.mvc.ViewType.JS,viewName:"sap.ushell.components.factsheet.views.ThingViewer",viewData:s,height:"100%"}).addStyleClass("ThingViewer");return this.oMainView},exit:function(){window.console.log("On Exit of factsheet Component.js called : this.getView().getId()"+this.getId())},onExit:function(){window.console.log("On Exit of factsheet Component.js called : this.getView().getId()"+this.getId())}});jQuery.sap.setObject("factsheet.Component",sap.ushell.components.factsheet.Component)};if(!jQuery.sap.isDeclared('sap.ushell.components.factsheet.annotation.Mapping')){
//Copyright (c) 2013 SAP AG, All Rights Reserved
(function(){"use strict";jQuery.sap.declare("sap.ushell.components.factsheet.annotation.Mapping");sap.ushell.components.factsheet.annotation.Mapping={};sap.ushell.components.factsheet.annotation.Mapping.initialized=[];sap.ushell.components.factsheet.annotation.Mapping.parse=function(m,a){var x={},g,b,s,c,d,r,e,f,h,n,o,A,q={},t,u,S={},i,v,w={},y={},z="",B,C,D,E,F,G,H,T,I,J,K,M,L,j,N,O,P,Q,R,U,V,W,X,Y,Z,$,_,a1,b1,c1,d1,e1,f1;if(sap.ui.Device.browser.internet_explorer){x={setNameSpace:function(k){k.setProperty("SelectionNamespaces",'xmlns:edmx="http://docs.oasis-open.org/odata/ns/edmx" xmlns:d="http://docs.oasis-open.org/odata/ns/edm"');k.setProperty("SelectionLanguage","XPath");return k},selectNodes:function(k,x,l){return l.selectNodes(x)},nextNode:function(k){return k.nextNode()},getNodeText:function(k){return k.text}}}else{x={setNameSpace:function(k){return k},nsResolver:function(p){var k={"edmx":"http://docs.oasis-open.org/odata/ns/edmx","d":"http://docs.oasis-open.org/odata/ns/edm"};return k[p]||null},selectNodes:function(k,p,l){var g1=k.evaluate(p,l,this.nsResolver,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null);g1.length=g1.snapshotLength;return g1},nextNode:function(k,l){return k.snapshotItem(l)},getNodeText:function(k){return k.textContent}}}g=function(k){var l;if(sap.ui.Device.browser.internet_explorer){l=new ActiveXObject("Microsoft.XMLHTTP");l.open("GET",k,false);l.send(null);return l.responseXML}else{l=jQuery.sap.sjax({url:k,dataType:"xml"});if(l.success){return l.data}}};b=function(m){var g1={},h1={},i1={},j1=false,i,k1,l1,m1,n1={},j,o1={},p1={},q1=false,r1,l,k,s1,t1,u1,v1,p,w1;for(i=m.dataServices.schema.length-1;i>=0;i-=1){g1=m.dataServices.schema[i];if(g1.entityType){k1=g1.namespace;l1=g1.entityType;m1=g1.complexType;for(j in l1){if(l1.hasOwnProperty(j)){n1=l1[j];p1={};o1={};if(n1.hasStream&&n1.hasStream==="true"){continue}for(k in n1.property){r1=n1.property[k];if(r1.type.substring(0,k1.length)===k1){for(l in m1){if(m1[l].name===r1.type.substring(k1.length+1)){for(k in m1[l].property){s1=m1[l].property[k];o1[m1[l].name+"/"+s1.name]=s1.type}}}}else{t1=r1.name;u1=r1.type;for(p in r1.extensions){v1=r1.extensions[p];if((v1.name==="display-format")&&(v1.value==="Date")){u1="Edm.Date"}else{q1=true;if(!p1[t1]){p1[t1]={}}if(v1.namespace&&!p1[t1][v1.namespace]){p1[t1][v1.namespace]={}}p1[t1][v1.namespace][v1.name]=v1.value}}o1[t1]=u1}}if(!h1[k1+"."+n1.name]){h1[k1+"."+n1.name]={}}h1[k1+"."+n1.name]=o1;if(q1){if(!i1[k1+"."+n1.name]){j1=true}i1[k1+"."+n1.name]={};i1[k1+"."+n1.name]=p1}}}}}if(j1){w1={types:h1,extensions:i1}}else{w1={types:h1}}return w1};s=function(p,k,l,S){var g1,h1,i1='';for(g1 in p){if(p.hasOwnProperty(g1)){if(p[g1]){h1=p[g1];if(h1.Value&&h1.Value.Path){i1=c(h1.Value.Path,k,l,S);if(i1){p[g1].EdmType=i1}continue}if(h1.Path){i1=c(h1.Path,k,l,S);if(i1){p[g1].EdmType=i1}continue}if(h1.Facets){p[g1].Facets=s(h1.Facets,k,l,S);continue}if(h1.Data){p[g1].Data=s(h1.Data,k,l,S);continue}if(g1==="Data"){p.Data=s(h1,k,l,S);continue}if(h1.Value&&h1.Value.Apply){p[g1].Value.Apply.Parameters=s(h1.Value.Apply.Parameters,k,l,S);continue}if(h1.Value&&h1.Type&&(h1.Type==="Path")){i1=c(h1.Value,k,l,S);if(i1){p[g1].EdmType=i1}}}}}return p};c=function(p,k,l,S){var g1;if((p.charAt(0)==="@")&&(p.indexOf(S.Alias)===1)){p=p.slice(S.Alias.length+2)}if(p.indexOf("/")>=0){if(k[p.slice(0,p.indexOf("/"))]){l=p.slice(0,p.indexOf("/"));p=p.slice(p.indexOf("/")+1)}}for(g1 in k[l]){if(k[l].hasOwnProperty(g1)){if(p===g1){return k[l][g1]}}}};d=function(k){var l="",p="",i,g1={};for(i=0;i<k.attributes.length;i+=1){if((k.attributes[i].name!=="Property")&&(k.attributes[i].name!=="Term")){l=k.attributes[i].name;p=k.attributes[i].value}}if(l.length>0){g1[l]=r(p)}return g1};e=function(t,k){var l={},p,g1,h1,i1,j1,k1;if(k.hasChildNodes()){p=x.selectNodes(t,"./d:String",k);if(p.length>0){g1=x.nextNode(p,0);l["String"]=x.getNodeText(g1)}else{h1=x.selectNodes(t,"./d:Path",k);if(h1.length>0){i1=x.nextNode(h1,0);l["Path"]=x.getNodeText(i1)}else{j1=x.selectNodes(t,"./d:Apply",k);if(j1.length>0){k1=x.nextNode(j1,0);l["Apply"]=n(t,k1)}}}}return l};f=function(t,k,l){var p={},g1,h1,I,i1,j1,k1,l1,m1,n1={},L,N,W,o1,p1;if(k.hasChildNodes()){g1=x.selectNodes(t,"./d:Record | ./d:Collection/d:Record | ./d:Collection/d:If/d:Record",k);if(g1.length){h1=0;for(I=0;I<g1.length;I+=1){i1=x.nextNode(g1,I);j1=h(t,i1,l);if(i1.getAttribute("Type")){j1["RecordType"]=r(i1.getAttribute("Type"))}if(h1===0){if(i1.nextElementSibling||(i1.parentNode.nodeName==="Collection")||(i1.parentNode.nodeName==="If")){p=[];p.push(j1)}else{p=j1}}else{p.push(j1)}h1+=1}}else{k1=x.selectNodes(t,"./d:UrlRef",k);if(k1.length>0){for(I=0;I<k1.length;I+=1){l1=x.nextNode(k1,I);p["UrlRef"]=e(t,l1)}}else{k1=x.selectNodes(t,"./d:Url",k);if(k1.length>0){for(I=0;I<k1.length;I+=1){l1=x.nextNode(k1,I);p["Url"]=e(t,l1)}}else{p1=x.selectNodes(t,"./d:Collection/d:AnnotationPath | ./d:Collection/d:PropertyPath",k);if(p1.length>0){p=[];for(I=0;I<p1.length;I+=1){m1=x.nextNode(p1,I);n1={};n1[m1.nodeName]=x.getNodeText(m1);p.push(n1)}}else{p=d(k);L=x.selectNodes(t,"./d:Annotation",k);N={};for(W=0;W<L.length;W+=1){N=x.nextNode(L,W);if(N.hasChildNodes()===false){o1=r(N.getAttribute("Term"));p[o1]=d(N)}}}}}}}else{p=d(k)}return p};h=function(t,k,l){var p={},N={},L,W,g1,h1,I,i1,j1,k1,l1,m1;L=x.selectNodes(t,"./d:Annotation",k);for(W=0;W<L.length;W+=1){N=x.nextNode(L,W);if(N.hasChildNodes()===false){g1=r(N.getAttribute("Term"));p[g1]=d(N)}}h1=x.selectNodes(t,"./d:PropertyValue",k);if(h1.length>0){for(I=0;I<h1.length;I+=1){i1=x.nextNode(h1,I);j1=i1.getAttribute("Property");p[j1]=f(t,i1,l);k1=x.selectNodes(t,"./d:Apply",i1);l1=null;for(m1=0;m1<k1.length;m1+=1){l1=x.nextNode(k1,m1);if(l1){p[j1]={};p[j1]['Apply']=n(t,l1)}}}}else{p=f(t,k,l)}return p};n=function(t,k){var l={},p,g1=null,h1=[],i;p=x.selectNodes(t,"./d:*",k);for(i=0;i<p.length;i+=1){g1=x.nextNode(p,i);switch(g1.nodeName){case"Apply":h1.push({"Type":"Apply","Value":n(t,g1)});break;case"LabeledElement":h1.push({"Name":g1.getAttribute("Name"),"Value":e(t,g1)});break;default:h1.push({"Type":g1.nodeName,"Value":x.getNodeText(g1)});break}}l['Name']=k.getAttribute('Function');l['Parameters']=h1;return l};o=function(l,p,g1){var h1,i,i1,j1,j,k;for(i=m.dataServices.schema.length-1;i>=0;i-=1){h1=m.dataServices.schema[i];if(h1.entityType){i1=h1.namespace+".";j1=h1.entityType;for(k=j1.length-1;k>=0;k-=1){if(i1+j1[k].name===l&&j1[k].navigationProperty){for(j=0;j<j1[k].navigationProperty.length;j+=1){if(j1[k].navigationProperty[j].name===p){return true}}}}}}return false};r=function(k){for(A in w){if(w.hasOwnProperty(A)){if(k.indexOf(A+".")>=0){k=k.replace(A+".",w[A]+".");return k}}}return k};if(this.initialized[a]){return this.initialized[a]}t=g(a);t=x.setNameSpace(t);u=x.selectNodes(t,"//d:Schema",t);for(i=0;i<u.length;i+=1){v=x.nextNode(u,i);S.Alias=v.getAttribute("Alias");S.Namespace=v.getAttribute("Namespace")}B=x.selectNodes(t,"//edmx:Reference",t);for(i=0;i<B.length;i+=1){C=x.nextNode(B,i);D=x.selectNodes(t,"./edmx:Include",C);if(D&&D.length>0){E=x.nextNode(D,0);if(E.getAttribute("Alias")){w[E.getAttribute("Alias")]=E.getAttribute("Namespace")}else{w[E.getAttribute("Namespace")]=E.getAttribute("Namespace")}}F=x.selectNodes(t,"./edmx:IncludeAnnotations",C);if(F.length>0){for(j=0;j<F.length;j+=1){G=x.nextNode(F,j);if(G.getAttribute("TargetNamespace")){z=G.getAttribute("TargetNamespace");if(!y[z]){y[z]={}}y[z][G.getAttribute("TermNamespace")]=C.getAttribute("Uri")}else{y[G.getAttribute("TermNamespace")]=C.getAttribute("Uri")}}}}if(y){q.annotationReferences=y}q.aliasDefinitions=w;H=x.selectNodes(t,"//d:Term",t);if(H.length>0){T={};for(I=0;I<H.length;I+=1){J=x.nextNode(H,I);K=r(J.getAttribute("Type"));T["@"+S.Alias+"."+J.getAttribute("Name")]=K}q.termDefinitions=T}M=b(m);if(M.extensions){q.propertyExtensions=M.extensions}L=x.selectNodes(t,"//d:Annotations ",t);for(I=0;I<L.length;I+=1){N=x.nextNode(L,I);if(N.hasChildNodes()===false){continue}O=N.getAttribute("Target");P=O.split(".")[0];if(P&&w[P]){O=O.replace(new RegExp(P,""),w[P])}Q=O;R=null;if(O.indexOf("/")>0){Q=O.split("/")[0];R=O.replace(Q+"/","")}if(!q[Q]){q[Q]={}}if(R){if(!q.propertyAnnotations){q.propertyAnnotations={}}if(!q.propertyAnnotations[Q]){q.propertyAnnotations[Q]={}}q.propertyAnnotations[Q][R]={};U=x.selectNodes(t,"./d:Annotation",N);for(W=0;W<U.length;W+=1){V=x.nextNode(U,W);if(V.hasChildNodes()===false){X=r(V.getAttribute("Term"));q.propertyAnnotations[Q][R][X]=d(V)}}}else{Z=Q.replace(w[P],P);U=x.selectNodes(t,"./d:Annotation",N);for(Y=0;Y<U.length;Y+=1){V=x.nextNode(U,Y);$=V.getAttribute("Qualifier");_=r(V.getAttribute("Term"));if($){_+="#"+$}a1=f(t,V,Z);a1=s(a1,M.types,Q,S);q[Q][_]=a1}b1=x.selectNodes(t,"//d:Annotations[contains(@Target, '"+Z+"')]//d:PropertyValue[contains(@Path, '/')]//@Path",t);for(i=0;i<b1.length;i+=1){c1=x.nextNode(b1,i);d1=c1.value;if(q.propertyAnnotations){if(q.propertyAnnotations[Q]){if(q.propertyAnnotations[Q][d1]){continue}}}e1=d1.split('/');if(o(Q,e1[0],m)){if(!q.expand){q.expand={}}if(!q.expand[Q]){q.expand[Q]={}}q.expand[Q][e1[0]]=e1[0]}}f1=x.selectNodes(t,"//d:Annotations[contains(@Target, '"+Z+"')]//d:Path[contains(., '/')]",t);for(i=0;i<f1.length;i+=1){c1=x.nextNode(f1,i);d1=x.getNodeText(c1);if(q.propertyAnnotations[Q]){if(q.propertyAnnotations[Q][d1]){continue}}if(!q.expand){q.expand={}}if(!q.expand[Q]){q.expand[Q]={}}e1=d1.split('/');if(o(Q,e1[0],m)){if(!q.expand){q.expand={}}if(!q.expand[Q]){q.expand[Q]={}}q.expand[Q][e1[0]]=e1[0]}}}this.initialized[a]=q}return q}}())};if(!jQuery.sap.isDeclared('sap.ushell.components.factsheet.controls.PictureTileRenderer')){
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5) (c) Copyright 2009-2013 SAP AG. All rights reserved
*/
jQuery.sap.declare("sap.ushell.components.factsheet.controls.PictureTileRenderer");jQuery.sap.require('sap.m.CustomTileRenderer');sap.ushell.components.factsheet.controls.PictureTileRenderer=sap.ui.core.Renderer.extend(sap.m.CustomTileRenderer);sap.ushell.components.factsheet.controls.PictureTileRenderer.render=function(r,c){jQuery.sap.log.debug("PictureTileRenderer :: begin rendering");r.write("<div ");r.writeControlData(c);r.addClass("sapCaUiPictureTile");r.writeClasses();r.write(">");r.write("<div");r.addClass("sapCaUiPictureTileContent");r.writeClasses();r.write(">");r.write("<div id='"+c.getId()+"-wrapper'>");r.renderControl(c._oDeletePictureButton);this._renderContent(r,c);r.write("</div>");r.write("</div></div>")};sap.ushell.components.factsheet.controls.PictureTileRenderer._renderContent=function(r,t){r.renderControl(t.getContent())}};if(!jQuery.sap.isDeclared('sap.ushell.components.factsheet.controls.PictureViewerRenderer')){jQuery.sap.declare("sap.ushell.components.factsheet.controls.PictureViewerRenderer");jQuery.sap.require('sap.m.TileContainerRenderer');sap.ushell.components.factsheet.controls.PictureViewerRenderer={};sap.ushell.components.factsheet.controls.PictureViewerRenderer.render=function(r,c){jQuery.sap.log.debug("PictureViewerRenderer :: begin rendering");sap.m.TileContainerRenderer.render(r,c);jQuery.sap.log.debug("PictureViewerRenderer :: end rendering")}};if(!jQuery.sap.isDeclared('sap.ushell.components.factsheet.factory.ThingInspector')){
//Copyright (c) 2013 SAP AG, All Rights Reserved
(function(){"use strict";jQuery.sap.declare("sap.ushell.components.factsheet.factory.ThingInspector");sap.ushell.components.factsheet.factory=(function(){jQuery.sap.require("sap.suite.ui.commons.UnifiedThingInspector");jQuery.sap.require("sap.ushell.components.factsheet.annotation.Mapping");jQuery.sap.require("sap.ui.vbm.library");var t,M={},g,c,d,f,h,l,n,q,r,s={},u,v,w,x,y,z,A,B,S,C,D,E,F,G,H,L,I,J,K,N,O,P,Q="displayFactSheet";jQuery.sap.require("sap.ui.base.Object");jQuery.sap.require("sap.ui.core.format.NumberFormat");L=sap.ui.getCore().getConfiguration().getFormatSettings().getFormatLocale();if(sap.ui.getCore().getConfiguration().getLanguage()==="ZH"){L=new sap.ui.core.Locale("zh_CN")}S=sap.ui.core.LocaleData.getInstance(L)._get("decimalFormat-short");function R(a){return a<0?true:false}function T(a){var b=Number(a).toFixed(0);if(R(a)){b=Number(b)*-1}return b}function U(a){return Number(a)*-1}function V(a){var b="",e="",j="",k=0,m="",o,p,Y,Z,_,i;p=T(a);o=Math.pow(10,p.toString().length-1);if(S===null){return sap.ui.core.format.NumberFormat.getIntegerInstance().format(a)}if(S[o+"-one"]===null||S[o+"-one"]===undefined||S[o+"-one"]==="0"){return sap.ui.core.format.NumberFormat.getIntegerInstance().format(a)}b=S[o+"-one"];Y=b.match(/0/g).length;Z=b.substring(0,b.lastIndexOf("0")+1);_=b.substring(b.lastIndexOf("0")+1,b.length);_=_.replace(/'.'/g,".");e=Z;j=p.toString();for(i=0;i<Y;i+=1){k=e.indexOf("0",k);if(k===-1){break}e=e.substring(0,k)+j[i]+e.substring(k+1);k+=1}if(R(a)){e=U(e)}m=sap.ui.core.format.NumberFormat.getFloatInstance().format(e);m=m+_;return m}function W(a,b){var e,o,i,j;if(!a){return""}o=new RegExp(sap.ui.core.format.NumberFormat.oDefaultFloatFormat.groupingSeparator,"g");if(b>=0){j=sap.ui.core.format.NumberFormat.getFloatInstance({minFractionDigits:b,maxFractionDigits:b},L);e=j.format(a)}else{j=sap.ui.core.format.NumberFormat.getFloatInstance({minFractionDigits:0,maxFractionDigits:99},L);e=j.format(a)}i=e.replace(/[\D]/g,"");if(i&&i.length>6){a=a.replace(o,"");return(V(a))}else{return e}}function X(){var p,a,o="",b,m,e,k,i,j,Y,Z,_;b=this.getElementBinding().sPath.split("/")[1];m=this.getModel();e=this.mBindingInfos.value.parameters;k=this.mBindingInfos.value.parts;for(i=0;i<e.length;i+=1){o=o+e[i].string}for(j=0;j<k.length;j+=1){p=k[j].path;Z="{"+p+"}";a=m.oData[b][p];o=o.replace(Z,a)}Y=u(o);if($.isNumeric(Y)){_=this.mBindingInfos.value.parts.filter(function(a1){return(a1.path===p)});Y=W(Y,_[0].type.oFormatOptions.maxFractionDigits);this.setDoubleFontSize(true)}this.setValue(Y);this.getElementBinding().detachChange(X)}O=function(){var a="";if(t.getName()&&t.getDescription()){a=t.getName()+", "+t.getDescription()}else if(t.getName()&&!t.getDescription()){a=t.getName()}else if(!t.getName()&&t.getDescription()){a=t.getDescription()}return a};g=function(a){var b,e,i;b=a.slice(1).split("/");e="/";for(i=0;i<b.length;i+=1){if((b[i].indexOf("(")>0)&&(b[i].indexOf("sid(")<0)){break}else{e+=b[i]+"/"}}return e};c=function(a,m){var e,b,i,j;b=a.slice(m.sServiceUrl.length+1);if(b.indexOf("/")>=0){i=b.split("/");j=i[i.length];e=i[i.length-1];if(e.indexOf("(")>=0){e=e.slice(e.indexOf("("))}e=this.getNavEntitySet(e,j,m.getMetadata())}else{if(b.indexOf("(")>=0){e=b.slice(0,b.indexOf("("))}else{if(b.indexOf("?")>=0){e=b.slice(0,b.indexOf("?"))}else{e=b}}}return e};x=function(a,m){var e,k="",o,b;e=a.slice(m.sServiceUrl.length+1);if(e.indexOf("(")>=0){k=e.slice(e.indexOf("(")+1,e.indexOf(")"));if(k.indexOf("=")<=0){o=m.getServiceMetadata();b=f(c(a,m),o);k=y(b,o)+"="+k}}return k};y=function(e,m){var i,a,j;for(i=m.dataServices.schema.length-1;i>=0;i-=1){a=m.dataServices.schema[i];if(a.namespace===e.slice(0,e.lastIndexOf("."))){for(j=0;j<a.entityType.length;j+=1){if(a.entityType[j].name===e.slice(e.lastIndexOf(".")+1)){return a.entityType[j].key.propertyRef[0].name}}}}};d=function(e,m){var i,a,b,j;for(i=m.dataServices.schema.length-1;i>=0;i-=1){a=m.dataServices.schema[i];if(a.entityContainer){b=a.entityContainer[0].entitySet;for(j=b.length-1;j>=0;j-=1){if(b[j].entityType===e){return b[j].name}}}}};f=function(e,m,b){var i,a,k,j,o;for(i=m.dataServices.schema.length-1;i>=0;i-=1){a=m.dataServices.schema[i];if(a.entityContainer){k=a.entityContainer[0].entitySet;for(j=k.length-1;j>=0;j-=1){if(k[j].name===e){if(b){o=k[j].entityType.slice(a.namespace.length+1)}else{o=k[j].entityType}return o}}}}};h=function(e,a,m){var b,i,o,p,k,j,Y;b=e.split(".");for(i=m.dataServices.schema.length-1;i>=0;i-=1){o=m.dataServices.schema[i];p=b[0];if(b.length>2){for(k=1;k<b.length-1;k+=1){p+="."+b[k]}}if(o.namespace===p){for(j=0;j<o.entityType.length;j+=1){if(o.entityType[j].name===b[b.length-1]){if(o.entityType[j].navigationProperty){for(k=0;k<o.entityType[j].navigationProperty.length;k+=1){if(o.entityType[j].navigationProperty[k].name===a){Y=o.entityType[j].navigationProperty[k];return{name:Y.relationship,toRole:Y.toRole}}}}}}}}};l=function(e,a,m){var b,o,p,i,Y,j,Z,k;b=f(e,m);if(a.charAt(0)==="@"){if(M.termDefinitions&&M.termDefinitions[a]){o=M.termDefinitions[a];if(o.indexOf("Collection")>=0){o=o.slice(o.indexOf("(")+1,o.indexOf(")"))}return d(o,m)}}else{p=h(b,a,m);if(p){for(i=m.dataServices.schema.length-1;i>=0;i-=1){Y=m.dataServices.schema[i];if(Y.entityContainer&&Y.entityContainer[0].associationSet){for(j=Y.entityContainer[0].associationSet.length-1;j>=0;j-=1){Z=Y.entityContainer[0].associationSet[j];if(Z.association===p.name){for(k=0;k<Z.end.length;k+=1){if(Z.end[k].role===p.toRole){return Z.end[k].entitySet}}}}}}}}};n=function(e,a,m){var b,o,i,p,j,Y,k;b=f(e,m);o=h(b,a,m);if(o){for(i=m.dataServices.schema.length-1;i>=0;i-=1){p=m.dataServices.schema[i];for(j=p.association.length-1;j>=0;j-=1){Y=p.association[j];if(p.namespace+"."+Y.name===o.name){for(k=0;k<Y.end.length;k+=1){if(Y.end[k].role.substr(0,7)==="ToRole_"){return Y.end[k].multiplicity}}}}}}else{jQuery.sap.log.error("\""+a+"\" wasn't found in the metadata document. Check whether the corresponding search connector is active.");return 0}};q=function(e,m){var o,a,b,i;o={};if(M.expand){if(M.expand[f(e,m)]){a=M.expand[f(e,m)];b=[];for(i in a){if(a.hasOwnProperty(i)){b.push(a[i])}}o.expand=b.join(", ")}}return o};r=function(p,o){var b={},j;b.parts=[];b.parameters=[];for(j=p.length-1;j>=0;j-=1){if(p[j].Type==="Path"){if(p[j].EdmType){switch(p[j].EdmType){case"Edm.DateTimeOffset":case"Edm.DateTime":b.parts.push({path:p[j].Value,type:new sap.ui.model.type.DateTime()});break;case"Edm.Time":b.parts.push({path:p[j].Value+"/ms",type:new sap.ui.model.type.Time({source:{pattern:"timestamp"}})});break;case"Edm.Date":b.parts.push({path:p[j].Value,type:new sap.ui.model.type.Date()});break;case"Edm.Decimal":case"Edm.Double":case"Edm.Single":b.parts.push({path:p[j].Value,type:new sap.ui.model.type.Float()});break;case"Edm.Int16":case"Edm.Int32":case"Edm.Int64":b.parts.push({path:p[j].Value,type:new sap.ui.model.type.Integer()});break;default:b.parts.push({path:p[j].Value});break}}else{b.parts.push({path:p[j].Value})}}else if(p[j].Type==="String"){b.parameters.unshift({string:p[j].Value})}}b.formatter=function(){var a="",e,k,i,m,Y="",Z=false,_=0,a1=0;if(arguments&&arguments.length>=1){e=arguments.length-1;i="";m=0;if(p&&p[0]&&(p[0].Type==="String")&&(p[0].Value.substr(0,1)==="#")){Z=true}for(k=0;k<p.length;k+=1){if(p[k].Type==="Path"){i=arguments[e];if(!i||(i.length===0)){if(a.length>m){if(a.indexOf("(")>m){a=a.substr(0,m)}else{a=a.substr(0,m);i=a}}}else{if(Z){i=encodeURIComponent(i)}a+=i;_+=1}e-=1;m=a.length}else{m=a.length;Y=p[k].Value;if(Y.indexOf("(")!==-1){a1+=1}if((i&&i.length>0)||(Y.indexOf("(")!==-1)||(Y&&(Y.substr(0,1)==="#"))){a+=p[k].Value}else{Y=""}}}if(o){a=o(a)}a=a.trim();if((_===1)&&(a1>0)&&(a.substr(0,1)==="(")&&(a.substr(-1)===")")){a=a.substr(1,a.length-2)}return a.trim()}};return b};D=function(o,p){var k;for(k in o){if(o.hasOwnProperty(k)){if(k==="__metadata"){continue}else if(k===p){return o[k]}else if(typeof o[k]==="object"){return D(o[k],p)}}}};u=function(a){var i,b,e,j={},k;i=a.lastIndexOf("/");b=a.slice(0,i);e=a.slice(i+1);if(!s[a]){j=new sap.ui.model.json.JSONModel();j.loadData(b,null,false);s[a]=j.getData()}else{j=s[a]}if(s[a]&&s[a].d){if(!s[a].d[e]){k=D(s[a].d,e)}else{k=s[a].d[e]}}return k};v=function(o,e,m){var a,b,i,j;a=new sap.ui.core.Control();b=E(o.Value,o.EdmType,e);if(o.Value&&o.Value["com.sap.vocabularies.UI.v1.IsImageURL"]){a=new sap.m.Image({height:"50px"});if(b.BindingInfo){a.bindProperty("src",b.BindingInfo)}else{a.setProperty("src",b.String)}}else{if(o.UrlRef||o.Url||(o.Target&&o.Target.Path)){a=new sap.m.Link({wrapping:true})}else{a=new sap.m.Text();if(o.EdmType==="Edm.Decimal"||o.EdmType==="Edm.Double"||o.EdmType==="Edm.Single"||o.EdmType==="Edm.Int16"||o.EdmType==="Edm.Int32"||o.EdmType==="Edm.Int64"){a.setTextAlign(sap.ui.core.TextAlign.End)}}a.addStyleClass("sapFactsheetUtiDataField");if(b.BindingInfo){a.bindProperty("text",b.BindingInfo)}else{a.setProperty("text",b.String)}}if((o.RecordType==="com.sap.vocabularies.UI.v1.DataFieldWithNavigation")&&m){i=o.Target.Path;if(M[e][i.slice(1)]){if(i.charAt(0)==="@"){if(i.indexOf("/")<0){j=M[e][i.slice(1)].UrlRef}else{j=M[e][i.slice(1,i.indexOf("/"))].UrlRef}a.bindProperty("href",z(j))}}a.attachPress(function(k){return false})}if(o.RecordType==="com.sap.vocabularies.UI.v1.DataFieldWithUrl"){if(o.Url.String){a.setHref(o.Url.String)}else{a.bindProperty("href",z(o.Url))}}return a};w=function(o,a,p,b){var e,i="",m="",Y,j,k,Z;e=new sap.m.Label(a);e.addStyleClass("sapFactsheetUtiLabel");if(b){i=":"}if(o.Label){if(o.Label.String){e.setText(o.Label.String.trim()+i);e.setTooltip(o.Label.String.trim())}else{if(o.Label.Path){e.bindProperty("text",o.Label.Path);e.bindProperty("tooltip",o.Label.Path)}}}else{if(o.Value){if(o.Value.Path&&p){Y=p[o.Value.Path];for(j in Y){if(Y.hasOwnProperty(j)){if(j==="http://www.sap.com/Protocols/SAPData"){if(Y[j].label){m=Y[j].label;break}}}}}else if(o.Value.Apply&&(o.Value.Apply.Name==="odata.concat")){for(k in o.Value.Apply.Parameters){if(o.Value.Apply.Parameters.hasOwnProperty(k)){Z=o.Value.Apply.Parameters[k];if(Z.Type==="Path"){Y=p[Z.Value];for(j in Y){if(Y.hasOwnProperty(j)){if(j==="http://www.sap.com/Protocols/SAPData"){if(Y[j].label){m=Y[j].label;break}}}}break}}}}e.setText(m+i);e.setTooltip(m)}}return e};E=function(o,e,a){var b={},p,k,m=[],j,Y,Z,_=[],a1,b1,i,c1,d1,e1,f1,g1=[];if(!o){return false}if(o.Apply){if(o.Apply.Name==="odata.concat"){if(a&&M.propertyAnnotations&&M.propertyAnnotations[a]){p=M.propertyAnnotations[a];k=o.Apply.Parameters;for(j=0;j<k.length;j+=1){if(k[j].Type==="Path"){m.push(k[j]);if(p&&p[k[j].Value]&&p[k[j].Value]["Org.OData.Measures.V1.ISOCurrency"]){m.push({Type:"String",Value:" "});if(p[k[j].Value]["Org.OData.Measures.V1.ISOCurrency"].Path){m.push({Type:"Path",Value:p[k[j].Value]["Org.OData.Measures.V1.ISOCurrency"].Path})}else{m.push({Type:"String",Value:p[k[j].Value]["Org.OData.Measures.V1.ISOCurrency"].String})}}else{if(p&&p[k[j].Value]&&p[k[j].Value]["Org.OData.Measures.V1.Unit"]){m.push({Type:"String",Value:" "});if(p[k[j].Value]["Org.OData.Measures.V1.Unit"].Path){m.push({Type:"Path",Value:p[k[j].Value]["Org.OData.Measures.V1.Unit"].Path})}else{m.push({Type:"String",Value:p[k[j].Value]["Org.OData.Measures.V1.Unit"].String})}}}}else{m.push(k[j])}}b.BindingInfo=r(m)}else{b.BindingInfo=r(o.Apply.Parameters)}}}else{if(o.Path){if(o.Path.charAt(0)==="@"){Y=M[a][o.Path.slice(1,o.Path.indexOf("/"))].UrlRef;Z=o.Path.slice(o.Path.indexOf("/")+1);if(Y&&Y.Apply){a1=Y.Apply.Parameters;switch(Y.Apply.Name){case"odata.concat":_=a1;_.push({Type:"String",Value:"/"+Z});break;case"odata.fillUriTemplate":b1=a1[0].Value.split("{");for(i in b1){if(b1.hasOwnProperty(i)){if(b1[i].indexOf("}")<0){_.push({Type:"String",Value:b1[i]})}else{c1=b1[i].split("}");for(j=1;j<a1.length;j+=1){if(a1[j].Name===c1[0]){d1=a1[j].Value;if(d1.Path){_.push({Type:"Path",Value:d1.Path})}else{if(d1.Apply&&(d1.Apply.Name==="odata.UriEncode")){e1=d1.Apply.Parameters[0];_.push({Type:e1.Type,Value:encodeURIComponent(e1.Value)});_.push({Type:"String",Value:"{"+encodeURIComponent(e1.Value)+"}"})}}}}_.push({Type:"String",Value:c1[1]})}}}_.push({Type:"String",Value:"/"+Z});b.fnChange=X;break;default:break}b.BindingInfo=r(_,u)}else{if(Y&&Y.Path){_.push({Type:"Path",Value:Y.Path},{Type:"String",Value:"/"+Z});b.BindingInfo=r(_,u)}else{if(Y&&Y.String){b.String=u(Y.String+"/"+Z)}}}}else{b.BindingInfo={};switch(e){case"Edm.DateTimeOffset":case"Edm.DateTime":b.BindingInfo={path:o.Path,type:new sap.ui.model.type.DateTime()};break;case"Edm.Time":b.BindingInfo={path:o.Path+"/ms",type:new sap.ui.model.type.Time({source:{pattern:"timestamp"}})};break;case"Edm.Date":b.BindingInfo={path:o.Path,type:new sap.ui.model.type.Date()};break;case"Edm.Decimal":case"Edm.Double":case"Edm.Single":case"Edm.Int16":case"Edm.Int32":case"Edm.Int64":if((e==="Edm.Decimal")||(e==="Edm.Double")||(e==="Edm.Single")){f1=new sap.ui.model.type.Float()}else if((e==="Edm.Int16")||(e==="Edm.Int32")||(e==="Edm.Int64")){f1=new sap.ui.model.type.Integer()}if(M.propertyAnnotations){p=M.propertyAnnotations[a];g1.push({Type:"Path",Value:o.Path,EdmType:e},{Type:"String",Value:" "});if(p&&p[o.Path]&&p[o.Path]["Org.OData.Measures.V1.ISOCurrency"]){if(p[o.Path]["Org.OData.Measures.V1.ISOCurrency"].Path){g1.push({Type:"Path",Value:p[o.Path]["Org.OData.Measures.V1.ISOCurrency"].Path})}else{g1.push({Type:"String",Value:p[o.Path]["Org.OData.Measures.V1.ISOCurrency"].String})}}else{if(p&&p[o.Path]&&p[o.Path]["Org.OData.Measures.V1.Unit"]){if(p[o.Path]["Org.OData.Measures.V1.Unit"].Path){g1.push({Type:"Path",Value:p[o.Path]["Org.OData.Measures.V1.Unit"].Path})}else{g1.push({Type:"String",Value:p[o.Path]["Org.OData.Measures.V1.Unit"].String})}}}b.BindingInfo=r(g1)}else{b.BindingInfo={path:o.Path,type:f1}}break;default:b.BindingInfo={path:o.Path};break}}}else{if(o.String){b.String=o.String}}}return b};z=function(o){var a=[],p,b,j,e,i={},k,m,Y;if(o&&o.Apply){p=o.Apply.Parameters;switch(o.Apply.Name){case"odata.fillUriTemplate":p[0].Value=p[0].Value.trim();b=p[0].Value.split("{");for(j=0;j<b.length;j+=1){if(b[j].indexOf("}")<0){a.push({"Value":b[j],"Type":"String"})}else{e=b[j].split("}");i={};i.Value=e[0];i.Type="Path";for(j=1;j<p.length;j+=1){if(p[j].Name===i.Value){k=p[j].Value;if(k.Path){i.Value=k.Path}else{if(k.Apply&&k.Apply.Name==="odata.UriEncode"){i.Value=k.Apply.Parameters[0].Value}}break}}a.push(i);a.push({"Value":e[1],"Type":"String"})}}m=sap.ushell.Container.getService("NavTargetResolution").getCurrentResolution();if(m&&m.url){Y=jQuery.sap.getUriParameters(m.url).get("sap-system");if(Y){a.push({Type:"String",Value:"&sap-system="+Y})}}break;default:break}}return r(a)};A=function(o){var a=sap.ui.core.TextAlign.Begin;if(o.EdmType==="Edm.Decimal"||o.EdmType==="Edm.Double"||o.EdmType==="Edm.Single"||o.EdmType==="Edm.Int16"||o.EdmType==="Edm.Int32"||o.EdmType==="Edm.Int64"){a=sap.ui.core.TextAlign.End}return a};F=function(m,e,a,o,b){var k,p,j=0,Y=0,Z=0,_=0,a1,i,b1,c1,d1;if(!b){b=m.getServiceMetadata()}if(!a){a=[]}k=f(e,b);d1=new sap.ui.layout.form.SimpleForm({labelMinWidth:150,maxContainerCols:2});p=(M.propertyExtensions)?M.propertyExtensions[k]:[];if(o&&o.High){Y=o.High}if(o&&o.Medium){Z=o.Medium}if(o&&o.Low){_=o.Low}for(i=0;i<a.length;i+=1){a1=P(a[i]);if(o&&(a1==="High")){if(Y){Y-=1}else{continue}}else if(o&&(a1==="Medium")){if(Z){Z-=1}else{continue}}else if(o&&(a1==="Low")){if(_){_-=1}else{continue}}if(o&&o.Total&&(j>=o.Total)){break}j+=1;b1=new sap.ui.core.Control().setModel(m);c1=w(a[i],{textAlign:sap.ui.core.TextAlign.End},p,false);c1.addStyleClass("sapFactsheetUtiFormPadding");b1=v(a[i],k,b);b1.addStyleClass("sapFactsheetUtiFormPadding");if(b1.setTextAlign){b1.setTextAlign(sap.ui.core.TextAlign.Begin)}d1.addContent(c1);d1.addContent(b1)}d1.addStyleClass("sapFactsheetUtiFormLayout");return d1};G=function(m,e,o,b){var a,j="",k,p,Y,Z,_,a1,b1,c1,d1,e1,f1=[],i,g1,h1,i1;a=m.getServiceMetadata();switch(o.RecordType){case"com.sap.vocabularies.UI.v1.ReferenceFacet":k=new sap.suite.ui.commons.UnifiedThingGroup();if(o.Label&&o.Label.String){k.setTitle(o.Label.String)}p=o.Target.AnnotationPath;Y=p.substring(p.lastIndexOf("@")+1);p=p.substring(0,p.lastIndexOf("@")-1);if(p){j=n(e,p,a)}Z=Y.split("#");switch(Z[0]){case"com.sap.vocabularies.UI.v1.LineItem":case"com.sap.vocabularies.UI.v1.Chart":case"com.sap.vocabularies.UI.v1.Badge":case"com.sap.vocabularies.UI.v1.Identification":if(p){_=l(e,p,a);g1=f(_,a)}else{g1=f(e,a)}if(Z[0]==="com.sap.vocabularies.UI.v1.Chart"){Y="com.sap.vocabularies.UI.v1.LineItem"}h1=M[g1][Y];i1=M.propertyExtensions[g1];if(j==="*"&&Z[0]!=="com.sap.vocabularies.UI.v1.Identification"){a1=H(m,h1,g1,a,b+"/"+p,o,i1);k.setContent(a1)}if(Z[0]==="com.sap.vocabularies.UI.v1.Identification"){b1=M[g1]["com.sap.vocabularies.UI.v1.Identification"];c1=new sap.ui.layout.VerticalLayout({width:"100%"}).setModel(m);if(p){c1.addContent(F(m,_,b1)).addStyleClass("sapFactsheetUtiPanel").bindElement(b+"/"+p)}else{c1.addContent(F(m,e,b1).addStyleClass("sapFactsheetUtiPanel"))}k.setContent(c1)}break;case"com.sap.vocabularies.UI.v1.StatusInfo":if(p){_=l(e,p,a);d1=M[f(_,a)]["com.sap.vocabularies.UI.v1.StatusInfo"];k.setContent(F(m,_,d1).addStyleClass("sapFactsheetUtiPanel").bindElement(b+"/"+p))}else{d1=M[f(e,a)]["com.sap.vocabularies.UI.v1.StatusInfo"];k.setContent(F(m,e,d1).addStyleClass("sapFactsheetUtiPanel"))}break;case"com.sap.vocabularies.UI.v1.FieldGroup":e1=M[f(e,a)][Y];if(e1){if(!k.getTitle()||(k.getTitle()==="")){if(e1.Label){if(e1.Label.String){k.setTitle(e1.Label.String)}else{if(e1.Label.Path){k.bindProperty("title",e1.Label.Path)}}}}if(p){_=l(e,p,a);k.setContent(F(m,_,e1.Data).addStyleClass("sapFactsheetUtiPanel").bindElement(b+"/"+p))}else{k.setContent(F(m,e,e1.Data).addStyleClass("sapFactsheetUtiPanel"))}}break;default:break}return k;case"com.sap.vocabularies.UI.v1.ReferenceURLFacet":k=new sap.ui.ux3.ThingGroup({title:o.Label.String});k.setContent(B(o));return k;case"com.sap.vocabularies.UI.v1.CollectionFacet":for(i=0;i<o.Facets.length;i+=1){f1.push(G(m,e,o.Facets[i],b))}return f1;default:break}};B=function(o){var i,a,b;switch(o.UrlContentType.String){case"image/png":case"image/jpeg":case"image/gif":i=new sap.m.Image({width:"100%"});if(o.Url.String){i.setSrc(o.Url.String)}return i;default:a=new sap.ui.core.HTML();if(o.Url.String){a.setContent("<iframe src = '"+o.Url.String+"' width='100%' height='250px' frameborder='0'></iframe>")}else{if(o.Url.Path){a.bindProperty("content",{path:o.Url.Path,formatter:function(e){b="<iframe src = '"+o.Url.Path+"' width='100%' height='250px' frameborder='0'></iframe>";return b}})}}return a}};H=function(m,a,e,o,b,Y,Z){var _,a1,b1,c1,d1,i,k,e1=[],f1=[],g1=[],h1=[],i1,j1,k1,l1,m1,n1,o1,p1=[],q1,r1,s1,t1=[],u1,v1,w1,x1,y1,z1,A1,B1,C1,D1=false,E1,F1;C1=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");if(!o){o=m.getServiceMetadata()}_=(M.propertyExtensions)?M.propertyExtensions[e]:[];a1=6;if(jQuery.device.is.tablet&&jQuery.device.is.landscape){a1=5}else if(jQuery.device.is.tablet&&jQuery.device.is.portrait){a1=4}else if(jQuery.device.is.phone&&jQuery.device.is.landscape){a1=3}else if(jQuery.device.is.phone&&jQuery.device.is.portrait){a1=2}b1=0;c1=0;for(i=0;i<a.length;i+=1){d1=P(a[i]);if(d1==="High"){b1+=1}}if(a1>b1){c1=a1-b1}else if(a1<b1){b1=a1}f1.push(new sap.m.Column({visible:false}));e1.push(new sap.m.Text().bindText("__metadata/uri"));for(i=0;i<a.length;i+=1){F1="";k1=new sap.ui.core.Control();d1=P(a[i]);k1=v(a[i],e,o);i1=w(a[i],null,_);if(a[i].Value.Path){s1=a[i].Value.Path;if(Z[s1]&&Z[s1]["http://www.sap.com/Protocols/SAPData"]&&Z[s1]["http://www.sap.com/Protocols/SAPData"].sortable){i1.data("IsSortable",Z[s1]["http://www.sap.com/Protocols/SAPData"].sortable);if(Z[s1]["http://www.sap.com/Protocols/SAPData"].sortable==="true"){D1=true}}else{i1.data("IsSortable","true");D1=true}if(Z[s1]&&Z[s1]["http://www.sap.com/Protocols/SAPData"]&&Z[s1]["http://www.sap.com/Protocols/SAPData"].filterable){i1.data("IsFilterable",Z[s1]["http://www.sap.com/Protocols/SAPData"].filterable);if(Z[s1]["http://www.sap.com/Protocols/SAPData"].filterable==="true"){D1=true}}else{i1.data("IsFilterable","true");D1=true}}else{E1=true;for(k=0;k<a[i].Value.Apply.Parameters.length;k+=1){if(a[i].Value.Apply.Parameters[k].Type==="Path"){s1=a[i].Value.Apply.Parameters[k].Value;if(Z[s1]&&Z[s1]["http://www.sap.com/Protocols/SAPData"]&&Z[s1]["http://www.sap.com/Protocols/SAPData"].sortable){if(Z[s1]["http://www.sap.com/Protocols/SAPData"].sortable==="false"){E1=false;F1="";break}}if(F1){F1+=";"}F1+=s1}}s1=F1;if(E1===false){i1.data("IsSortable","false")}else{i1.data("IsSortable","true");D1=true}i1.data("IsFilterable","false")}if(a[i].EdmType){i1.data("EdmType",a[i].EdmType)}i1.data("ColumnName",s1);g1.push(i1);h1.push(k1);if(d1==="High"){if(b1>0){j1=true;b1-=1}else{j1=false}}else if(d1==="Medium"){if(c1>0){j1=true;c1-=1}else{j1=false}}else{j1=false}f1.push(new sap.m.Column({header:i1,hAlign:A(a[i]),visible:j1}));e1.push(k1)}l1=new sap.m.ColumnListItem({type:sap.m.ListType.Navigation,unread:false,cells:e1});if(Y){m1=Y.Label.String}l1.attachPress({aColumns:a,aLabels:g1,aControls:h1,sTitle:m1},function(j,p){var G1={},H1,I1,i1,i,J1,K1;G1.items={};H1=j.getSource().getCells()[0].getText().substr(j.getSource().getCells()[0].getText().lastIndexOf("/"));I1=new sap.m.Table({backgroundDesign:sap.m.BackgroundDesign.Transparent,showSeparators:sap.m.ListSeparators.None,columns:[new sap.m.Column({hAlign:sap.ui.core.TextAlign.End}),new sap.m.Column()]});I1.addStyleClass("sapFactsheetUtiPanel");I1.addStyleClass("sapFactsheetUtiTilePadding");I1.addStyleClass("sapFactsheetUtiTableNoTopBorder");I1.bindElement(H1);for(i=0;i<a.length;i+=1){i1=g1[i].clone();i1.setText(i1.getText()+":");I1.addItem(new sap.m.ColumnListItem({cells:[i1,h1[i].clone()]}))}J1=new sap.suite.ui.commons.UnifiedThingGroup({content:I1,title:m1,description:O()});K1=new sap.m.Page({title:t.getTitle(),showNavButton:true,content:[J1]});t.navigateToPage(K1,true)});n1=new sap.m.Table({growing:true,columns:f1});n1.setModel(m);n1.bindItems({path:b,template:l1});v1=new sap.m.VBox({items:[new sap.m.Input({placeholder:C1.getText("USHELL_FACTSHEET_ENTER_YOUR_FILTER"),change:function(j){var p,G1,H1,I1,i;p=j.getSource().getParent().getParent().getId();G1=sap.ui.getCore().byId(p.substr(0,p.indexOf("-")));H1=G1.getFilterItems();for(i=0;i<H1.length;i+=1){if(H1[i]instanceof sap.m.ViewSettingsCustomItem&&H1[i].getKey()===this.oParent.data("ColumnName")){I1=H1[i];break}}if(I1){if((j.getParameter("newValue")===undefined)||(j.getParameter("newValue")==="")){I1.setSelected(false);I1.setFilterCount(0)}else{I1.setSelected(true);I1.setFilterCount(1)}}}}).addStyleClass("sapFactsheetUtiFilterInput")]});w1=new sap.m.VBox({items:[new sap.m.List({mode:sap.m.ListMode.SingleSelectLeft,includeItemInSelection:true,items:[new sap.m.StandardListItem({title:C1.getText("USHELL_FACTSHEET_GREATER_THEN")}).data("FilterOperator",sap.ui.model.FilterOperator.GT),new sap.m.StandardListItem({title:C1.getText("USHELL_FACTSHEET_EQUALS")}).data("FilterOperator",sap.ui.model.FilterOperator.EQ),new sap.m.StandardListItem({title:C1.getText("USHELL_FACTSHEET_LESS_THEN")}).data("FilterOperator",sap.ui.model.FilterOperator.LT)]}),new sap.m.Input({placeholder:C1.getText("USHELL_FACTSHEET_ENTER_YOUR_FILTER"),change:function(j){var p,G1,H1,I1,i;p=j.getSource().getParent().getParent().getId();G1=sap.ui.getCore().byId(p.substr(0,p.indexOf("-")));H1=G1.getFilterItems();for(i=0;i<H1.length;i+=1){if((H1[i]instanceof sap.m.ViewSettingsCustomItem)&&(H1[i].getKey()===this.oParent.data("ColumnName"))){I1=H1[i];break}}if(I1){if((j.getParameter("newValue")===undefined)||(j.getParameter("newValue")==="")){I1.setSelected(false);I1.setFilterCount(0)}else{I1.setSelected(true);I1.setFilterCount(1)}}}}).addStyleClass("sapFactsheetUtiFilterInput")]});x1=new sap.m.VBox({items:[new sap.m.List({mode:sap.m.ListMode.SingleSelectLeft,includeItemInSelection:true,items:[new sap.m.StandardListItem({title:C1.getText("USHELL_FACTSHEET_AFTER")}).data("FilterOperator",sap.ui.model.FilterOperator.GT),new sap.m.StandardListItem({title:C1.getText("USHELL_FACTSHEET_AT")}).data("FilterOperator",sap.ui.model.FilterOperator.EQ),new sap.m.StandardListItem({title:C1.getText("USHELL_FACTSHEET_BEFORE")}).data("FilterOperator",sap.ui.model.FilterOperator.LT)]}),new sap.m.DateTimeInput({type:sap.m.DateTimeInputType.Date,valueFormat:new sap.ui.model.type.DateTime({pattern:"yyyy/MM/dd HH:mm:ss UTC+00:00"}).getOutputPattern(),placeholder:C1.getText("USHELL_FACTSHEET_ENTER_YOUR_FILTER"),change:function(j){var p,G1,H1,I1,i;p=j.getSource().getParent().getParent().getId();G1=sap.ui.getCore().byId(p.substr(0,p.indexOf("-")));H1=G1.getFilterItems();for(i=0;i<H1.length;i+=1){if((H1[i]instanceof sap.m.ViewSettingsCustomItem)&&(H1[i].getKey()===this.oParent.data("ColumnName"))){I1=H1[i];break}}if((j.getParameter("newValue")===undefined)||(j.getParameter("newValue")==="")){I1.setSelected(false);I1.setFilterCount(0)}else{I1.setSelected(true);I1.setFilterCount(1)}}}).addStyleClass("sapFactsheetUtiFilterInput")]});y1=function(k1){var j=[],i,p,G1=k1.getItems(),H1;if(G1[0].getParent().data("EdmType")==="Edm.String"&&G1[0].getValue()){j.push(new sap.ui.model.Filter(G1[0].getParent().data("ColumnName"),sap.ui.model.FilterOperator.Contains,G1[0].getValue()))}else if(G1[0].getParent().data("EdmType")==="Edm.Decimal"&&G1[1].getValue()){for(i=0;i<G1[0].getItems().length;i+=1){if(G1[0].getItems()[i].getSelected()===true){p=G1[0].getItems()[i].data("FilterOperator");break}}H1=G1[1].getValue();for(i=H1.length-1;i>0;i-=1){if(H1[i]===","){H1=H1.replace(H1[i],".");break}}j.push(new sap.ui.model.Filter(G1[1].getParent().data("ColumnName"),p,H1))}else if(G1[0].getParent().data("EdmType")==="Edm.Date"&&G1[1].getValue()){for(i=0;i<G1[0].getItems().length;i+=1){if(G1[0].getItems()[i].getSelected()===true){p=G1[0].getItems()[i].data("FilterOperator");break}}j.push(new sap.ui.model.Filter(G1[1].getParent().data("ColumnName"),p,G1[1].getValue()))}else{j.push(new sap.ui.model.Filter(G1[0].getParent().data("ColumnName"),sap.ui.model.FilterOperator.EQ,G1[0].getValue()))}return j};z1=function(p){var G1=p.getSource(),H1=G1.getFilterItems(),I1,i,j;for(i=0;i<H1.length;i+=1){if(H1[i]&&H1[i]instanceof sap.m.ViewSettingsCustomItem){H1[i].setSelected(false);H1[i].setFilterCount(0);I1=H1[i].getCustomControl().getItems();for(j=0;j<I1.length;j+=1){if((I1[j]instanceof sap.m.Input)||(I1[j]instanceof sap.m.DateTimeInput)){I1[j].setValue("")}if((I1[j]instanceof sap.m.List)&&(I1[j].getSelectedItem()!==null)){I1[j].removeSelections()}}}}};A1=z1;for(i=0;i<f1.length;i+=1){if(f1[i+1]){i1=g1[i].clone();if(i1.getText()&&(i1.data("IsSortable")==="true")&&f1[i+1].getVisible()){q1=new sap.m.ViewSettingsItem({text:i1.getText(),key:i1.data("ColumnName")});if(i===0){q1.setSelected(true)}q1.Sort=i1.Sort;p1.push(q1)}if(i1.getText()&&(i1.data("IsFilterable")==="true")){if(i1.data("EdmType")==="Edm.String"){B1=v1.clone().data("ColumnName",i1.data("ColumnName")).data("EdmType",i1.data("EdmType"))}else if(i1.data("EdmType")==="Edm.Decimal"){B1=w1.clone().data("ColumnName",i1.data("ColumnName")).data("EdmType",i1.data("EdmType"))}if((i1.data("EdmType")==="Edm.String")||(i1.data("EdmType")==="Edm.Decimal")){u1=new sap.m.ViewSettingsCustomItem({key:i1.data("ColumnName"),text:i1.getText(),customControl:B1,customData:new sap.ui.core.CustomData({key:"callback",value:y1})});t1.push(u1)}}}}r1=new sap.m.ViewSettingsDialog({sortItems:p1,filterItems:t1,cancel:A1,resetFilters:z1,confirm:function(j){var G1,H1,I1=[],J1,K1=[],L1,M1=[],N1=[],p,i,O1;G1=j.getParameters();H1=n1.getBinding("items");if(G1.sortItem){J1=G1.sortItem.getKey();L1=G1.sortDescending;if(J1.indexOf(";")>0){K1=J1.split(";");for(i=0;i<K1.length;i+=1){I1.push(new sap.ui.model.Sorter(K1[i],L1))}}else if(J1){I1.push(new sap.ui.model.Sorter(J1,L1))}H1.sort(I1)}p=G1;for(i=0;i<p.filterItems.length;i+=1){if(p.filterItems[i]instanceof sap.m.ViewSettingsCustomItem){O1=p.filterItems[i].getCustomData()[0].getValue();M1=O1.apply(this,[p.filterItems[i].getCustomControl()]);if(M1){if(!Array.isArray(M1)){M1=[M1]}N1=N1.concat(M1)}}else if(p.filterItems[i]instanceof sap.m.ViewSettingsItem){M1=p.filterItems[i].getCustomData()[0].getValue();if(M1){if(!Array.isArray(M1)){M1=[M1]}N1=N1.concat(M1)}}}H1.filter(N1)}});if(D1===true&&(p1.length>0||t1.length>0)){n1.setHeaderToolbar(new sap.m.Toolbar({content:[new sap.m.Label(),new sap.m.ToolbarSpacer(),new sap.m.Button({icon:"sap-icon://drop-down-list",press:function(j){r1.open()}})]}))}n1.setNoDataText(sap.ui.getCore().getLibraryResourceBundle("sap.m").getText("PULL2REFRESH_LOADING_LONG"));o1=function(){if(this.getItems().length===0){this.setNoDataText(C1.getText("FACETOVERVIEW_NO_CONTENT_TEXT"))}else{this.setNoDataText(sap.ui.getCore().getLibraryResourceBundle("sap.m").getText("PULL2REFRESH_LOADING_LONG"))}};n1.attachUpdateFinished(o1);return n1};I=function(a,o,b,e){var i;switch(a){case"com.sap.vocabularies.UI.v1.ChartType/Area":i=new sap.viz.ui5.Area({});break;case"com.sap.vocabularies.UI.v1.ChartType/Bar":i=new sap.viz.ui5.Bar({});break;case"com.sap.vocabularies.UI.v1.ChartType/Bubble":i=new sap.viz.ui5.Bubble({});break;case"com.sap.vocabularies.UI.v1.ChartType/Column":i=new sap.viz.ui5.Column({});break;case"com.sap.vocabularies.UI.v1.ChartType/ColumnStacked":i=new sap.viz.ui5.StackedColumn({});break;case"com.sap.vocabularies.UI.v1.ChartType/ColumnStacked100":i=new sap.viz.ui5.StackedColumn100({});break;case"com.sap.vocabularies.UI.v1.ChartType/Donut":i=new sap.viz.ui5.Donut({});break;case"com.sap.vocabularies.UI.v1.ChartType/HeatMap":i=new sap.viz.ui5.Heatmap({});break;case"com.sap.vocabularies.UI.v1.ChartType/HorizontalArea":i=new sap.viz.ui5.HorizontalArea({});break;case"com.sap.vocabularies.UI.v1.ChartType/Line":i=new sap.viz.ui5.Line({});break;case"com.sap.vocabularies.UI.v1.ChartType/Pie":i=new sap.viz.ui5.Pie({});break;case"com.sap.vocabularies.UI.v1.ChartType/Scatter":i=new sap.viz.ui5.Scatter({});break;case"com.sap.vocabularies.UI.v1.ChartType/TreeMap":i=new sap.viz.ui5.Treemap({});break;case"com.sap.vocabularies.UI.v1.ChartType/AreaStacked":case"com.sap.vocabularies.UI.v1.ChartType/AreaStacked100":case"com.sap.vocabularies.UI.v1.ChartType/BarStacked":case"com.sap.vocabularies.UI.v1.ChartType/BarStacked100":case"com.sap.vocabularies.UI.v1.ChartType/HorizontalAreaStacked":case"com.sap.vocabularies.UI.v1.ChartType/HorizontalAreaStacked100":case"com.sap.vocabularies.UI.v1.ChartType/Radar":case"com.sap.vocabularies.UI.v1.ChartType/Waterfall":break}if(i){if(o&&o.String){i.setTitle(new sap.viz.ui5.types.Title({visible:true,text:o.String}))}if(b&&b.String){i.setTooltip(b.String)}i.setWidth("100%");i.setHeight("17rem");i.setDataset(e)}else{i=new sap.m.Text({})}return i};J=function(i){var a;i=i||1;if(jQuery.device.is.phone){a=(7*i)+"rem"}else{a=(11*i-1)+"rem"}return a};K=function(a){var i,b=0,e=0,j=0,o;for(i=0;i<a.length;i+=1){o=P(a[i]);if(o){switch(o){case"High":b+=1;break;case"Medium":e+=1;break;case"Low":j+=1;break}}}return{High:b,Medium:e,Low:j}};P=function(o){var e="";if(o.Importance){e=o.Importance.EnumMember}else if(o["com.sap.vocabularies.UI.v1.Importance"]){e=o["com.sap.vocabularies.UI.v1.Importance"].EnumMember}return e.substr(e.indexOf("/")+1)};N=function(m,a,e,b){var i=false,o,j,k,p;o=new sap.suite.ui.commons.KpiTile({doubleFontSize:false});if(a.ValueFormat){j=a.ValueFormat.NumberOfFractionalDigits.Int}if(a.Title&&a.Title.String){o.setDescription(a.Title.String)}else{if(a.Title&&a.Title.Path){o.bindProperty("description",{path:a.Title.Path})}}if(a.Value&&a.Value.String){o.setValue(a.Value.String)}else{if(a.Value&&a.Value.Path){k=E(a.Value,a.Value.EdmType,e);if(k.fnChange){o.setModel(m);o.bindElement(b);o.getElementBinding().attachChange(k.fnChange,o)}if(k.String){if($.isNumeric(k.String)){i=true;o.setValue(W(k.String,j))}else{o.setValue(k.String)}}else if(k.BindingInfo){p=k.BindingInfo;if(p.parts&&p.parts.length===2){o.bindProperty("valueUnit",p.parts[0]);p.parts[1].type=undefined;p.parts[1].formatter=(function(){return function(Y){return W(Y,j)}}(j));o.bindProperty("value",p.parts[1])}else if(p.parts&&p.parts.length===1){p.parts[0].type=undefined;p.parts[0].formatter=(function(){return function(Y){return W(Y,j)}}(j));o.bindProperty("value",p)}else{o.bindProperty("value",p)}}}}if(a.Value.EdmType==="Edm.Decimal"||a.Value.EdmType==="Edm.Double"||a.Value.EdmType==="Edm.Single"||a.Value.EdmType==="Edm.Int16"||a.Value.EdmType==="Edm.Int32"||a.Value.EdmType==="Edm.Int64"||i===true){o.setDoubleFontSize(true)}return o};C=function(e,p,t){var Y,Z,_,a1,b1,c1,d1,e1,i,f1={},g1,h1,i1,j1,j,k,k1,l1,m1,n1,o1,p1,q1,r1,s1,t1=0,u1=0,v1,w1,x1,y1,z1,A1,B1,C1=[],D1,E1,F1,G1,H1,I1,J1,K1,L1,M1,N1,O1,P1,Q1,m,R1,S1,T1,U1,V1,W1,X1=0,Y1,Z1,$1,_1,a2,b2,c2,d2;Y=g(e);p1=p.substring(0,p.substring(0,p.lastIndexOf("/")).lastIndexOf("/"));q1=p.substring(p.substring(0,p.lastIndexOf("/")).lastIndexOf("/"));if(window.location.search.indexOf("cbn_keep_anno_case%3Dtrue")===-1){q1=q1.toLowerCase()}Z=new sap.ui.model.odata.ODataModel(Y,{annotationURI:p1+q1,loadAnnotationsJoined:true,loadMetadataAsync:false,json:true});Z.setCountSupported(false);t.setModel(Z);_=c(e,Z);a1="/"+e.slice(Y.length);b1=Z.getServiceMetadata();M=Z.getServiceAnnotations();c1=f(_,b1);d1=M[c1]["com.sap.vocabularies.UI.v1.HeaderInfo"];e1=M[c1]["com.sap.vocabularies.UI.v1.Facets"];t.bindElement(a1,q(_,b1));r1=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");t.addStyleClass("sapFactsheetUtiThingType"+_.replace(/\s/g,""));if(d1.TypeName.String){t.setTitle(d1.TypeName.String)}else{if(d1.TypeName.Path){t.bindProperty("title",{path:d1.TypeName.Path})}}if(d1.ImageUrl&&d1.ImageUrl.String){t.setIcon(d1.ImageUrl.String)}else if(d1.ImageUrl&&d1.ImageUrl.Path){t.bindProperty("icon",{path:d1.ImageUrl.Path})}else if(d1.TypeImageUrl&&d1.TypeImageUrl.String){t.setIcon(d1.TypeImageUrl.String)}else if(d1.TypeImageUrl&&d1.TypeImageUrl.Path){t.bindProperty("icon",{path:d1.TypeImageUrl.Path})}if(d1.Title.Value.String){t.setName(d1.Title.Value.String)}else{t.bindProperty("name",E(d1.Title.Value,d1.Title.EdmType,c1).BindingInfo)}if(d1.Description&&d1.Description.Value){if(d1.Description.Value.String){t.setDescription(d1.Description.Value.String)}else{t.bindProperty("description",E(d1.Description.Value,d1.Description.EdmType,c1).BindingInfo)}}for(Y1 in M[c1]){if(M[c1].hasOwnProperty(Y1)){if(Y1.search("com.sap.vocabularies.UI.v1.DataPoint")!==-1){Z1=M[c1][Y1];if(Z1){t.addKpi(N(Z,Z1,c1,a1));X1+=1}}if(X1>=3){break}}}for(i=0;i<e1.length;i+=1){if(e1[i]["com.sap.vocabularies.UI.v1.IsSummary"]){l1=e1[i];break}}if(l1){s1=15;for(j=0;j<l1.Facets.length;j+=1){v1=l1.Facets[j].Target.AnnotationPath.substring(l1.Facets[j].Target.AnnotationPath.lastIndexOf("@")+1);g1=l1.Facets[j].Target.AnnotationPath;g1=g1.substring(0,g1.lastIndexOf("@")-1);l1.Facets[j].NavPath=g1;w1=l(_,g1,b1);l1.Facets[j].NavEntitySet=w1;if(w1){x1=w1}else{x1=_}l1.Facets[j].EntitySet=x1;y1=f(w1,b1);if(y1){z1=y1}else{z1=c1}l1.Facets[j].EntityType=z1;A1=[];if(M[z1][v1].length){A1=M[z1][v1]}else if(M[z1][v1].Data.length){A1=M[z1][v1].Data}l1.Facets[j].Content=A1;for(i=0;i<A1.length;i+=1){B1=P(A1[i]);if(B1==="High"){t1+=1}else if(B1==="Medium"){u1+=1}}}if((t1+u1)>s1){u1=s1-t1;if(u1<0){u1=0}}if(jQuery.device.is.phone){u1=0}F1=s1-t1-u1;G1=[];I1=u1+t1;for(j=0;j<l1.Facets.length;j+=1){J1=F(Z,l1.Facets[j].EntitySet,l1.Facets[j].Content,{High:t1,Medium:u1,Low:0},null).addStyleClass("sapFactsheetUtiTilePadding").addStyleClass("sapFactsheetUtiTable");if(j>0){J1.addStyleClass("sapFactsheetUtiPaddingTop")}if(l1.Facets[j].NavPath){J1.bindElement(a1+"/"+l1.Facets[j].NavPath)}H1=K(l1.Facets[j].Content);t1-=H1.High;u1-=H1.Medium;if(((H1.High>0)&&((t1+H1.High)>0))||((H1.Medium>0)&&((u1+H1.Medium)>0))){G1.push(J1);if(j>0){if(F1>0){F1-=1}else if(u1>0){u1-=1}else if(t1>0){t1-=1}}}if((t1<1)&&(u1<1)){break}}if(t1<0){t1=0}if(u1<0){u1=0}f1=new sap.ui.layout.VerticalLayout({content:G1,width:"100%"});K1=J();M1=1;if((I1>3)&&(I1<=9)){K1=J(2);M1=2}else if(I1>9){K1=J(3);M1=3}N1=new sap.suite.ui.commons.FacetOverview({title:r1.getText("UNIFIEDTHINGINSPECTOR_GENERAL_INFORMATION_HEADER_TEXT"),rowSpan:M1,content:f1});if(jQuery.device.is.phone){N1.setHeightType(sap.suite.ui.commons.FacetOverviewHeight.Auto)}else{N1.setHeight(K1)}N1.addStyleClass("sapFactsheetUtiGeneralInformationOverviewFacet");N1.attachPress({facets:l1},function(o,a){var b,e2,f2,g2,f1;t.removeAllFacetContent();f2=new sap.suite.ui.commons.UnifiedThingGroup();f2.setDescription(O());f2.setTitle(r1.getText("UNIFIEDTHINGINSPECTOR_GENERAL_INFORMATION_HEADER_TEXT"));f2.addStyleClass("sapFactsheetUtiGeneralInformationUtg");if(a.facets.Facets.length>1){b="L6 M12 S12"}else{b="L12 M12 S12"}g2=new sap.ui.layout.VerticalLayout({width:"100%"});for(i=0;i<a.facets.Facets.length;i+=1){if(i%2===0){e2=new sap.ui.layout.Grid({hSpacing:1,vSpacing:1,defaultSpan:b})}f1=G(Z,_,a.facets.Facets[i],a1);f1.addStyleClass("sapFactsheetUtiGeneralInformationUtgContent");if((i===0)&&(a.facets.Facets.length>1)&&(f1.getTitle().trim()==="")){f1.setTitle(r1.getText("UNIFIEDTHINGINSPECTOR_GENERAL_INFORMATION_HEADER_TEXT"))}e2.addContent(f1);if(i%2!==0){g2.addContent(e2)}}if(i%2!==0){g2.addContent(e2)}f2.setContent(g2);t.addFacetContent(f2);t.navigateToDetail()});t.addFacet(N1)}i1=function(j1){return function(a){var o,b,e2,f2,g2,h2,i2,j2,k2,l2,a1,m2,n2,o2,p2,q2,r2,s2,t2,i;if((j1.cardinality==="*"&&a.results&&a.results.length&&a.results.length!==0)||(j1.cardinality==="1"&&a)){l2=new sap.ui.model.json.JSONModel();if(j1.cardinality==="*"){if(a.results&&a.results.length){l2.setData(a)}}else{l2.setData({result:a});a1="/result"}o=new sap.ui.model.odata.ODataModel("/sap/opu/odata/sap/VBI_APPL_DEF_SRV",false);b=M[j1.navigationType]["com.sap.vocabularies.UI.v1.GeoLocation"];n2=M[j1.navigationType]["com.sap.vocabularies.UI.v1.HeaderInfo"];o2=M[j1.navigationType]["com.sap.vocabularies.UI.v1.Identification"];if(b.Longitude&&b.Latitude){f2={"Data":{"Set":{"N":[{"name":"Spots","E":[]}]}}};if(j1.cardinality==="1"){if(b.Longitude.Path&&b.Latitude.Path){e2=a[b.Longitude.Path]+";"+a[b.Latitude.Path]+";0"}f2.Data.Set.N[0].E.push({"A":e2,"I":"pin_blue.png"})}else{for(i=0;i<a.results.length;i+=1){if(b.Longitude.Path&&b.Latitude.Path){e2=a.results[i][b.Longitude.Path]+";"+a.results[i][b.Latitude.Path]+";0"}f2.Data.Set.N[0].E.push({"A":e2,"I":"pin_blue.png"})}if(a.results.length!==0){e2=a.results[0][b.Longitude.Path]+";"+a.results[0][b.Latitude.Path]+";0"}}}t2=parseInt(a.__count,10);if(Number(t2)){j1.facet.setQuantity(t2)}i2=function(u2){var v2,w2,x2,y2,z2;v2=$.parseJSON(u2.getParameters().data);if(v2.Action.name==="DETAIL_REQUEST"&&v2.Action.instance){w2=v2.Action.instance;if(l2.oData.results){a1="/results/"+w2.split(".")[1]}s2=n2.TypeName.String.substring(0,17);y2=parseFloat(J(0.7))*16;z2=parseFloat(J(1.5))*16;x2={"SAPVB":{"version":"2.0","xmlns:VB":"VB","Windows":{"Remove":{"name":"Detail1"},"Set":{"name":"Detail1","Window":{"id":"Detail1","type":"callout","refParent":"Main","refScene":"","offsetX":"16","offsetY":"-27","modal":"false","width":z2,"height":y2,"caption":s2,"pos.bind":w2+".GeoPosition"}}},"Scenes":{"Set":{"name":"Details","Scene":{"id":"Details","navControlVisible":"false"}}}}};this.load(x2)}};j2=function(u2){var Y1,v2,w1,w2;if(!p2){p2=v(n2.Title,j1.navigationType,b1);p2.setModel(l2);p2.bindElement(a1);q2=v(n2.Description,j1.navigationType,b1);q2.setModel(l2);q2.bindElement(a1);for(Y1 in b.Address){if(Y1==="label"){m2=v({Value:b.Address[Y1]},j1.navigationType,b1);m2.setModel(l2);m2.bindElement(a1);break}}w2=7;if(jQuery.device.is.tablet&&jQuery.device.is.landscape){w2=4}else if(jQuery.device.is.tablet&&jQuery.device.is.portrait){w2=5}else if(jQuery.device.is.phone&&jQuery.device.is.landscape){w2=2}else if(jQuery.device.is.phone&&jQuery.device.is.portrait){w2=3}r2=new sap.ui.layout.VerticalLayout({width:"100%"}).setModel(Z);if(j1.navigationPath){w1=l(j1.entitySet,j1.navigationPath,b1);r2.addContent(F(Z,w1,o2,{High:w2})).setModel(l2).bindElement(a1)}else{r2.addContent(F(Z,j1.entitySet,o2,{High:w2})).setModel(l2).bindElement(a1)}}else{p2.bindElement(a1);if(q2){q2.bindElement(a1)}if(m2){m2.bindElement(a1)}if(r2){r2.bindElement(a1)}}v2=parseFloat(J(1.5))*16*0.95+"px";if(p2){p2.placeAt(u2.getParameter("contentarea").id);p2.addStyleClass("sapFactsheetUtiGeoPopupHead");if(jQuery.device.is.phone){p2.addStyleClass("sapFactsheetUtiGeoPopupHeadFontPhone")}p2.setWidth(v2)}if(q2){q2.placeAt(u2.getParameter("contentarea").id);q2.addStyleClass("sapFactsheetUtiGeoPopupDescr");if(jQuery.device.is.phone){q2.addStyleClass("sapFactsheetUtiGeoPopupDescrFontPhone")}q2.setWidth(v2)}if(m2){m2.placeAt(u2.getParameter("contentarea").id);m2.addStyleClass("sapFactsheetUtiGeoPopupText");m2.setWidth(v2)}if(r2&&r2.getContent()[0]&&r2.getContent()[0].getContent&&r2.getContent()[0].getContent().length>0){r2.placeAt(u2.getParameter("contentarea").id);r2.addStyleClass("sapFactsheetUtiGeoPopupText");r2.setWidth(v2)}};k2=function(u2){if(p2){p2.destroy();p2=undefined}if(q2){q2.destroy();q2=undefined}if(m2){m2.destroy();m2=undefined}if(r2){r2.destroy();r2=undefined}$(u2.getParameter("contentarea").id).empty()};g2=function(j1){return function(a){var u2,v2,w2,x2,i;x2=a.ProjectJSON;x2=x2.indexOf("{")?x2.substr(x2.indexOf("{")):x2;u2=$.parseJSON(x2);u2.SAPVB.Scenes.Set.SceneGeo.initialStartPosition=e2;u2.SAPVB.Scenes.Set.SceneGeo.initialZoom=12;u2.SAPVB.Actions.Set.Action.push({id:"200",name:"TAP_ON_MAP",refEvent:"Click",refScene:"MainScene",refVO:"Map"});if(f2){u2.SAPVB.Data=f2.Data}for(i=0;i<u2.SAPVB.Scenes.Set.SceneGeo.VO.length;i+=1){if(u2.SAPVB.Scenes.Set.SceneGeo.VO[i].datasource==="Spots"){if(u2.SAPVB.Scenes.Set.SceneGeo.VO[i].scale&&u2.SAPVB.Scenes.Set.SceneGeo.VO[i].scale.split(";").length!==3){u2.SAPVB.Scenes.Set.SceneGeo.VO[i].scale="1.0;1.0;1.0";break}}}j1.facet.getContent().attachSubmit(function(y2){if(jQuery.device.is.tablet||jQuery.device.is.phone){j1.facet.firePress()}});j1.facet.getContent().load(u2);j1.facet.attachPress("",function(y2,z2){var A2=[],B2=[],i,C2;if(!v2){v2=new sap.ui.vbm.VBI({width:"100%",height:"100%",plugin:false,config:null});v2.addStyleClass("sapFactsheetUtiGeoPopup")}u2.SAPVB.Scenes.Set.SceneGeo.NavigationDisablement.move="false";u2.SAPVB.Scenes.Set.SceneGeo.NavigationDisablement.zoom="false";u2.SAPVB.Scenes.Set.SceneGeo.NavigationDisablement.pitch="false";u2.SAPVB.Scenes.Set.SceneGeo.NavigationDisablement.yaw="false";u2.SAPVB.Scenes.Set.SceneGeo.SuppressedNavControlVisibility="false";v2.load(u2);if(j1.cardinality==="*"){for(i=0;i<l2.oData.results.length;i+=1){A2.push(l2.oData.results[i][b.Longitude.Path]);B2.push(l2.oData.results[i][b.Latitude.Path])}}v2.attachSubmit(i2);v2.attachOpenWindow(j2);v2.attachCloseWindow(k2);w2=new sap.suite.ui.commons.UnifiedThingGroup({content:v2,title:j1.facetContent.Label.String,description:O()});t.removeAllFacetContent();t.addFacetContent(w2);t.navigateToDetail();t.attachAfterNavigate(A2,function(y2){if(y2.getParameters().getParameters().toId.indexOf("-detail-page")!==-1){if(jQuery.device.is.phone){C2="300px"}else{C2=Math.floor($("#"+y2.getParameters().getParameters().toId+"-cont").height()-128)+"px"}v2.setHeight(C2);if(A2.length>1){v2.zoomToGeoPosition(A2,B2)}}})})}};h2=function(u2){return function(v2){t.removeFacet(u2)}};o.read("VBIApplicationSet('ZFACTSHEETS')","","",false,g2(j1),h2(j1.facet))}else{j1.facet.setQuantity(undefined);j1.facet.addStyleClass("sapFactsheetUtiEmptyTile");j1.facet.setHeightType(jQuery.device.is.phone?sap.suite.ui.commons.FacetOverviewHeight.Auto:sap.suite.ui.commons.FacetOverviewHeight.S);j1.facet.setContent(undefined);j1.facet.setTitle(undefined)}}};c2=function(o){var a,b;a=o.srcControl.getParent().getDomRef().clientWidth;b=a;if(o.srcControl.getParent().getContent()[0]){b-=o.srcControl.getParent().getContent()[0].getDomRef().clientWidth;if(a<o.srcControl.getParent().getContent()[0].getDomRef().clientWidth){o.srcControl.getParent().getContent()[0].getDomRef().setAttribute("style","width:"+a+"px");return}}if(o.srcControl.getParent().getContent()[1]){b-=o.srcControl.getParent().getContent()[1].getDomRef().clientWidth}if(b<10){b=0}if(o.srcControl.getParent().getContent()[2]){o.srcControl.getParent().getContent()[2].getDomRef().setAttribute("style","width:"+b+"px")}};h1=function(j1){return function(a){var o,b,e2,f2,g2,h2,i2,j2,i,f1,k2,l2,m2,n2,o2,p2,q2,r2,s2,t2,u2,v2,w2,x2,y2,z2,A2="",B2,C2,D2,E2,F2,G2;o=new sap.ui.model.json.JSONModel();if(j1.facetContent.Target&&j1.facetContent.Target.AnnotationPath&&j1.facetContent.Target.AnnotationPath.split("#")[1]&&M[j1.navigationType]["com.sap.vocabularies.UI.v1.Badge#"+j1.facetContent.Target.AnnotationPath.split("#")[1]]){b=M[j1.navigationType]["com.sap.vocabularies.UI.v1.Badge#"+j1.facetContent.Target.AnnotationPath.split("#")[1]]}else{b=M[j1.navigationType]["com.sap.vocabularies.UI.v1.Badge"]}if(j1.cardinality==="*"){if(a.results&&a.results.length){o.setData(a);B2=j1.facetContent.Target.AnnotationPath;$1=B2.substring(B2.lastIndexOf("@")+1);if($1==="com.sap.vocabularies.UI.v1.Chart"){jQuery.sap.require("sap.viz.ui5.data.FlattenedDataset");C2=M[j1.navigationType]["com.sap.vocabularies.UI.v1.Chart"];D2=M.propertyExtensions[j1.navigationType];E2=[];for(i=0;i<C2.Dimensions.length;i+=1){E2.push({axis:1,name:D2[C2.Dimensions[i].PropertyPath]["http://www.sap.com/Protocols/SAPData"].label,value:"{"+C2.Dimensions[i].PropertyPath+"}"})}F2=[];for(i=0;i<C2.Measures.length;i+=1){F2.push({name:D2[C2.Measures[i].PropertyPath]["http://www.sap.com/Protocols/SAPData"].label,value:"{"+C2.Measures[i].PropertyPath+"}"})}G2=new sap.viz.ui5.data.FlattenedDataset({dimensions:E2,measures:F2,data:{path:"/results"}});f1=I(C2.ChartType.EnumMember,C2.Title,C2.Description,G2);f1.setModel(o);j1.facet.setHeightType(jQuery.device.is.phone?sap.suite.ui.commons.FacetOverviewHeight.Auto:sap.suite.ui.commons.FacetOverviewHeight.XL)}else{e2=function(H2,I2){f2=v(b.Title,j1.navigationType,b1);g2=I2.oModel.oData.results[I2.sPath.substring(I2.sPath.lastIndexOf("/")+1)];if(b.Title.RecordType&&(b.Title.RecordType==="com.sap.vocabularies.UI.v1.DataField")){f2.addStyleClass("sapFactsheetUtiLabel")}if(b.MainInfo){h2=v(b.MainInfo,j1.navigationType,b1)}else{h2=new sap.m.Text({text:""})}f2.setWrapping(false);f2.addDelegate({onAfterRendering:function(J2){c2(J2)}});i2=new sap.ui.layout.HorizontalLayout().addStyleClass("sapFactsheetUtiHorizontalLayout");j2=false;if(g2[b.Title.Value.Path]){j2=true}if(b.Title.Value.Apply){for(i=0;i<b.Title.Value.Apply.Parameters.length;i+=1){if(b.Title.Value.Apply.Parameters[i].Type==="Path"){if(g2[b.Title.Value.Apply.Parameters[i].Value]){j2=true;break}}}}A2="";if(j2){i2.addContent(f2);if(b.MainInfo&&((b.MainInfo.EdmType&&b.MainInfo.EdmType==="Edm.Decimal")||(b.MainInfo.Value&&b.MainInfo.Value.Apply&&b.MainInfo.Value.Apply.Parameters[0]&&b.MainInfo.Value.Apply.Parameters[0].EdmType&&b.MainInfo.Value.Apply.Parameters[0].EdmType==="Edm.Decimal"))){A2="comma"}else if(b.MainInfo&&b.MainInfo.Value.Path&&g2[b.MainInfo.Value.Path]){A2="dash"}else if(b.MainInfo&&b.MainInfo.Value.Apply){for(i=0;i<b.MainInfo.Value.Apply.Parameters.length;i+=1){if(b.MainInfo.Value.Apply.Parameters[i].Type==="Path"){if(g2[b.MainInfo.Value.Apply.Parameters[i].Value]){A2="dash";break}}}}if(A2==="dash"){i2.addContent(new sap.ui.core.HTML({content:"<span class=\"sapFactsheetUtiSeparatorPadding sapMText\"> &ndash; </span>"}))}if(A2==="comma"){i2.addContent(new sap.m.Text({text:", "}).addStyleClass("sapFactsheetUtiSeparatorPaddingForDecimal"))}}if(b.MainInfo){h2.setWrapping(false);h2.addDelegate({onAfterRendering:function(J2){c2(J2)}});i2.addContent(h2)}return new sap.m.ColumnListItem({cells:[i2]})};f1=new sap.m.Table({backgroundDesign:sap.m.BackgroundDesign.Transparent,showSeparators:sap.m.ListSeparators.None,columns:[new sap.m.Column({width:"100%"})],items:{path:"/results",factory:e2}});f1.setModel(o);f1.addStyleClass("sapFactsheetUtiTilePadding");f1.addStyleClass("sapFactsheetUtiTable");f1.addStyleClass("sapFactsheetUtiTableNoHorizontalPadding");f1.addStyleClass("sapFactsheetUtiTableNoTopBorder")}k2=parseInt(a.__count,10);if(Number(k2)){j1.facet.setQuantity(k2)}j1.facet.setContent(f1);j1.facet.attachPress({facet:j1.facetContent},function(H2,g2){var f1;t.removeAllFacetContent();f1=G(Z,j1.entitySet,g2.facet,j1.bindingPath);f1.setDescription(O());t.addFacetContent(f1);t.navigateToDetail()})}else{j1.facet.setQuantity(0);j1.facet.addStyleClass("sapFactsheetUtiEmptyTile");j1.facet.setHeightType(jQuery.device.is.phone?sap.suite.ui.commons.FacetOverviewHeight.Auto:sap.suite.ui.commons.FacetOverviewHeight.S)}}else{o.setData({result:a});for(y2 in a){if(a.hasOwnProperty(y2)){if(y2!=="__metadata"){if(typeof a[y2]==="string"&&a[y2]){if(parseInt(a[y2],10)!==0){z2=true;break}}else if(typeof a[y2]==="number"&&parseInt(a[y2],10)!==0){z2=true;break}}}}if(z2){l2=new sap.ui.layout.VerticalLayout();m2=(M.propertyExtensions)?M.propertyExtensions[j1.navigationType]:[];n2=new sap.ui.layout.HorizontalLayout().addStyleClass("sapFactsheetUtiHLayoutLabelValue");o2=w(b.Title,{},m2,true).addStyleClass("sapFactsheetUtiLabelMargin");f2=v(b.Title,j1.navigationType,b1);f2.setModel(o);f2.bindElement("/result");n2.addContent(o2);n2.addContent(f2);l2.addContent(n2);if(b.MainInfo){p2=new sap.ui.layout.HorizontalLayout().addStyleClass("sapFactsheetUtiHLayoutLabelValue");q2=w(b.MainInfo,{},m2,true).addStyleClass("sapFactsheetUtiLabelMargin");h2=v(b.MainInfo,j1.navigationType,b1);h2.setModel(o);h2.bindElement("/result");p2.addContent(q2);p2.addContent(h2);l2.addContent(p2)}if(b.SecondaryInfo){r2=new sap.ui.layout.HorizontalLayout().addStyleClass("sapFactsheetUtiHLayoutLabelValue");s2=w(b.SecondaryInfo,{},m2,true).addStyleClass("sapFactsheetUtiLabelMargin");t2=v(b.SecondaryInfo,j1.navigationType,b1);t2.setModel(o);t2.bindElement("/result");r2.addContent(s2);r2.addContent(t2);l2.addContent(r2)}if(b.TypeImageUrl||b.ImageUrl){if(b.ImageUrl){u2=b.ImageUrl}else{u2=b.TypeImageUrl}v2=new sap.ui.layout.HorizontalLayout();w2="64px";if(jQuery.device.is.phone){w2="48px"}if(u2.String&&(u2.String.substr(0,11)==="sap-icon://")){x2=new sap.ui.core.Icon({size:w2,width:w2})}else{x2=new sap.m.Image({width:w2})}x2.addStyleClass("sapFactsheetUtiRelIcon");if(u2&&u2.String){x2.setSrc(u2.String)}else{if(u2&&u2.Path){x2.bindProperty("src",u2.Path)}}v2.addContent(x2);v2.addContent(l2);j1.facet.setContent(v2)}else{j1.facet.setContent(l2)}j1.facet.attachPress({facet:j1.facetContent},function(H2,g2){var f1;t.removeAllFacetContent();f1=G(Z,j1.entitySet,g2.facet,j1.bindingPath);f1.setDescription(O());t.addFacetContent(f1);t.navigateToDetail()})}else{j1.facet.addStyleClass("sapFactsheetUtiEmptyTile");j1.facet.setHeightType(jQuery.device.is.phone?sap.suite.ui.commons.FacetOverviewHeight.Auto:sap.suite.ui.commons.FacetOverviewHeight.S)}}}};b2=function(j1){return function(a){t.removeFacet(j1.facet)}};_1=function(j1){return function(a){var o,b,i,e2,f2;b=M[j1.navigationType]["com.sap.vocabularies.UI.v1.MediaResource"];if(j1.cardinality==="*"){if(a.results&&a.results.length){o=new sap.ui.layout.HorizontalLayout().addStyleClass("sapFactsheetUtiPictureViewerOverview");for(i=0;i<a.results.length;i+=1){o.addContent(new sap.m.Image({src:a.results[i][b.Thumbnail.Url.Path],height:"85px"}));if(i===3){break}}e2=parseInt(a.__count,10);if(Number(e2)){j1.facet.setQuantity(e2)}j1.facet.setContent(o);j1.facet.attachPress({facet:j1.facetContent,data:a},function(g2,h2){var i2,a2,j2;t.removeAllFacetContent();f2=new sap.suite.ui.commons.UnifiedThingGroup();if(h2.facet.Label&&h2.facet.Label.String){f2.setTitle(h2.facet.Label.String)}f2.setDescription(O());if(jQuery.device.is.phone){a2="350px"}else{a2="550px"}i2=new sap.m.Carousel({height:a2});for(i=0;i<h2.data.results.length;i+=1){j2=new sap.m.Image({src:h2.data.results[i][b.Url.Path]});if(jQuery.device.is.phone){j2.addStyleClass("sapFactsheetUtiCarouselMaxImageHeightPhone")}else{j2.addStyleClass("sapFactsheetUtiCarouselMaxImageHeight")}i2.addPage(j2)}f2.setContent(i2);t.addFacetContent(f2);t.navigateToDetail()})}else{j1.facet.setQuantity(0);j1.facet.addStyleClass("sapFactsheetUtiEmptyTile");j1.facet.setHeightType(jQuery.device.is.phone?sap.suite.ui.commons.FacetOverviewHeight.Auto:sap.suite.ui.commons.FacetOverviewHeight.S)}}}};d2=function(o,e2){var i,j,f2=[],g2={},h2,i2,j2,k2,l2,m2;i2=function(b1,a){var i,b="";if(b1){if(b1.Path){return a[b1.Path]}else if(b1.String){return b1.String}else if(b1.Apply.Name==="odata.concat"){for(i=0;i<b1.Apply.Parameters.length;i+=1){if(b1.Apply.Parameters[i].Type==="Path"){b=b+a[b1.Apply.Parameters[i].Value]}else if(b1.Apply.Parameters[i].Type==="String"){b=b+b1.Apply.Parameters[i].Value}}return b}}};g2.iCount=0;g2.aContacts=[];for(i=0;i<o.__batchResponses.length;i+=1){if(!o.__batchResponses[i].data){continue}if(o.__batchResponses[i].data.__count){g2.iCount=g2.iCount+parseInt(o.__batchResponses[i].data.__count)}else{g2.iCount=o.__batchResponses[i].data.results?g2.iCount:g2.iCount+=1}f2=o.__batchResponses[i].data.results;if(!f2){f2=[];f2.push(o.__batchResponses[i].data)}if(f2.length>0){h2=M[f2[0].__metadata.type]["com.sap.vocabularies.Communication.v1.Contact"];if(h2){for(j=0;j<f2.length;j+=1){l2=h2.phone&&h2.phone.uri?h2.phone.uri:"";m2=h2.email&&h2.email.address?h2.email.address:"";j2=i2(l2,f2[j]);j2=j2?j2.replace("tel:",""):"";k2=i2(h2.photo,f2[j]);g2.aContacts.push({fn:i2(h2.fn,f2[j]),title:i2(h2.title,f2[j]),phone:j2,photo:k2,email:i2(m2,f2[j]),sEntity:f2[0].__metadata.type,bExistsPhoto:k2?true:false,bUseIcon:k2?false:true,sOrder:j})}}}}if(e2){g2.aContacts.sort(function(a,b){return a[e2]>b[e2]?1:-1})}return g2};E1=function(j1){return function(o){var i,a,b,e2,f2,g2,h2,i2;a=d2(o,"sOrder");b=new sap.ui.layout.Grid({defaultSpan:"L6 M6 S12",hSpacing:0,vSpacing:0}).addStyleClass("sapFactsheetUtiContactsGrid");for(i=0;i<a.aContacts.length&&i<4;i+=1){g2=new sap.ui.layout.VerticalLayout();if(a.aContacts[i].photo){h2=new sap.m.Image({height:"55px",src:a.aContacts[i].photo})}else{h2=new sap.ui.core.Icon({size:"50px",src:sap.ui.core.IconPool.getIconURI("person-placeholder")}).addStyleClass("sapFactsheetUtiRelIcon")}g2.addContent(h2);g2.addStyleClass("sapFactsheetUtiContactsImage");f2=new sap.ui.layout.VerticalLayout({content:[new sap.m.Text({text:a.aContacts[i].fn}).addStyleClass("sapFactsheetUtiTextName"),new sap.m.Text({text:a.aContacts[i].title}).addStyleClass("sapFactsheetUtiTextValue")]});e2=new sap.ui.layout.HorizontalLayout({content:[g2,f2]}).addStyleClass("sapFactsheetUtiContactsBox");b.addContent(e2)}N1=sap.ui.getCore().byId(t.data("contactFacetId"));N1.setQuantity(a.iCount);if(i>0){N1.setContent(b);if(i<=2){i2=sap.suite.ui.commons.FacetOverviewHeight.M}else{i2=sap.suite.ui.commons.FacetOverviewHeight.L}N1.attachPress(function(){var i,C1=[],D1;Z.clearBatch();for(i=0;i<M[c1]["com.sap.vocabularies.UI.v1.Contacts"].length;i+=1){g1=M[c1]["com.sap.vocabularies.UI.v1.Contacts"][i].AnnotationPath;g1=g1.substring(0,g1.lastIndexOf("@")-1);if(g1!==""){D1=a1+"/"+g1}else{D1=a1}C1.push(Z.createBatchOperation(D1,"GET"))}Z.addBatchReadOperations(C1);Z.submitBatch(function(o){var a,j2,k2,l2,m2,n2,o2;o2=jQuery.sap.resources({url:jQuery.sap.getModulePath("sap.ushell.components.container.")+"/resources/resources.properties",language:sap.ui.getCore().getConfiguration().getLanguage()});a=d2(o,"sEntity");j2=new sap.ui.model.json.JSONModel();j2.setData(a);k2=new sap.m.ColumnListItem({type:sap.m.Inactive,unread:false,cells:[new sap.ui.layout.VerticalLayout({content:[new sap.m.Image({src:"{photo}",width:"74px",visible:"{bExistsPhoto}"}),new sap.ui.core.Icon({size:"76px",src:sap.ui.core.IconPool.getIconURI("person-placeholder"),visible:"{bUseIcon}"}).addStyleClass("sapFactsheetUtiRelIcon")]}),new sap.m.Text({text:"{fn}"}),new sap.m.Text({text:"{title}"}),new sap.m.Link({text:"{phone}",href:"tel:{phone}"}),new sap.m.Link({text:"{email}",href:"mailto:{email}"})]});l2=new sap.m.Table({threshold:2,inset:false,showUnread:true,scrollToLoad:true,columns:[new sap.m.Column({hAlign:sap.ui.core.TextAlign.Center,header:new sap.m.Text({text:""})}),new sap.m.Column({hAlign:sap.ui.core.TextAlign.Begin,header:new sap.m.Text({text:o2.getText("USHELL_FACTSHEET_NAME")})}),new sap.m.Column({hAlign:sap.ui.core.TextAlign.Begin,header:new sap.m.Text({text:o2.getText("USHELL_FACTSHEET_JOBTITLE")}),minScreenWidth:"Tablet",demandPopin:true}),new sap.m.Column({hAlign:sap.ui.core.TextAlign.Begin,width:"30%",header:new sap.m.Text({text:o2.getText("USHELL_FACTSHEET_PHONE")}),minScreenWidth:"Tablet",demandPopin:true}),new sap.m.Column({hAlign:sap.ui.core.TextAlign.Begin,width:"30%",header:new sap.m.Text({text:o2.getText("USHELL_FACTSHEET_EMAIL")}),minScreenWidth:"Tablet",demandPopin:true})],items:{path:"/aContacts",template:k2}});m2=new sap.m.ViewSettingsDialog({sortItems:[new sap.m.ViewSettingsItem({key:"fn",text:o2.getText("USHELL_FACTSHEET_NAME")}),new sap.m.ViewSettingsItem({key:"title",text:o2.getText("USHELL_FACTSHEET_JOBTITLE")}),new sap.m.ViewSettingsItem({key:"phone",text:o2.getText("USHELL_FACTSHEET_PHONE")}),new sap.m.ViewSettingsItem({key:"email",text:o2.getText("USHELL_FACTSHEET_EMAIL")})],confirm:function(p2){var q2,r2,s2=[];q2=p2.getParameters();r2=l2.getBinding("items");if(q2.sortItem){s2.push(new sap.ui.model.Sorter(q2.sortItem.getKey(),q2.sortDescending));r2.sort(s2)}}});l2.setHeaderToolbar(new sap.m.Toolbar({content:[new sap.m.Label(),new sap.m.ToolbarSpacer(),new sap.m.Button({icon:"sap-icon://drop-down-list",press:function(p2){m2.open()}})]}));l2.setModel(j2);n2=new sap.suite.ui.commons.UnifiedThingGroup({title:N1.getTitle(),description:O(),content:l2});t.removeAllFacetContent();t.addFacetContent(n2);t.navigateToDetail()})})}else{i2=sap.suite.ui.commons.FacetOverviewHeight.S;N1.addStyleClass("sapFactsheetUtiEmptyTile");N1.setQuantity(0)}N1.setHeightType(jQuery.device.is.phone?sap.suite.ui.commons.FacetOverviewHeight.Auto:i2)}};for(i=0;i<e1.length;i+=1){if(e1[i]["com.sap.vocabularies.UI.v1.Map"]){g1=e1[i].Target.AnnotationPath;g1=g1.substring(0,g1.lastIndexOf("@")-1);T1="1";P1=c1;if(g1){Q1=c1.split(".");for(m=b1.dataServices.schema.length-1;m>=0;m-=1){R1=b1.dataServices.schema[m];S1=Q1[0];if(Q1.length>2){for(k=1;k<Q1.length-1;k+=1){S1+="."+Q1[k]}}if(R1.namespace===S1&&R1.association){for(j=0;j<R1.association.length;j+=1){if(R1.association[j].name===g1){P1=R1.association[j].end[1].type}}}}T1=n(_,g1,b1)}a2="100%";if(jQuery.device.is.phone){a2="150px"}O1=new sap.ui.vbm.VBI({width:"100%",height:a2,plugin:false,config:null});N1=new sap.suite.ui.commons.FacetOverview({title:e1[i].Label.String,heightType:jQuery.device.is.phone?sap.suite.ui.commons.FacetOverviewHeight.Auto:sap.suite.ui.commons.FacetOverviewHeight.L,content:O1});j1={cardinality:T1,navigationPath:g1,facet:N1,facetContent:e1[i],navigationType:P1,metadata:b1,bindingPath:a1,entitySet:_};if(T1==="*"){U1=["$inlinecount=allpages","$top=1000"]}else{U1=[]}Z.read(a1+"/"+g1,"",U1,true,i1(j1));t.addFacet(N1)}else{if(e1[i].Target){g1=e1[i].Target.AnnotationPath;g1=g1.substring(0,g1.lastIndexOf("@")-1);$1=e1[i].Target.AnnotationPath.substring(e1[i].Target.AnnotationPath.lastIndexOf("@")+1);if(g1){Q1=c1.split(".");for(m=b1.dataServices.schema.length-1;m>=0;m-=1){R1=b1.dataServices.schema[m];S1=Q1[0];if(Q1.length>2){for(k=1;k<Q1.length-1;k+=1){S1+="."+Q1[k]}}if(R1.namespace===S1&&R1.association){for(j=0;j<R1.association.length;j+=1){if(R1.association[j].name===g1){P1=R1.association[j].end[1].type}}}}N1=new sap.suite.ui.commons.FacetOverview({title:e1[i].Label.String,heightType:jQuery.device.is.phone?sap.suite.ui.commons.FacetOverviewHeight.Auto:sap.suite.ui.commons.FacetOverviewHeight.M});T1=n(_,g1,b1);if(T1!==0){j1={cardinality:T1,navigationPath:g1,facet:N1,facetContent:e1[i],navigationType:P1,metadata:b1,bindingPath:a1,entitySet:_};if(e1[i]["com.sap.vocabularies.UI.v1.Gallery"]){if(T1==="*"){U1=["$inlinecount=allpages"]}else{U1=[]}Z.read(a1+"/"+g1,"",U1,true,_1(j1))}else{if(T1==="*"){U1=["$inlinecount=allpages","$top=3"]}else{U1=[]}Z.read(a1+"/"+g1,"",U1,true,h1(j1),b2(j1))}t.addFacet(N1)}}else{if($1==="com.sap.vocabularies.UI.v1.Contacts"){N1=new sap.suite.ui.commons.FacetOverview({title:e1[i].Label.String,heightType:jQuery.device.is.phone?sap.suite.ui.commons.FacetOverviewHeight.Auto:sap.suite.ui.commons.FacetOverviewHeight.M});t.data("contactFacetId",N1.sId);j1={facet:N1};Z.clearBatch();for(j=0;j<M[c1][$1].length;j+=1){g1=M[c1][$1][j].AnnotationPath;g1=g1.substring(0,g1.lastIndexOf("@")-1);if(g1!==""){T1=n(_,g1,b1);if(T1==="*"){D1=a1+"/"+g1+"?$top=4"+"&$inlinecount=allpages"}else{D1=a1+"/"+g1}}else{D1=a1}C1.push(Z.createBatchOperation(D1,"GET"))}Z.addBatchReadOperations(C1);Z.submitBatch(E1(j1));t.addFacet(N1)}}}}}L1=new sap.ushell.ui.footerbar.AddBookmarkButton();W1=function(){var b,i,$1,a,e2,f2={},Y1,g2,h2,i2,o;L1.setAppData({title:t.getTitle(),subtitle:t.getName()+" - "+t.getDescription()});L1.setEnabled(true);h2=f(_,b1,true);n1=new sap.suite.ui.commons.LinkActionSheet({showCancelButton:true,placement:sap.m.PlacementType.Top});k1=x(e,Z);b=k1.split(",");for(i=0;i<b.length;i+=1){b[i]=b[i].replace("='","=","g");if(b[i].lastIndexOf("'")===b[i].length-1){b[i]=b[i].slice(0,-1)}}for($1 in M[c1]){if(M[c1].hasOwnProperty($1)){if($1.indexOf("com.sap.vocabularies.Common.v1.SecondaryKey")===0){a=M[c1][$1];for(i=0;i<a.length;i+=1){e2=this.getBoundContext().getProperty(a[i].PropertyPath);if(e2){b.push(a[i].PropertyPath+"="+e2)}}}}}for(i=0;i<b.length;i+=1){Y1=b[i].substr(0,b[i].indexOf("="));g2=b[i].substr(b[i].indexOf("=")+1,b[i].length);f2[Y1]=g2}m1=sap.ushell.Container.getService("CrossApplicationNavigation").getSemanticObjectLinks(h2,f2);m1.done(jQuery.proxy(function(j2){var i,k2;for(i=0;i<j2.length;i+=1){if(j2[i].intent.indexOf(Q)<0){k2=sap.ushell.Container.getService("CrossApplicationNavigation").hrefForExternal({target:{shellHash:j2[i].intent}});n1.addItem(new sap.m.Link({text:j2[i].text,href:k2}));t.setTransactionsVisible(true)}}}));t.attachTransactionsButtonPress(function(j2){n1.openBy(j2.getParameter("caller"))});this.detachChange(W1);sap.ushell.services.AppConfiguration.setWindowTitle(t.getTitle().trim()+": "+t.getName().trim()+" ("+t.getDescription().trim()+")");t.setActionsVisible(true);V1=new sap.m.Button({text:r1.getText("UNIFIEDTHINGINSPECTOR_FOOTER_BUTTON_EMAIL_LINK"),icon:"sap-icon://email",press:function(oE){sap.m.URLHelper.triggerEmail("",t.getName(),window.location.href)}});o1=new sap.m.ActionSheet({placement:sap.m.PlacementType.Top});i2=e.substr(0,e.lastIndexOf("/")+1);for(var o in Z.oData){if(Z.oData.hasOwnProperty(o)){i2=i2+o;break}}o1.addButton(new sap.ushell.ui.footerbar.JamDiscussButton({jamData:{object:{id:i2,type:e.substr(0,e.lastIndexOf("/"))+"/$metadata#"+_,name:t.getTitle(),ui_url:window.location.href}}}));o1.addButton(new sap.ushell.ui.footerbar.JamShareButton({jamData:{object:{id:window.location.href,display:new sap.m.Text({text:t.getTitle()}),share:""}}}));o1.addButton(L1);o1.addButton(V1);t.attachActionsButtonPress(function(j2){o1.openBy(j2.getParameter("caller"))})};t.getElementBinding().attachChange(W1);t.attachBackAction(function(o){history.back()});t.addDelegate({onAfterRendering:function(){t._adjustFacetLayout()}});return t};return{ThingInspector:function(a,b){try{t=C(a,b,new sap.suite.ui.commons.UnifiedThingInspector({configurationVisible:false}))}catch(e){throw e}return t}}}())}())};if(!jQuery.sap.isDeclared('sap.ushell.components.factsheet.tools.ODataUrlTemplating')){(function(){"use strict";function P(p,t,u){this.parameter=p;this.template=t;this.semiConvertedUrl=u;this.message=" is a missing key parameter for constructing the entity url";this.toString=function(){return this.parameter+this.message}}jQuery.sap.declare("sap.ushell.components.factsheet.tools.ODataUrlTemplating");sap.ushell.components.factsheet.tools.ODataUrlTemplating={ParameterException:P,resolve:function(t,d){var e,v,p,i,b=t.match(/{\s*[\w\.]+\s*}/g);e=t;for(i=b.length-1;i>=0;i-=1){p=b[i];v=d[p.replace(/[{}]/g,"")];if(v!==undefined){if(typeof v!=="string"){v=v[0]}v=encodeURIComponent(decodeURIComponent(v));e=e.replace(p,v)}}if(p=e.match(/{\s*[\w\.]+\s*}/g)){jQuery.sap.log.error(" "+e);throw new this.ParameterException(p,t,e)}return e}}})()};if(!jQuery.sap.isDeclared('sap.ushell.components.factsheet.views.ThingViewer.view')){jQuery.sap.declare('sap.ushell.components.factsheet.views.ThingViewer.view');(function(){"use strict";sap.ui.jsview("sap.ushell.components.factsheet.views.ThingViewer",{getControllerName:function(){return"sap.ushell.components.factsheet.views.ThingViewer"},createContent:function(c){var e,a,E,t,v;v=this.getViewData();jQuery.sap.require("sap.ushell.components.factsheet.factory.ThingInspector");e=v.entity||v.service;if(!e){E=v.entityTemplateURI||v.template;if(E){if(typeof E!=="string"){E=E[0]}E=E.replace(/%25/g,"%");E=E.replace(/%28/g,"(");E=E.replace(/%29/g,")");E=E.replace(/%27/g,"'");E=E.replace(/%3D/g,"=");E=E.replace(/%7B/g,"{");E=E.replace(/%7D/g,"}");e=sap.ushell.components.factsheet.tools.ODataUrlTemplating.resolve(E,v)}}a=v.annotationURI||v.annotation;if(typeof e!=="string"){e=e[0]}if(typeof a!=="string"){a=a[0]}if(v["sap-system"]&&v["sap-system"][0]&&(v["sap-system"][0].substr(0,4)==="sid(")){e=e.substr(0,e.lastIndexOf("/"))+";o="+e.substr(e.lastIndexOf("/"));e=sap.ushell.Container.getService("URLParsing").addSystemToServiceUrl(e)}t=sap.ushell.components.factsheet.factory.ThingInspector(e,a);t.addStyleClass("ThingInspector");return t}})}())};if(!jQuery.sap.isDeclared('sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper')){(function(){jQuery.sap.declare("sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper");sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper=function(t){this.tile=t};sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper.prototype.setErrorState=function(){this.getTile().setState(sap.suite.ui.commons.LoadState.Failed)};sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper.prototype.setLoadingState=function(){this.getTile().setState(sap.suite.ui.commons.LoadState.Loading)};sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper.prototype.setLoadedState=function(){this.getTile().setState(sap.suite.ui.commons.LoadState.Loaded)};sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper.prototype.setTrendDown=function(){this.getTile().setIndicator(sap.suite.ui.commons.DeviationIndicator.Down)};sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper.prototype.setTrendUp=function(){this.getTile().setIndicator(sap.suite.ui.commons.DeviationIndicator.Up)};sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper.prototype.setTrendNeutral=function(){this.getTile().setIndicator(sap.suite.ui.commons.DeviationIndicator.None)};sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper.prototype.setThresholdGood=function(){};sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper.prototype.setThresholdBad=function(){};sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper.prototype.setThresholdCritical=function(){};sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper.prototype.setThresholdNeutral=function(){};sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper.prototype.calculateThreshold=function(a,v,i){};sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper.prototype.setTile=function(t){this.tile=t};sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper.prototype.getTile=function(){return this.tile}}())};if(!jQuery.sap.isDeclared('sap.ushell.components.tiles.indicatorTileUtils.oData4Analytics')){jQuery.sap.declare("sap.ushell.components.tiles.indicatorTileUtils.oData4Analytics");jQuery.sap.require('sap.ui.core.Core');sap=sap||{};sap.ushell=sap.ushell||{};sap.ushell.components=sap.ushell.components||{};sap.ushell.components.tiles.indicatorTileUtils=sap.ushell.components.tiles.indicatorTileUtils||{};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics=sap.ushell.components.tiles.indicatorTileUtils.odata4analytics||{};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants={};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants["SAP_NAMESPACE"]="http://www.sap.com/Protocols/SAPData";sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants["VERSION"]="0.7";sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.helper={renderPropertyKeyValue:function(f,p){if(f.charAt(0)=="'")throw"Illegal property value starting with a quote";switch(p){case'Edm.String':return"'"+f+"'";case'Edm.DateTime':return"datetime'"+f+"'";case'Edm.Guid':return"guid'"+f+"'";case'Edm.Time':return"time'"+f+"'";case'Edm.DateTimeOffset':return"datetimeoffset'"+f+"'";default:return f}},renderPropertyFilterValue:function(f,p){if(f.charAt(0)=="'")throw"Illegal property value starting with a quote";switch(p){case'Edm.String':return"'"+f+"'";case'Edm.DateTime':return"datetime'"+f+"'";case'Edm.Guid':return"guid'"+f+"'";case'Edm.Time':return"time'"+f+"'";case'Edm.DateTimeOffset':return"datetimeoffset'"+f+"'";default:return f}},tokenizeNametoLabelText:function(n){var l="";l=n.replace(/([^A-Z0-9_]+)([A-Z0-9_])/g,"$1 $2");l=l.replace(/([A-Z0-9_]{2,})([A-Z0-9_])([^A-Z0-9_]+)/g,"$1 $2$3");l=l.replace(/(.*) _E$/,"$1");l=l.replace(/(.*) _(.*)/g,"$1 $2");return l}};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Model=function(m,a){this._init(m,a)};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Model.ReferenceByURI=function(u){return{sServiceURI:u}};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Model.ReferenceByModel=function(m){return{oModel:m}};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Model.ReferenceWithWorkaround=function(m,w){return{oModelReference:m,aWorkaroundID:w}};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Model.prototype={_init:function(m,a){this._oActivatedWorkarounds=new Object();if(m&&m.aWorkaroundID){for(var i=-1,I;I=m.aWorkaroundID[++i];){this._oActivatedWorkarounds[I]=true}m=m.oModelReference}if(!m||(!m.sServiceURI&&!m.oModel)){throw"Usage with oModelReference being an instance of Model.ReferenceByURI or Model.ReferenceByModel"}if(m.oModel)this._oModel=m.oModel;else this._oModel=new sap.ui.model.odata.ODataModel(m.sServiceURI);if(this._oModel.getServiceMetadata().dataServices==undefined){throw"Model could not be loaded"}this.mergeV2Annotations(a);this._oQueryResultSet=new Object();this._oParameterizationSet=new Object();this._oEntityTypeSet=new Object();this._oEntitySetSet=new Object();this._oEntityTypeNameToEntitySetMap=new Object();var s=this._oModel.getServiceMetadata().dataServices.schema[0];for(var i=-1,c;c=s.entityContainer[++i];){if(c.isDefaultEntityContainer=="true"){this._oDefaultEntityContainer=c;break}}var e=s.entityType;var q=[],p=[],u=[];for(var i=-1,t;t=e[++i];){var P=false;if(t.extensions!=undefined){for(var j=-1,E;E=t.extensions[++j];){if(E.namespace==sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants.SAP_NAMESPACE&&E.name=="semantics"){P=true;switch(E.value){case"aggregate":q.push(t);break;case"parameters":p.push(t);break;default:u.push(t)}}if(P)continue}if(!P)u.push(t)}else u.push(t)}for(var i=-1,t;t=u[++i];){var o=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.EntityType(this._oModel.getServiceMetadata(),s,t);this._oEntityTypeSet[o.getQName()]=o;var b=this._getEntitySetsOfType(s,o.getQName());if(b.length==0)throw"Invalid consumption model: No entity set for entity type annotated with parameters semantics";if(b.length>1)throw"Unsupported consumption model: More than one entity set for entity type annotated with parameters semantics";var d=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.EntitySet(this._oModel.getServiceMetadata(),s,b[0][0],b[0][1]);this._oEntitySetSet[d.getQName()]=d;this._oEntityTypeNameToEntitySetMap[o.getQName()]=d}var f={};for(var i=-1,t;t=p[++i];){var o=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.EntityType(this._oModel.getServiceMetadata(),s,t);this._oEntityTypeSet[o.getQName()]=o;var b=this._getEntitySetsOfType(s,o.getQName());if(b.length==0)throw"Invalid consumption model: No entity set for entity type annotated with parameters semantics";if(b.length>1)throw"Unsupported consumption model: More than one entity set for entity type annotated with parameters semantics";var d=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.EntitySet(this._oModel.getServiceMetadata(),s,b[0][0],b[0][1]);this._oEntitySetSet[d.getQName()]=d;this._oEntityTypeNameToEntitySetMap[o.getQName()]=d;var g=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Parameterization(o,d);this._oParameterizationSet[g.getName()]=g;f[o.getQName()]=g;var h=o.getQName();if(s.association!=undefined){for(var j=-1,A;A=s.association[++j];){if(A.referentialConstraint==undefined)continue;var k=null;if(A.end[0].type==h&&A.end[0].multiplicity=="*"&&A.end[1].multiplicity=="1"){k=A.end[1].type}else if(A.end[1].type==h&&A.end[1].multiplicity=="*"&&A.end[0].multiplicity=="1"){k=A.end[0].type}if(!k)continue;if(A.referentialConstraint.dependent.propertyRef.length!=1)continue;var l=g.findParameterByName(A.referentialConstraint.dependent.propertyRef[0].name);if(l==null)continue;var v=this._oEntityTypeSet[k];var V=this._oEntityTypeNameToEntitySetMap[k];l.setValueSetEntity(v,V)}}}for(var i=-1,t;t=q[++i];){var o=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.EntityType(this._oModel.getServiceMetadata(),s,t);this._oEntityTypeSet[o.getQName()]=o;var Q=o.getQName();var g=null;var n=null;if(s.association!=undefined){for(var j=-1,A;A=s.association[++j];){var r=null;if(A.end[0].type==Q)r=A.end[1].type;else if(A.end[1].type==Q)r=A.end[0].type;else continue;var M=null;M=f[r];if(M!=null)if(g!=null){throw"LIMITATION: Unable to handle multiple parameter entity types of query entity "+o.name}else{g=M;n=A}}}var b=this._getEntitySetsOfType(s,o.getQName());if(b.length!=1)throw"Invalid consumption model: There must be exactly one entity set for an entity type annotated with aggregating semantics";var d=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.EntitySet(this._oModel.getServiceMetadata(),s,b[0][0],b[0][1]);this._oEntitySetSet[d.getQName()]=d;this._oEntityTypeNameToEntitySetMap[o.getQName()]=d;var w=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.QueryResult(this,o,d,g);this._oQueryResultSet[w.getName()]=w;if(g)g.setTargetQueryResult(w,n)}},oUI5ODataModelAnnotatableObject:{objectName:"schema",keyPropName:"namespace",extensions:true,aSubObject:[{objectName:"entityType",keyPropName:"name",extensions:true,aSubObject:[{objectName:"property",keyPropName:"name",aSubObject:[],extensions:true,}]},{objectName:"entityContainer",keyPropName:"name",extensions:false,aSubObject:[{objectName:"entitySet",keyPropName:"name",extensions:true,aSubObject:[],}],}]},mergeV2Annotations:function(a){try{var A=JSON.parse(a)}catch(e){return}var m;try{m=this._oModel.getServiceMetadata().dataServices}catch(e){return}for(var p in A){if(!(this.oUI5ODataModelAnnotatableObject.objectName==p))continue;if(!(A[p]instanceof Array)){continue}this.mergeV2AnnotationLevel(m[this.oUI5ODataModelAnnotatableObject.objectName],A[this.oUI5ODataModelAnnotatableObject.objectName],this.oUI5ODataModelAnnotatableObject);break}return},mergeV2AnnotationLevel:function(M,a,u){for(var i=-1,A;A=a[++i];){for(var j=-1,o;o=M[++j];){if(!(A[u.keyPropName]==o[u.keyPropName]))continue;if(A["extensions"]!=undefined){if(o["extensions"]==undefined)o["extensions"]=new Array();for(var l=-1,b;b=A["extensions"][++l];){var f=false;for(var m=-1,c;c=o["extensions"][++m];){if(b.name==c.name&&b.namespace==c.namespace){c.value=b.value;f=true;break}}if(!f)o["extensions"].push(b)}}for(var k=-1,U;U=u.aSubObject[++k];){for(var p in A){if(!(U.objectName==p))continue;if(!(A[U.objectName]instanceof Array))continue;if((o[U.objectName]==undefined)||(!(o[U.objectName]instanceof Array)))continue;this.mergeV2AnnotationLevel(o[U.objectName],A[U.objectName],U);break}}}}return},findQueryResultByName:function(n){var q=this._oQueryResultSet[n];if(!q&&this._oDefaultEntityContainer){var Q=this._oDefaultEntityContainer.name+"."+n;q=this._oQueryResultSet[Q]}return q},getAllQueryResultNames:function(){if(this._aQueryResultNames)return this._aQueryResultNames;this._aQueryResultNames=new Array(0);for(var n in this._oQueryResultSet)this._aQueryResultNames.push(this._oQueryResultSet[n].getName());return this._aQueryResultNames},getAllQueryResults:function(){return this._oQueryResultSet},getODataModel:function(){return this._oModel},_getEntitySetsOfType:function(s,q){var e=[];for(var i=-1,E;E=s.entityContainer[++i];){for(var j=-1,o;o=E.entitySet[++j];){if(o.entityType==q)e.push([E,o])}}return e},_oModel:null,_oDefaultEntityContainer:null,_aQueryResultNames:null,_oQueryResultSet:null,_oParameterizationSet:null,_oEntityTypeSet:null,_oEntitySetSet:null,_oEntityTypeNameToEntitySetMap:null,_oActivatedWorkarounds:null,};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.QueryResult=function(m,e,E,p){this._init(m,e,E,p)};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.QueryResult.prototype={_init:function(m,e,E,p,a){this._oModel=m;this._oEntityType=e;this._oEntitySet=E;this._oParameterization=p;this._oDimensionSet=new Object();this._oMeasureSet=new Object();var P=e.getTypeDescription().property;var A={};for(var i=-1,o;o=P[++i];){if(o.extensions==undefined)continue;for(var j=-1,b;b=o.extensions[++j];){if(!b.namespace==sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants.SAP_NAMESPACE)continue;switch(b.name){case"aggregation-role":switch(b.value){case"dimension":var d=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Dimension(this,o);this._oDimensionSet[d.getName()]=d;break;case"measure":var M=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Measure(this,o);this._oMeasureSet[M.getName()]=M;break;case"totaled-properties-list":this._oTotaledPropertyListProperty=o;break}break;case"attribute-for":var D=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.DimensionAttribute(this,o);A[D.getKeyProperty()]=D;break}}}for(var s in A){var D=A[s];D.getDimension().addAttribute(D)}if(m._oActivatedWorkarounds.IdentifyTextPropertiesByName){var c=new Array();for(var f in this._oDimensionSet){var d=this._oDimensionSet[f];if(!d.getTextProperty()){var t=null;t=e.findPropertyByName(f+"Name");if(!t)t=e.findPropertyByName(f+"Text");if(!t)t=e.findPropertyByName(f+"Desc");if(!t)t=e.findPropertyByName(f+"Description");if(t){d.setTextProperty(t);c.push(t.name)}}}for(var i=-1,g;g=c[++i];){delete this._oDimensionSet[g]}}},getName:function(){return this.getEntitySet().getQName()},getParameterization:function(){return this._oParameterization},getAllDimensionNames:function(){if(this._aDimensionNames)return this._aDimensionNames;this._aDimensionNames=[];for(var n in this._oDimensionSet)this._aDimensionNames.push(this._oDimensionSet[n].getName());return this._aDimensionNames},getAllDimensions:function(){return this._oDimensionSet},getAllMeasureNames:function(){if(this._aMeasureNames)return this._aMeasureNames;this._aMeasureNames=[];for(var n in this._oMeasureSet)this._aMeasureNames.push(this._oMeasureSet[n].getName());return this._aMeasureNames},getAllMeasures:function(){return this._oMeasureSet},findDimensionByName:function(n){return this._oDimensionSet[n]},getTotaledPropertiesListProperty:function(){return this._oTotaledPropertyListProperty},findMeasureByName:function(n){return this._oMeasureSet[n]},getModel:function(){return this._oModel},getEntityType:function(){return this._oEntityType},getEntitySet:function(){return this._oEntitySet},_oModel:null,_oEntityType:null,_oEntitySet:null,_oParameterization:null,_aDimensionNames:null,_oDimensionSet:null,_aMeasureNames:null,_oMeasureSet:null,_oTotaledPropertyListProperty:null};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Parameterization=function(e,E){this._init(e,E)};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Parameterization.prototype={_init:function(e,E){this._oEntityType=e;this._oEntitySet=E;this._oParameterSet=new Object();var p=e.getTypeDescription().property;for(var i=-1,P;P=p[++i];){if(P.extensions==undefined)continue;for(var j=-1,o;o=P.extensions[++j];){if(!o.namespace==sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants.SAP_NAMESPACE)continue;switch(o.name){case"parameter":var a=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Parameter(this,P);this._oParameterSet[a.getName()]=a;break}}}},setTargetQueryResult:function(q,a){this._oQueryResult=q;var Q=this._oEntityType.getSchema().namespace+"."+a.name;var n=this._oEntityType.getTypeDescription().navigationProperty;if(!n)throw"Invalid consumption model: Parameters entity type lacks navigation property for association to query result entity type";for(var i=-1,N;N=n[++i];){if(N.relationship==Q)this._oNavPropToQueryResult=N.name}if(!this._oNavPropToQueryResult)throw"Invalid consumption model: Parameters entity type lacks navigation property for association to query result entity type"},getName:function(){return this.getEntitySet().getQName()},getAllParameterNames:function(){if(this._aParameterNames)return this._aParameterNames;this._aParameterNames=[];for(var n in this._oParameterSet)this._aParameterNames.push(this._oParameterSet[n].getName());return this._aParameterNames},getAllParameters:function(){return this._oParameterSet},findParameterByName:function(n){return this._oParameterSet[n]},getNavigationPropertyToQueryResult:function(){return this._oNavPropToQueryResult},getEntityType:function(){return this._oEntityType},getEntitySet:function(){return this._oEntitySet},_oEntityType:null,_oEntitySet:null,_oQueryResult:null,_oNavPropToQueryResult:null,_aParameterNames:null,_oParameterSet:null,};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Parameter=function(p,P){this._init(p,P)};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Parameter.prototype={_init:function(p,P){this._oParameterization=p;this._oProperty=P;var e=p.getEntityType();if(P.extensions!=undefined){for(var i=-1,E;E=P.extensions[++i];){if(!E.namespace==sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants.SAP_NAMESPACE)continue;switch(E.name){case"parameter":switch(E.value){case"mandatory":this._bRequired=true;break;case"optional":this._bRequired=false;break;default:throw"Invalid annotation value for parameter property"}break;case"label":this._sLabelText=E.value;break;case"text":this._oTextProperty=e.findPropertyByName(E.value);break;case"upper-boundary":this._bIntervalBoundaryParameter=true;this._oUpperIntervalBoundaryParameterProperty=e.findPropertyByName(E.value);break;case"lower-boundary":this._bIntervalBoundaryParameter=true;this._oLowerIntervalBoundaryParameterProperty=e.findPropertyByName(E.value);break}}}if(!this._sLabelText)this._sLabelText=""},setValueSetEntity:function(e,E){this._oValueSetEntityType=e;this._oValueSetEntitySet=E},getTextProperty:function(){return this._oTextProperty},getLabelText:function(){if(!this._sLabelText&&this._oQueryResult._oModel._oActivatedWorkarounds.CreateLabelsFromTechnicalNames)this._sLabelText=sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.helper.tokenizeNametoLabelText(this.getName());return this._sLabelText},isOptional:function(){return(!this._bRequired)},isIntervalBoundary:function(){return this._bIntervalBoundaryParameter},isLowerIntervalBoundary:function(){return(this._oUpperIntervalBoundaryParameterProperty?true:false)},getPeerIntervalBoundaryParameter:function(){var p=null;if(this._oLowerIntervalBoundaryParameterProperty)p=this._oLowerIntervalBoundaryParameterProperty.name;else p=this._oUpperIntervalBoundaryParameterProperty.name;if(!p)throw"Parameter is not an interval boundary";return this._oParameterization.findParameterByName(p)},isValueSetAvailable:function(){return(this._oValueSetEntityType?true:false)},getName:function(){return this._oProperty.name},getProperty:function(){return this._oProperty},getContainingParameterization:function(){return this._oParameterization},getURIToValueEntitySet:function(s){var u=null;u=(s?s:"")+"/"+this._oValueSetEntitySet.getQName();return u},_oParameterization:null,_oProperty:null,_sLabelText:null,_oTextProperty:null,_bRequired:false,_bIntervalBoundaryParameter:false,_oLowerIntervalBoundaryParameterProperty:null,_oUpperIntervalBoundaryParameterProperty:null,_oValueSetEntityType:null,_oValueSetEntitySet:null,};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Dimension=function(q,p){this._init(q,p)};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Dimension.prototype={_init:function(q,p){this._oQueryResult=q;this._oProperty=p;this._oAttributeSet=new Object();if(p.extensions!=undefined){for(var i=-1,e;e=p.extensions[++i];){if(!e.namespace==sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants.SAP_NAMESPACE)continue;switch(e.name){case"label":this._sLabelText=e.value;break;case"text":this._oTextProperty=q.getEntityType().findPropertyByName(e.value);break;case"super-ordinate":this._sSuperOrdinatePropertyName=e.value;break}}}if(!this._sLabelText)this._sLabelText=""},getName:function(){return this._oProperty.name},getKeyProperty:function(){return this._oProperty},getTextProperty:function(){return this._oTextProperty},setTextProperty:function(t){this._oTextProperty=t},getLabelText:function(){if(!this._sLabelText&&this._oQueryResult._oModel._oActivatedWorkarounds.CreateLabelsFromTechnicalNames)this._sLabelText=sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.helper.tokenizeNametoLabelText(this.getName());return this._sLabelText},getSuperOrdinateDimension:function(){if(!this._sSuperOrdinatePropertyName)return null;return this._oQueryResult.findDimensionByName(this._sSuperOrdinatePropertyName)},getHierarchy:function(){if(!this._oHierarchy)this._oHierarchy=this._oQueryResult.getEntityType().getHierarchy(this._oProperty.name);return this._oHierarchy},getAllAttributeNames:function(){if(this._aAttributeNames)return this._aAttributeNames;this._aAttributeNames=[];for(var n in this._oAttributeSet)this._aAttributeNames.push(this._oAttributeSet[n].getName());return this._aAttributeNames},getAllAttributes:function(){return this._oAttributeSet},findAttributeByName:function(n){return this._oAttributeSet[n]},addAttribute:function(d){this._oAttributeSet[d.getName()]=d},getContainingQueryResult:function(){return this._oQueryResult},_oQueryResult:null,_oProperty:null,_oTextProperty:null,_sLabelText:null,_sSuperOrdinatePropertyName:null,_aAttributeNames:null,_oAttributeSet:null,_oHierarchy:null,};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.DimensionAttribute=function(q,p){this._init(q,p)};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.DimensionAttribute.prototype={_init:function(q,p){this._oQueryResult=q;this._oProperty=p;if(p.extensions!=undefined){for(var i=-1,e;e=p.extensions[++i];){if(!e.namespace==sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants.SAP_NAMESPACE)continue;switch(e.name){case"attribute-for":this._sDimensionName=e.value;break;case"label":this._sLabelText=e.value;break;case"text":this._oTextProperty=q.getEntityType().findPropertyByName(e.value);break}}}},getName:function(){return this._oProperty.name},getKeyProperty:function(){return this._oProperty},getTextProperty:function(){return this._oTextProperty},getLabelText:function(){return this._sLabelText},getDimension:function(){return this._oQueryResult.findDimensionByName(this._sDimensionName)},_oQueryResult:null,_oProperty:null,_oTextProperty:null,_sLabelText:null,_sDimensionName:null,};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Measure=function(q,p){this._init(q,p)};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Measure.prototype={_init:function(q,p){this._oQueryResult=q;this._oProperty=p;if(p.extensions!=undefined){for(var i=-1,e;e=p.extensions[++i];){if(!e.namespace==sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants.SAP_NAMESPACE)continue;switch(e.name){case"label":this._sLabelText=e.value;break;case"text":this._oTextProperty=q.getEntityType().findPropertyByName(e.value);break;case"unit":this._oUnitProperty=q.getEntityType().findPropertyByName(e.value);break}}}if(!this._sLabelText)this._sLabelText=""},getName:function(){return this._oProperty.name},getRawValueProperty:function(){return this._oProperty},getFormattedValueProperty:function(){return this._oTextProperty},getUnitProperty:function(){return this._oUnitProperty},getLabelText:function(){return this._sLabelText},_oQueryResult:null,_oProperty:null,_oTextProperty:null,_sLabelText:null,_oUnitProperty:null};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.EntitySet=function(m,s,c,e){this._init(m,s,c,e)};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.EntitySet.prototype={_init:function(m,s,c,e){this._oEntitySet=e;this._oContainer=c;this._oSchema=s;this._oModel=m;if(s.entityContainer.length>1)this._sQName=c.name+"."+e.name;else this._sQName=e.name},getQName:function(){return this._sQName},getSetDescription:function(){return this._oEntitySet},getSchema:function(){return this._oSchema},getModel:function(){return this._oModel},_oEntitySet:null,_oContainer:null,_oSchema:null,_oModel:null,_sQName:null,};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.EntityType=function(m,s,e){this._init(m,s,e)};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.EntityType.prototype={_init:function(m,s,e){this._oEntityType=e;this._oSchema=s;this._oModel=m;this._oPropertySet=new Object();this._aFilterablePropertyNames=[];this._aSortablePropertyNames=[];this._aRequiredFilterPropertyNames=[];this._sQName=s.namespace+"."+e.name;var r={};var R=null;for(var i=-1,p;p=e.property[++i];){this._aFilterablePropertyNames.push(p.name);this._aSortablePropertyNames.push(p.name);if(p.extensions==undefined)continue;for(var j=-1,E;E=p.extensions[++j];){if(!E.namespace==sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants.SAP_NAMESPACE)continue;switch(E.name){case"filterable":if(E.value=="false")this._aFilterablePropertyNames.pop(p.name);break;case"sortable":if(E.value=="false")this._aSortablePropertyNames.pop(p.name);break;case"required-filter":if(E.value=="true")this._aRequiredFilterPropertyNames.push(p.name);break;case"hierarchy-node-for":if(!(R=r[p.name]))R=r[p.name]=new Object();R.dimensionName=E.value;break;case"hierarchy-parent-node-for":case"hierarchy-parent-nod":if(!(R=r[E.value]))R=r[E.value]=new Object();R.parentNodeIDProperty=p;break;case"hierarchy-level-for":if(!(R=r[E.value]))R=r[E.value]=new Object();R.levelProperty=p;break;case"hierarchy-drill-state-for":case"hierarchy-drill-stat":if(!(R=r[E.value]))R=r[E.value]=new Object();R.drillStateProperty=p;break}}this._oPropertySet[p.name]=p}this._oRecursiveHierarchySet=new Object();for(var h in r){var H=r[h];var o=this._oPropertySet[h];var d=this._oPropertySet[H.dimensionName];if(d==null){d=o}this._oRecursiveHierarchySet[d.name]=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.RecursiveHierarchy(e,o,H.parentNodeIDProperty,H.levelProperty,d)}},findPropertyByName:function(n){return this._oPropertySet[n]},getFilterablePropertyNames:function(){return this._aFilterablePropertyNames},getSortablePropertyNames:function(){return this._aSortablePropertyNames},getRequiredFilterPropertyNames:function(){return this._aRequiredFilterPropertyNames},getAllHierarchyPropertyNames:function(){if(this._aHierarchyPropertyNames)return this._aHierarchyPropertyNames;this._aHierarchyPropertyNames=[];for(var n in this._oRecursiveHierarchySet)this._aHierarchyPropertyNames.push(this._oRecursiveHierarchySet[n].getNodeValueProperty().name);return this._aHierarchyPropertyNames},getHierarchy:function(n){if(this._oRecursiveHierarchySet[n]==undefined)return null;return this._oRecursiveHierarchySet[n]},getQName:function(){return this._sQName},getTypeDescription:function(){return this._oEntityType},getSchema:function(){return this._oSchema},getModel:function(){return this._oModel},_oEntityType:null,_oSchema:null,_oModel:null,_sQName:null,_oPropertySet:null,_aFilterablePropertyNames:null,_aRequiredFilterPropertyNames:null,_aHierarchyPropertyNames:null,_oRecursiveHierarchySet:null,};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.RecursiveHierarchy=function(e,n,p,N,o){this._init(e,n,p,N,o)};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.RecursiveHierarchy.prototype={_init:function(e,n,p,N,o){this._oEntityType=e;this._oNodeIDProperty=n;this._oParentNodeIDProperty=p;this._oNodeLevelProperty=N;this._oNodeValueProperty=o},isRecursiveHierarchy:function(){return true},isLeveledHierarchy:function(){return false},getNodeIDProperty:function(){return this._oNodeIDProperty},getParentNodeIDProperty:function(){return this._oParentNodeIDProperty},getNodeLevelProperty:function(){return this._oNodeLevelProperty},getNodeValueProperty:function(){return this._oNodeValueProperty},_oNodeIDProperty:null,_oParentNodeIDProperty:null,_oNodeLevelProperty:null,_oNodeValueProperty:null,};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.FilterExpression=function(m,s,e){this._init(m,s,e)};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.FilterExpression.prototype={_init:function(m,s,e){this._oEntityType=e;this._oSchema=s;this._oModel=m;this._aFilterCondition=new Array()},clear:function(){this._aFilterCondition=new Array()},addCondition:function(p,o,v,V){var P=this._oEntityType.findPropertyByName(p);if(P==null){throw"Cannot add filter condition for unknown property name "+p}var f=this._oEntityType.getFilterablePropertyNames();if(f.indexOf(p)===-1){throw"Cannot add filter condition for not filterable property name "+p}this._aFilterCondition.push({property:P,op:o,val1:v,val2:V});return this._aFilterablePropertyNames},addSetCondition:function(p,v){var P=this._oEntityType.findPropertyByName(p);if(P==null){throw"Cannot add filter condition for unknown property name "+p}var f=this._oEntityType.getFilterablePropertyNames();if(f.indexOf(p)===-1){throw"Cannot add filter condition for not filterable property name "+p}for(var i=-1,V;V=v[++i];){this._aFilterCondition.push({property:P,op:sap.ui.model.FilterOperator.EQ,val1:V})}return this._aFilterablePropertyNames},getExpressionAsUI5FilterArray:function(){var f=new Array();for(var i=-1,c;c=this._aFilterCondition[++i];){f.push(new sap.ui.model.Filter(c.property.name,c.op,c.val1,c.val2))}return f},getURIFilterOptionValue:function(){if(this._aFilterCondition.length==0)return"";this._aFilterCondition.sort(function(a,b){if(a.property.name==b.property.name)return 0;if(a.property.name>b.property.name)return 1;else return-1});var p=this._aFilterCondition[0].property.name;var o="";var s="";for(var i=-1,c;c=this._aFilterCondition[++i];){if(p!=c.property.name){o+=(o==""?"":" and ")+"("+s+")";s="";p=c.property.name}switch(c.op){case sap.ui.model.FilterOperator.BT:s+=(s==""?"":" or ")+"("+c.property.name+" "+sap.ui.model.FilterOperator.GE.toLowerCase()+" "+sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.helper.renderPropertyFilterValue(c.val1,c.property.type)+" and "+c.property.name+" "+sap.ui.model.FilterOperator.LE.toLowerCase()+" "+sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.helper.renderPropertyFilterValue(c.val2,c.property.type)+")";break;default:s+=(s==""?"":" or ")+"("+c.property.name+" "+c.op.toLowerCase()+" "+sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.helper.renderPropertyFilterValue(c.val1,c.property.type)+")"}}o+=(o==""?"":" and ")+"("+s+")";return o},getEntityType:function(){return this._oEntityType},getSchema:function(){return this._oSchema},getModel:function(){return this._oModel},_oEntityType:null,_oSchema:null,_oModel:null,_aFilterCondition:null,};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.SortOrder={Ascending:"asc",Descending:"desc"};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.SortExpression=function(m,s,e){this._init(m,s,e)};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.SortExpression.prototype={_init:function(m,s,e){this._oEntityType=e;this._oSchema=s;this._oModel=m;this._aSortCondition=[]},_containsSorter:function(p){var r=null;for(var i=-1,c;c=this._aSortCondition[++i];){if(c.property.name===p){r={sorter:c,index:i};break}}return r},_removeFromArray:function(a,f,t){var r=a.slice((t||f)+1||a.length);a.length=f<0?a.length+f:f;return a.push.apply(a,r)},clear:function(){this._aSortCondition=[]},addSorter:function(p,s){var P=this._oEntityType.findPropertyByName(p);if(P==null){throw"Cannot add sort condition for unknown property name "+p}if(this._containsSorter(p)!=null){throw"Sort condition for this property name is already defined "+p}var S=this._oEntityType.getSortablePropertyNames();if(S.indexOf(p)===-1){throw"Cannot add sort condition for not sortable property name "+p}this._aSortCondition.push({property:P,order:s});return this},removeSorter:function(p){if(!p)return;var s=this._containsSorter(p);if(s){this._removeFromArray(this._aSortCondition,s.index)}},getExpressionsAsUI5SorterArray:function(){var s=[];for(var i=-1,c;c=this._aSortCondition[++i];){s.push(new sap.ui.model.Sorter(c.property.name,c.order==sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.SortOrder.Descending))}return s},getExpressionAsUI5Sorter:function(){var s=this.getExpressionsAsUI5SorterArray();if(s.length==0){return null}else{return s[0]}},getURIOrderByOptionValue:function(){if(this._aSortCondition.length==0)return"";var o="";for(var i=-1,c;c=this._aSortCondition[++i];){o+=c.property.name+" "+c.order;if(i<this._aSortCondition.length-1){o+=", "}}return o},getEntityType:function(){return this._oEntityType},getSchema:function(){return this._oSchema},getModel:function(){return this._oModel},_oEntityType:null,_oSchema:null,_oModel:null,_aSortCondition:null,};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.ParameterizationRequest=function(p){this._init(p)};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.ParameterizationRequest.prototype={_init:function(p){if(!p)throw"No parameterization given";this._oParameterization=p;this._oParameterValueAssignment=new Array()},getParameterization:function(){return this._oParameterization},setParameterValue:function(p,v,t){var P=this._oParameterization.findParameterByName(p);if(!P)throw"Invalid parameter name "+p;if(t!=null){if(!P.isIntervalBoundary())throw"Range value cannot be applied to parameter "+p+" accepting only single values";if(!P.isLowerIntervalBoundary())throw"Range value given, but parameter "+p+" does not hold the lower boundary"}if(!P.isIntervalBoundary()){if(v==null)delete this._oParameterValueAssignment[p];else this._oParameterValueAssignment[p]=v}else{if(v==null&&t!=null)throw"Parameter "+p+": An upper boundary cannot be given without the lower boundary";if(v==null){delete this._oParameterValueAssignment[p];t=null}else this._oParameterValueAssignment[p]=v;var u=P.getPeerIntervalBoundaryParameter();if(t==null)t=v;if(v==null)delete this._oParameterValueAssignment[u.getName()];else this._oParameterValueAssignment[u.getName()]=t}return},getURIToParameterizationEntitySet:function(s){return(s?s:"")+"/"+this._oParameterization.getEntitySet().getQName()},getURIToParameterizationEntry:function(s){var d=this._oParameterization.getAllParameters();for(var D in d){if(this._oParameterValueAssignment[D]==undefined)throw"Parameter "+D+" has no value assigned"}var k="",f=true;for(var p in this._oParameterValueAssignment){k+=(f?"":",")+p+"="+sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.helper.renderPropertyKeyValue(this._oParameterValueAssignment[p],d[p].getProperty().type);f=false}return(s?s:"")+"/"+this._oParameterization.getEntitySet().getQName()+"("+k+")"},_oParameterization:null,_oParameterValueAssignment:null,};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.QueryResultRequest=function(q,p){this._init(q)};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.QueryResultRequest.prototype={_init:function(q,p){this._oQueryResult=q;this._oParameterizationRequest=p;this._oAggregationLevel=new Object();this._oMeasures=new Object();this._bIncludeEntityKey=false;this._oFilterExpression=null},setParameterizationRequest:function(p){this._oParameterizationRequest=p},getQueryResult:function(){return this._oQueryResult},setAggregationLevel:function(d){this._oAggregationLevel=new Object();if(!d){d=this._oQueryResult.getAllDimensionNames()}this.addToAggregationLevel(d)},addToAggregationLevel:function(d){if(!d)return;for(var i=-1,D;D=d[++i];){if(!this._oQueryResult.findDimensionByName(D))throw D+" is not a valid dimension name";this._oAggregationLevel[D]={key:true,text:false,attributes:null}}},removeFromAggregationLevel:function(d){if(!d){return}for(var i=-1,D;D=d[++i];){if(!this._oQueryResult.findDimensionByName(D)){throw D+" is not a valid dimension name"}if(this._oAggregationLevel[D]!=undefined){delete this._oAggregationLevel[D];this.getSortExpression().removeSorter(D)}}},getAggregationLevel:function(){var d=new Array();for(var D in this._oAggregationLevel){d.push(D)}return d},getAggregationLevelDetails:function(d){if(this._oAggregationLevel[d]==undefined)throw"Aggregation level does not include dimension "+d;return this._oAggregationLevel[d]},setMeasures:function(m){if(!m){m=this._oQueryResult.getAllMeasureNames()}this._oMeasures=new Object();for(var i=-1,M;M=m[++i];){if(!this._oQueryResult.findMeasureByName(M))throw M+" is not a valid measure name";this._oMeasures[M]={value:true,text:false,unit:false,}}},getMeasureNames:function(){var m=new Array();for(var M in this._oMeasures){m.push(M)}return m},includeDimensionKeyTextAttributes:function(d,I,b,a){var D=new Array();if(d){if(this._oAggregationLevel[d]==undefined)throw d+" is not included in the aggregation level";D.push(d)}else{for(var n in this._oAggregationLevel){D.push(n)}a=null}for(var i=-1,s;s=D[++i];){if(I!=null)this._oAggregationLevel[s].key=I;if(b!=null)this._oAggregationLevel[s].text=b;if(a!=null)this._oAggregationLevel[s].attributes=a}},includeMeasureRawFormattedValueUnit:function(m,I,b,a){var M=new Array();if(m){if(this._oMeasures[m]==undefined)throw m+" is not part of the query result";M.push(m)}else{for(var n in this._oMeasures){M.push(n)}}for(var i=-1,s;s=M[++i];){if(I!=null)this._oMeasures[s].value=I;if(b!=null)this._oMeasures[s].text=b;if(a!=null)this._oMeasures[s].unit=a}},getFilterExpression:function(){if(this._oFilterExpression==null){var e=this._oQueryResult.getEntityType();this._oFilterExpression=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.FilterExpression(e.getModel(),e.getSchema(),e)}return this._oFilterExpression},setFilterExpression:function(f){this._oFilterExpression=f},getSortExpression:function(){if(this._oSortExpression==null){var e=this._oQueryResult.getEntityType();this._oSortExpression=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.SortExpression(e.getModel(),e.getSchema(),e)}return this._oSortExpression},setSortExpression:function(s){this._oSortExpression=s},setRequestOptions:function(i,I){if(i)this._bIncludeEntityKey=i;if(I)this._bIncludeCount=I},setResultPageBoundaries:function(s,e){if(s!=null&&typeof s!=="number"){throw"Start value must be null or numeric"}if(e!==null&&typeof e!=="number"){throw"End value must be null or numeric"}if(s==null)s=1;if(s<1||s>(e==null?s:e)){throw"Invalid values for requested page boundaries"}this._iSkipRequestOption=(s>1)?s:null;this._iTopRequestOption=(e!=null)?(e-s+1):null},getResultPageBoundaries:function(){return{start:(this._iSkipRequestOption==null)?1:this._iSkipRequestOption,end:(this._iTopRequestOption!=null)?(this._iSkipRequestOption==null)?1:this._iSkipRequestOption+this._iTopRequestOption:null}},getURIToQueryResultEntitySet:function(s){var u=null;if(this._oQueryResult.getParameterization()){if(!this._oParameterizationRequest)throw"Missing parameterization request";else u=this._oParameterizationRequest.getURIToParameterizationEntry(s)+"/"+this._oQueryResult.getParameterization().getNavigationPropertyToQueryResult()}else u=(s?s:"")+"/"+this._oQueryResult.getEntitySet().getQName();return u},getURIQueryOptionValue:function(q){var Q=null;switch(q){case"$select":{var s="";for(var d in this._oAggregationLevel){var D=this._oQueryResult.findDimensionByName(d);var o=this._oAggregationLevel[d];if(o.key==true)s+=(s==""?"":",")+D.getKeyProperty().name;if(o.text==true&&D.getTextProperty())s+=(s==""?"":",")+D.getTextProperty().name;if(o.attributes){for(var i=-1,a;a=o.attributes[++i];){s+=(s==""?"":",")+D.findAttributeByName(a).getName()}}}for(var m in this._oMeasures){var M=this._oQueryResult.findMeasureByName(m);var b=this._oMeasures[m];if(b.value==true)s+=(s==""?"":",")+M.getRawValueProperty().name;if(b.text==true&&M.getFormattedValueProperty())s+=(s==""?"":",")+M.getFormattedValueProperty().name;if(b.unit==true&&M.getUnitProperty())s+=(s==""?"":",")+M.getUnitProperty().name}if(this._bIncludeEntityKey){var k=this._oQueryResult.getEntityType().getTypeDescription().key.propertyRef;for(var i=-1,K;K=k[++i];){s+=(s==""?"":",")+K.name}}Q=(s?s:null);break}case"$filter":{var f=null;if(this._oFilterExpression)f=this._oFilterExpression.getURIFilterOptionValue();Q=(f?f:null);break}case"$orderby":{var S=null;if(this._oSortExpression)S=this._oSortExpression.getURIOrderByOptionValue();Q=(S?S:null);break}case"$top":{if(this._iTopRequestOption!==null){Q=this._iTopRequestOption}break}case"$skip":{Q=this._iSkipRequestOption;break}default:break}return Q},getURIToQueryResultEntries:function(s){var r=this.getURIToQueryResultEntitySet(s);var S=this.getURIQueryOptionValue("$select");var f=this.getURIQueryOptionValue("$filter");var a=this.getURIQueryOptionValue("$orderby");var t=this.getURIQueryOptionValue("$top");var b=this.getURIQueryOptionValue("$skip");var u=r;var q=false;if(S){u+="?$select="+S;q=true}if(this._oFilterExpression&&f){if(!q){u+="?";q=true}else{u+="&"}u+="$filter="+f}if(this._oSortExpression&&a){if(!q){u+="?";q=true}else{u+="&"}u+="$orderby="+a}if(this._iTopRequestOption&&t){if(!q){u+="?";q=true}else{u+="&"}u+="$top="+t}if(this._iSkipRequestOption&&b){if(!q){u+="?";q=true}else{u+="&"}u+="$skip="+b}if(this._bIncludeCount){if(!q){u+="?";q=true}else{u+="&"}u+="$inlinecount=allpages"}return u},_oQueryResult:null,_oParameterizationRequest:null,_oAggregationLevel:null,_oMeasures:null,_bIncludeEntityKey:null,_bIncludeCount:null,_oFilterExpression:null,_oSortExpression:null,_iSkipRequestOption:0,_iTopRequestOption:null};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.ParameterValueSetRequest=function(p){this._init(p)};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.ParameterValueSetRequest.prototype={_init:function(p){this._oParameter=p;this._oValueSetResult=new Object();this._oFilterExpression=null;this._oSortExpression=null},includeParameterText:function(i){if(i!=null)this._oValueSetResult.text=i},getFilterExpression:function(){if(this._oFilterExpression==null){var e=this._oParameter.getContainingParameterization().getEntityType();this._oFilterExpression=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.FilterExpression(e.getModel(),e.getSchema(),e)}return this._oFilterExpression},setFilterExpression:function(f){this._oFilterExpression=f},getSortExpression:function(){if(this._oSortExpression==null){var e=this._oQueryResult.getEntityType();this._oSortExpression=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.SortExpression(e.getModel(),e.getSchema(),e)}return this._oSortExpression},setSortExpression:function(s){this._oSortExpression=s},getURIQueryOptionValue:function(q){var Q=null;switch(q){case"$select":{var s="";s+=(s==""?"":",")+this._oParameter.getProperty().name;if(this._oValueSetResult.text==true&&this._oParameter.getTextProperty())s+=(s==""?"":",")+this._oParameter.getTextProperty().name;Q=(s?s:null);break}case"$filter":{var f=null;if(this._oFilterExpression)f=this._oFilterExpression.getURIFilterOptionValue();Q=(f?f:null);break}case"$orderby":{var S=null;if(this._oSortExpression)S=this._oSortExpression.getURIOrderByOptionValue();Q=(S?S:null);break}default:break}return Q},getURIToParameterValueSetEntries:function(s){var r=null;r=(s?s:"")+"/"+this._oParameter.getContainingParameterization().getEntitySet().getQName();var S=this.getURIQueryOptionValue("$select");var f=this.getURIQueryOptionValue("$filter");var a=this.getURIQueryOptionValue("$orderby");var u=r;var q=false;if(S){u+="?$select="+S;q=true}if(this._oFilterExpression&&f){if(!q){u+="?";q=true}else u+="&";u+="$filter="+f}if(this._oSortExpression&&a){if(!q){u+="?";q=true}else u+="&";u+="$orderby="+a}return u},_oParameter:null,_oFilterExpression:null,_oSortExpression:null,_oValueSetResult:null};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.DimensionMemberSetRequest=function(d,p){this._init(d,p)};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.DimensionMemberSetRequest.prototype={_init:function(d,p){this._oDimension=d;this._oParameterizationRequest=p;this._oValueSetResult=new Object();this._oFilterExpression=null;this._oSortExpression=null},setParameterizationRequest:function(p){this._oParameterizationRequest=p},includeDimensionTextAttributes:function(i,a){if(i!=null)this._oValueSetResult.text=i;if(a!=null)this._oValueSetResult.attributes=a},getFilterExpression:function(){if(this._oFilterExpression==null){var e=this._oDimension.getContainingQueryResult().getEntityType();this._oFilterExpression=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.FilterExpression(e.getModel(),e.getSchema(),e)}return this._oFilterExpression},setFilterExpression:function(f){this._oFilterExpression=f},getSortExpression:function(){if(this._oSortExpression==null){var e=this._oQueryResult.getEntityType();this._oSortExpression=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.SortExpression(e.getModel(),e.getSchema(),e)}return this._oSortExpression},setSortExpression:function(s){this._oSortExpression=s},hasMasterDataAvailable:function(){return false},getURIQueryOptionValue:function(q){var Q=null;switch(q){case"$select":{var s="";s+=(s==""?"":",")+this._oDimension.getKeyProperty().name;if(this._oValueSetResult.text==true&&this._oDimension.getTextProperty())s+=(s==""?"":",")+this._oDimension.getTextProperty().name;if(this._oValueSetResult.attributes){for(var i=-1,a;a=this._oValueSetResult.attributes[++i];){s+=(s==""?"":",")+this._oDimension.findAttributeByName(a).getName()}}Q=(s?s:null);break}case"$filter":{var f=null;if(this._oFilterExpression)f=this._oFilterExpression.getURIFilterOptionValue();Q=(f?f:null);break}case"$orderby":{var S=null;if(this._oSortExpression)S=this._oSortExpression.getURIOrderByOptionValue();Q=(S?S:null);break}default:break}return Q},getURIToDimensionMemberEntries:function(s){var r=null;if(this._oDimension.getContainingQueryResult().getParameterization()){if(!this._oParameterizationRequest)throw"Missing parameterization request";else r=this._oParameterizationRequest.getURIToParameterizationEntry(s)+"/"+this._oDimension.getContainingQueryResult().getParameterization().getNavigationPropertyToQueryResult()}else r=(s?s:"")+"/"+this._oDimension.getContainingQueryResult().getEntitySet().getQName();var S=this.getURIQueryOptionValue("$select");var f=this.getURIQueryOptionValue("$filter");var a=this.getURIQueryOptionValue("$orderby");var u=r;var q=false;if(S){u+="?$select="+S;q=true}if(this._oFilterExpression&&f){if(!q){u+="?";q=true}else u+="&";u+="$filter="+f}if(this._oSortExpression&&a){if(!q){u+="?";q=true}else u+="&";u+="$orderby="+a}return u},_oDimension:null,_oParameterizationRequest:null,_oFilterExpression:null,_oSortExpression:null,_oValueSetResult:null}};if(!jQuery.sap.isDeclared('sap.ushell.components.tiles.indicatorTileUtils.smartBusinessUtil')){jQuery.sap.declare("sap.ushell.components.tiles.indicatorTileUtils.smartBusinessUtil");sap=sap||{};sap.ushell=sap.ushell||{};sap.ushell.components=sap.ushell.components||{};sap.ushell.components.tiles.indicatorTileUtils=sap.ushell.components.tiles.indicatorTileUtils||{};sap.ushell.components.tiles.indicatorTileUtils.util=sap.ushell.components.tiles.indicatorTileUtils.util||{};sap.ushell.components.tiles.indicatorTileUtils.util=(function(g,$,u){var f=function(){var o={};$.ajax({type:"GET",async:false,dataType:"json",url:"/sap/hba/apps/kpi/s/logic/__token.xsjs",headers:{"X-CSRF-Token":"Fetch"},success:function(d,s,x){o.userName=d.userName;o.token=x.getResponseHeader("X-CSRF-Token")},error:function(){$.sap.log.error("Error Fetching AUTH TOKEN")}});return o};var a=function(s){var r=[];for(var i=0;i<s.length;i++)r.push(JSON.parse(s[i]));return r};"use strict";var c={};return{getAuthToken:function(){return f().token},getHanaUser:function(){return authObject.userName},getEdmType:function(U,p){var d=null;if(U instanceof sap.ui.model.odata.ODataModel){d=U}else{d=this.getODataModelByServiceUri(U)}if(d&&d.getServiceMetadata()){var s=d.getServiceMetadata();var e=s.dataServices.schema[0].entityType;if(e){for(var i=0;i<e.length;i++){var b=e[i];var h=b.property;for(var j=0;j<h.length;j++){var k=h[j];if(k.name==p){return k.type}}}}}return null},getODataModelByServiceUri:function(s){if(!c[s]){var m=new sap.ui.model.odata.ODataModel(s,true);c[s]=m}return c[s]},getMantissaLength:function(n){var N=n.toString();var i=0;if(n<0){i=1}return(N.indexOf('.')===-1)?(n<0?N.length-1:N.length):N.substring(i,N.indexOf('.')).length},getLocaleFormattedValue:function(n,s){var l=new sap.ui.core.Locale(sap.ui.getCore().getConfiguration().getLanguage());if(s==-2){var N;if(n>9999)N="????";else if(n<0.001)N="0";else{if(n.toString().indexOf('.')!=-1)N=Number(n).toFixed(4-n.toString().indexOf('.'));else N=Number(n);var v=sap.ca.ui.model.format.NumberFormat.getInstance({style:"short"},l);N=v.format(N)}}else{var d=2;var m=this.getMantissaLength(n);if(!(m%3))d=1;if(Math.abs(n)%Math.pow(10,m-1)==0){d=0}else if((Math.abs(n)%Math.pow(10,m-1))<6*Math.pow(10,m-4)){d=0}var v=sap.ca.ui.model.format.NumberFormat.getInstance({style:"short",shortDecimals:d},l);var N=v.format(n)}return N},getModelerRuntimeServiceModel:function(){return this.getODataModelByServiceUri("/sap/hba/apps/kpi/s/odata/smart_business_runtime_services.xsodata")},getSapFontErrorCode:function(){return String.fromCharCode(0xe0b1)},getSapFontBusyCode:function(){return String.fromCharCode(0xe1f2)},prepareFilterStructure:function(b,d){var v=[];if(d){b=b.concat(d)}for(var i=0;i<b.length;i++){var p={};p.comparator=b[i].OPERATOR;p.filterPropertyName=b[i].NAME;if(b[i].ID)p.id=b[i].ID;p.type=b[i].TYPE;p.value=b[i].VALUE_1;p.valueTo=b[i].VALUE_2;v.push(p)}return v},getFilterFromRunTimeService:function(C,b){var K=this.getODataModelByServiceUri('/sap/hba/r/sb/core/odata/runtime/SMART_BUSINESS.xsodata');var d="ID eq '#EVALUATIONID'".replace("#EVALUATIONID",C.EVALUATION.ID);var k=K.read("/EVALUATION_FILTERS",null,{"$filter":d},true,function(e){var h=[];if(e.results.length){h=e.results}b.call(this,h)})},findTextPropertyForDimension:function(U,b,d){try{var o=this._getOData4AnalyticsObject(U);var q=o.findQueryResultByName(b);var D=q.findDimensionByName(d);if(D.getTextProperty()){return D.getTextProperty().name}else{return d}}catch(e){$.sap.log.error("Error Fetching Text Property for "+d+" : "+e.toString())}},getEvalValueMeasureName:function(C,t,r){var e=C.EVALUATION_VALUES;for(var i=0;i<e.length;i++){if(e[i].TYPE==t)if(r==="FIXED")return e[i].FIXED;else return e[i].COLUMN_NAME}},getParsedChip:function(C,b){var p={};var d=JSON.parse(C);var e=JSON.parse(d.TILE_PROPERTIES).evaluationId||"";var t=this;if(d.ADDITIONAL_FILTERS)p["ADDITIONAL_FILTERS"]=JSON.parse(d.ADDITIONAL_FILTERS);if(d.ADDITIONAL_APP_PARAMETERS)p["ADDITIONAL_APP_PARAMETERS"]=JSON.parse(d.ADDITIONAL_APP_PARAMETERS);if(d.EVALUATION_FILTERS){p["EVALUATION_FILTERS"]=JSON.parse(d.EVALUATION_FILTERS);if(d.EVALUATION_VALUES){p["EVALUATION_VALUES"]=JSON.parse(d.EVALUATION_VALUES);if(d.EVALUATION){p.EVALUATION=JSON.parse(d.EVALUATION);p.TILE_PROPERTIES=JSON.parse(d.TILE_PROPERTIES);b(p)}else t.getEvaluationDetailsFromRunTimeService("/EVALUATIONS",e,function(h){p.EVALUATION=h;p.TILE_PROPERTIES=JSON.parse(d.TILE_PROPERTIES);b(p)})}else t.getEvaluationDetailsFromRunTimeService("/EVALUATION_VALUES",e,function(h){p["EVALUATION_VALUES"]=h;if(d.EVALUATION){p.EVALUATION=JSON.parse(d.EVALUATION);p.TILE_PROPERTIES=JSON.parse(d.TILE_PROPERTIES);b(p)}else t.getEvaluationDetailsFromRunTimeService("/EVALUATIONS",e,function(h){p.EVALUATION=h;p.TILE_PROPERTIES=JSON.parse(d.TILE_PROPERTIES);b(p)})})}else t.getEvaluationDetailsFromRunTimeService("/EVALUATION_FILTERS",e,function(h){p["EVALUATION_FILTERS"]=h;if(d.EVALUATION_VALUES){p["EVALUATION_VALUES"]=JSON.parse(d.EVALUATION_VALUES);if(d.EVALUATION){p.EVALUATION=JSON.parse(d.EVALUATION);p.TILE_PROPERTIES=JSON.parse(d.TILE_PROPERTIES);b(p)}else t.getEvaluationDetailsFromRunTimeService("/EVALUATIONS",e,function(h){p.EVALUATION=h;p.TILE_PROPERTIES=JSON.parse(d.TILE_PROPERTIES);b(p)})}else t.getEvaluationDetailsFromRunTimeService("/EVALUATION_VALUES",e,function(h){p["EVALUATION_VALUES"]=h;if(d.EVALUATION){p.EVALUATION=JSON.parse(d.EVALUATION);p.TILE_PROPERTIES=JSON.parse(d.TILE_PROPERTIES);b(p)}else t.getEvaluationDetailsFromRunTimeService("/EVALUATIONS",e,function(h){p.EVALUATION=h;p.TILE_PROPERTIES=JSON.parse(d.TILE_PROPERTIES);b(p)})})})},getEvaluationDetailsFromRunTimeService:function(e,i,b){var K=this.getODataModelByServiceUri('/sap/hba/r/sb/core/odata/runtime/SMART_BUSINESS.xsodata');var d="ID eq '#EVALUATIONID'".replace("#EVALUATIONID",i);var k=K.read(e,null,{"$filter":d},true,function(h){var j=[];if(h.results.length){j=h.results}b.call(this,j)})},getNavigationTarget:function(C,s){var b=sap.ushell&&sap.ushell.Container&&sap.ushell.Container.getService;var o=b&&b("CrossApplicationNavigation");var p={};p["evaluationId"]=C.EVALUATION.ID;p["chipId"]=C.TILE_PROPERTIES.id;if(s)p["sap-system"]=s;p["tileType"]=C.TILE_PROPERTIES.tileType;if(C.TILE_PROPERTIES.dimension)p["dimension"]=C.TILE_PROPERTIES.dimension;if(C.TILE_PROPERTIES.storyId)p["storyId"]=C.TILE_PROPERTIES.storyId;if(C.ADDITIONAL_APP_PARAMETERS){for(each in C.ADDITIONAL_APP_PARAMETERS){if(C.ADDITIONAL_APP_PARAMETERS.hasOwnProperty(each)){if(C.ADDITIONAL_APP_PARAMETERS[each].constructor==Array){var d=C.ADDITIONAL_APP_PARAMETERS[each];for(var i=0;i<d.length;i++)p[each]=d[i]}else p[each]=C.ADDITIONAL_APP_PARAMETERS[each]}}}var t=o&&o.hrefForExternal({target:{semanticObject:C.TILE_PROPERTIES.semanticObject,action:C.TILE_PROPERTIES.semanticAction},params:p})||"";if(C.ADDITIONAL_FILTERS){var e=C.ADDITIONAL_FILTERS;var h="&";for(var j=0;j<e.length;j++){if(e[j].OPERATOR==="EQ")h=h+"/"+e[j].NAME+"="+e[j].VALUE_1}t+=h}return t},getChipTitle:function(C){var t="";if(C){var b=C.EVALUATION||{};t=b.INDICATOR_TITLE||""}return t},getstringifyTileConfig:function(C){var s={};s.EVALUATION=JSON.stringify(C.EVALUATION);s.EVALUATION_FILTERS=JSON.stringify(C.EVALUATION_FILTERS);s.EVALUATION_VALUES=JSON.stringify(C.EVALUATION_VALUES);s.TILE_PROPERTIES=JSON.stringify(C.TILE_PROPERTIES);return JSON.stringify(s)},getChipSubTitle:function(C){var t="";if(C){var b=C.EVALUATION||{};t=b.TITLE||""}return t},prepareQueryServiceUri:function(U,b,m,d,v,o,t){function _(I){return I.replace(/'/g,"''")}var h=null;try{var n=null;if(U instanceof sap.ui.model.odata.ODataModel){n=sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Model.ReferenceByModel(U)}else{var p=this.getODataModelByServiceUri(U);n=sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Model.ReferenceByModel(p)}var O=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Model(n);var q=O.findQueryResultByName(b);var Q=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.QueryResultRequest(q);if(m){Q.setMeasures(m.split(","));Q.includeMeasureRawFormattedValueUnit(null,true,true,true)}if(d){if(typeof d=="string"){h=d;h=h.split(",")}for(var i=0;i<h.length;i++){Q.addToAggregationLevel([h[i]]);var r=q.getAllDimensions();if(r[h[i]].getTextProperty()!=null){Q.includeDimensionKeyTextAttributes([h[i]],true,true,null)}}}if(v&&v.length){var s=new Array();var w=new Array();for(var i=0,l=v.length;i<l;i++){var x=v[i];if(x.type==="PA"){w.push(x)}else if(x.type==="FI"){s.push(x)}}function A(I){var J=I.toJSON();var K=J.charAt(J.length-1).toUpperCase();if(K.charCodeAt(0)>=65&&K.charCodeAt(0)<=90){J=J.slice(0,-1)}return J};function B(I){if(I){try{if(I==+I){I=window.parseInt(I)}var J=new Date(I);var K=J.getTime();if(isNaN(K)){return I}else{return A(J)}}catch(e){}}return I};if(s.length){var F=Q.getFilterExpression();for(var i=0,l=s.length;i<l;i++){var x=s[i];if(this.getEdmType(U,x.filterPropertyName)=="Edm.DateTime"){x.value=B(x.value);x.valueTo=B(x.valueTo)}if(x.comparator==sap.ui.model.FilterOperator.BT){F.addCondition(x.filterPropertyName,x.comparator,window.encodeURIComponent(_(x.value)),window.encodeURIComponent(x.valueTo))}else{var C=x.value.split(",");for(var j=0,k=C.length;j<k;j++){F.addCondition(x.filterPropertyName,x.comparator,window.encodeURIComponent(_(C[j].replace(/\^\|/g,","))),null)}}}}if(w.length){if(q.getParameterization()){var P=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.ParameterizationRequest(q.getParameterization());for(var y=0,z=w.length;y<z;y++){var D=w[y];P.setParameterValue(D.filterPropertyName,window.encodeURIComponent(_(D.value)))}Q.setParameterizationRequest(P)}}}var E=Q.getURIToQueryResultEntries();if(o&&o.length){E=E+"&$orderby=";for(var y=0,z=o.length;y<z;y++){var G=o[y].sortOrder||"asc";if(G)E+=o[y].element+" "+G+","}E=E.slice(0,E.length-1)}if(t){E=E+"&$top="+t}var M=q.getAllMeasures();var H=M[m.split(",")[0]].getUnitProperty();return{uri:E,model:O.getODataModel(),unit:H}}catch(e){$.sap.log.error("Error Preparing Query Service Uri using OData4Analytics Library : "+e.toString());if(arguments.length){$.sap.log.error("Arguments Passed to this function");$.sap.log.error(arguments[0]+","+arguments[1]+","+arguments[2]+","+arguments[3])}else{$.sap.log.error("NO Arguments passed to this function")}return null}},_getOData4AnalyticsObject:function(U){var m=null;if(U instanceof sap.ui.model.odata.ODataModel){m=U}else if(typeof U=="string"){m=this.getODataModelByServiceUri(U)}else{throw new Error("Invalid Input to Create ODataModel Object : "+U)}var O=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Model(sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Model.ReferenceByModel(m));return O},getAllEntitySet:function(U){var b=new Array();try{var o=this._getOData4AnalyticsObject(U);b=o.getAllQueryResultNames()}catch(e){$.sap.log.error("Error fetching Enity Set : "+e.toString())}return b},getAllMeasures:function(U,b){var m=new Array();try{var o=this._getOData4AnalyticsObject(U);var q=o.findQueryResultByName(b);m=q.getAllMeasureNames()}catch(e){$.sap.log.error("Error Fetching All Measures : "+e.toString())}return m},getAllMeasuresWithLabelText:function(U,b){var m=new Array();try{var o=this._getOData4AnalyticsObject(U);var q=o.findQueryResultByName(b);var d=q.getAllMeasureNames();for(var i=0;i<d.length;i++){var h=d[i];g.oMeasure=q.findMeasureByName(h);m.push({key:h,value:oMeasure.getLabelText()})}}catch(e){$.sap.log.error("Error Fetching All Measures : "+e.toString())}return m},getAllDimensions:function(U,b){function i(j,k){var l=0,m=0;var r=new Array();while(l<j.length&&m<k.length){if(j[l]<k[m]){l++}else if(j[l]>k[m]){m++}else{r.push(j[l]);l++;m++}}return r}var d=new Array();var F=new Array();try{var o=this._getOData4AnalyticsObject(U);var q=o.findQueryResultByName(b);var h=q.getEntityType();F=h.getFilterablePropertyNames();d=q.getAllDimensionNames();if(F&&F.length){d=i(F.sort(),d.sort())}}catch(e){$.sap.log.error("Error Fetching All Dimesions : "+e.toString())}return d},getAllDimensionsWithLabelText:function(U,b){var d=new Array();try{var o=this._getOData4AnalyticsObject(U);var q=o.findQueryResultByName(b);var h=q.getAllDimensionNames();for(var i=0;i<h.length;i++){var j=h[i];var D=q.findDimensionByName(j);var t=null;if(D.getTextProperty()!=null)t=D.getTextProperty().name;d.push({key:j,value:D.getLabelText(),textProperty:t})}}catch(e){$.sap.log.error("Error Fetching All Dimesions : "+e.toString())}return d},getAllInputParams:function(U,b){var i=new Array();try{var o=this._getOData4AnalyticsObject(U);var q=o.findQueryResultByName(b);if(q.getParameterization()){var p=q.getParameterization();i=p.getAllParameterNames()}}catch(e){$.sap.log.error("Error Fetching Input Params : "+e.toString())}return i},getAllInputParamsWithFlag:function(U,b){var d=new Array();try{var o=this._getOData4AnalyticsObject(U);var q=o.findQueryResultByName(b);if(q.getParameterization()){var p=q.getParameterization();var h=p.getAllParameterNames();for(var i=0;i<h.length;i++){var j=h[i];var k=p.findParameterByName(j);d.push({name:j,optional:k.isOptional()})}}}catch(e){$.sap.log.error("Error Fetching Input Params : "+e.toString())}return d},formatOdataObjectToString:function(v){if(v&&v.constructor==Object){if(v.__edmType=="Edm.Time"){var m=v.ms;var s=Math.floor((m/1000)%60);var b=Math.floor((m/60000)%60);var h=Math.floor((m/3600000)%24);return h+"H"+b+"M"+s+"S"}}return v},generateCombinations:function(b){function d(h,s){while(s.length<h){s='0'+s}return s}var m=Math.pow(2,b.length);var r=[];var e=0;while(m>1){var s=(m-1).toString(2);s=d(b.length,s);r[e]=[];for(var i=0;i<s.length;i++){if(Number(s[i]))r[e].push(b[i])}m--,e++}return r},logError:function(e){jQuery.sap.log.error(e.toString())},numberOfLeadingZeros:function(n){n=String(n);var b=0;var d=n.indexOf('.');if(d==-1)return 0;if(Number(n.split('.')[0])!=0)return 0;var i=d+1;while(n[i++]=='0'){++b}return b},formatValue:function(v,s,M){M=M||3;var b={3:"K",6:"M",9:"B",12:"T",0:""};b["-3"]="m";b["-6"]="u";b["-9"]="n";b["-12"]="t";b["-2"]="%";var t,p,d;t=Number(v).toPrecision(M);var z=this.numberOfLeadingZeros(t);if(z>0&&s<0){p=t*Math.pow(10,z+M);d=-(z+M)}else{p=Number(t.split("e")[0]);d=Number(t.split("e")[1])||0}if(!v&&v!=0)return{value:"",unitPrefix:""};if(s>=0){if(d%3!=0){if(d%3==2){if(d+1==s){d=d+1;p=p/10}else{d=d-2;p=p*100}}else{if(d+2==s){d=d+2;p=p/100}else{d--;p=p*10}}}else if(d==15){p=p*1000;d=12}}else{if(s=="-2"){var x=this.formatValue((v*100),0)}else if(d>=0&&v<10&&s=="-3"){p=v*Math.pow(10,3);d=-3}else if(d>=0)return this.formatValue(v,0);else{d=Math.abs(d);s=Math.abs(s);if(s>d){p=p/(Math.pow(10,d%3));d=d-(d%3)}else{var e=d-s;p=p/(Math.pow(10,e));d=d-e}d=0-d}}p+="";if(s=="-2"){var h=(x.unitPrefix=="")?Number(x.value+"").toFixed(4-(x.value+"").indexOf('.')):Number(x.value+"").toFixed(3-(x.value+"").indexOf('.'));return{value:Number(h),unitPrefix:(x.unitPrefix)+b[-2]}}p=Number(p).toFixed(4-p.indexOf('.'));return{value:Number(p),unitPrefix:b[d]}},abortPendingODataCalls:function(d){try{if(d){d.abort()}}catch(e){this.logError(e)}}}})(window,jQuery);sap.ushell.components.tiles.indicatorTileUtils.cache=(function(){var B={};var K={};return{getEvaluationById:function(k){return this.getEvaluationByChipId(k)},getEvaluationByChipId:function(k){if(B[k]){return B[k]}return null},setEvaluationById:function(k,d){B[k]=d},getKpivalueById:function(k){if(K[k])return K[k];return null},setKpivalueById:function(k,d){K[k]=d}}})()};if(!jQuery.sap.isDeclared('sap.ushell.components.tiles.indicatorcomparison.ComparisonTile.view')){jQuery.sap.declare('sap.ushell.components.tiles.indicatorcomparison.ComparisonTile.view');(function(){"use strict";sap.ui.getCore().loadLibrary("sap.suite.ui.commons");sap.ui.jsview("tiles.indicatorcomparison.ComparisonTile",{getControllerName:function(){return"tiles.indicatorcomparison.ComparisonTile"},createContent:function(c){this.setHeight('100%');this.setWidth('100%');var v=this;v.tileData;v.oGenericTileData={};v.oNumericContent=new sap.suite.ui.commons.NumericContent({value:"{/value}",scale:"{/scale}",unit:"{/unit}",indicator:"{/indicator}",size:"{/size}",formatterValue:"{/isFormatterValue}",truncateValueTo:"{/truncateValueTo}",valueColor:"{/valueColor}"});v.oNumericTile=new sap.suite.ui.commons.TileContent({unit:"{/unit}",size:"{/size}",footer:"{/footerNum}",content:v.oNumericContent,});v.oCmprsDataTmpl=new sap.suite.ui.commons.ComparisonData({title:"{title}",value:"{value}",color:"{color}",displayValue:"{displayValue}"});v.oCmprsChrtTmpl=new sap.suite.ui.commons.ComparisonChart({size:"{/size}",scale:"{/scale}",data:{template:v.oCmprsDataTmpl,path:"/data"},});v.oComparisonTile=new sap.suite.ui.commons.TileContent({unit:"{/unit}",size:"{/size}",footer:"{/footerComp}",content:v.oCmprsChrtTmpl,});v.oGenericTile=new sap.suite.ui.commons.GenericTile({subheader:"{/subheader}",frameType:"{/frameType}",size:"{/size}",header:"{/header}",tileContent:[v.oComparisonTile]});v.oGenericTileModel=new sap.ui.model.json.JSONModel();v.oGenericTileModel.setData(v.oGenericTileData);v.oGenericTile.setModel(v.oGenericTileModel);return v.oGenericTile}})}())};if(!jQuery.sap.isDeclared('sap.ushell.components.tiles.indicatorcontribution.ContributionTile.view')){jQuery.sap.declare('sap.ushell.components.tiles.indicatorcontribution.ContributionTile.view');(function(){"use strict";jQuery.sap.require('sap.ca.ui.model.format.NumberFormat');sap.ui.getCore().loadLibrary("sap.suite.ui.commons");sap.ui.jsview("tiles.indicatorcontribution.ContributionTile",{getControllerName:function(){return"tiles.indicatorcontribution.ContributionTile"},createContent:function(c){this.setHeight('100%');this.setWidth('100%');var v=this;v.tileData;v.oGenericTileData={};v.oNumericContent=new sap.suite.ui.commons.NumericContent({value:"{/value}",scale:"{/scale}",unit:"{/unit}",indicator:"{/indicator}",size:"{/size}",formatterValue:"{/isFormatterValue}",truncateValueTo:"{/truncateValueTo}",valueColor:"{/valueColor}"});v.oNumericTile=new sap.suite.ui.commons.TileContent({unit:"{/unit}",size:"{/size}",footer:"{/footerNum}",content:v.oNumericContent,});v.oCmprsDataTmpl=new sap.suite.ui.commons.ComparisonData({title:"{title}",value:"{value}",color:"{color}",displayValue:"{displayValue}"});v.oCmprsChrtTmpl=new sap.suite.ui.commons.ComparisonChart({size:"{/size}",scale:"{/scale}",data:{template:v.oCmprsDataTmpl,path:"/data"},});v.oComparisonTile=new sap.suite.ui.commons.TileContent({unit:"{/unit}",size:"{/size}",footer:"{/footerComp}",content:v.oCmprsChrtTmpl,});v.oGenericTile=new sap.suite.ui.commons.GenericTile({subheader:"{/subheader}",frameType:"{/frameType}",size:"{/size}",header:"{/header}",tileContent:[v.oComparisonTile]});v.oGenericTileModel=new sap.ui.model.json.JSONModel();v.oGenericTileModel.setData(v.oGenericTileData);v.oGenericTile.setModel(v.oGenericTileModel);return v.oGenericTile}})}())};if(!jQuery.sap.isDeclared('sap.ushell.components.tiles.indicatordeviation.DeviationTile.view')){jQuery.sap.declare('sap.ushell.components.tiles.indicatordeviation.DeviationTile.view');(function(){"use strict";jQuery.sap.require('sap.ca.ui.model.format.NumberFormat');sap.ui.getCore().loadLibrary("sap.suite.ui.commons");sap.ui.jsview("tiles.indicatordeviation.DeviationTile",{getControllerName:function(){return"tiles.indicatordeviation.DeviationTile"},createContent:function(c){this.setHeight('100%');this.setWidth('100%');var p=this.getViewData().chip.preview;var h="Lorem ipsum";var s="Lorem ipsum";if(p&&p.getTitle()){h=p.getTitle();s=p.getDescription()}var d={subheader:s,header:h,footerNum:"",footerComp:"",frameType:"OneByOne",state:sap.suite.ui.commons.LoadState.Loading,scale:"",};var b=new sap.suite.ui.commons.BulletChartData({value:"{value}",color:"{color}"});this.oBCTmpl=new sap.suite.ui.commons.BulletChart({size:sap.suite.ui.commons.InfoTileSize.Auto,scale:"{/scale}",actual:{value:"{/actual/value}",color:"{/actual/color}"},targetValue:"{/targetValue}",actualValueLabel:"{/actualValueLabel}",targetValueLabel:"{/targetValueLabel}",thresholds:{template:b,path:"/thresholds"},state:"{/state}",showActualValue:"{/showActualValue}",showTargetValue:"{/showTargetValue}"});var n=new sap.suite.ui.commons.TileContent({unit:"{/unit}",size:"{/size}",footer:"{/footerNum}",content:this.oBCTmpl,});this.oGenericTile=new sap.suite.ui.commons.GenericTile({subheader:"{/subheader}",frameType:"{/frameType}",size:"{/size}",header:"{/header}",tileContent:[n]});var g=new sap.ui.model.json.JSONModel();g.setData(d);this.oGenericTile.setModel(g);return this.oGenericTile}})}())};if(!jQuery.sap.isDeclared('sap.ushell.components.tiles.indicatornumeric.NumericTile.view')){jQuery.sap.declare('sap.ushell.components.tiles.indicatornumeric.NumericTile.view');(function(){"use strict";jQuery.sap.require('sap.ca.ui.model.format.NumberFormat');sap.ui.getCore().loadLibrary("sap.suite.ui.commons");sap.ui.jsview("tiles.indicatornumeric.NumericTile",{getControllerName:function(){return"tiles.indicatornumeric.NumericTile"},createContent:function(c){var p=this.getViewData().chip.preview;var h="Lorem ipsum";var s="Lorem ipsum";if(p&&p.getTitle()){h=p.getTitle();s=p.getDescription()}var g={subheader:s,header:h,footerNum:"",footerComp:"",scale:"",unit:"",value:"",size:"Auto",frameType:"OneByOne",state:sap.suite.ui.commons.LoadState.Loading,valueColor:sap.suite.ui.commons.InfoTileValueColor.Neutral,indicator:sap.suite.ui.commons.DeviationIndicator.None,title:"",footer:"",description:""};this.oNVConfContS=new sap.suite.ui.commons.NumericContent({value:"{/value}",scale:"{/scale}",unit:"{/unit}",indicator:"{/indicator}",valueColor:"{/valueColor}",size:"{/size}",formatterValue:true,truncateValueTo:6,nullifyValue:false});var n=new sap.suite.ui.commons.TileContent({unit:"{/unit}",size:"{/size}",footer:"{/footerNum}",content:this.oNVConfContS,});this.oGenericTile=new sap.suite.ui.commons.GenericTile({subheader:"{/subheader}",frameType:"{/frameType}",size:"{/size}",header:"{/header}",tileContent:[n]});var G=new sap.ui.model.json.JSONModel();G.setData(g);this.oGenericTile.setModel(G);return this.oGenericTile}})}())};if(!jQuery.sap.isDeclared('sap.ushell.components.tiles.utils')){
// Copyright (c) 2013 SAP AG, All Rights Reserved
this.sap=this.sap||{};(function(){"use strict";jQuery.sap.declare("sap.ushell.components.tiles.utils");sap=sap||{};sap.ushell=sap.ushell||{};sap.ushell.components=sap.ushell.components||{};sap.ushell.components.tiles=sap.ushell.components.tiles||{};sap.ushell.components.tiles.utils=sap.ushell.components.tiles.utils||{};if(sap.ushell.components.tiles.utils.getConfiguration){return}var t;function s(q){var n=q.replace(/\+/g,' ').split("&"),p,i,r=[];for(i=0;i<n.length;i+=1){p=n[i].split("=");r.push({name:decodeURIComponent(p.shift()),value:decodeURIComponent(p.join("="))})}return r}sap.ushell.components.tiles.utils.isInitial=function(T){return T==="App Launcher  Static"||T==="App Launcher  Dynamic"||T==="Target Mapping"};sap.ushell.components.tiles.utils.getResourceBundleModel=function(){jQuery.sap.require("sap.ushell.resources");return sap.ushell.resources.i18nModel};sap.ushell.components.tiles.utils.getConfiguration=function(T,A,e){var r,c=T.configuration.getParameterValueAsString('tileConfiguration'),C=JSON.parse(c||"{}"),b=sap.ushell.components.tiles.utils.getTranslatedTitle(T),S=sap.ushell.components.tiles.utils.getTranslatedSubtitle(T,C),i=sap.ushell.components.tiles.utils.getTranslatedProperty(T,C,'display_info_text'),k=sap.ushell.components.tiles.utils.getTranslatedProperty(T,C,'display_search_keywords');if(A){r=sap.ushell.components.tiles.utils.getResourceBundleModel().getResourceBundle();if(e&&T.bag){var o=T.bag.getOriginalLanguage();var u=sap.ui.getCore().getConfiguration().getLanguage();C.isLocaleSuitable=o===""||o.toLowerCase()===u.toLowerCase();C.orgLocale=o;C.userLocale=u}}C.display_icon_url=C.display_icon_url||"";C.display_info_text=i||C.display_info_text||(A&&!e?"["+r.getText("configuration.display_info_text")+"]":"");C.navigation_semantic_object=C.navigation_semantic_object||"";C.navigation_semantic_action=C.navigation_semantic_action||"";C.navigation_semantic_parameters=C.navigation_semantic_parameters||"";C.display_number_unit=C.display_number_unit||"";C.display_number_factor=C.display_number_factor||"";C.service_refresh_interval=C.service_refresh_interval||0;C.service_url=C.service_url||"";C.navigation_target_url=C.navigation_target_url||"";if(A&&sap.ushell.components.tiles.utils.isInitial(b)){C.display_title_text=e?"":"["+r.getText("configuration.display_title_text")+"]"}else{C.display_title_text=b||C.display_title_text||""}C.display_subtitle_text=S||C.display_subtitle_text||(A&&!e?"["+r.getText("configuration.display_subtitle_text")+"]":"");C.navigation_use_semantic_object=(C.navigation_use_semantic_object===false?false:true);C.display_search_keywords=k||C.display_search_keywords||"";if(A){C.display_number_value=C.display_number_value||1234}C.form_factors=C.form_factors?C.form_factors:this.getDefaultFormFactors();C.desktopChecked=C.form_factors.manual.desktop;C.tabletChecked=C.form_factors.manual.tablet;C.phoneChecked=C.form_factors.manual.phone;C.manualFormFactor=!(C.form_factors.appDefault);C.appFormFactor=C.form_factors.appDefault;C.formFactorConfigDefault=C.form_factors.defaultParam?true:false;C.rows=(C.mapping_signature&&C.mapping_signature!=="*=*")?this.getMappingSignatureTableData(C.mapping_signature):[this.getEmptyRowObj()];C.isUnknownAllowed=(C.mapping_signature!==undefined)?this.getAllowUnknownParametersValue(C.mapping_signature):true;return C};sap.ushell.components.tiles.utils.getEmptyRowObj=function(){return{name:"",mandatory:false,value:"",isRegularExpression:false,defaultValue:"",valEnabled:false,defValEnabled:true}};sap.ushell.components.tiles.utils.getDefaultFormFactors=function(){return{"appDefault":false,"manual":{"desktop":true,"tablet":true,"phone":true},"defaultParam":true}};sap.ushell.components.tiles.utils.buildFormFactorsObject=function(m){return{"appDefault":m.getProperty("/config/appFormFactor"),"manual":{"desktop":m.getProperty("/config/desktopChecked"),"tablet":m.getProperty("/config/tabletChecked"),"phone":m.getProperty("/config/phoneChecked")}}};sap.ushell.components.tiles.utils.tableHasDuplicateParameterNames=function(T){var p={};for(var i=0;i<T.length;i++){var b=T[i].name;if(b!==""){if(p[b]){return true}else{p[b]=true}}}return false};sap.ushell.components.tiles.utils.getMappingSignatureString=function(b,c){var m="";for(var i=0;i<b.length;i++){if(b[i].name){m+=(g(b[i])+"&")}}return c?m+"*=*":m.substring(0,m.length-1)};var g=function(b){var p="";if(b.mandatory){if(b.isRegularExpression){p="{"+b.name+"="+encodeURIComponent(b.value)+"}"}else{p=b.name+"="+encodeURIComponent(b.value)}}else{p="["+b.name+"="+encodeURIComponent(b.defaultValue)+"]"}return p};sap.ushell.components.tiles.utils.getMappingSignatureTableData=function(m){var p=[];var b=m.split("&");for(var i=0;i<b.length;i++){var c=b[i];if(c!=="*=*"){p.push(a(b[i]))}}return p};var a=function(p){var b={};if(p.charAt(0)==="["){b.mandatory=false;b.isRegularExpression=false;b.value="";p=p.substring(1,p.length-1);b.name=p.substring(0,p.indexOf("="));b.defaultValue=decodeURIComponent(p.substring(p.indexOf("=")+1))}else{b.mandatory=true;b.defaultValue="";if(p.charAt(0)==="{"){b.isRegularExpression=true;p=p.substring(1,p.length-1)}else{b.isRegularExpression=false}b.name=p.substring(0,p.indexOf("="));b.value=decodeURIComponent(p.substring(p.indexOf("=")+1))}b.valEnabled=b.mandatory;b.defValEnabled=!b.mandatory;return b};sap.ushell.components.tiles.utils.getAllowUnknownParametersValue=function(m){if(m&&(m.substring(m.length-3,m.length)==="*=*")){return true}else{return false}};sap.ushell.components.tiles.utils.getTranslatedTitle=function(T){if(T.bag){var b=T.bag.getBag('tileProperties');if(b.getTextNames().indexOf("display_title_text")>=0){return b.getText('display_title_text')}}if(T.title){return T.title.getTitle()}if(T.preview){return T.preview.getTitle()}return""};sap.ushell.components.tiles.utils.getTranslatedSubtitle=function(T,c){if(T.bag){var b=T.bag.getBag('tileProperties');if(b.getTextNames().indexOf("display_subtitle_text")>=0){return b.getText('display_subtitle_text')}}if(T.preview&&T.preview.getDescription&&T.preview.getDescription()){return T.preview.getDescription()}return c['display_subtitle_text']};sap.ushell.components.tiles.utils.getTranslatedProperty=function(T,o,p){if(T.bag){var b=T.bag.getBag('tileProperties');if(b.getTextNames().indexOf(p)>=0){return b.getText(p)}}return o[p]};sap.ushell.components.tiles.utils.getActionConfiguration=function(c,A){var C=JSON.parse(c||"{}"),r;if(A){r=sap.ushell.components.tiles.utils.getResourceBundleModel().getResourceBundle()}C.semantic_object=C.semantic_object||(A?"["+r.getText("configuration.semantic_object")+"]":"");C.semantic_action=C.semantic_action||(A?"["+r.getText("configuration.semantic_action")+"]":"");C.navigation_provider=C.navigation_provider||"";C.navigation_provider_role=C.navigation_provider_role||"";C.navigation_provider_instance=C.navigation_provider_instance||"";C.target_application_id=C.target_application_id||"";C.target_application_alias=C.target_application_alias||"";C.display_info_text=C.display_info_text||"";return C};sap.ushell.components.tiles.utils.getConfigurationUi=function(v,V){var o=v.getViewData(),T=o.chip,c,S,A;var C=sap.ushell.components.tiles.utils.getConfiguration(T,true,true);var b=new sap.ui.model.json.JSONModel({config:C,tileModel:v.getModel()});c=new sap.ui.view({type:sap.ui.core.mvc.ViewType.XML,viewData:o,viewName:V});c.setModel(b);S=c.byId("navigation_semantic_objectInput")||c.byId("semantic_objectInput");if(S){S.getModel().setProperty("/enabled",C.navigation_use_semantic_object);S.getModel().setProperty("/value",C.semantic_object||C.navigation_semantic_object)}A=c.byId("typeLpd_cust");if(A){if(v.getModel().getProperty('/config/navigation_provider')=="LPD"||v.getModel().getProperty('/config/navigation_provider')==''){c.byId("typeLpd_cust").setSelected(true);c.byId("typeSapui5").setSelected(false);sap.ushell.components.tiles.utils.displayLpdCustApplicationTypeFields(c)}else if(v.getModel().getProperty('/config/navigation_provider')=="SAPUI5"){c.byId("typeLpd_cust").setSelected(false);c.byId("typeSapui5").setSelected(true);sap.ushell.components.tiles.utils.displaySapui5ApplicationTypeFields(c)}}return c};sap.ushell.components.tiles.utils.getDataToDisplay=function(c,d){var b=0,i,n,C,e,D={display_icon_url:d.icon||c.display_icon_url||"",display_title_text:d.title||c.display_title_text||"",display_number_value:!isNaN(d.number)?d.number:"...",display_number_unit:d.numberUnit||c.display_number_unit||"",display_info_text:d.info||c.display_info_text||"",display_info_state:d.infoState||"Neutral",display_subtitle_text:d.subtitle||c.display_subtitle_text||"",display_state_arrow:d.stateArrow||"None",display_number_state:d.numberState||"Neutral",display_number_digits:d.numberDigits||0,display_number_factor:d.numberFactor||"",actions:d.actions||c.actions,display_search_keyword:d.keywords||c.display_search_keyword||"",targetParams:[]};if(d.infoStatus){D.display_info_state=d.infoStatus}if(d.targetParams){D.targetParams.push(d.targetParams)}if(d.results){for(i=0,n=d.results.length;i<n;i=i+1){C=d.results[i].number||0;if(typeof C==="string"){C=parseInt(C,10)}b=b+C;e=d.results[i].targetParams;if(e){D.targetParams.push(e)}}D.display_number_value=b}return D};sap.ushell.components.tiles.utils.getSemanticNavigationUrl=function(c){var u="#"+jQuery.trim(c.navigation_semantic_object);u+="-"+jQuery.trim(c.navigation_semantic_action);if(c.navigation_semantic_parameters&&jQuery.trim(c.navigation_semantic_parameters).length>0){u+="?"+jQuery.trim(c.navigation_semantic_parameters)}return u};sap.ushell.components.tiles.utils.addParamsToUrl=function(u,d){var p="",U=u.indexOf("?")!==-1,T=d.targetParams,i;if(T&&T.length>0){for(i=0;i<T.length;i=i+1){p+=T[i];if(i<T.length-1){p+="&"}}}if(p.length>0){if(!U){u+="?"}else{u+="&"}u+=p}return u};sap.ushell.components.tiles.utils.aData=[];sap.ushell.components.tiles.utils.objectSelectDoSearch=function(e){var f=[],v=e.getParameter("value"),i,b,c;if(v!==undefined){i=e.getParameter("itemsBinding");b=new sap.ui.model.Filter("name",sap.ui.model.FilterOperator.Contains,v);c=new sap.ui.model.Filter("obj",sap.ui.model.FilterOperator.Contains,v);f.push(c);f.push(b);i.filter(new sap.ui.model.Filter(f,false))}};sap.ushell.components.tiles.utils.objectSelectUpdateDialog=function(S,v){var f=[],i=S.getBinding("items"),b;if(v!==undefined){b=new sap.ui.model.Filter("name",sap.ui.model.FilterOperator.Contains,v);f.push(b);i.filter(f)}};sap.ushell.components.tiles.utils.sSelectedColor=(jQuery(".sapMStdTileIconDiv").css('color')||"#007cc0").split(" ").join("");sap.ushell.components.tiles.utils.sDeselectedColor=(jQuery(".sapMLabel:not(.sapFioriDropZoneText )").css('color')||"#666666").split(" ").join("");sap.ushell.components.tiles.utils.iconSelect=function(i,S){i.setColor(S?sap.ushell.components.tiles.utils.sSelectedColor:sap.ushell.components.tiles.utils.sDeselectedColor);i.setActiveColor(S?sap.ushell.components.tiles.utils.sDeselectedColor:sap.ushell.components.tiles.utils.sSelectedColor)};sap.ushell.components.tiles.utils.onSelectIcon=function(c,C){var m=c.getView().getModel(),S=m.getProperty("/config/selected_icon");if(S){sap.ushell.components.tiles.utils.iconSelect(S,false)}S=C.getSource();sap.ushell.components.tiles.utils.iconSelect(S,true);m.setProperty("/config/ok.enabled",true);m.setProperty("/config/selected_icon",S);c.byId("selectIconDialog").setTitle(S.getSrc())};sap.ushell.components.tiles.utils.onSelectIconClose=function(v){v.byId("selectIconDialog").close()};sap.ushell.components.tiles.utils.onSelectIconOk=function(v){var S=v.getModel().getProperty("/config/selected_icon");if(S){v.getModel().setProperty("/config/display_icon_url",S.getSrc())}sap.ushell.components.tiles.utils.onSelectIconClose(v)};sap.ushell.components.tiles.utils.iconSelectOnValueHelpRequest=function(c,e){var m=c.getView().getModel(),r=c.getView().byId("icons"),C=sap.ui.core.IconPool.getIconCollectionNames(),b=r.getContent(),d=c.getView().byId("selectIconDialog"),I=m.getProperty("/config/display_icon_url"),f,i,j,u,B=false;if(b.length===0){C.sort();C=jQuery.grep(C,function(v){if(v==="BusinessSuiteInAppSymbols"){B=true;return false}return true});if(B){C.push("BusinessSuiteInAppSymbols")}for(i=0;i<C.length;i+=1){f=sap.ui.core.IconPool.getIconNames(C[i]);f.sort();for(j=0;j<f.length;j+=1){u=sap.ui.core.IconPool.getIconURI(f[j],C[i]);r.addContent(new sap.ui.core.Icon({height:"38px",press:sap.ushell.components.tiles.utils.onSelectIcon.bind(null,c),size:"2rem",src:u,tooltip:u,width:"38px"}))}}b=r.getContent()}m.setProperty("/config/ok.enabled",false);d.bindProperty("title",{model:"i18n",path:"configuration.select_icon"});for(i=0;i<b.length;i+=1){if(b[i].getSrc()===I){m.setProperty("/config/selected_icon",b[i]);sap.ushell.components.tiles.utils.iconSelect(b[i],true);m.setProperty("/config/ok.enabled",true);d.setTitle(I)}else{sap.ushell.components.tiles.utils.iconSelect(b[i],false)}}d.open()};sap.ushell.components.tiles.utils.objectSelectOnValueHelpRequest=function(c,e){var v=c.getView(),T=sap.ushell.components.tiles.utils.getResourceBundleModel().getResourceBundle().getText("configuration.semantic_object"),S=v.byId("semantic_objectInput")||v.byId("navigation_semantic_objectInput"),V=S.getValue(),o=new sap.ui.model.json.JSONModel(),b=new sap.m.SelectDialog("semantic_object_select_dialog",{title:T,search:sap.ushell.components.tiles.utils.objectSelectDoSearch,liveChange:sap.ushell.components.tiles.utils.objectSelectDoSearch}),i=new sap.m.StandardListItem({title:"{obj}"});b.open(V);o.setData(c.aDefaultObjects.concat(sap.ushell.components.tiles.utils.aData));b.bindAggregation("items","/",i);b.setModel(o);sap.ushell.components.tiles.utils.objectSelectUpdateDialog(b,V);b.attachCancel(function(d){S.setValue(V);S.fireChange();b.destroy();b=null});b.attachConfirm(function(d){var f=d.getParameter("selectedItem");if(f){S.setValue(f.getTitle());S.fireChange()}b.destroy();b=null})};sap.ushell.components.tiles.utils.checkInput=function(c,C){var T=sap.ushell.components.tiles.utils.getResourceBundleModel().getResourceBundle(),i=c.byId("iconInput"),S=c.byId("navigation_semantic_objectInput")||c.byId("semantic_objectInput"),o=c.byId("navigation_semantic_actionInput")||c.byId("semantic_actionInput"),n=jQuery.trim(C.getParameter("newValue")),I,f,v=sap.ui.core.ValueState.None,V=null,j;switch(C.getSource()){case i:if(n.substring(0,11)!=="sap-icon://"){v=sap.ui.core.ValueState.Error;V=T.getText("configuration.display_icon_url.warning")}break;case S:I=S.getModel().getProperty("/items");f=false;for(j=0;j<I.length;j=j+1){if(I[j].obj===n){f=true;break}}if(/[\-#&? ]/.test(n)){v=sap.ui.core.ValueState.Error;V=T.getText("configuration.semantic_object.error_invalid_chars")}else if(!f){v=sap.ui.core.ValueState.Warning;V=T.getText("configuration.semantic_object.warning")}else if(n==""){v=sap.ui.core.ValueState.Error}if(o.getValue()==""){o.setValueState(sap.ui.core.ValueState.Error)}break;case o:if(/[\-#&? ]/.test(n)){v=sap.ui.core.ValueState.Error;V=T.getText("configuration.semantic_action.error_invalid_chars")}else if(n==""){v=sap.ui.core.ValueState.Error}if(S.getValue()==""){S.setValueState(sap.ui.core.ValueState.Error)}break;default:break}if(v){C.getSource().setValueState(v);if(V!==null){C.getSource().setValueStateText(V||"")}}};sap.ushell.components.tiles.utils.checkInputOnSaveConfig=function(c){var i=c.byId("iconInput"),S=c.byId("navigation_semantic_objectInput"),o=c.byId("navigation_semantic_actionInput"),u=c.byId("useLpdCheckbox"),T=sap.ushell.components.tiles.utils.getResourceBundleModel().getResourceBundle(),I=S.getModel().getProperty("/items"),f=false,r=false,j;if(i.getValue().substring(0,11)!=="sap-icon://"){i.setValueState(sap.ui.core.ValueState.Error);i.setValueStateText(T.getText("configuration.display_icon_url.warning"));r=true}for(j=0;j<I.length;j=j+1){if(I[j].obj===S.getValue()){f=true;break}}if(/[\-#&? ]/.test(S.getValue())){S.setValueState(sap.ui.core.ValueState.Error);S.setValueStateText(T.getText("configuration.semantic_object.error_invalid_chars"));r=true}else if(!f){S.setValueState(sap.ui.core.ValueState.Error);S.setValueStateText(T.getText("configuration.semantic_object.warning"));r=true}else if(u.getSelected()&&S.getValue()==""){S.setValueState(sap.ui.core.ValueState.Error);r=true}if(/[\-#&? ]/.test(o.getValue())){o.setValueState(sap.ui.core.ValueState.Error);o.setValueStateText(T.getText("configuration.semantic_action.error_invalid_chars"));r=true}else if(u.getSelected()&&o.getValue()==""){o.setValueState(sap.ui.core.ValueState.Error);r=true}return r};sap.ushell.components.tiles.utils.checkTMInput=function(c,C){var T=sap.ushell.components.tiles.utils.getResourceBundleModel().getResourceBundle(),S=c.byId("semantic_objectInput"),o=c.byId("semantic_actionInput"),b=c.byId("target_application_descriptionInput"),d=c.byId("target_application_urlInput"),e=c.byId("target_application_componentInput"),n=c.byId("navigation_provider_roleInput"),N=c.byId("navigation_provider_instanceInput"),f=c.byId("target_application_aliasInput"),h=c.byId("target_application_idInput"),i=c.byId("typeLpd_cust"),k=c.byId("typeSapui5"),l=c.byId("additionalInfo"),m=jQuery.trim(C.getParameter("newValue")),I,F,v=sap.ui.core.ValueState.None,V=null,j;switch(C.getSource()){case S:I=S.getModel().getProperty("/items");F=false;for(j=0;j<I.length;j=j+1){if(I[j].obj===m){F=true;break}}if(/[\-#&? ]/.test(m)){v=sap.ui.core.ValueState.Error;V=T.getText("configuration.semantic_object.error_invalid_chars")}else if(!F){v=sap.ui.core.ValueState.Warning;V=T.getText("configuration.semantic_object.warning")}if(o.getValue()==""){o.setValueState(sap.ui.core.ValueState.Error)}break;case o:if(/[\-#&? ]/.test(m)){v=sap.ui.core.ValueState.Error;V=T.getText("configuration.semantic_action.error_invalid_chars")}else if(m==""){v=sap.ui.core.ValueState.Error}break;case b:if(m==""){v=sap.ui.core.ValueState.Error}else if(!(/^[-/\w]+$/.test(m))){v=sap.ui.core.ValueState.Error;V=T.getText("configuration.target_application.description.error_invalid_chars")}if(k.getSelected()&&d.getValue()==""){d.setValueState(sap.ui.core.ValueState.Error)}if(k.getSelected()&&e.getValue()==""){e.setValueState(sap.ui.core.ValueState.Error)}break;case d:if(m==""){v=sap.ui.core.ValueState.Error}if(k.getSelected()&&b.getValue()==""){b.setValueState(sap.ui.core.ValueState.Error)}if(k.getSelected()&&e.getValue()==""){e.setValueState(sap.ui.core.ValueState.Error)}break;case e:if(m==""){v=sap.ui.core.ValueState.Error}else if(m.substring(0,17)=="SAPUI5.Component="){v=sap.ui.core.ValueState.Error;V=T.getText("configuration.target_application.component.error_invalid_input")}else if(!(/^[-/\w]+$/.test(m))){v=sap.ui.core.ValueState.Error;V=T.getText("configuration.target_application.component.error_invalid_chars")}if(k.getSelected()&&d.getValue()==""){d.setValueState(sap.ui.core.ValueState.Error)}if(k.getSelected()&&b.getValue()==""){b.setValueState(sap.ui.core.ValueState.Error)}break;case n:if(m==""){v=sap.ui.core.ValueState.Error}if(i.getSelected()&&N.getValue()==""){N.setValueState(sap.ui.core.ValueState.Error)}if(i.getSelected()&&f.getValue()==""&&h.getValue()==""){var p=T.getText("configuration.target_application.alias_id.warning");f.setValueState(sap.ui.core.ValueState.Error);f.setValueStateText(p);h.setValueState(sap.ui.core.ValueState.Error);h.setValueStateText(p)}break;case N:if(m==""){v=sap.ui.core.ValueState.Error}if(i.getSelected()&&n.getValue()==""){n.setValueState(sap.ui.core.ValueState.Error)}if(i.getSelected()&&f.getValue()==""&&h.getValue()==""){var p=T.getText("configuration.target_application.alias_id.warning");f.setValueState(sap.ui.core.ValueState.Error);f.setValueStateText(p);h.setValueState(sap.ui.core.ValueState.Error);h.setValueStateText(p)}break;case f:if(m==""&&h.getValue()==""){v=sap.ui.core.ValueState.Error;V=T.getText("configuration.target_application.alias_id.warning")}else if(m!=""&&!(/^[-/\w]+$/.test(m))){v=sap.ui.core.ValueState.Error;V=T.getText("configuration.target_application.alias.error_invalid_chars")}else{h.setValueState(sap.ui.core.ValueState.None)}if(i.getSelected()&&N.getValue()==""){N.setValueState(sap.ui.core.ValueState.Error)}if(i.getSelected()&&n.getValue()==""){n.setValueState(sap.ui.core.ValueState.Error)}break;case h:if(m==""&&f.getValue()==""){v=sap.ui.core.ValueState.Error;V=T.getText("configuration.target_application.alias_id.warning")}else{f.setValueState(sap.ui.core.ValueState.None)}if(i.getSelected()&&N.getValue()==""){N.setValueState(sap.ui.core.ValueState.Error)}if(i.getSelected()&&n.getValue()==""){n.setValueState(sap.ui.core.ValueState.Error)}break;case l:if(m!=""&&!(/^[-/\w]+$/.test(m))){v=sap.ui.core.ValueState.Error;V=T.getText("configuration.target_application.description.error_invalid_chars")}break;default:break}if(v){C.getSource().setValueState(v);if(V!==null){C.getSource().setValueStateText(V||"")}}};sap.ushell.components.tiles.utils.updateTooltipForDisabledProperties=function(c){var m=c.getModel();var i=m.getProperty("/config/isLocaleSuitable");if(!i){var r=sap.ushell.components.tiles.utils.getResourceBundleModel().getResourceBundle();var b=r.getText("edit_configuration.original_locale_not_fit_tooltip",[m.getProperty("/config/userLocale"),m.getProperty("/config/orgLocale")]);c.byId("titleInput").setTooltip(b);c.byId("subtitleInput").setTooltip(b);c.byId("keywordsInput").setTooltip(b);c.byId("infoInput").setTooltip(b)}};sap.ushell.components.tiles.utils.createSemanticObjectModel=function(c,S,d){var v=c.getView(),u="/sap/opu/odata/UI2/INTEROP/SemanticObjects",D=[{obj:"",name:""},{obj:"*",name:"*"}],b=(d||D).slice(0),o=new sap.ui.model.json.JSONModel();o.setSizeLimit(999999);o.setProperty("/value","");o.setProperty("/enabled",true);S.bindAggregation("suggestionItems","/items",new sap.ui.core.Item({text:"{obj}"}));S.setModel(o);if(sap.ushell.components.tiles.utils.aData.length>0){o.setData({items:b.concat(sap.ushell.components.tiles.utils.aData)},true);return}OData.read({requestUri:u,headers:{"Accept":"application/json"}},function(e,r){var I,T,i;for(i=0;i<e.results.length;i=i+1){I=e.results[i].id;T=e.results[i].text;sap.ushell.components.tiles.utils.aData.push({obj:I,name:T||I})}o.setData({items:b.concat(sap.ushell.components.tiles.utils.aData)},true)},function(e){var m=e&&e.message?e.message:e;if(e.response){m+=" - "+e.response.statusCode+" "+e.response.statusText}jQuery.sap.log.error("Could not fetch data: "+u+": "+m,null,(v.getViewName()||"sap.ushell.components.tiles.utils"))})};sap.ushell.components.tiles.utils.displayApplicationTypeFields=function(c){if(c.byId("typeLpd_cust").getSelected()){sap.ushell.components.tiles.utils.displayLpdCustApplicationTypeFields(c)}else{sap.ushell.components.tiles.utils.displaySapui5ApplicationTypeFields(c)}};sap.ushell.components.tiles.utils.displaySapui5ApplicationTypeFields=function(c){c.getModel().setProperty('/config/navigation_provider','SAPUI5');c.byId('navigation_provider_role').setVisible(false);c.byId('navigation_provider_roleInput').setVisible(false);c.byId('navigation_provider_instance').setVisible(false);c.byId('navigation_provider_instanceInput').setVisible(false);c.byId('target_application_alias').setVisible(false);c.byId('target_application_aliasInput').setVisible(false);c.byId('target_application_id').setVisible(false);c.byId('target_application_idInput').setVisible(false);c.byId('application_description').setVisible(true);c.byId('target_application_descriptionInput').setVisible(true);c.byId('application_url').setVisible(true);c.byId('target_application_urlInput').setVisible(true);c.byId('application_component').setVisible(true);c.byId('target_application_componentInput').setVisible(true)};sap.ushell.components.tiles.utils.displayLpdCustApplicationTypeFields=function(c){c.getModel().setProperty('/config/navigation_provider','LPD');c.byId('application_description').setVisible(false);c.byId('target_application_descriptionInput').setVisible(false);c.byId('application_url').setVisible(false);c.byId('target_application_urlInput').setVisible(false);c.byId('application_component').setVisible(false);c.byId('target_application_componentInput').setVisible(false);c.byId('navigation_provider_role').setVisible(true);c.byId('navigation_provider_roleInput').setVisible(true);c.byId('navigation_provider_instance').setVisible(true);c.byId('navigation_provider_instanceInput').setVisible(true);c.byId('target_application_alias').setVisible(true);c.byId('target_application_aliasInput').setVisible(true);c.byId('target_application_id').setVisible(true);c.byId('target_application_idInput').setVisible(true)}}())};if(!jQuery.sap.isDeclared('sap.ushell.functionBindPrototype')){(function(){"use strict";jQuery.sap.declare("sap.ushell.functionBindPrototype");if(!Function.prototype.bind){Function.prototype.bind=function(t){if(typeof this!=="function"){throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable")}var a=Array.prototype.slice.call(arguments,1),T=this,n=function(){},b=function(){return T.apply(this instanceof n&&t?this:t,a.concat(Array.prototype.slice.call(arguments)))};n.prototype=this.prototype;b.prototype=new n();return b}}}())};if(!jQuery.sap.isDeclared('sap.ushell.iconfonts')){(function(){"use strict";jQuery.sap.require('sap.ui.core.IconPool');jQuery.sap.declare("sap.ushell.iconfonts");sap.ushell.iconfonts={};sap.ushell.iconfonts.registerFiori2IconFont=function(){var l={fontFamily:"BusinessSuiteInAppSymbols",collectionName:"BusinessSuiteInAppSymbols",icons:[["icon-heart","E000"],["icon-quarter","E001"],["icon-year","E002"],["icon-equalizer","E003"],["icon-component","E004"],["icon-component-private","E005"],["icon-raw-material","E006"],["icon-sms","E007"],["icon-add-note","E008"],["icon-change-time-horizon","E009"],["icon-table-chart-customization","E00a"],["icon-delegated-important-task","E00b"],["icon-forklift","E00c"],["icon-coins","E00d"],["icon-filter-menu","E00e"],["icon-target-to-date","E00f"],["icon-program","E010"],["icon-phase","E011"],["icon-checklist","E012"],["icon-mirrored-task","E013"],["icon-sub-project","E014"],["icon-checklist-item","E015"],["icon-adhoc-analysis","E016"],["icon-change-analysis","E017"],["icon-review-demands","E018"],["icon-project-definition","E019"],["icon-data-access","E01a"],["icon-define-shortage","E01b"],["icon-review-supplies","E01c"],["icon-change-log","E01d"],["icon-priority-1","E01e"],["icon-priority-2","E01f"],["icon-jam","E020"],["icon-milestone","E021"],["icon-bulleting-with-numbers","E022"],["icon-decrease-indent","E023"],["icon-increase-indent","E024"],["icon-bold","E025"],["icon-italic","E026"],["icon-strike-through","E027"],["icon-underline","E028"],["icon-save-as","E029"],["icon-segmentation","E02A"],["icon-context-menu","E02B"],["icon-snapshot","E02C"],["icon-substraction-b-a","E02D"],["icon-substraction-a-b","E02E"],["icon-intersection","E02F"],["icon-union","E030"],["icon-top","E031"],["icon-bottom","E032"],["icon-page-up","E033"],["icon-page-down","E034"],["icon-create-dashboard","E035"],["icon-excelsius-file","E036"],["icon-open-folder","E037"],["icon-neutral","E038"],["icon-split-segmentation","E039"],["icon-manage-budget","E03A"],["icon-blocked","E03B"],["icon-pipette","E03C"],["icon-top-recipe","E03D"],["icon-recipe","E03E"],["icon-ingredients","E03F"],["icon-multiple-charts","E040"],["icon-descending-bars","E041"],["icon-descending-stacked-bars","E042"],["icon-scatter-plot","E043"],["icon-spill","E044"],["icon-fire","E045"],["icon-stratification","E046"],["icon-relationship","E047"],["icon-margin-decomposition","E048"],["icon-control-group","E049"],["icon-bullet-chart","E04A"],["icon-responsible-area","E04B"],["icon-increase","E04C"],["icon-decrease","E04D"],["icon-current-stock","E04E"],["icon-expedite","E04F"],["icon-postpone","E050"],["icon-approved","E051"],["icon-partially-delivered","E052"],["icon-line-bar-chart","E053"],["icon-expand-all","E054"],["icon-submission","E055"],["icon-change-request","E056"],["icon-column-unselected","E057"],["icon-column-selected","E058"],["icon-row-unselected","E059"],["icon-row-selected","E05A"],["icon-stock-requirements","E05B"],["icon-gender-male-and-female","E05C"],["icon-icon-marital-status","E05D"],["icon-birthday","E05E"],["icon-classification","E05F"],["icon-marked-for-deletion","E060"],["icon-bullet-chart","E061"],["icon-remove-filter","E062"],["icon-bank-account","E063"],["icon-savings-account","E064"],["icon-debit-card","E065"],["icon-vip-customer","E066"],["icon-undesirable-customer","E067"],["icon-answered-change-request","E068"],["icon-collected-change-request","E069"],["icon-draw-freehand","E06A"],["icon-draw-circle","E06B"],["icon-completed","E06C"],["icon-answered","E06D"],["icon-traffic-cone","E06E"],["icon-traffic-lights","E06F"],["icon-container","E070"],["icon-container-loading","E071"],["icon-traffic-jam","E072"],["icon-products","E073"],["icon-sidepanel","E074"],["icon-split-screen","E075"],["icon-truck-driver","E076"],["icon-keep-segment","E077"],["icon-exclude-segment","E078"],["icon-separate-segments","E079"],["icon-distribute-segments","E07A"],["icon-next-open-item","E07B"],["icon-where-used","E07C"]]},f={fontFamily:"SAP-Icons",collectionName:"Fiori2",icons:[["F0017","e05e"],["F0018","e0c3"],["F0019","e0c3"],["F0020","e0c3"],["F0021","e10d"],["F0366","e129"],["F0392","e04f"],["F0394","e044"],["F0395","e132"],["F0396","e064"],["F0397","e0a4"],["F0398","e0a4"],["F0399","e044"],["F0401","e08d"],["F0402","e13e"],["F0403","e13e"],["F0404","e033"],["F0405","e0b3"],["F0406","e043"],["F0407","e043"],["F0408","e043"],["F0409","e075"],["F0410","e007"],["F0411","e075"]]},F={fontFamily:"Fiori2",collectionName:"Fiori3",icons:[["F0246","E218"],["F0247","E219"],["F0250","E21C"],["F0251","E21D"],["F0263","E2A8"],["F0508","E2A9"],["F0509","E2AA"],["F0510","E2AB"],["F0533","E2AC"],["F0534","E2AD"],["F0535","E2AE"],["F0536","E2AF"],["F0537","E2B0"],["F0538","E2B1"],["Lumira001","E2B2"]]},a={fontFamily:"Fiori2",collectionName:"Fiori2",icons:[["F0002","E236"],["F0003","E202"],["F0004","E203"],["F0005","E204"],["F0006","E205"],["F0009","E206"],["F0010","E207"],["F0012","E208"],["F0014","E209"],["F0018","E200"],["F0019","E201"],["F0023","E20A"],["F0024","E20B"],["F0025","E20C"],["F0026","E20D"],["F0072","E23A"],["F0100","E23B"],["F0101","E23C"],["F0102","E23D"],["F0106","E20F"],["F0144","E210"],["F0190","E23E"],["F0194","E23F"],["F0210","E242"],["F0211","E243"],["F0212","E244"],["F0217","E211"],["F0220","E213"],["F0243","E215"],["F0244","E216"],["F0245","E217"],["F0246","E218"],["F0247","E219"],["F0250","E21C"],["F0251","E21D"],["F0248","E21A"],["F0249","E21B"],["F0252","E21E"],["F0257","E21F"],["F0281","E220"],["F0282","E221"],["F0283","E222"],["F0284","E223"],["F0292","E224"],["F0295","E225"],["F0296","E226"],["F0316","E227"],["F0317","E228"],["F0321","E229"],["F0339","E22A"],["F0340","E22B"],["F0341","E22C"],["F0342","E22D"],["F0365","E212"],["F0366","E22F"],["F0367","E230"],["F0368","E231"],["F0369","E235"],["F0370","E22E"],["F0372","E232"],["F0380","E233"],["F0381","E234"],["F0382","E246"],["F0390","E20E"],["F0412","E213"],["F0429","E2A6"],["F0xx1","E240"],["F0xx2","E241"],["F0013","E237"],["F0016","E238"],["F0028","E239"],["F0029","E283"],["F0030","E284"],["F0031","E285"],["F0032","E286"],["F0033","E287"],["F0034","E288"],["F0036","E289"],["F0038","E28A"],["F0039","E28B"],["F0041","E28C"],["F0044","E28D"],["F0293","E28E"],["F0294","E28F"],["F0297","E290"],["F0298","E291"],["F0299","E292"],["F0300","E293"],["F0301","E294"],["F0302","E295"],["F0303","E296"],["F0304","E297"],["F0305","E298"],["F0306","E299"],["F0323","E29A"],["F0324","E29B"],["F0326","E29C"],["F0327","E29D"],["F0328","E29E"],["F0329","E29F"],["F0331","E2A1"],["F0332","E2A2"],["F0343","E2A3"],["F0344","E2A4"],["F0345","E2A5"],["F0388","E2A7"],["F0391","E2A0"],["F0260","E2B4"],["FD10N","E2B5"],["FK10N","E2B6"],["FS10N","E2B7"],["FBL5N","E2B8"],["FBL1N","E2B9"],["FFS01","E2BA"],["FBL3N","E2BB"],["FCOA1","E2BC"]]},o={fontFamily:"Fiori2",collectionName:"Fiori4",icons:[["F0194","E2BD"],["F0260","E2B4"],["F0433","E21C"],["F0251","E2BE"],["F0499","E2BF"],["F0500","E2C0"],["F0501","E2C1"],["F0502","E2C2"],["F0503","E2C3"],["F0504","E2C4"],["F0507","E2C5"],["F0530","E2C6"],["F0531","E2C7"],["F0539","E2C8"],["F0544","E2C9"],["F0545","E2CA"],["F0547","E2CB"],["F0576","E2CC"],["F0578","E2CD"],["F0579","E2CE"],["F0580","E2CF"],["F0581","E2D0"],["F0582","E2D1"],["F0583","E2D2"],["F0584","E2D3"],["F0586","E2D4"],["F0587","E2D5"],["F0588","E2D6"],["F0589","E2D7"],["F0590","E2D8"],["F0591","E2D9"],["F0593","E2DA"],["F0594","E2DB"],["F0597","E2DC"],["F0603","E2DD"],["F0604","E2DE"],["F0605","E2DF"],["F0606","E2E0"],["F0607","E2E1"],["F0608","E2E2"],["F0609","E2E3"],["F0615","E2E4"],["F0616","E2E5"],["F0618","E2E6"],["F0617","E2E7"],["F0622","E2E8"],["F0623","E2E9"],["F0624","E2BC"],["F0625","E2EB"],["F0626","E2EC"],["F0627","E2ED"],["F0629","E2EE"],["F0630","E2EF"],["F0632","E2F0"],["F0633","E2F1"],["F0634","E2F2"],["F0635","E2F3"],["F0636","E2F4"],["F0638","E2F5"],["F0639","E2F6"],["F0643","E2F7"],["F0644","E2F8"],["F0645","E2F9"],["F0646","E2FA"],["F0648","E2FB"],["F0649","E2FC"],["F0650","E2FD"],["F0654","E2FE"],["F0655","E2FF"],["F0659","E300"],["F0660","E301"],["F0661","E302"],["F0665","E303"],["F0666","E304"],["F0667","E305"],["F0671","E306"],["F0672","E307"],["F0673","E308"],["F0675","E309"],["F0676","E30A"],["F0677","E30B"],["F0678","E30C"],["F0679","E30D"],["F0680","E30E"],["F0682","E30F"],["F0683","E310"],["F0684","E240"],["F0685","E312"],["F0686","E313"],["F0687","E314"],["F0690","E315"],["F0691","E316"],["F0692","E317"],["F0693","E318"],["F0694","E319"],["F0695","E31A"],["F0700","E31B"],["F0598","E31C"],["F0600","E38A"]]},b={fontFamily:"Fiori2",collectionName:"Fiori5",icons:[["F0263","E321"],["F0266","E322"],["F0834","E31D"],["F2001","E31E"],["F0839","E320"],["F0270","E323"],["F0273","E324"],["F0439","E325"],["F0443","E326"],["F0549","E327"],["F0550","E328"],["F0551","E329"],["F0577","E32A"],["F0585","E32B"],["F0637","E32C"],["F0668","E32D"],["F0669","E32E"],["F0670","E330"],["F0688","E331"],["F0689","E332"],["F0701","E333"],["F0702","E334"],["F0703","E335"],["F0706","E336"],["F0707","E337"],["F0708","E338"],["F0711","E339"],["F0712","E33A"],["F0731","E33B"],["F0732","E33C"],["F0733","E33D"],["F0735","E33E"],["F0736","E340"],["F0737","E341"],["F0742","E342"],["F0743","E343"],["F0744","E344"],["F0745","E345"],["F0746","E346"],["F0747","E347"],["F0748","E348"],["F0749","E349"],["F0750","E34A"],["F0751","E34B"],["F0755","E34C"],["F0756","E34D"],["F0757","E34E"],["F0758","E350"],["F0759","E351"],["F0760","E352"],["F0761","E353"],["F0763","E354"],["F0764","E355"],["F0765","E356"],["F0768","E357"],["F0770","E358"],["F0771","E359"],["F0772","E35A"],["F0774","E35B"],["F0776","E35C"],["F0777","E35D"],["F0778","E35E"],["F0788","E360"],["F0789","E361"],["F0790","E362"],["F0791","E363"],["F0792","E364"],["F0793","E365"],["F0794","E366"],["F0806","E367"],["F0807","E368"],["F0808","E369"],["F0809","E36A"],["F0810","E36B"],["F0811","E36C"],["F0812","E36D"],["F0813","E36E"],["F0814","E370"],["F0815","E371"],["F0816","E372"],["F0817","E373"],["F0818","E374"],["F0819","E375"],["F0820","E376"],["F0821","E377"],["F0822","E378"],["F0823","E379"],["F0824","E37A"],["F0825","E37B"],["F0826","E37C"],["F0827","E37D"],["F0828","E37E"],["F0829","E380"],["F0830","E381"],["F0831","E382"],["F0717","E383"],["F0718","E384"],["F0241","E385"],["F0246","E386"],["F0250","E387"],["F0248","E388"],["F0252","E389"],["F0600","E38A"],["F0674","E38B"],["F0247","E38E"],["F0251","E390"]]},c={fontFamily:"Fiori2",collectionName:"Fiori6",icons:[["F0795","E397"],["F0866","E3A0"],["F0865","E3A1"],["F0867","E3A2"],["F0868","E3A3"],["F0869","E3A4"],["F0870","E3A5"],["F0138","E3A6"],["F0752","E3A7"],["F0753","E3A8"],["F0773","E3A9"],["F0891","E3AA"],["F0892","E3AB"],["F1023","E3AC"]]},d={fontFamily:"FioriInAppIcons",collectionName:"FioriInAppIcons",icons:[["Hierarchal Tree","E700"],["Open","E701"],["Blocked","E702"],["Partially Blocked","E703"],["Open1","E704"],["Partially Adopted","E705"],["Due","E706"],["Overdue","E707"],["Missing Parts","E708"],["Fire","E709"],["Dangerous Chemicals","E70A"]]},e={fontFamily:"Fiori2",collectionName:"FioriNonNative",icons:[["FN0001","E392"],["FN0002","E398"],["FN0003","E399"],["FN0004","E39A"],["FN0005","E39B"],["FN0006","E39C"],["FN0007","E39D"],["FN0008","E39E"],["FN0009","E39F"]]};this.registerFonts(f,F,a,l,d,o,b,e,c)};sap.ushell.iconfonts.registerFonts=function(){var I,i,j;for(i=0;i<arguments.length;i=i+1){I=arguments[i];for(j=0;j<I.icons.length;j=j+1){sap.ui.core.IconPool.addIcon(I.icons[j][0],I.collectionName,I.fontFamily,I.icons[j][1],false,true)}}}}())};if(!jQuery.sap.isDeclared('sap.ushell.library')){
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5) (c) Copyright 2009-2013 SAP AG. All rights reserved
 */
jQuery.sap.declare("sap.ushell.library");jQuery.sap.require('sap.ui.core.Core');jQuery.sap.require('sap.ui.core.library');jQuery.sap.require('sap.ui.layout.library');jQuery.sap.require('sap.m.library');sap.ui.getCore().initLibrary({name:"sap.ushell",dependencies:["sap.ui.core","sap.ui.layout","sap.m"],types:["sap.ushell.ui.launchpad.DeleteAreaType","sap.ushell.ui.tile.State","sap.ushell.ui.tile.StateArrow"],interfaces:[],controls:["sap.ushell.components.factsheet.controls.PictureTile","sap.ushell.components.factsheet.controls.PictureViewer","sap.ushell.components.factsheet.controls.PictureViewerItem","sap.ushell.ui.footerbar.AboutButton","sap.ushell.ui.footerbar.AddBookmarkButton","sap.ushell.ui.footerbar.ContactSupportButton","sap.ushell.ui.footerbar.HideGroupsButton","sap.ushell.ui.footerbar.JamDiscussButton","sap.ushell.ui.footerbar.JamShareButton","sap.ushell.ui.footerbar.LoginDetailsButton","sap.ushell.ui.footerbar.LogoutButton","sap.ushell.ui.footerbar.SettingsButton","sap.ushell.ui.launchpad.CatalogListItem","sap.ushell.ui.launchpad.DashboardGroupsContainer","sap.ushell.ui.launchpad.DeleteArea","sap.ushell.ui.launchpad.EmbeddedSupportErrorMessage","sap.ushell.ui.launchpad.GroupListItem","sap.ushell.ui.launchpad.HeaderTile","sap.ushell.ui.launchpad.LoadingDialog","sap.ushell.ui.launchpad.Panel","sap.ushell.ui.launchpad.PlusTile","sap.ushell.ui.launchpad.SearchResultAppItem","sap.ushell.ui.launchpad.SearchResultApps","sap.ushell.ui.launchpad.SearchSuggestionList","sap.ushell.ui.launchpad.SearchSuggestionListItem","sap.ushell.ui.launchpad.Tile","sap.ushell.ui.launchpad.TileContainer","sap.ushell.ui.launchpad.TileState","sap.ushell.ui.tile.DynamicTile","sap.ushell.ui.tile.ImageTile","sap.ushell.ui.tile.StaticTile","sap.ushell.ui.tile.TileBase"],elements:[],version:"1.24.5"});jQuery.sap.declare("sap.ushell.ui.launchpad.DeleteAreaType");sap.ushell.ui.launchpad.DeleteAreaType={Dashboard:"Dashboard",GroupList:"GroupList"};jQuery.sap.declare("sap.ushell.ui.tile.State");sap.ushell.ui.tile.State={Neutral:"Neutral",None:"None",Negative:"Negative",Error:"Error",Positive:"Positive",Success:"Success",Critical:"Critical",Warning:"Warning"};jQuery.sap.declare("sap.ushell.ui.tile.StateArrow");sap.ushell.ui.tile.StateArrow={None:"None",Up:"Up",Down:"Down"}};if(!jQuery.sap.isDeclared('sap.ushell.override')){
// Copyright (c) 2013 SAP AG, All Rights Reserved
(function(){"use strict";jQuery.sap.declare("sap.ushell.override");sap.ushell.override={};sap.ushell.override.updateAggregation=function(n){if(this.isTreeBinding(n)){sap.ui.base.ManagedObject.prototype.updateAggregation.apply(this,arguments)}else{var b=this.mBindingInfos[n],B=b.binding,a=B.getContexts(),f=b.factory,A=this.getMetadata().getJSONKeys()[n],g=A._sMutator+"Group",G=B.isGrouped()&&this[g],i=0,I=[],c=$.proxy(function(C){var s=this.getId()+"-"+jQuery.sap.uid(),o=f(s,C);o.setBindingContext(C,b.model);this[A._sMutator](o)},this);if(G){sap.ui.base.ManagedObject.prototype.updateAggregation.apply(this,arguments)}else{I=this[A._sGetter]();for(i=0;i<a.length;++i){if(i<I.length){I[i].setBindingContext(a[i],b.model)}else{c(a[i])}}for(;i<I.length;++i){I[i].destroy()}I.length=a.length}}};sap.ushell.override.updateAggregationGrouped=function(n){var b=this.mBindingInfos[n],B=b.binding,f=b.factory,a=this.getMetadata().getJSONKeys()[n],c,N=null,g=null,G=null,t=this,I=t.getItems(),l=0,L=0,i,s,T=[];g=B.isGrouped()&&this.addItemGroup;jQuery.each(B.getContexts(),function(d,C){if(g&&B.aSorters.length>0){N=B.aSorters[0].fnGroup(C);if(typeof N==="string"){N={key:N}}if(N.key!==G){var o,h;if(b.groupHeaderFactory){o=b.groupHeaderFactory(N)}h=o||new sap.m.GroupHeaderListItem({title:N.text||N.key}).addStyleClass("sapMListHdr");t.insertAggregation("items",h,L,true);L=L+1;G=N.key}}I=t.getItems();for(i=L;i<I.length;i=i+1){if(I[i].constructor===sap.m.GroupHeaderListItem){T.push(t.removeItem(I[i]));I=t.getItems()}}if(L<I.length){I[L].setBindingContext(C,b.model);if(I[L].aDelegates){jQuery.each(I[L].aDelegates,function(i,v){v.vThis=C})}}else{s=t.getId()+"-"+L;c=f(s,C);c.setBindingContext(C,b.model);t.addItem(c)}L=L+1;l=L});for(i=I.length-1;i>=l;i=i-1){T.push(t.removeItem(I[i]))}setTimeout(function(){jQuery.each(T,function(i,v){v.destroy()})},1)};sap.ushell.override.updateAggregatesFactory=function(n){return function(){$.proxy(sap.ushell.override.updateAggregation,this,n)()}}}())};if(!jQuery.sap.isDeclared('sap.ushell.renderers.fiori2.AccessKeysHandler')){(function(){"use strict";jQuery.sap.declare("sap.ushell.renderers.fiori2.AccessKeysHandler");var a=function(){this.init()};a.prototype={keyCodes:jQuery.sap.KeyCodes,activateFlag:true,activateAccessibilityKeys:function(f){if(this.activateFlag===!!f){return}this.activateFlag=!!f;if(this.activateFlag){this.init()}else{jQuery("body").off('keyup.accessKeysHandler')}},handleCatalogKey:function(){sap.ushell.renderers.fiori2.Navigation.openCatalogByHash({groupContext:null});jQuery("#configBtn").focus()},handleHomepageKey:function(){var m=sap.ui.getCore().byId("mainShell"),s=m.getController();s.navigateToHome();jQuery("#homeBtn").focus()},handleSearchKey:function(){var s=sap.ui.getCore().byId('sf');var j=jQuery(s.getDomRef());j.click()},handleUserMenuKey:function(){var l=sap.ui.getCore().byId('loginDetails');if(!l){jQuery.sap.require('sap.ushell.ui.footerbar.LoginDetailsButton');l=new sap.ushell.ui.footerbar.LoginDetailsButton()}l.showLoginDetailsDialog()},handleAccessOverviewKey:function(){var t=sap.ushell.resources.i18n,s=new sap.ui.layout.form.SimpleForm({editable:false,content:[new sap.m.Label({text:"Alt+C"}),new sap.m.Text({text:t.getText("actionCatalog")}),new sap.m.Label({text:"Alt+H"}),new sap.m.Text({text:t.getText("actionHomePage")}),new sap.m.Label({text:"Alt+S"}),new sap.m.Text({text:t.getText("actionSearch")}),new sap.m.Label({text:"Alt+U"}),new sap.m.Text({text:t.getText("actionLoginDetails")})]}),d,o=new sap.m.Button({text:t.getText("okBtn"),press:function(){d.close()}});d=new sap.m.Dialog({id:"hotKeysGlossary",title:t.getText("hotKeysGlossary"),contentWidth:"300px",leftButton:o,afterClose:function(){d.destroy()}});d.addContent(s);d.open()},getNumberOfTileInRow:function(f){var j=jQuery(".sapUshellTile:first");if(!j.length)return false;var c=sap.ui.getCore();var t=c.byId(j.attr('id'));var b=(t.getLong()==true)?2:1;var d;if(!f){d=jQuery("#dashboardGroups").width()}else{d=jQuery("#catalogTiles").width()}var e=j.outerWidth(true)/b;var n=Math.floor(d/e);return n},goToEdgeTile:function(s){var t=jQuery(".sapUshellTile:visible")[s]();if(!t.length){return false}this.setTileFocus(t);return true},goToFirstTileOfSiblingGroup:function(s,e){e.preventDefault();var c=jQuery(":focus").closest(".sapUshellDashboardGroupsContainerItem");if(!c.length)return;var n=c[s](".sapUshellDashboardGroupsContainerItem:not(.sapUshellCloneArea)");var t='first';if(!n.length){if(!(s=="next"))return;n=c;t='last'}var j=n.find(".sapUshellTile")[t]();this.setTileFocus(j);this.moveScrollDashboard(j);return false},goToFirstTileOfSiblingGroupInCatalog:function(s,e){e.preventDefault();var j=this.getFocusOnTile(jQuery(":focus"));if(!j)return;var b;if(s=="next"){var i=j.nextAll("h3").length?false:true;if(!i){b=j.nextAll("h3").first().next()}else{b=j.nextAll(".sapUshellTile").last()}}else{var c=j.prevAll("h3").length==1?true:false;if(!c){b=jQuery(j.prevAll("h3")[1]).next()}else{b=j.prevAll("h3").last().next()}}this.setTileFocus(b);this.moveScrollCatalog(b);return false},swapTwoTilesInGroup:function(g,f,s){var b=g.getBindingContext().getObject();var c=b.tiles.indexOf(f.getBindingContext().getObject());var d=b.tiles.indexOf(s.getBindingContext().getObject());var e=b.tiles.splice(c,1,null);var h=b.tiles.splice(d,1,e[0]);b.tiles.splice(c,1,h[0]);var i=g.getBindingContext().getPath();g.getModel().setProperty(i,b)},moveTileInGroup:function(g,f,s){if(sap.ui.getCore().byId("shell").getModel().getProperty("/personalization")){var b=g.getBindingContext().getObject();var c=b.tiles.indexOf(f.getBindingContext().getObject());var d=b.tiles.indexOf(s.getBindingContext().getObject());var e=b.tiles.splice(c,1);b.tiles.splice(d,0,e[0]);var h=g.getBindingContext().getPath();g.getModel().setProperty(h,b)}},moveTile:function(d,s){if(sap.ui.getCore().byId("shell").getModel().getProperty("/personalization")){if(typeof s=="undefined"){s=false}var i=this.getGroupAndTilesInfo();if(!i)return;var n=this.getNextTile(d,i);if(!n)return;if(s){this.swapTwoTilesInGroup(i.group,i.curTile,n)}else{this.moveTileInGroup(i.group,i.curTile,n)}setTimeout(function(){this.setTileFocus($(n.getDomRef()))}.bind(this),100)}},getNextTile:function(d,b){var n,c=sap.ui.getCore().getConfiguration().getRTL();if(d=="left"){n=b.tiles[b.curTileIndex+(c?1:-1)]}if(d=="right"){n=b.tiles[b.curTileIndex+(c?-1:1)]}if(d=="down"||d=="up"){var e;var o=parseFloat(b.curTile.getDomRef().offsetLeft);if(d=="down"){e=b.tiles.slice(b.curTileIndex+1,b.curTileIndex+(b.sizeOfLine*2))}else{var s=b.curTileIndex-(b.sizeOfLine*2);s=(s>0)?s:0;e=b.tiles.slice(s,b.curTileIndex-1).reverse()}for(var i=0,l=e.length;i<l;i++){var t=e[i].getDomRef();var f=parseFloat(t.offsetLeft);var w=parseFloat(t.offsetWidth);var g=f+w;if(f<=o&&g>=o){n=e[i];break}}}return n},getGroupAndTilesInfo:function(j,f){if(!j){j=this.getFocusOnTile(jQuery(":focus"))}if(!j.length)return;var c=sap.ui.getCore().byId(j.attr('id'));var g=c.getParent();var t;if(!f){t=g.getTiles()}else{t=new Array();var b=j.prevAll("h3").first().nextUntil("h3");for(var i=0;i<b.length;i++){t.push(sap.ui.getCore().byId(b[i].id))}}var s=this.getNumberOfTileInRow(f);return{curTile:c,curTileIndex:t.indexOf(c),tiles:t,sizeOfLine:s,group:g}},goToNearbyTile:function(d,j,f){var i=this.getGroupAndTilesInfo(j,f);if(!i)return;var n=this.getNextTile(d,i);if(!n)return;this.setTileFocus($(n.getDomRef()))},deleteTile:function(j){var t=j.attr("id");if(t){var T=sap.ui.getCore().byId(t);var e=sap.ui.getCore().getEventBus();e.publish("launchpad","deleteTile",{tileId:T.getUuid()})}},setTileFocus:function(j){if(!j.hasClass('sapUshellPlusTile')){var b=j.find('[tabindex], a').andSelf().filter('[tabindex], a');b.filter('[tabindex!="-1"]');j=b.eq(0)}j.focus()},moveScrollDashboard:function(j){var b=jQuery("#dashboardPage-cont");var t=jQuery('#shell-hdr').height()+parseInt(jQuery('.sapUshellContainerTitle').css('margin-top'),10);var y=j.offset().top+b.scrollTop()-t;sap.ui.getCore().byId("dashboardPage").scrollTo(y,500)},moveScrollCatalog:function(j){var b=jQuery("#catalogTilesPage-cont");var t=jQuery('#shell-hdr').height()+jQuery('.sapMPageHeader').height()+(parseInt(jQuery('.sapMPanelHdr').css('margin-top'),10)*2);var y=j.offset().top+b.scrollTop()-t;sap.ui.getCore().byId("catalogTilesPage").scrollTo(y,500)},goToNearbySidePanelGroup:function(d,j){var s=(d=="up")?"prev":"next";var n=j[s]();if(!n)return;n.focus()},deleteSidePanelGroup:function(j){var c=sap.ui.getCore();var g=c.byId(j.attr('id'));var r=g.getRemovable();var e=c.getEventBus();e.publish("launchpad",r?"deleteGroup":"resetGroup",{groupId:g.getGroupId()})},moveSidePanelGroup:function(d,j){var c=sap.ui.getCore();var g=c.byId(j.attr('id'));var i=g.getIndex();var t=d=="up"?i-1:i+1;if(!i||!t)return;var b=g.getParent().getItems();if(t>=(b.length))return;var D={fromIndex:i,toIndex:t};var B=c.getEventBus();B.publish("launchpad","moveGroup",D);this.upDownButtonsHandler(d)},goToEdgeSidePanelGroup:function(s){var j=jQuery(".sapUshellGroupLI");j[s]().focus()},getFocusGroupFromSidePanel:function(j){var b=j.closest(".sapUshellGroupLI");return b.length?b:false},getFocusOnTile:function(j){var b=j.closest(".sapUshellTile");return b.length?b:false},getFocusOnCatalogPopover:function(j){var b=j.closest(".sapMPopover");return b.length?b:false},addGroup:function(j){var c=sap.ui.getCore();var b=c.byId(j.attr('id'));b.firePress()},renameGroup:function(){var j=jQuery(":focus");var b=this.getFocusGroupFromSidePanel(j);if(b){b.dblclick()}},upDownButtonsHandler:function(d,f){var j,b=jQuery(":focus");if(j=this.getFocusGroupFromSidePanel(b)){this.goToNearbySidePanelGroup(d,j);return}if(j=this.getFocusOnTile(b)){this.goToNearbyTile(d,j,f);return}if(j=this.getFocusOnCatalogPopover(b)){this.goToNearbyTile(d,j,f);return}},homeEndButtonsHandler:function(s){var j,b=jQuery(":focus");if(b.closest("#dashboardGroups").length||b.closest("#catalogTiles").length){this.goToEdgeTile(s);return}if(j=this.getFocusGroupFromSidePanel(b)){this.goToEdgeSidePanelGroup(s);return}},deleteButtonHandler:function(){if(sap.ui.getCore().byId("shell").getModel().getProperty("/personalization")){var j,b=jQuery(":focus");if(j=this.getFocusOnTile(b)){this.deleteTile(j);return}if(j=this.getFocusGroupFromSidePanel(b)){if(!j.hasClass('sapUshellEditing')&&!j.hasClass("sapUshellDefaultGroupItem")){this.deleteSidePanelGroup(j);return}}}},ctrlUpDownButtonsHandler:function(s){var j,b=jQuery(":focus");if(j=this.getFocusOnTile(b)){this.moveTile(s,false,j);return}if(j=this.getFocusGroupFromSidePanel(b)){this.moveSidePanelGroup(s,j);return}this.moveTile("down")},spaceButtonHandler:function(e){var j,b=jQuery(":focus");if(j=this.getFocusGroupFromSidePanel(b)){j.click();return false}var j=b.closest('#addGroupActionItem');if(j.length){this.addGroup(j);return false}},f6DashboardButtonHandler:function(e){var j=jQuery(":focus"),b,f;var s={configButton:'#configBtn',sidePanelFirstGroup:'.sapUshellGroupLI:first:visible',firstTile:'.sapUshellTile:first'};if(j.closest('#dashboardGroups').length){if(!e.shiftKey){f="configButton"}else{b=jQuery(s.sidePanelFirstGroup);if(!b.length){f="configButton"}else{f="jqElement"}}}if(j.closest(s.sidePanelFirstGroup).length){if(!e.shiftKey){f='firstTile'}else{f='configButton'}}if(j.closest('#shell-hdr').length){if(e.shiftKey){f='firstTile'}else{b=jQuery(s.sidePanelFirstGroup);if(!b.length){f='firstTile'}else{f="jqElement"}}}e.preventDefault();switch(f){case'firstTile':b=jQuery(s.firstTile);this.setTileFocus(b);break;case'jqElement':b.focus();break;default:b=jQuery(s.configButton);b.focus();break}return false},f6CatalogButtonHandler:function(e){var j=jQuery(":focus"),b,f;var s={homeButton:'#homeBtn',backButton:'.sapMBarChild.sapMBtn:first',dropDownList:'#catalogSelect',searchField:'#catalogSearch input',firstTile:'#catalogTiles .sapUshellTile:visible:first'};if(j.closest('#shell-hdr').length){if(!e.shiftKey){f='backButton';b=jQuery(s.backButton)}else{f='firstTile';b=jQuery(s.firstTile)}}if(j.closest(s.backButton).length){if(!e.shiftKey){b=jQuery(s.dropDownList);f='dropDownList'}else{b=jQuery(s.homeButton);f='homeButton'}}if(j.closest('#catalogSelect').length){if(!e.shiftKey){b=jQuery(s.searchField);f='searchField'}else{b=jQuery(s.backButton);f='backButton'}}if(j.closest('#catalogSearch').length){if(!e.shiftKey){b=jQuery(s.firstTile);f='firstTile'}else{b=jQuery(s.dropDownList);f='dropDownList'}}if(j.closest('#catalogTiles').length){if(!e.shiftKey){b=jQuery(s.homeButton);f="homeButton"}else{b=jQuery(s.searchField);f="searchField"}}e.preventDefault();switch(f){case'firstTile':b=jQuery(s.firstTile);this.setTileFocus(b);break;case'homeButton':case'backButton':case'dropDownList':case'searchField':b.focus();break;default:b=jQuery(s.homeButton);b.focus();break}return false},mainKeydownHandler:function(e){e=e||window.event;switch(e.keyCode){case this.keyCodes.SPACE:this.spaceButtonHandler(e);break;case this.keyCodes.HOME:this.homeEndButtonsHandler("first");break;case this.keyCodes.END:this.homeEndButtonsHandler("last");break;default:return true}},catalogKeydownHandler:function(k){var h=sap.ushell.renderers.fiori2.AccessKeysHandler;var f=true;switch(k.keyCode){case h.keyCodes.F6:return h.f6CatalogButtonHandler(k);break;case h.keyCodes.ARROW_UP:h.upDownButtonsHandler("up",f);break;case h.keyCodes.ARROW_DOWN:h.upDownButtonsHandler("down",f);break;case h.keyCodes.ARROW_RIGHT:h.goToNearbyTile("right");break;case h.keyCodes.ARROW_LEFT:h.goToNearbyTile("left");break;case h.keyCodes.PAGE_UP:h.goToFirstTileOfSiblingGroupInCatalog('prev',k);break;case h.keyCodes.PAGE_DOWN:h.goToFirstTileOfSiblingGroupInCatalog('next',k);break}},dashboardKeydownHandler:function(k){var h=sap.ushell.renderers.fiori2.AccessKeysHandler;switch(k.keyCode){case h.keyCodes.F2:this.renameGroup();break;case h.keyCodes.F6:return h.f6DashboardButtonHandler(k);break;case h.keyCodes.DELETE:h.deleteButtonHandler();break;case h.keyCodes.ARROW_UP:if(k.ctrlKey===true){h.ctrlUpDownButtonsHandler("up")}else{h.upDownButtonsHandler("up")}break;case h.keyCodes.ARROW_DOWN:if(k.ctrlKey===true){h.ctrlUpDownButtonsHandler("down")}else{h.upDownButtonsHandler("down")}break;case h.keyCodes.ARROW_RIGHT:if(k.ctrlKey===true){h.moveTile("right")}else{h.goToNearbyTile("right")}break;case h.keyCodes.ARROW_LEFT:if(k.ctrlKey===true){h.moveTile("left")}else{h.goToNearbyTile("left")}break;case h.keyCodes.PAGE_UP:h.goToFirstTileOfSiblingGroup('prev',k);break;case h.keyCodes.PAGE_DOWN:h.goToFirstTileOfSiblingGroup('next',k);break}},init:function(){jQuery(document).on('keyup.accessKeysHandler',function(k){if(!this.activateFlag){return}if(k.altKey){switch(String.fromCharCode(k.keyCode).toUpperCase()){case'C':if(sap.ui.getCore().byId("shell").getModel().getProperty("/personalization")){this.handleCatalogKey()}break;case'H':this.handleHomepageKey();break;case'S':this.handleSearchKey();break;case'U':this.handleUserMenuKey();break;case'0':this.handleAccessOverviewKey();break}}}.bind(this));jQuery(document).on('keydown.main',this.mainKeydownHandler.bind(this))}};sap.ushell.renderers.fiori2.AccessKeysHandler=new a()}())};if(!jQuery.sap.isDeclared('sap.ushell.renderers.fiori2.History')){(function(){"use strict";jQuery.sap.declare("sap.ushell.renderers.fiori2.History");sap.ushell.renderers.fiori2.History=function(){this._history=[];this.backwards=false;this._historyPosition=-1;this._virtual={}};sap.ushell.renderers.fiori2.History.prototype.hashChange=function(n,o){var h=this._history.indexOf(n);if(h===-1){if(this._historyPosition+1<this._history.length){this._history=this._history.slice(0,this._historyPosition+1)}this._history.push(n);this._historyPosition+=1;this.backwards=false;this.forwards=false}else{this.backwards=this._historyPosition>h;this.forwards=this._historyPosition<h;this._historyPosition=h}};sap.ushell.renderers.fiori2.History.prototype.isVirtualHashchange=function(n,o){return this._virtual.hasOwnProperty(o)&&this.getCurrentHash()===n&&this._history.length-1>this._historyPosition&&this._history[this._historyPosition+1]===o};sap.ushell.renderers.fiori2.History.prototype.setVirtualNavigation=function(h){this._virtual[h]=true};sap.ushell.renderers.fiori2.History.prototype.getCurrentHash=function(){return this._history[this._historyPosition]||null};sap.ushell.renderers.fiori2.History.prototype.getHashIndex=function(h){return this._history.indexOf(h)};sap.ushell.renderers.fiori2.History.prototype.getHistoryLength=function(){return this._history.length}}())};if(!jQuery.sap.isDeclared('sap.ushell.renderers.fiori2.Navigation')){(function(){"use strict";jQuery.sap.declare("sap.ushell.renderers.fiori2.Navigation");sap.ushell.renderers.fiori2.Navigation=function(){this.CATALOG={ID:"ShellCatalog",SEMANTICOBJECT:"shell",ACTION:"catalog"};this.SEARCH={ID:"ShellSearch",SEMANTICOBJECT:"shell",ACTION:"search"};sap.ushell.Container.getService("NavTargetResolution").registerCustomResolver({name:"Shell Internal Navigation",isApplicable:jQuery.proxy(this.navTargetIsApplicableForShell,this),resolveHashFragment:jQuery.proxy(this.resolveHashFragmentForShell,this)});sap.ushell.Container.getService("NavTargetResolution").registerCustomResolver({name:"Search App Container",isApplicable:function(h){return h==="#Action-search"},resolveHashFragment:function(h){var d=new jQuery.Deferred(),r={};if(h==="#Action-search"){r={"additionalInformation":"SAPUI5.Component=sap.ushell.renderers.fiori2.search.container","applicationType":"URL","url":jQuery.sap.getResourcePath("sap/ushell/renderers/fiori2/search/container")}}d.resolve(r);return d.promise()}})};sap.ushell.renderers.fiori2.Navigation.prototype.openCatalogByHash=function(d,s){var h="#"+sap.ushell.Container.getService("URLParsing").constructShellHash({target:{semanticObject:this.CATALOG.SEMANTICOBJECT,action:this.CATALOG.ACTION},params:{targetGroup:[(d&&d.groupContext&&d.groupContext.sPath)||"/groups/0"],catalogSelector:[(d&&d.categoryFilter)||""],tileFilter:[(d&&d.searchFilter)||""]}});sap.ushell.Container.getService("ShellNavigation").hashChanger.privsetHash(h,s===undefined?true:s);jQuery(document).off('keydown.dashboard');jQuery(document).off('keydown.catalog');jQuery(document).on('keydown.catalog',sap.ushell.renderers.fiori2.AccessKeysHandler.catalogKeydownHandler)};sap.ushell.renderers.fiori2.Navigation.prototype.navTargetIsApplicableForShell=function(h){var a=sap.ushell.Container.getService("URLParsing").parseShellHash(h.substring(1));return a&&(a.semanticObject===this.CATALOG.SEMANTICOBJECT&&a.action===this.CATALOG.ACTION)};sap.ushell.renderers.fiori2.Navigation.prototype.resolveHashFragmentForShell=function(h){var a=sap.ushell.Container.getService("URLParsing").parseShellHash(h.substring(1)),d=new jQuery.Deferred(),r={};if(a.action===this.CATALOG.ACTION){r={applicationType:this.CATALOG.ID,catalogSelector:a.params.catalogSelector,tileFilter:a.params.tileFilter,targetGroup:a.params.targetGroup}}d.resolve(r);return d.promise()};sap.ushell.renderers.fiori2.Navigation=new sap.ushell.renderers.fiori2.Navigation()}())};if(!jQuery.sap.isDeclared('sap.ushell.renderers.fiori2.launchpad.PagingManager')){(function(){"use strict";jQuery.sap.declare("sap.ushell.renderers.fiori2.launchpad.PagingManager");sap.ui.base.EventProvider.extend("sap.ushell.renderers.fiori2.launchpad.PagingManager",{metadata:{publicMethods:["setElementClass","setContainerSize","getNumberOfAllocatedElements","moveToNextPage","getTileHeight"]},constructor:function(i,s){sap.ushell.renderers.fiori2.launchpad.getPagingManager=jQuery.sap.getter(this.getInterface());this.currentPageIndex=0;this.containerHeight=s.containerHeight||0;this.containerWidth=s.containerWidth||0;this.ElementClass=s.elementClassName||"";this.tileHeight=0},getTileHeight:function(){return this.tileHeight},setElementClass:function(c){this.ElementClass=c},setContainerSize:function(n,a){this.containerHeight=n;this.containerWidth=a},getNumberOfAllocatedElements:function(){return this._calcElementsPerPage()*this.currentPageIndex},moveToNextPage:function(){this.currentPageIndex++},_calcElementsPerPage:function(){var e=jQuery("<div>").addClass(this.ElementClass);jQuery('body').append(e);var a=e.height();var b=e.width();if(a<100||b<100){b=100;a=100}var c=Math.round(this.containerWidth/b),d=Math.round(this.containerHeight/a);this.tileHeight=a;e.remove();if(!c||!d||d===Infinity||c===Infinity||d===0||c===0){return 10}return c*d}})}())};if(!jQuery.sap.isDeclared('sap.ushell.renderers.fiori2.search.SearchBox')){jQuery.sap.declare('sap.ushell.renderers.fiori2.search.SearchBox');(function(g){"use strict";jQuery.sap.require('sap.m.SearchField');sap.ushell.renderers.fiori2.search.SearchBox=sap.m.SearchField.extend("sap.ushell.renderers.fiori2.search.SearchBox",{metadata:{properties:{dataSourceName:"string"},events:{deletePill:{},resetAll:{}}},renderer:"sap.m.SearchFieldRenderer",onAfterRendering:function(){var s=this;var e=$(this.getDomRef());sap.m.SearchField.prototype.onAfterRendering.apply(this,arguments);e.find("#sfOverlay-reset").click(function(){s.fireResetAll()});e.find("#sfOverlay-reset").on({"touchstart":function(){s.fireResetAll()}});e.find("#containerSf-reset").click(function(){s.fireResetAll()});e.find("#containerSf-reset").on({"touchstart":function(){s.fireResetAll()}});var f=e.find("form");f.addClass("sapUiUfdShellSearchBoxForm");var i=e.find("input");i.addClass("sapUiUfdShellSearchBox");var d=this.getDataSourceName();if(!d||d===""){return}var p=$('<span class="sapUshellDataSourcePill sapUshellSearchBoxPill"></span>');f.prepend(p);p.append('<span class="sapUiUfdShellSearchBoxPillDsName">'+d+'</span>');var a=$('<span class="sapUiUfdShellSearchBoxPillDel"></span>');var r=sap.ui.getCore().getConfiguration().getRTL();if(r){p.prepend(a)}else{p.append(a)}a.click(function(){s.fireDeletePill()});a.on({"touchstart":function(){s.fireDeletePill()}})}})}(window))};if(!jQuery.sap.isDeclared('sap.ushell.renderers.fiori2.search.SearchSuggestionControls')){jQuery.sap.declare('sap.ushell.renderers.fiori2.search.SearchSuggestionControls');(function(){"use strict";jQuery.sap.require('sap.ui.core.delegate.ItemNavigation');sap.ui.core.Control.extend("sapUshellSuggestSection",{metadata:{properties:{},aggregations:{"items":{type:"sap.ui.core.Control",multiple:true}}},hasContent:function(){return true}});sap.m.List.extend("sapUshellSuggestionList",{init:function(e){sap.m.List.prototype.init.call(this,e);this.setShowNoData(false);this.setShowSeparators(sap.m.ListSeparators.Inner);this.oItemNavigation=new sap.ui.core.delegate.ItemNavigation();this.oItemNavigation.attachEvent("AfterFocus",this._afterFocus);this.addDelegate(this.oItemNavigation)},exit:function(e){this.oItemNavigation.detachEvent("AfterFocus",this._afterFocus);this.oItemNavigation.destroy()},_afterFocus:function(e){this.setFocusedIndex(this.getItemDomRefs().indexOf(this.getFocusedDomRef()))},metadata:{properties:{},aggregations:{"sections":{type:"sap.ui.core.Control",multiple:true}},events:{}},renderer:function(r,c){r.write("<div");r.writeControlData(c);r.writeClasses();r.write(">");var s=c.getSections();for(var i=0;i<s.length;i++){var a=s[i];if(a.hasContent()){var b=a.getItems();for(var j=0;j<b.length;j++){b[j].addStyleClass('suggestList');r.renderControl(b[j])}}}r.write("</div>")},onAfterRendering:function(e){var f=this.getDomRef();var d=f.getElementsByClassName("sapUshellSuggestListItem");var I=[];var m=2;var r=f.getElementsByClassName("sapUshellSearchSuggestionNavItem");for(var i=0;i<d.length;i++){var n=d[i].getElementsByClassName("sapUshellSearchSuggestionNavItem");var l;for(var j=0;j<m;j++){var a=n[j];if(a){I.push(a);l=a}else{I.push(l)}}}this.oItemNavigation.setRootDomRef(f).setItemDomRefs(I).setCycling(true).setColumns(m).setSelectedIndex(0)}});sap.ushell.ui.launchpad.SearchSuggestionList.prototype.init=function(e){sap.m.List.prototype.init.call(this,e);this.setShowNoData(false);this.setShowSeparators(sap.m.ListSeparators.Inner);this.oItemNavigation=new sap.ui.core.delegate.ItemNavigation();this.oItemNavigation.attachEvent("AfterFocus",this._afterFocus)};sap.ushell.ui.launchpad.SearchSuggestionList.prototype.exit=function(e){this.oItemNavigation.detachEvent("AfterFocus",this._afterFocus);this.oItemNavigation.destroy()}}())};if(!jQuery.sap.isDeclared('sap.ushell.renderers.fiori2.search.container.App.controller')){jQuery.sap.declare('sap.ushell.renderers.fiori2.search.container.App.controller');jQuery.sap.require('sap.m.MessageToast');sap.ui.controller("sap.ushell.renderers.fiori2.search.container.App",{onInit:function(){this.oShellNavigation=sap.ushell.Container.getService("ShellNavigation");this.oShellNavigation.hashChanger.attachEvent("hashChanged",this.hashChanged)},hashChanged:function(e){var v=sap.ui.getCore().byId("searchContainerApp");var s=sap.ui.getCore().getModel("searchModel");var u=sap.ushell.Container.getService("URLParsing");var p=u.parseParameters("?"+e.getParameter("newHash").replace(/#/g,'%23'));if(!p.searchTerm)return;var a=decodeURIComponent(p.searchTerm[0]);s.setSearchTerm(a,false);var d;if(p.dataSource){var b=JSON.parse(decodeURIComponent(p.dataSource[0]));d=s.sina.createDataSource(b);s.setDataSource(d,false)}else{s.resetDataSource(false)}v.oSearchResults.searchLayout.setShowBottomList(s.getProperty("/isNormalSearchEnable"));if(!s.getProperty("/isNormalSearchEnable"))v.oSearchResults.searchLayout.setBottomCount(0);v.oSearchSelect.setSelectedKey(s.getProperty("/dataSourceLabelRaw"));v.oSearchInput.setValue(s.getProperty('/searchBoxTerm'));var h=sap.ui.getCore().byId("headSearchBox");if(h!==undefined){if(h.getVisible()){h.setVisible(false)}}s._searchFireQuery()},onExit:function(){this.oShellNavigation.hashChanger.detachEvent("hashChanged",this.hashChanged)},})};if(!jQuery.sap.isDeclared('sap.ushell.renderers.fiori2.search.container.Component')){jQuery.sap.declare("sap.ushell.renderers.fiori2.search.container.Component");jQuery.sap.require('sap.ui.core.UIComponent');sap.ui.core.UIComponent.extend("sap.ushell.renderers.fiori2.search.container.Component",{metadata:{version:"1.24.5",library:"sap.ushell.renderers.fiori2.search.container",includes:[],dependencies:{libs:["sap.m"],components:[]},config:{}},createContent:function(){return sap.ui.view({id:"searchContainerApp",viewName:"sap.ushell.renderers.fiori2.search.container.App",type:sap.ui.core.mvc.ViewType.JS})}})};if(!jQuery.sap.isDeclared('sap.ushell.resources')){(function(){"use strict";jQuery.sap.declare("sap.ushell.resources");jQuery.sap.require('sap.ui.model.resource.ResourceModel');sap.ushell.resources={};sap.ushell.resources.getTranslationModel=function(){var t=new sap.ui.model.resource.ResourceModel({bundleUrl:jQuery.sap.getModulePath("sap.ushell.renderers.fiori2.resources.resources",".properties"),bundleLocale:sap.ui.getCore().getConfiguration().getLanguage()});return t};sap.ushell.resources.i18nModel=sap.ushell.resources.getTranslationModel();sap.ushell.resources.i18n=sap.ushell.resources.i18nModel.getResourceBundle()}())};if(!jQuery.sap.isDeclared('sap.ushell.services.AppConfiguration')){(function(){"use strict";jQuery.sap.declare("sap.ushell.services.AppConfiguration");function A(){var m={},c=null;this.getMetadata=function(a){if(!a){a=c}if(a){var k=this.getApplicationUrl(a);if(!(m.hasOwnProperty(k))){this.addMetadata(a)}return m[k]||{}}return{}};this.setCurrentApplication=function(a){c=a};this.addApplicationSettingsButtons=function(b){var M=sap.ui.getCore().byId('shell')&&sap.ui.getCore().byId('shell').getModel();var i,C,B,n=[];if(!M){jQuery.sap.log.error("shell does not exist");return}B=M.getProperty('/currentState/shellActions').slice(0);for(i=0;i<b.length;i++){C=b[i];C.setIcon(C.getIcon()||sap.ui.core.IconPool.getIconURI('action-settings'));n.push(C.getId())}M.setProperty('/currentState/actions',n.concat(B))};this.setWindowTitle=function(t){window.document.title=t};this.setIcons=function(i){jQuery.sap.setIcons(i)};this.getSettingsControl=function(){jQuery.sap.require("sap.ushell.ui.footerbar.SettingsButton");return new sap.ushell.ui.footerbar.SettingsButton()};this.getApplicationName=function(a){var M,s=(a&&a.additionalInformation)||null;if(s){M=/^SAPUI5\.Component=(.+)$/i.exec(s);if(M){return M[1]}}return null};this.getApplicationUrl=function(a){var u=(a&&a.url)||null,i;if(u){i=u.indexOf("?");if(i>=0){u=u.slice(0,i)}if(u.slice(-1)!=='/'){u+='/'}}return u};this.addMetadata=function(a){try{var C=this.getApplicationName(a),u=this.getApplicationUrl(a),s,o,r,R,l,b,i,p,v,P=["libraryName","version","fullWidth","title","icon","favIcon","homeScreenIconPhone","homeScreenIconPhone@2","homeScreenIconTablet","homeScreenIconTablet@2","startupImage320x460","startupImage640x920","startupImage640x1096","startupImage768x1004","startupImage748x1024","startupImage1536x2008","startupImage1496x2048"],d,e,f;if(u&&!(m.hasOwnProperty(u))){m[u]={};o=sap.ui.component.load({url:u,name:C});l=o.getMetadata();if(l){b=l&&l.getConfig();if(b){R=b.resourceBundle||"";if(R){if(R.slice(0,1)!=='/'){R=u+R}r=jQuery.sap.resources({url:R,locale:sap.ui.getCore().getConfiguration().getLanguage()})}}for(i=0;i<P.length;i=i+1){p=P[i];if(r&&b.hasOwnProperty(p+"Resource")){v=r.getText(b[p+"Resource"])}else if(b.hasOwnProperty(p)){v=b[p]}else{v=l["_s"+p.substring(0,1).toUpperCase()+p.slice(1)]}m[u][p]=v}}d=["favIcon","homeScreenIconPhone","homeScreenIconPhone@2","homeScreenIconTablet","homeScreenIconTablet@2","startupImage320x460","startupImage640x920","startupImage640x1096","startupImage768x1004","startupImage748x1024","startupImage1536x2008","startupImage1496x2048"];e=(u&&u[u.length-1]==='/')?u.substring(0,u.length-1):u;f=function(u){if(u.match(/^https?:\/\/.*/)){return false}return u&&u[0]!=='/'};d.forEach(function(h){var O=m[u][h],F=null;if(O){F=f(O)?e+"/"+O:O}m[u][h]=F})}}catch(g){jQuery.sap.log.warning("Application configuration could not be parsed")}}}sap.ushell.services.AppConfiguration=new A()}())};if(!jQuery.sap.isDeclared('sap.ushell.services.Bookmark')){(function(){"use strict";jQuery.sap.declare("sap.ushell.services.Bookmark");sap.ushell.services.Bookmark=function(){var t=this,l=sap.ushell.Container.getService("LaunchPage");sap.ushell.utils.testPublishAt(t);function i(c,r){var C=l.getCatalogData(c);return C.remoteId===r.remoteId&&C.baseUrl.replace(/\/$/,"")===r.baseUrl.replace(/\/$/,"")}this.addBookmark=function(p,g){return l.addBookmark(p,g)};sap.ushell.utils.testPublishAt(t);function d(D,c,C,g){var e,f=D.reject.bind(D);function a(G){l.getCatalogTiles(C).fail(f).done(function(b){var T=b.some(function(o){if(l.getCatalogTileId(o)===c){l.addTile(o,G).fail(f).done(function(){D.resolve()});return true}});if(!T){e="No tile '"+c+"' in catalog '"+l.getCatalogId(C)+"'";jQuery.sap.log.error(e,null,"sap.ushell.services.Bookmark");f(e)}})}if(g){l.getGroups().fail(f).done(function(G){var b=G.some(function(o){if(l.getGroupId(o)===g){a(o);return true}});if(!b){e="Group '"+g+"' is unknown";jQuery.sap.log.error(e,null,"sap.ushell.services.Bookmark");f(e)}})}else{l.getDefaultGroup().fail(f).done(a)}return D.promise()}this.addCatalogTileToGroup=function(c,g,C){var D=new jQuery.Deferred(),e,f=D.reject.bind(D),m,L="X-SAP-UI2-HANA:hana?remoteId=HANA_CATALOG";function a(o){return l.getCatalogId(o)===L}m=C?i:a;C=C||{id:L};l.onCatalogTileAdded(c);l.getCatalogs().fail(f).done(function(b){var s;b.forEach(function(o){if(m(o,C)){if(!s){s=o}else{jQuery.sap.log.warning("More than one matching catalog: "+JSON.stringify(C),null,"sap.ushell.services.Bookmark")}}});if(s){d(D,c,s,g)}else{e="No matching catalog found: "+JSON.stringify(C);jQuery.sap.log.error(e,null,"sap.ushell.services.Bookmark");D.reject(e)}});return D.promise()};this.countBookmarks=function(u){return l.countBookmarks(u)};this.deleteBookmarks=function(u){return l.deleteBookmarks(u)};this.updateBookmarks=function(u,p){return l.updateBookmarks(u,p)}};sap.ushell.services.Bookmark.hasNoAdapter=true}())};if(!jQuery.sap.isDeclared('sap.ushell.services.CrossApplicationNavigation')){(function(){"use strict";jQuery.sap.declare("sap.ushell.services.CrossApplicationNavigation");sap.ushell.services.CrossApplicationNavigation=function(){function a(t){var r=sap.ushell.Container.getService("NavTargetResolution").getCurrentResolution(),s,S;if(r&&r.url){S=jQuery.sap.getUriParameters(r.url).get("sap-system")}if(!S||typeof t!=="object"){return}if(t.target&&t.target.shellHash){if(typeof t.target.shellHash==="string"&&!/[?&]sap-system=/.test(t.target.shellHash)){s=(t.target.shellHash.indexOf("?")>-1)?"&":"?";t.target.shellHash+=s+"sap-system="+S}return}t.params=t.params||{};if(!Object.prototype.hasOwnProperty.call(t.params,"sap-system")){t.params["sap-system"]=S}}this.hrefForExternal=function(A){if(sap.ushell&&sap.ushell.services&&sap.ushell.Container&&typeof sap.ushell.Container.getService==="function"&&sap.ushell.Container.getService("ShellNavigation")){a(A);return sap.ushell.Container.getService("ShellNavigation").hrefForExternal(A)}jQuery.sap.log.debug("Shell not available, no Cross App Navigation");return""};this.toExternal=function(A){if(sap.ushell&&sap.ushell.services&&sap.ushell.Container&&typeof sap.ushell.Container.getService==="function"&&sap.ushell.Container.getService("ShellNavigation")){a(A);sap.ushell.Container.getService("ShellNavigation").toExternal(A);return}jQuery.sap.log.debug("Shell not avialable, no Cross App Navigation");return};this.hrefForAppSpecificHash=function(A){if(sap.ushell&&sap.ushell.services&&sap.ushell.Container&&typeof sap.ushell.Container.getService==="function"&&sap.ushell.Container.getService("ShellNavigation")){return sap.ushell.Container.getService("ShellNavigation").hrefForAppSpecificHash(A)}jQuery.sap.log.debug("Shell not available, no Cross App Navigation; fallback to app-specific part only");return"#"+encodeURI(A)};this.getSemanticObjectLinks=function(s,p,i){return sap.ushell.Container.getService("NavTargetResolution").getSemanticObjectLinks(s,p,i)};this.isIntentSupported=function(i){return sap.ushell.Container.getService("NavTargetResolution").isIntentSupported(i)}};sap.ushell.services.CrossApplicationNavigation.hasNoAdapter=true}())};if(!jQuery.sap.isDeclared('sap.ushell.services.LaunchPage')){(function(){"use strict";jQuery.sap.declare("sap.ushell.services.LaunchPage");sap.ushell.services.LaunchPage=function(a,c){var t=this;this.getGroups=function(){var p=a.getGroups();p.fail(function(){jQuery.sap.log.error("getGroups failed")});return p};this.getDefaultGroup=function(){var p=a.getDefaultGroup();p.fail(function(){jQuery.sap.log.error("getDefaultGroup failed")});return p};this.getGroupTitle=function(g){return a.getGroupTitle(g)};this.getGroupId=function(g){return a.getGroupId(g)};this.getGroupTiles=function(g){return a.getGroupTiles(g)};this.addGroup=function(T){var p=a.addGroup(T);p.fail(function(){jQuery.sap.log.error("addGroup "+T+" failed")});return p};this.removeGroup=function(g,i){var p=a.removeGroup(g,i);p.fail(function(){jQuery.sap.log.error("Fail to removeGroup "+t.getGroupTitle(g))});return p};this.resetGroup=function(g,i){var p=a.resetGroup(g,i);p.fail(function(){jQuery.sap.log.error("Fail to resetGroup "+t.getGroupTitle(g))});return p};this.isGroupRemovable=function(g){return a.isGroupRemovable(g)};this.moveGroup=function(g,n){var p=a.moveGroup(g,n);p.fail(function(){jQuery.sap.log.error("Fail to moveGroup "+t.getGroupTitle(g))});return p};this.setGroupTitle=function(g,T){var p=a.setGroupTitle(g,T);p.fail(function(){jQuery.sap.log.error("Fail to set Group title: "+t.getGroupTitle(g))});return p};this.hideGroups=function(h){var d=jQuery.Deferred();if(typeof a.hideGroups!=="function"){d.reject('hideGroups() is not implemented in the Adapter.')}else{a.hideGroups(h).done(function(){d.resolve()}).fail(function(m){jQuery.sap.log.error("Fail to store groups visibility."+m);d.reject()})}return d.promise()};this.isGroupVisible=function(g){if(typeof a.isGroupVisible==="function"){return a.isGroupVisible(g)}return true};this.addTile=function(C,g){var p=a.addTile(C,g);p.fail(function(){jQuery.sap.log.error("Fail to add Tile: "+t.getCatalogTileId(C))});return p};this.removeTile=function(g,T,i){var p=a.removeTile(g,T,i);p.fail(function(){jQuery.sap.log.error("Fail to remove Tile: "+t.getTileId(T))});return p};this.moveTile=function(T,s,i,S,o){var p=a.moveTile(T,s,i,S,o);p.fail(function(){jQuery.sap.log.error("Fail to move Tile: "+t.getTileId(T))});return p};this.getTileId=function(T){return a.getTileId(T)};this.getTileTitle=function(T){return a.getTileTitle(T)};this.getTileView=function(T){var d=a.getTileView(T);if(!jQuery.isFunction(d.promise)){d=jQuery.Deferred().resolve(d).promise()}return d};this.getTileSize=function(T){return a.getTileSize(T)};this.getTileTarget=function(T){return a.getTileTarget(T)};this.getTileDebugInfo=function(T){if(typeof a.getTileDebugInfo==="function"){return a.getTileDebugInfo(T)}return undefined};this.isTileIntentSupported=function(T){if(typeof a.isTileIntentSupported==="function"){return a.isTileIntentSupported(T)}return true};this.refreshTile=function(T){a.refreshTile(T)};this.setTileVisible=function(T,n){return a.setTileVisible(T,n)};this.getCatalogs=function(){return a.getCatalogs()};this.isCatalogsValid=function(){return a.isCatalogsValid()};this.getCatalogData=function(C){if(typeof a.getCatalogData!=="function"){jQuery.sap.log.warning("getCatalogData not implemented in adapter",null,"sap.ushell.services.LaunchPage");return{id:this.getCatalogId(C)}}return a.getCatalogData(C)};this.getCatalogError=function(C){return a.getCatalogError(C)};this.getCatalogId=function(C){return a.getCatalogId(C)};this.getCatalogTitle=function(C){return a.getCatalogTitle(C)};this.getCatalogTiles=function(C){var p=a.getCatalogTiles(C);p.fail(function(){jQuery.sap.log.error("Fail to get Tiles of Catalog: "+t.getCatalogTitle(C))});return p};this.getCatalogTileId=function(T){return a.getCatalogTileId(T)};this.getCatalogTileTitle=function(C){return a.getCatalogTileTitle(C)};this.getCatalogTileSize=function(C){return a.getCatalogTileSize(C)};this.getCatalogTileView=function(C){return a.getCatalogTileView(C)};this.getCatalogTileTargetURL=function(C){return a.getCatalogTileTargetURL(C)};this.getCatalogTileKeywords=function(C){return a.getCatalogTileKeywords(C)};this.getCatalogTilePreviewTitle=function(C){return a.getCatalogTilePreviewTitle(C)};this.getCatalogTilePreviewIcon=function(C){return a.getCatalogTilePreviewIcon(C)};this.addBookmark=function(p,g){if(!p.title){jQuery.sap.log.error("Add Bookmark - Missing title");throw new Error("Title missing in bookmark configuration")}if(!p.url){jQuery.sap.log.error("Add Bookmark - Missing URL");throw new Error("URL missing in bookmark configuration")}var P=a.addBookmark(p,g);P.fail(function(){jQuery.sap.log.error("Fail to add bookmark for URL: "+p.url+" and Title: "+p.title)});return P};this.countBookmarks=function(u){if(!u||typeof u!=="string"){jQuery.sap.log.error("Fail to count bookmarks. No valid URL");throw new Error("Missing URL")}var p=a.countBookmarks(u);p.fail(function(){jQuery.sap.log.error("Fail to count bookmarks")});return p};this.deleteBookmarks=function(u){if(!u||typeof u!=="string"){throw new Error("Missing URL")}var p=a.deleteBookmarks(u);p.fail(function(){jQuery.sap.log.error("Fail to delete bookmark for: "+u)});return p};this.updateBookmarks=function(u,p){if(!u||typeof u!=="string"){jQuery.sap.log.error("Fail to update bookmark. No valid URL");throw new Error("Missing URL")}if(!p||typeof p!=="object"){jQuery.sap.log.error("Fail to update bookmark. No valid parameters, URL is: "+u);throw new Error("Missing parameters")}var P=a.updateBookmarks(u,p);P.fail(function(){jQuery.sap.log.error("Fail to update bookmark for: "+u)});return P};this.onCatalogTileAdded=function(T){return a.onCatalogTileAdded(T)}}}())};if(!jQuery.sap.isDeclared('sap.ushell.services.Message')){(function(){"use strict";jQuery.sap.declare("sap.ushell.services.Message");sap.ushell.services.Message=function(){var s=null;this.init=function(S){s=S;return this};this.show=function(t,m,p){if(!m){jQuery.sap.log.error("Message must not be empty.")}else{if(s){s(t,m,p||{})}else{jQuery.sap.log.error("MessageService not initialized. [Message: '"+m+"']")}}};this.info=function(m,d){this.show(sap.ushell.services.Message.Type.INFO,m,{duration:d||3000})};this.error=function(m,t){m=(t!==undefined)?t+" , "+m:m;jQuery.sap.log.error(m);this.show(sap.ushell.services.Message.Type.ERROR,m,{title:t})};this.confirm=function(m,c,t,a){this.show(sap.ushell.services.Message.Type.CONFIRM,m,{title:t,callback:c,actions:a})}};sap.ushell.services.Message.hasNoAdapter=true;sap.ushell.services.Message.Type={INFO:0,ERROR:1,CONFIRM:2}}())};if(!jQuery.sap.isDeclared('sap.ushell.services.NavTargetResolution')){(function(){"use strict";jQuery.sap.declare("sap.ushell.services.NavTargetResolution");sap.ushell.services.NavTargetResolution=function(A,c,p,s){var S=s&&s.config,l,r=[{name:"DefaultAdapter",isApplicable:function(){return true},resolveHashFragment:A.resolveHashFragment.bind(A)}],C;this._nextResolveHashFragment=function(a,h){var R,f;R=a.pop();if(R.isApplicable(h)){jQuery.sap.log.info("NavTargetResolution: custom resolver "+R.name+" resolves "+h);f=this._nextResolveHashFragment.bind(this,a);return R.resolveHashFragment(h,f)}return this._nextResolveHashFragment(a,h)};this.resolveHashFragment=function(h){var o=r.map(function(a){return a});return this._nextResolveHashFragment(o,h).done(function(R){C=R})};this.baseResolveHashFragment=function(h){return A.resolveHashFragment(h)};this.getSemanticObjectLinks=function(a,P,i){if(/\?/.test(a)){throw new Error("Parameter must not be part of semantic object")}if(A.getSemanticObjectLinks){return A.getSemanticObjectLinks(a,P,i)}return(new jQuery.Deferred()).resolve([]).promise()};this.isIntentSupported=function(i){var R={};if(A.isIntentSupported){return A.isIntentSupported(i)}i.forEach(function(I){R[I]={supported:undefined}});return(new jQuery.Deferred()).resolve(R).promise()};this.registerCustomResolver=function(o){if(typeof o.name!=="string"){jQuery.sap.log.error("NavTargetResolution: Custom Resolver must have name {string} member");return false}if(typeof o.isApplicable!=="function"){jQuery.sap.log.error("NavTargetResolution: Custom Resolver must have isApplicable member");return false}if(typeof o.resolveHashFragment!=="function"){jQuery.sap.log.error("NavTargetResolution: Custom Resolver must have \"resolveHashFragment\" member");return false}r.push(o);return true};if(S&&jQuery.isArray(S.resolveLocal)){l=S.resolveLocal.map(function(a){return a.linkId});this.registerCustomResolver({name:"localResolveNavigationResolver",cleanHash:function(h){if(h===""){return"#"}var a=sap.ushell.Container.getService("URLParsing").parseShellHash(h.substring(1));if(!a){return"#"}h="#"+a.semanticObject+"-"+a.action;return h},_getIndex:function(o){var h=this.cleanHash(o);return l.indexOf(h.substring(1))},isApplicable:function(o){return this._getIndex(o)>=0},resolveHashFragment:function(h){var d,i=this._getIndex(h),R,o,a,n;d=new jQuery.Deferred();R=JSON.parse(JSON.stringify(S.resolveLocal[i].resolveTo));o=sap.ushell.Container.getService("URLParsing").parseShellHash(h);if(o&&o.params){n=sap.ushell.Container.getService("URLParsing").paramsToString(o.params);a=R.url.indexOf('?')>=0;R.url=R.url+(a?"":"?")+n}d.resolve(R);return d.promise()}})}this.registerCustomResolver({name:"StandaloneLocalResolver",aElement:undefined,cleanHash:function(h){if(h===""){return undefined}var a=sap.ushell.Container.getService("URLParsing").parseShellHash(h.substring(1));if(!a){return undefined}h="#"+a.semanticObject+"-"+a.action;return h},isRunStandaloneHash:function(h){return typeof h==="string"&&h.indexOf("#Shell-runStandaloneApp")===0},isApplicable:function(h){h=this.cleanHash(h);if(!h){return false}return h==="#Test-url"||h==="#Test-local1"||h==="#Test-local2"||h==="#Test-config"||h==="#Test-clear"||this.isRunStandaloneHash(h)},parseUrl:function(u){if(!this.aElement){this.aElement=window.document.createElement('a')}this.aElement.href=u;return this.aElement},resolveHashFragment:function(h){var d=new jQuery.Deferred(),b=null,t=this,e,P,L,f,g,n,i,o,F=h,u;h=this.cleanHash(h);if(!h){return false}b={"#Test-config":{applicationType:"URL",url:"/sap/bc/ui5_ui5/ui2/ushell/test-resources/sap/ushell/demoapps/FioriSandboxConfigApp",additionalInformation:"SAPUI5.Component=sap.ushell.demoapps.FioriSandboxConfigApp"},"none":{applicationType:"URL",url:"",additionalInformation:""}};function j(K){if(localStorage){return localStorage[K]}return undefined}function k(o,K){var e={},a;for(a in o){if(o.hasOwnProperty(a)){if(a!==K){e[a]=o[a]}}}return e}function m(U){if(t.parseUrl(U).origin!==window.location.origin){return undefined}var a=t.parseUrl(U).pathname,x=jQuery.sap.getObject("runStandaloneAppFolderWhitelist",0,S),y;if(!x){return undefined}for(y in x){if(x.hasOwnProperty(y)){if(x[y]){if(y==="*"||a.indexOf(t.parseUrl(y).pathname)===0){return U}}}}return undefined}function q(K){return jQuery.sap.getUriParameters().get(K)}function v(a,K){return(a.params&&a.params[K]&&a.params[K][0])||q(K)}function w(K,V){if(localStorage){localStorage[K]=V}}if(b[h]){e=b[h]}else if(h==="#Test-clear"){w("sap.ushell.#Test-local1",undefined);w("sap.ushell.#Test-local2",undefined);jQuery.sap.log.info("NavTargetResolution: Local storage keys for #Test have been cleared");e=b["#Test-config"]}else if(this.isRunStandaloneHash(h)){L={applicationType:"URL"};P=sap.ushell.Container.getService("URLParsing").parseShellHash(F);f=(v(P,"sap-ushell-SAPUI5.Component")&&"SAPUI5.Component="+v(P,"sap-ushell-SAPUI5.Component"))||(v(P,"sap-ushell-additionalInformation"));u=v(P,"sap-ushell-url")||"";o=k(P.params,"sap-ushell-SAPUI5.Component");o=k(o,"sap-ushell-additionalInformation");o=k(o,"sap-ushell-url");n=sap.ushell.Container.getService("URLParsing").paramsToString(o);i=u.indexOf('?')>=0;if(n){u=u+(i?(((u[u.length-1]!=="&")&&"&")||""):"?")+n}L.url=m(u);L.additionalInformation=f;e=L}else if(h==="#Test-local1"||h==="#Test-local2"||h==="#Test-url"){e=j("sap.ushell."+h);if(!e||e==="undefined"){L={applicationType:"URL"}}else{L=JSON.parse(e)}if((window.location.hostname==="localhost")||S.allowTestUrlComponentConfig){g="sap-ushell-test-"+h.substring(6);f=q(g+"-additionalInformation");if(f){L.additionalInformation=f}u=q(g+"-url");if(u){L.url=m(u)}}if(!L.url){jQuery.sap.log.info("NavTargetResolution: No configured app for "+h+" found ( local storage or url params sap-ushell-test-local1-url  sap-ushell-test-local1-additionalInfo  not supplied? ");jQuery.sap.log.info("NavTargetResolution: Defaulting to config app ...\n");d.reject("URL is not resolvable");return d.promise()}L.url=m(L.url);e=L}if(e.url===undefined){d.reject("URL is not resolvable");return d.promise()}jQuery.sap.log.info("NavTargetResolution: As URL:  http://localhost:8080/sap/bc/ui5_ui5/ui2/ushell/shells/abap/FioriLaunchpad.html?sap-ushell-test-local1-url="+encodeURIComponent((e&&e.url)||"")+"&sap-ushell-test-local1-additionalInformation="+encodeURIComponent((e&&e.additionalInfo)||"")+"#Test-local1");jQuery.sap.log.info("NavTargetResolution: Resolving "+h+" to "+JSON.stringify(e));d.resolve(e);return d.promise()}});this.getCurrentResolution=function(){return C}}}())};if(!jQuery.sap.isDeclared('sap.ushell.services.PageBuilding')){(function(){"use strict";jQuery.sap.declare("sap.ushell.services.PageBuilding");jQuery.sap.require('sap.ui2.srvc.factory');jQuery.sap.require('sap.ui2.srvc.page');sap.ushell.services.PageBuilding=function(a,c){this.getFactory=function(){return a.getFactory()};this.getPage=function(p){return a.getFactory().createPage(p)};this.getPageSet=function(i){var d=new jQuery.Deferred();a.getFactory().createPageSet(i,d.resolve.bind(d),d.reject.bind(d));return d.promise()}}}())};if(!jQuery.sap.isDeclared('sap.ushell.services.Search')){(function(){"use strict";jQuery.sap.declare("sap.ushell.services.Search");sap.ushell.services.Search=function(a,c){this.init.apply(this,arguments)};sap.ushell.services.Search.prototype={init:function(a,c){this.oAdapter=a;this.oContainerInterface=c;this.oLpdService=sap.ushell.Container.getService("LaunchPage")},isSearchAvailable:function(){return this.oAdapter.isSearchAvailable()},getSina:function(){return this.oAdapter.getSina()},_getCatalogTiles:function(){var s=this;if(s.allTilesDeferred){return s.allTilesDeferred}var c=[];s.allTilesDeferred=s.oLpdService.getCatalogs().then(function(a){var d=[];for(var i=0;i<a.length;i++){d.push(s.oLpdService.getCatalogTiles(a[i]))}return jQuery.when.apply(jQuery,d).then(function(){var t=arguments;for(var i=0;i<t.length;i++){var T=t[i];for(var j=0;j<T.length;j++){try{var o=T[j],b=s.oLpdService.getCatalogTileView(o),k=s.oLpdService.getCatalogTileKeywords(o),f=s.oLpdService.getCatalogTileTargetURL(o),g=s.oLpdService.getCatalogTilePreviewTitle(o)||s.oLpdService.getCatalogTileTitle(o),S=s.oLpdService.getCatalogTileSize(o),I=s.oLpdService.getCatalogTilePreviewIcon(o)||"sap-icon://business-objects-experience";c.push({tile:o,keywords:k,url:f,title:g,icon:I,size:S});b.destroy()}catch(e){jQuery.sap.log.error(e)}}}c=s._removeDuplicateTiles(c);return c})});return s.allTilesDeferred},_removeDuplicateTiles:function(t){var I={},u=[];for(var i=0;i<t.length;++i){var T=t[i];if(!T.url){continue}var f=new RegExp('DisplayFactSheet','i');if(f.test(T.url)){continue}if(I[T.url]===undefined){I[T.url]=T;u.push(T)}}return u},_searchTiles:function(p){var s=p.searchTerm;var c=p.aCatalogTiles;var t=p.top||10;var S=p.searchInKeywords||false;var f=[],T,l;s=s.replace(/([.+?^=!:${}()|\[\]\/\\])/g,"\\$1");s=s.replace(/\*/g,".*");s=new RegExp('\\b'+s,'i');var a=function(T){if(f.length<t){l=T.title.replace(s,"<b>$&</b>");f.push(T)}};for(var j=0;j<c.length;j++){T=c[j];if(s.test(T.title)){a(T);continue}if(S){for(var i=0,b=T.keywords.length;i<b;i++){var k=T.keywords[i];if(s.test(k)){a(T);break}}}}return f},_makeSInAResultSet:function(f,o){return{totalResults:f.length,searchTerm:o,getElements:function(){return f}}},queryApplications:function(p){var s=this,o=p.searchTerm;return this._getCatalogTiles().then(function(c){p.aCatalogTiles=c;var f=s._searchTiles(p);var S=s._makeSInAResultSet(f,o);return S})},queryApplicationsByTarget:function(s,r){this._getCatalogTiles().done(function(c){var R=[];for(var j=0,l=s&&s.length||0;j<l;j++){var S=s[j],u=sap.ushell.Container.getService("URLParsing");for(var i=0;i<c.length;i++){var t=u.parseShellHash(c[i].url);if(t&&(t.semanticObject===S.semanticObject)&&(t.action===S.action)){R.push(c[i]);break}}}r(R)})}}}())};if(!jQuery.sap.isDeclared('sap.ushell.services.ShellNavigation')){(function(){"use strict";jQuery.sap.require('sap.ui.thirdparty.signals');jQuery.sap.require('sap.ui.thirdparty.hasher');jQuery.sap.require('sap.ui.core.routing.HashChanger');jQuery.sap.declare("sap.ushell.services.ShellNavigation");sap.ui.core.routing.HashChanger.extend("sap.ushell.services.ShellNavigationHashChanger",{constructor:function(){sap.ui.core.routing.HashChanger.apply(this);this.priv_initializedByShellNav=false;this.oURLShortening=sap.ushell.Container.getService("URLShortening");this.privfnShellCallback=null;this.privappHashPrefix="&/";this.privhashPrefix="#";this.privgetCurrentShellHash=function(){var r=this.privsplitHash(hasher.getHash());return{hash:"#"+((r&&r.shellPart)?r.shellPart:"")}};this.privconstructHash=function(a){var o=this.privgetCurrentShellHash();o.hash=o.hash+a;return o};this.privconstructShellHash=function(s){return sap.ushell.Container.getService("URLParsing").constructShellHash(s)};this.privsplitHash=function(h){var s,a;if(h===undefined||h===null||h===""){return{shellPart:null,appSpecificRoute:null}}s=sap.ushell.Container.getService("URLParsing").parseShellHash(h);if(s===undefined||s===null){return null}a=s.appSpecificRoute;s.appSpecificRoute=undefined;return{shellPart:(s&&this.privstripLeadingHash(this.privconstructShellHash(s)))||null,appSpecificRoute:(s&&a)||null}};this.privsetHash=function(f,a,w){hasher.prependHash="";f=this.privstripLeadingHash(f);a=a||"";if(w===undefined){w=true}if(w){this.fireEvent("hashSet",{sHash:a});hasher.setHash(f)}else{this.fireEvent("hashReplaced",{sHash:a});hasher.replaceHash(f)}};this.privstripLeadingHash=function(h){if(h[0]==='#'){return h.substring(1)}return h};this.hrefForExternal=function(a,v){var t;if(v===true){t=this.privhrefForExternalNoEnc(a);return{hash:encodeURI(t.hash),params:t.params,skippedParams:t.skippedParams}}return encodeURI(this.privhrefForExternalNoEnc(a).hash)};this.privhrefForExternalNoEnc=function(a,v){var r;if(a===undefined){return this.privgetCurrentShellHash()}if(a&&a.target&&(typeof a.target.semanticObject==="string"||typeof a.target.shellHash==="string")){r="#"+this.privconstructShellHash(a);return this.oURLShortening.checkHashLength(r)}return this.privgetCurrentShellHash()};this.privgetAppHash=function(a){var A,s;if(a&&a.target&&(typeof a.target.shellHash==="string")){s=sap.ushell.Container.getService("URLParsing").parseShellHash(a.target.shellHash);A=s&&s.appSpecificRoute;A=A&&A.substring(2)}return A};this.hrefForAppSpecificHash=function(a){return encodeURI(this.privconstructHash(this.privappHashPrefix+a).hash)};this.toExternal=function(a){var h=this.privhrefForExternalNoEnc(a).hash,A=this.privgetAppHash(a);this.privsetHash(h,A)};this.toAppHash=function(a,w){var h=this.privconstructHash(this.privappHashPrefix+a).hash;this.privsetHash(h,a,w)}}});sap.ushell.services.ShellNavigationHashChanger.prototype.initShellNavigation=function(s){if(this.priv_initializedByShellNav){jQuery.sap.log.info("initShellNavigation already called on this ShellNavigationHashChanger instance.");return false}this.privfnShellCallback=s;hasher.changed.add(this.treatHashChanged,this);if(!hasher.isActive()){hasher.initialized.addOnce(this.treatHashChanged,this);hasher.init()}else{this.treatHashChanged(hasher.getHash())}this.priv_initializedByShellNav=true;return true};sap.ushell.services.ShellNavigationHashChanger.prototype.init=function(){if(this.priv_initialized){jQuery.sap.log.info("init already called on this ShellNavigationHashChanger instance.");return false}var n=this.privsplitHash(hasher.getHash()),a=n&&(n.appSpecificRoute||"  ").substring(2);this.fireEvent("hashChanged",{newHash:a});this.priv_initialized=true;return true};sap.ushell.services.ShellNavigationHashChanger.prototype.treatHashChanged=function(n,o){var a,O,N,b,e;n=this.oURLShortening.expandHash(n);o=this.oURLShortening.expandHash(o);N=this.privsplitHash(n);b=this.privsplitHash(o);if(!N){e=new Error("Illegal new hash - cannot be parsed: '"+n+"'");this.fireEvent("shellHashChanged",{newShellHash:n,newAppSpecificRoute:null,oldShellHash:(b?b.shellPart:o),error:e});this.privfnShellCallback(n,null,(b?b.shellPart:o),e);return}if(!b){b={shellPart:o,appSpecificRoute:null}}if(N.shellPart===b.shellPart&&(o!==undefined)){a=(N.appSpecificRoute||"  ").substring(2);O=(b.appSpecificRoute||"  ").substring(2);this.fireEvent("hashChanged",{newHash:a,oldHash:O});return}this.fireEvent("shellHashChanged",{newShellHash:N.shellPart,newAppSpecificRoute:N.appSpecificRoute,oldShellHash:b.shellPart});this.privfnShellCallback(N.shellPart,N.appSpecificRoute,b.shellPart)};sap.ushell.services.ShellNavigationHashChanger.prototype.setHash=function(h){this.toAppHash(h,true)};sap.ushell.services.ShellNavigationHashChanger.prototype.replaceHash=function(h){this.toAppHash(h,false)};sap.ushell.services.ShellNavigationHashChanger.prototype.getHash=function(){return this.getAppHash()};sap.ushell.services.ShellNavigationHashChanger.prototype.getAppHash=function(){var n=this.privsplitHash(hasher.getHash()),a=n&&(n.appSpecificRoute||"  ").substring(2);return a};sap.ushell.services.ShellNavigationHashChanger.prototype.destroy=function(){hasher.changed.remove(this.treatHashChanged,this);sap.ui.core.routing.HashChanger.prototype.destroy.apply(this,arguments)};function S(){this.hashChanger=new sap.ushell.services.ShellNavigationHashChanger();this.hrefForExternal=function(a,v){return this.hashChanger.hrefForExternal(a,v)};this.hrefForAppSpecificHash=function(a){return this.hashChanger.hrefForAppSpecificHash(a)};this.toExternal=function(a){this.hashChanger.toExternal(a)};this.toAppHash=function(a,w){this.hashChanger.toAppHash(a,w)};this.init=function(s){hasher.prependHash="";sap.ui.core.routing.HashChanger.replaceHashChanger(this.hashChanger);this.hashChanger.initShellNavigation(s);return this}}sap.ushell.services.ShellNavigation=S;sap.ushell.services.ShellNavigation.hasNoAdapter=true}())};if(!jQuery.sap.isDeclared('sap.ushell.services.SupportTicket')){(function(){"use strict";jQuery.sap.declare("sap.ushell.services.SupportTicket");sap.ushell.services.SupportTicket=function(a,c,p,s){var S=(s&&s.config)||{};this.createTicket=function(o){return a.createTicket(o)};this.isEnabled=function(){return S.enabled===true}}}())};if(!jQuery.sap.isDeclared('sap.ushell.services.URLParsing')){(function(){"use strict";jQuery.sap.declare("sap.ushell.services.URLParsing");sap.ushell.services.URLParsing=function(){var r=/^(([A-Za-z0-9_\/]+)-([A-Za-z0-9_\/\-]+)(~([A-Z0-9a-z=+\/]+))?)?([?]([^&]|(&[^\/]))*&?)?$/;this.getShellHash=function(u){var a=/[^#]*#(([^&]|&[^\/])*)(&\/.*)?/,m=a.exec(u);if(m){return m[1]}return undefined};this.getHash=function(u){var a=/[^#]#(.*)/,m=a.exec(u);if(m){return m[1]}return undefined};this.parseParameters=function(p){if(!p){return{}}var P=jQuery.sap.getUriParameters(p).mParams;if(!P){return{}}else{if(this.extractSearchTerm(p)!==""){P.searchTerm[0]=this.extractSearchTerm(p)}return P}};this.extractSearchTerm=function(s){var a=s.indexOf("searchTerm=")+11;var e=s.indexOf("&dataSource={",a);if(a!=-1&&e!=-1&&e>a){return s.substring(a,e)}else{return""}};this.paramsToString=function(p){var f,a,k,i,l,s="";f="";a=null;l=[];for(a in p){if(p.hasOwnProperty(a)){l.push(a)}}l.sort();for(k=0;k<l.length;k=k+1){a=l[k];if(jQuery.isArray(p[a])){for(i=0;i<p[a].length;i=i+1){s+=f+encodeURIComponent(a)+"="+encodeURIComponent(p[a][i]);f="&"}}else{s+=f+encodeURIComponent(a)+"="+encodeURIComponent(p[a]);f="&"}}return s};this.parseShellHash=function(h){var c=r,s,S,A,C,p,m,d,e,a;if(!h){return undefined}s=this.splitHash(h);m=c.exec(s.shellPart);if(m){S=m[2];A=m[3];C=m[5];p=m[6];d=this.parseParameters(p);return{semanticObject:S,action:A,contextRaw:C,params:d,appSpecificRoute:s.appSpecificRoute}}if(s.appSpecificRoute){return{semanticObject:undefined,action:undefined,contextRaw:undefined,params:{},appSpecificRoute:s.appSpecificRoute}}return undefined};this.privstripLeadingHash=function(h){if(h[0]==='#'){return h.substring(1)}return h};this.splitHash=function(h){var a=/^(?:#|)([\S\s]*?)(&\/[\S\s]*)?$/,m,s,A;if(h===undefined||h===null||h===""){return{}}m=a.exec(h);s=m[1];if(s!==""&&!r.test(s)){return{}}A=m[2];if(s||A){return{shellPart:s,appSpecificRoute:A}}return{}};function b(u,a){if(a){return u+a}return u}this.constructShellHash=function(s){var c,d,i=null,k,l=[],f="?",a=null;if(!s){return""}if(!s.target){s.target={};s.target.semanticObject=s.semanticObject;s.target.action=s.action;s.target.contextRaw=s.contextRaw}if(s.target.shellHash||s.target.shellHash===""){d=this.privstripLeadingHash(s.target.shellHash);return b(d,s.appSpecificRoute)}if(s.target.semanticObject&&s.target.action){c=s.target.semanticObject+"-"+s.target.action}else{return b("",s.appSpecificRoute)}if(s.target.contextRaw){c+="~"+s.target.contextRaw}f="?";a=null;l=[];for(a in s.params){if(s.params.hasOwnProperty(a)){l.push(a)}}l.sort();for(k=0;k<l.length;k=k+1){a=l[k];if(jQuery.isArray(s.params[a])){if(s.params[a].length>1){jQuery.sap.log.error("Array startup parameters violate the designed intent of the Unified Shell Intent, use only single-valued parameters!")}for(i=0;i<s.params[a].length;i=i+1){c+=f+encodeURIComponent(a)+"="+encodeURIComponent(s.params[a][i]);f="&"}}else{c+=f+encodeURIComponent(a)+"="+encodeURIComponent(s.params[a]);f="&"}}return b(c,s.appSpecificRoute)};this.addSystemToServiceUrl=function(s,S){var R;if(!s||s.indexOf('/')!==0||s.indexOf('//')===0){throw new sap.ui2.srvc.Error("Invalid URL: "+s,"sap.ushell.services.URLParsing")}R=sap.ushell.Container.getService("NavTargetResolution").getCurrentResolution();if(!S&&R&&R.url){S=jQuery.sap.getUriParameters(R.url).get("sap-system")}if(/^[^?]*(;o=([\/;?]|$))/.test(s)){s=s.replace(/;o=([\/;?]|$)/,(S?";o="+S:"")+"$1")}else if(!/^[^?]*;o=/.test(s)&&S){s=s.replace(/(\/[^?]*?)(\/$|$|(\/?\?.*))/,"$1;o="+S+"$2")}sap.ushell.Container.addRemoteSystemForServiceUrl(s);return s}};sap.ushell.services.URLParsing.hasNoAdapter=true}())};if(!jQuery.sap.isDeclared('sap.ushell.services.URLShortening')){(function(){"use strict";jQuery.sap.declare("sap.ushell.services.URLShortening");jQuery.sap.require('jquery.sap.storage');sap.ushell.services.URLShortening=function(){var s=this;this.ABBREV_PARAM_NAME="sap-ushell-appparams";this.URL_LENGTH_LIMIT=1023;this.URL_PARAMS_LENGTH_LIMIT=512;this.compactHash=function(u){var S,r,p,U,R;if(typeof u!=="string"||u.length<s.URL_LENGTH_LIMIT){return u}U=sap.ushell.Container.getService("URLParsing");S=U.parseShellHash(u);p='';if(u.charAt(0)==='#'){p='#'}if(S&&S.params&&S.params[s.ABBREV_PARAM_NAME]){return u}r=this._splitParameters(S.params);if(!r.key){return u}R=U.paramsToString(r.tailParams);this._storeValue(r.key,R);return p+U.constructShellHash({target:{semanticObject:S.semanticObject,action:S.action,contextRaw:S.contextRaw},params:r.headParams,appSpecificRoute:S.appSpecificRoute})};this.checkHashLength=function(u){var S,r,p,U,R;if(typeof u!=="string"||u.length<s.URL_LENGTH_LIMIT){return{hash:u}}U=sap.ushell.Container.getService("URLParsing");S=U.parseShellHash(u);p='';if(u.charAt(0)==='#'){p='#'}r=this._splitParameters(S.params);if(r.key){jQuery.sap.log.error("Application startup parameter length exceeds "+s.URL_PARAMS_LENGTH_LIMIT+" characters, truncation occured!");delete r.headParams[this.ABBREV_PARAM_NAME];return{hash:p+U.constructShellHash({target:{semanticObject:S.semanticObject,action:S.action,contextRaw:S.contextRaw},params:r.headParams,appSpecificRoute:S.appSpecificRoute}),params:r.headParams,skippedParams:r.tailParams}}jQuery.sap.log.error("URL exceeds dangerous limits, arbitrary shortening or worse may occur!");return u};this._splitParameters=function(p){var a,i,k,b,h={},t={},c=false,o,d,e=0,f,l=[];for(a in p){if(Object.prototype.hasOwnProperty.call(p,a)){l.push(a)}}l.sort();for(k=0;k<l.length;k=k+1){a=l[k];o=p[a];if(o.length>1){jQuery.sap.log.error("Array startup parameters violate the designed intent of the Unified Shell Intent, use only single-valued parameters!")}for(i=0;i<o.length;i=i+1){d=p[a][i];f=a.length+d.length;if(f+e>this.URL_PARAMS_LENGTH_LIMIT){if(t[a]){t[a].push(d)}else{t[a]=[d]}c=true}else{if(h[a]){h[a].push(d)}else{h[a]=[d]}}e=e+f+1}}if(c){b=this._generateKey();h[this.ABBREV_PARAM_NAME]=b}return{key:b,tailParams:t,headParams:h}};this._generateKey=function(){return jQuery.sap.uid()};this.expandHash=function(u){var a,v,p,b;if(typeof u!=="string"){return u}a=sap.ushell.Container.getService("URLParsing").parseShellHash(u);if(!a||(a&&a.params&&!a.params[this.ABBREV_PARAM_NAME])){return u}p='';if(u.charAt(0)==='#'){p='#'}v=this._retrieveValue(a.params[this.ABBREV_PARAM_NAME]&&a.params[this.ABBREV_PARAM_NAME][0]);if(!v){return u}b=this._blendParameters(a.params,v);return p+sap.ushell.Container.getService("URLParsing").constructShellHash({target:{semanticObject:a.semanticObject,action:a.action,contextRaw:a.contextRaw},params:b,appSpecificRoute:a.appSpecificRoute})};this._retrieveValue=function(k){return jQuery.sap.storage(jQuery.sap.storage.Type.session).get(k)};this._storeValue=function(k,v){jQuery.sap.storage(jQuery.sap.storage.Type.session).put(k,v)};this._blendParameters=function(p,v){var n=sap.ushell.Container.getService("URLParsing").parseParameters("?"+v),a;delete p[this.ABBREV_PARAM_NAME];for(a in n){if(Object.prototype.hasOwnProperty.call(n,a)){if(p[a]){p[a]=p[a].concat(n[a])}else{p[a]=n[a]}}}return p}};sap.ushell.services.URLShortening.hasNoAdapter=true}())};if(!jQuery.sap.isDeclared('sap.ushell.services.UserInfo')){(function(){"use strict";jQuery.sap.declare("sap.ushell.services.UserInfo");sap.ushell.services.UserInfo=function(a,c){this.getId=function(){return sap.ushell.Container.getUser().getId()};this.getUser=function(){return sap.ushell.Container.getUser()};this.getThemeList=function(){if(this.getUser().isSetThemePermitted()===false){jQuery.sap.log.error("getThemeList failed");throw true}var p=a.getThemeList();p.fail(function(){jQuery.sap.log.error("getThemeList failed")});return p};this.updateUserPreferences=function(){var p=a.updateUserPreferences(sap.ushell.Container.getUser());p.fail(function(){jQuery.sap.log.error("updateAttributes: ")});return p}}}())};if(!jQuery.sap.isDeclared('sap.ushell.touchSupport')){;(function(){"use strict";jQuery.sap.declare("sap.ushell.touchSupport");sap.ushell.touchSupport=function(c){if(!c||!c.rootSelector||!c.containerSelector||!c.draggableSelector){throw new Error("No configuration object to initialize User Interaction module.")}this.animationDuration;this.captureStart;this.captureMove;this.captureEnd;this.clickEvent;this.clickHandler;this.clone;this.cloneClass;this.container;this.contextMenuEvent;this.debug;this.dragAndScrollCallback;this.dragAndScrollDuration;this.dragAndScrollTimer;this.draggable;this.placeHolderClass;this.draggableSelector;this.draggableSelectorExclude;this.doubleTapCallback;this.doubleTapDelay;this.element;this.endEvent;this.endX;this.endY;this.isTouch;this.lastElement;this.lastTapTime;this.log;this.mode;this.moveEvent;this.moveTolerance;this.moveX;this.moveY;this.noop;this.preventClickFlag;this.preventClickTimeoutId;this.startEvent;this.startX;this.startY;this.switchModeDelay;this.tapsNumber;this.timer;this.touchCancelEvent;this.touchDragCallback;this.touchEndCallback;this.touchStartCallback;this.wrapper;this.init=function(c){var i;this.startX=-1;this.startY=-1;this.moveX=-1;this.moveY=-1;this.endX=-1;this.endY=-1;this.container=document.querySelector(c.containerSelector);this.switchModeDelay=c.switchModeDelay||1500;this.dragAndScrollDuration=c.dragAndScrollDuration||230;this.moveTolerance=c.moveTolerance===0?0:c.moveTolerance||10;this.draggableSelector=c.draggableSelector;this.draggableSelectorExclude=c.draggableSelectorExclude;this.mode='normal';this.debug=c.debug||false;this.root=document.querySelector(c.rootSelector);this.animationDuration=c.animationDuration||330;this.noop=function(){};this.tapsNumber=0;this.lastTapTime=0;this.log=this.debug?this.logToConsole:this.noop;this.placeHolderClass=c.placeHolderClass||"";this.cloneClass=c.cloneClass||"";this.wrapper=c.wrapperSelector?document.querySelector(c.wrapperSelector):this.container.parentNode;this.touchStartCallback=typeof c.touchStartCallback==='function'?c.touchStartCallback:this.noop;this.doubleTapCallback=typeof c.doubleTapCallback==='function'?c.doubleTapCallback:this.noop;this.touchEndCallback=typeof c.touchEndCallback==='function'?c.touchEndCallback:this.noop;this.touchDragCallback=typeof c.touchDragCallback==='function'?c.touchDragCallback:this.noop;this.dragAndScrollCallback=typeof c.dragAndScrollCallback==='function'?c.dragAndScrollCallback:this.noop;this.doubleTapDelay=c.doubleTapDelay||500;if(i=('ontouchstart'in window)){this.startEvent='touchstart';this.moveEvent='touchmove';this.endEvent='touchend';this.contextMenuEvent='contextmenu';this.touchCancelEvent='touchcancel';this.clickEvent='click';this.captureStart=this.captureTouchStart;this.captureMove=this.captureTouchMove;this.captureEnd=this.captureTouchEnd}else{throw new Error('Not supported!')}};this.forEach=function(s,a){return Array.prototype.forEach.call(s,a)};this.indexOf=function(s,i){return Array.prototype.indexOf.call(s,i)};this.insertBefore=function(s,i,r){var a,b,d;d=Array.prototype.splice;a=this.indexOf(s,i);b=this.indexOf(s,r);d.call(s,b-(a<b?1:0),0,d.call(s,a,1)[0])};this.logToConsole=function(){console.log.apply(console,arguments)};this.getDraggableElement=function(t){var a=t.target;var e=undefined;this.draggable=jQuery(this.draggableSelector,this.container);while(typeof e==='undefined'&&a!==this.root){if(this.indexOf(this.draggable,a)>=0&&jQuery(a).not(this.draggableSelectorExclude).length>0){e=a}a=a.parentNode}return e};this.captureTouchStart=function(e){var t;this.endHandler(e);this.element=undefined;if(e.touches.length===1){t=e.touches[0];this.element=this.getDraggableElement(t);this.startX=t.pageX;this.startY=t.pageY;this.lastMoveX=0;this.lastMoveY=0;if(this.lastTapTime&&this.lastElement&&this.element&&(this.lastElement===this.element)&&Math.abs(Date.now()-this.lastTapTime)<this.doubleTapDelay){this.lastTapTime=0;this.tapsNumber=2}else{this.lastTapTime=Date.now();this.tapsNumber=1;this.lastElement=this.element}}this.log('captureTouchStart('+this.startX+', '+this.startY+')')};this.startHandler=function(e){this.log('startHandler');clearTimeout(this.timer);delete this.timer;this.captureStart(e);if(this.element){this.touchStartCallback(e,this.element);if(this.tapsNumber===2){this.mode='double-tap';return}this.timer=setTimeout(function(){this.log('mode switched to drag');this.mode='drag';this.createClone()}.bind(this),this.switchModeDelay)}}.bind(this);this.captureTouchMove=function(e){var t;if(e.touches.length===1){t=e.touches[0];this.moveX=t.pageX;this.moveY=t.pageY}this.log('captureTouchMove('+this.moveX+', '+this.moveY+')')};this.moveHandler=function(e){this.log('moveHandler');this.captureMove(e);switch(this.mode){case'normal':if(Math.abs(this.startX-this.moveX)>this.moveTolerance||Math.abs(this.startY-this.moveY)>this.moveTolerance){this.log('-> normal');this.mode='scroll';clearTimeout(this.timer);delete this.timer}break;case'scroll':this.log('-> scroll');break;case'drag':e.preventDefault();this.log('-> drag');this.mode='drag-and-scroll';this.translateClone();this.dragAndScroll();this.touchDragCallback(e,this.element);break;case'drag-and-scroll':e.stopPropagation();e.preventDefault();this.log('-> drag-and-scroll');this.translateClone();this.dragAndScroll();this.moveDraggable();this.dragAndScrollCallback(e,this.clone);break}}.bind(this);this.captureTouchEnd=function(e){var t;if(e.changedTouches.length===1){t=e.changedTouches[0];this.endX=t.pageX;this.endY=t.pageY}this.log('captureTouchEnd('+this.endX+', '+this.endY+')')};this.contextMenuHandler=function(e){e.preventDefault()}.bind(this);this.clickHandler=function(e){if(this.preventClickFlag){this.preventClickFlag=false;e.preventDefault();e.stopPropagation();e.stopImmediatePropagation();clearTimeout(this.preventClickTimeoutId)}}.bind(this);this.preventClick=function(){this.preventClickFlag=true;this.preventClickTimeoutId=setTimeout(function(){this.preventClickFlag=false},100)};this.endHandler=function(e){this.log('endHandler');this.captureEnd(e);switch(this.mode){case'normal':this.log('-> normal');break;case'scroll':this.log('-> scroll');break;case'drag':this.log('-> drag');this.removeClone();this.touchEndCallback(e,this.element);this.preventClick();break;case'drag-and-scroll':this.log('-> drag-and-scroll');this.removeClone();this.touchEndCallback(e,this.element);this.preventClick();e.stopPropagation();e.preventDefault();break;case'double-tap':this.log('-> double-tap');this.doubleTapCallback(e,this.element);break}clearTimeout(this.timer);delete this.timer;this.lastMoveX=0;this.lastMoveY=0;this.mode='normal'}.bind(this);this.createClone=function(){var s,r;r=this.element.getBoundingClientRect();this.clone=this.element.cloneNode(true);this.clone.className+=(' '+this.cloneClass);this.element.className+=(' '+this.placeHolderClass);s=this.clone.style;s.position='fixed';s.display='block';s.top=r.top+'px';s.left=r.left+'px';s.width=r.width+'px';s.zIndex='100';s.webkitTransition='-webkit-transform 0ms cubic-bezier(0.33, 0.66, 0.66, 1)';s.transition='-webkit-transform 0ms cubic-bezier(0.33, 0.66, 0.66, 1)';s.webkitTransform='translate3d(0px, 0px, 0px) ';this.root.appendChild(this.clone);this.log('createClone')};this.removeClone=function(){this.element.className=this.element.className.split(' '+this.placeHolderClass).join('');this.clone.parentElement.removeChild(this.clone);this.clone=null;this.log('removeClone')};this.translateClone=function(){var d,a;d=this.moveX-this.startX;a=this.moveY-this.startY;this.clone.style.webkitTransform='translate3d('+d+'px, '+a+'px, 0px)';this.log('translateClone ('+d+', '+a+')')};this.dragAndScroll=function(){var d,a,s,t;function b(){s.webkitTransition='-webkit-transform '+a+'ms linear';s.transition='-webkit-transform '+a+'ms linear';s.webkitTransform='translate(0px, '+d+'px) scale(1) translateZ(0px)'}function e(){s.webkitTransition='';s.transition='';s.webkitTransform='';t.wrapper.scrollTop-=d}function g(){var r,h;if(t.clone){r=t.clone.getBoundingClientRect();h=t.wrapper.offsetTop-r.top;if(h>0){return h}h=t.wrapper.offsetTop+t.wrapper.offsetHeight-(r.top+t.clone.offsetHeight);if(h<0){return h}}return 0}function i(){if(d<0){return t.wrapper.getBoundingClientRect().top-(t.container.getBoundingClientRect().top+t.container.offsetHeight)+t.wrapper.offsetHeight<0}return t.container.getBoundingClientRect().top-(t.wrapper.getBoundingClientRect().top+t.container.offsetTop)<0}function f(){b();t.dragAndScrollTimer=setTimeout(function(){e();t.dragAndScrollTimer=undefined;if((d=g())!==0&&i()){f()}},a)}t=this;d=g();if(d!==0&&!this.dragAndScrollTimer&&i()){a=this.dragAndScrollDuration;s=this.container.style;f()}this.log('dragAndScroll ('+d+')')};this.moveDraggable=function(){var e,h,a,i,b,r,s;this.forEach(this.draggable,function(d,f){if(!h){r=d.getBoundingClientRect();s=window.getComputedStyle(d);i=!(r.right<this.moveX||r.left>this.moveX);b=!(r.bottom<this.moveY||r.top>this.moveY);if(i&&b){h=d;a=f}}}.bind(this));if(h&&this.element!==h){e=this.indexOf(this.draggable,this.element);if(Math.abs(this.lastMoveX-this.moveX)>=this.moveTolerance&&Math.abs(this.lastMoveY-this.moveY)>=this.moveTolerance){if(a<e){h.parentNode.insertBefore(this.element,h);this.insertBefore(this.draggable,this.element,h)}else if(a>e){h.parentNode.insertBefore(this.element,h.nextSibling);this.insertBefore(this.draggable,this.element,this.draggable[a+1])}this.lastMoveX=this.moveX;this.lastMoveY=this.moveY}}this.log('moveDraggable')};this.enable=function(){this.log('enable');this.root.addEventListener(this.startEvent,this.startHandler,false);this.root.addEventListener(this.moveEvent,this.moveHandler,true);this.root.addEventListener(this.endEvent,this.endHandler,false);this.root.addEventListener(this.contextMenuEvent,this.contextMenuHandler,false);this.root.addEventListener(this.clickEvent,this.clickHandler,true);this.root.addEventListener(this.touchCancelEvent,this.endHandler,false);return this};this.disable=function(){this.log('disable');this.root.removeEventListener(this.startEvent,this.startHandler,false);this.root.removeEventListener(this.moveEvent,this.moveHandler,true);this.root.removeEventListener(this.endEvent,this.endHandler,false);this.root.removeEventListener(this.contextMenuEvent,this.contextMenuHandler,false);this.root.removeEventListener(this.clickEvent,this.clickHandler,true);this.root.removeEventListener(this.touchCancelEvent,this.endHandler,false);return this};this.init(c)}})()};if(!jQuery.sap.isDeclared('sap.ushell.ui.footerbar.AboutButton')){
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5) (c) Copyright 2009-2013 SAP AG. All rights reserved
 */
jQuery.sap.declare("sap.ushell.ui.footerbar.AboutButton");jQuery.sap.require('sap.m.Button');sap.m.Button.extend("sap.ushell.ui.footerbar.AboutButton",{metadata:{library:"sap.ushell"}});
// Copyright (c) 2013 SAP AG, All Rights Reserved
(function(){"use strict";jQuery.sap.require('sap.ui.layout.form.SimpleForm');jQuery.sap.require('sap.m.ObjectHeader');jQuery.sap.require('sap.m.VBox');jQuery.sap.require('sap.m.Dialog');jQuery.sap.require('sap.m.Button');jQuery.sap.declare("sap.ushell.ui.footerbar.AboutButton");sap.ushell.ui.footerbar.AboutButton.prototype.init=function(){this.setIcon('sap-icon://hint');this.setWidth('100%');this.setText(sap.ushell.resources.i18n.getText("about"));this.setTooltip(sap.ushell.resources.i18n.getText("about"));this.attachPress(this.showAboutDialog);if(sap.m.Button.prototype.init){sap.m.Button.prototype.init.apply(this,arguments)}};sap.ushell.ui.footerbar.AboutButton.prototype.showAboutDialog=function(){jQuery.sap.require("sap.ushell.services.AppConfiguration");var t=sap.ushell.resources.i18n,m=sap.ushell.services.AppConfiguration.getMetadata(),s=new sap.ui.layout.form.SimpleForm({id:'aboutDialogFormID',editable:false,content:[new sap.m.Label({text:t.getText("technicalName")}),new sap.m.Text({text:m.libraryName||''}),new sap.m.Label({text:t.getText("fioriVersionFld")}),new sap.m.Text({text:m.version||''}),new sap.m.Label({text:t.getText("sapui5Fld")}),new sap.m.Text({text:(sap.ui.version||"")+(' ('+(sap.ui.buildinfo.buildtime||"")+')')||''}),new sap.m.Label({text:t.getText("userAgentFld")}),new sap.m.Text({text:navigator.userAgent||''}),new sap.m.Label({text:''})]}),h=new sap.m.ObjectHeader({title:m.title,icon:m.icon}).addStyleClass('sapUshellAboutDialogHeader'),d,v,o=new sap.m.Button({text:t.getText("okBtn"),press:function(){d.close()}});if(jQuery.isEmptyObject(m)||!m.icon){v=new sap.m.VBox({items:[s]})}else{v=new sap.m.VBox({items:[h,s]})}d=new sap.m.Dialog({id:"aboutContainerDialogID",title:t.getText("about"),contentWidth:"250px",horizontalScrolling:false,leftButton:o,afterClose:function(){d.destroy()}});d.addContent(v);d.open()}}())};if(!jQuery.sap.isDeclared('sap.ushell.ui.footerbar.AboutButtonRenderer')){(function(){"use strict";jQuery.sap.declare("sap.ushell.ui.footerbar.AboutButtonRenderer");jQuery.sap.require('sap.ui.core.Renderer');jQuery.sap.require('sap.m.ButtonRenderer');sap.ushell.ui.footerbar.AboutButtonRenderer=sap.ui.core.Renderer.extend(sap.m.ButtonRenderer)}())};if(!jQuery.sap.isDeclared('sap.ushell.ui.footerbar.AddBookmarkButton')){
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5) (c) Copyright 2009-2013 SAP AG. All rights reserved
 */
jQuery.sap.declare("sap.ushell.ui.footerbar.AddBookmarkButton");jQuery.sap.require('sap.m.Button');sap.m.Button.extend("sap.ushell.ui.footerbar.AddBookmarkButton",{metadata:{library:"sap.ushell",properties:{"beforePressHandler":{type:"any",group:"Misc",defaultValue:null},"afterPressHandler":{type:"any",group:"Misc",defaultValue:null},"appData":{type:"object",group:"Misc",defaultValue:null}}}});
// Copyright (c) 2013 SAP AG, All Rights Reserved
(function(){"use strict";jQuery.sap.require('sap.ui.layout.form.SimpleForm');jQuery.sap.require('sap.m.Label');jQuery.sap.require('sap.m.Input');jQuery.sap.require('sap.m.Dialog');jQuery.sap.require('sap.m.Button');jQuery.sap.declare("sap.ushell.ui.footerbar.AddBookmarkButton");sap.ushell.ui.footerbar.AddBookmarkButton.prototype.init=function(){this.setIcon('sap-icon://add-favorite');this.setWidth('100%');this.setText(sap.ushell.resources.i18n.getText("addToHomePageBtn"));this.setTooltip(sap.ushell.resources.i18n.getText("addToHomePageBtn_tooltip"));this.setEnabled();var s=this;this.attachPress(function(){if(s.getBeforePressHandler()){s.getBeforePressHandler()()}s.showAddBookmarkDialog(function(){if(s.getAfterPressHandler()){s.getAfterPressHandler()()}})});if(sap.m.Button.prototype.init){sap.m.Button.prototype.init.apply(this,arguments)}};sap.ushell.ui.footerbar.AddBookmarkButton.prototype.exit=function(){if(this.oGroupsSelect){this.oGroupsSelect.destroy()}if(this.oSimpleForm){this.oSimpleForm.destroy()}if(this.oDialog){this.oDialog.destroy()}if(sap.m.Button.prototype.exit){sap.m.Button.prototype.exit.apply(this,arguments)}};sap.ushell.ui.footerbar.AddBookmarkButton.prototype.showAddBookmarkDialog=function(c){var s=this;this.oResourceBundle=sap.ushell.resources.i18n;this.appData=this.getAppData()||{};this.oTitleInput=new sap.m.Input('bookmarkTitleInput',{value:this.appData.title||''});this.oTitleInput.attachLiveChange(function(){s._toggleOkButton(this.getValue(),s.oDialog.getBeginButton())});this.oSubTitleInput=new sap.m.Input('bookmarkSubTitleInput',{value:this.appData.subtitle||''});this.oInfoInput=new sap.m.Input('bookmarkInfoInput',{value:this.appData.info||''});this.oGroupsSelect=new sap.m.Select("groupsSelect",{tooltip:"{i18n>bookmarkDialogoInfo_tooltip}",items:{path:"/groups",template:new sap.ui.core.ListItem({text:"{title}"})},maxWidth:"384px"});var a=sap.ui.getCore().byId("shell").getModel();if(!a.oData.groups.length){var l=sap.ushell.Container.getService("LaunchPage"),e=sap.ui.getCore().getEventBus();e.publish("launchpad","loadDashboardGroups")}this.oGroupsSelect.setModel(a);this.cb=c;var t=new sap.m.Label({text:this.oResourceBundle.getText('titleFld')}),S=new sap.m.Label({text:this.oResourceBundle.getText('subtitleFld')}),i=new sap.ui.core.Icon({src:this.appData.icon||'sap-icon://home',size:'32px'}),I=new sap.m.Label({text:this.oResourceBundle.getText('infoMsg')}),g=new sap.m.Label({text:this.oResourceBundle.getText('GroupListItem_label')});var b=[i,t,this.oTitleInput,S,this.oSubTitleInput,I,this.oInfoInput];b.push(g);b.push(this.oGroupsSelect);this.oSimpleForm=new sap.ui.layout.form.SimpleForm({id:'bookmarkFormId',content:b});var r=sap.ushell.resources.i18n;this.oTitleInput.setTooltip(r.getText("bookmarkDialogoTitle_tooltip"));this.oSubTitleInput.setTooltip(r.getText("bookmarkDialogoSubTitle_tooltip"));this.oInfoInput.setTooltip(r.getText("bookmarkDialogoInfo_tooltip"));this.oGroupsSelect.setTooltip(r.getText("bookmarkDialogoGroup_tooltip"));this._openDialog(this.oSimpleForm)};sap.ushell.ui.footerbar.AddBookmarkButton.prototype._toggleOkButton=function(v,o){o.setEnabled((v)?true:false)};sap.ushell.ui.footerbar.AddBookmarkButton.prototype._openDialog=function(c){var o=new sap.m.Button('bookmarkOkBtn',{text:this.oResourceBundle.getText('okBtn'),press:this._handleOkButtonPress.bind(this),enabled:false}),a=new sap.m.Button('bookmarkCancelBtn',{text:this.oResourceBundle.getText('cancelBtn'),press:function(){this.oDialog.close();this.cb()}.bind(this)});this._toggleOkButton(this.appData.title,o);this.oDialog=new sap.m.Dialog({id:'bookmarkDialog',title:this.oResourceBundle.getText('addToHomePageBtn'),contentWidth:'400px',content:c,beginButton:o,endButton:a,afterClose:function(){this.oGroupsSelect.destroy();this.oSimpleForm.destroy();this.oDialog.destroy();delete(this.oGroupsSelect);delete(this.oSimpleForm);delete(this.oDialog)}.bind(this)});this.oDialog.open()};sap.ushell.ui.footerbar.AddBookmarkButton.prototype._handleOkButtonPress=function(){var s;if(this.oGroupsSelect.getSelectedItem()){s=this.oGroupsSelect.getSelectedItem().getBindingContext().getObject()}var d={title:this.oTitleInput.getValue(),subtitle:this.oSubTitleInput.getValue(),url:this.appData.customUrl?this.appData.customUrl:location.hash||window.location.href,icon:this.appData.icon,info:this.oInfoInput.getValue(),numberUnit:this.appData.numberUnit,serviceUrl:typeof(this.appData.serviceUrl)==="function"?this.appData.serviceUrl():this.appData.serviceUrl,serviceRefreshInterval:this.appData.serviceRefreshInterval,group:s},e=sap.ui.getCore().getEventBus();e.publish("launchpad","addBookmarkTile",d);this.oDialog.close();this.cb()};sap.ushell.ui.footerbar.AddBookmarkButton.prototype.setEnabled=function(e){var s="",p=true;if(sap.ui.getCore().byId("shell")){s=sap.ui.getCore().byId("shell").getModel().getProperty("/currentState").stateName||"";if(sap.ui.getCore().byId("shell").getModel().getProperty("/personalization")!==undefined){p=sap.ui.getCore().byId("shell").getModel().getProperty("/personalization")}}if(s==='headerless'||s==='standalone'||s==='embedded'||!p){e=false}if(!sap.ushell.Container){if(this.getEnabled()){jQuery.sap.log.warning("Disabling 'Save as Tile' button: unified shell container not initialized",null,"sap.ushell.ui.footerbar.AddBookmarkButton")}e=false}sap.m.Button.prototype.setEnabled.call(this,e);if(!e){this.addStyleClass("sapUshellAddBookmarkButton")}}}())};if(!jQuery.sap.isDeclared('sap.ushell.ui.footerbar.AddBookmarkButtonRenderer')){(function(){"use strict";jQuery.sap.declare("sap.ushell.ui.footerbar.AddBookmarkButtonRenderer");jQuery.sap.require('sap.ui.core.Renderer');jQuery.sap.require('sap.m.ButtonRenderer');sap.ushell.ui.footerbar.AddBookmarkButtonRenderer=sap.ui.core.Renderer.extend(sap.m.ButtonRenderer)}())};if(!jQuery.sap.isDeclared('sap.ushell.ui.footerbar.ContactSupportButton')){
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5) (c) Copyright 2009-2013 SAP AG. All rights reserved
 */
jQuery.sap.declare("sap.ushell.ui.footerbar.ContactSupportButton");jQuery.sap.require('sap.m.Button');sap.m.Button.extend("sap.ushell.ui.footerbar.ContactSupportButton",{metadata:{library:"sap.ushell"}});
// Copyright (c) 2013 SAP AG, All Rights Reserved
(function(){"use strict";jQuery.sap.declare("sap.ushell.ui.footerbar.ContactSupportButton");sap.ushell.ui.footerbar.ContactSupportButton.prototype.init=function(){this.setIcon('sap-icon://email');this.setWidth('100%');this.setText(sap.ushell.resources.i18n.getText("contactSupportBtn"));this.setTooltip(sap.ushell.resources.i18n.getText("contactSupportBtn_tooltip"));this.attachPress(this.showContactSupportDialog);this.setEnabled()};sap.ushell.ui.footerbar.ContactSupportButton.prototype.showContactSupportDialog=function(){jQuery.sap.require("sap.ushell.services.Container");jQuery.sap.require("sap.ui.layout.form.SimpleForm");jQuery.sap.require("sap.m.TextArea");jQuery.sap.require("sap.m.Link");jQuery.sap.require("sap.m.Label");jQuery.sap.require("sap.m.Text");jQuery.sap.require("sap.m.Dialog");jQuery.sap.require("sap.m.Button");jQuery.sap.require("sap.ushell.UserActivityLog");this.translationBundle=sap.ushell.resources.i18n;this.oClientContext=sap.ushell.UserActivityLog.getMessageInfo();this.oLink=new sap.m.Link({text:this.translationBundle.getText("technicalDataLink")});this.oBottomSimpleForm=new sap.ui.layout.form.SimpleForm("bottomForm",{editable:false,content:[this.oLink]});this.sendButton=new sap.m.Button("contactSupportSendBtn",{text:this.translationBundle.getText("sendBtn"),enabled:false,press:function(){var s=sap.ushell.Container.getService("SupportTicket"),t=this.oTextArea.getValue(),S={text:t,clientContext:this.oClientContext},p=s.createTicket(S);p.done(function(m){sap.ushell.Container.getService("Message").info(this.translationBundle.getText("supportTicketCreationSuccess"))}.bind(this));p.fail(function(m){sap.ushell.Container.getService("Message").error(this.translationBundle.getText("supportTicketCreationFailed"))}.bind(this));this.oDialog.close()}.bind(this)});this.cancelButton=new sap.m.Button("contactSupportCancelBtn",{text:this.translationBundle.getText("cancelBtn"),press:function(){this.oDialog.close()}.bind(this)});this.oTextArea=new sap.m.TextArea("textArea",{rows:7,liveChange:function(){if(/\S/.test(this.oTextArea.getValue())){this.sendButton.setEnabled(true)}else{this.sendButton.setEnabled(false)}}.bind(this)});this.oTopSimpleForm=new sap.ui.layout.form.SimpleForm("topForm",{editable:false,content:[this.oTextArea]});this.oDialog=new sap.m.Dialog({id:"ContactSupportDialog",title:this.translationBundle.getText("contactSupportBtn"),contentWidth:"300px",leftButton:this.sendButton,rightButton:this.cancelButton,initialFocus:"textArea",afterOpen:function(){$("#textArea").on("focusout",function(){window.scrollTo(0,0)})},afterClose:function(){this.oDialog.destroy()}.bind(this)});this.oTextArea.setPlaceholder(this.translationBundle.getText("txtAreaPlaceHolderHeader"));this.oLink.attachPress(this._embedLoginDetailsInBottomForm.bind(this));this.oDialog.addContent(this.oTopSimpleForm);this.oDialog.addContent(this.oBottomSimpleForm);this.oDialog.open()};sap.ushell.ui.footerbar.ContactSupportButton.prototype._embedLoginDetailsInBottomForm=function(){this.oDialog.removeContent(this.oBottomSimpleForm.getId());this.oBottomSimpleForm.destroy();var a="",u="",b="",B=[];if(this.oClientContext.navigationData.applicationInformation){a=this.oClientContext.navigationData.applicationInformation.applicationType;u=this.oClientContext.navigationData.applicationInformation.url;b=this.oClientContext.navigationData.applicationInformation.additionalInformation}B.push(new sap.m.Text({text:this.translationBundle.getText("loginDetails")}).addStyleClass('ushellContactSupportHeaderInfoText'));B.push(new sap.m.Label({text:this.translationBundle.getText("userFld")}));B.push(new sap.m.Text({text:this.oClientContext.userDetails.fullName||''}));B.push(new sap.m.Label({text:this.translationBundle.getText("serverFld")}));B.push(new sap.m.Text({text:window.location.host}));if(this.oClientContext.userDetails.eMail&&this.oClientContext.userDetails.eMail!==''){B.push(new sap.m.Label({text:this.translationBundle.getText("eMailFld")}));B.push(new sap.m.Text({text:this.oClientContext.userDetails.eMail||''}))}B.push(new sap.m.Label({text:this.translationBundle.getText("languageFld")}));B.push(new sap.m.Text({text:this.oClientContext.userDetails.Language||''}));B.push(new sap.m.Text({text:''}));B.push(new sap.m.Text({text:this.translationBundle.getText("navigationDataFld")}).addStyleClass('ushellContactSupportHeaderInfoText'));B.push(new sap.m.Label({text:this.translationBundle.getText("hashFld")}));B.push(new sap.m.Text({text:this.oClientContext.navigationData.navigationHash||''}));B.push(new sap.m.Text({text:''}));B.push(new sap.m.Text({text:this.translationBundle.getText("applicationInformationFld")}).addStyleClass('ushellContactSupportHeaderInfoText'));B.push(new sap.m.Label({text:this.translationBundle.getText("applicationTypeFld")}));B.push(new sap.m.Text({text:a}));B.push(new sap.m.Label({text:this.translationBundle.getText("urlFld")}));B.push(new sap.m.Text({text:u}));B.push(new sap.m.Label({text:this.translationBundle.getText("additionalInfoFld")}));B.push(new sap.m.Text({text:b}));this.oBottomSimpleForm=new sap.ui.layout.form.SimpleForm('technicalInfoBox',{layout:sap.ui.layout.form.SimpleFormLayout.ResponsiveLayout,content:B});if(sap.ui.Device.os.ios&&sap.ui.Device.system.phone){this.oBottomSimpleForm.addStyleClass("ushellContactSupportFixWidth")}var o=this.oBottomSimpleForm.onAfterRendering;this.oBottomSimpleForm.onAfterRendering=function(){o.apply(this,arguments);var n=jQuery(this.getDomRef());n.attr("tabIndex",0);jQuery.sap.delayedCall(700,n,function(){this.focus()})};this.oDialog.addContent(this.oBottomSimpleForm)};sap.ushell.ui.footerbar.ContactSupportButton.prototype.setEnabled=function(e){if(!sap.ushell.Container){if(this.getEnabled()){jQuery.sap.log.warning("Disabling 'Contact Support' button: unified shell container not initialized",null,"sap.ushell.ui.footerbar.ContactSupportButton")}e=false}sap.m.Button.prototype.setEnabled.call(this,e)}}())};if(!jQuery.sap.isDeclared('sap.ushell.ui.footerbar.ContactSupportButtonRenderer')){(function(){"use strict";jQuery.sap.declare("sap.ushell.ui.footerbar.ContactSupportButtonRenderer");jQuery.sap.require('sap.ui.core.Renderer');jQuery.sap.require('sap.m.ButtonRenderer');sap.ushell.ui.footerbar.ContactSupportButtonRenderer=sap.ui.core.Renderer.extend(sap.m.ButtonRenderer)}())};if(!jQuery.sap.isDeclared('sap.ushell.ui.footerbar.HideGroupsButton')){
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5) (c) Copyright 2009-2013 SAP AG. All rights reserved
 */
jQuery.sap.declare("sap.ushell.ui.footerbar.HideGroupsButton");jQuery.sap.require('sap.m.Button');sap.m.Button.extend("sap.ushell.ui.footerbar.HideGroupsButton",{metadata:{library:"sap.ushell"}});
// Copyright (c) 2013 SAP AG, All Rights Reserved
(function(){"use strict";jQuery.sap.declare("sap.ushell.ui.footerbar.HideGroupsButton");sap.ushell.ui.footerbar.HideGroupsButton.prototype.init=function(){this.setIcon('sap-icon://group-2');this.setTooltip(sap.ushell.resources.i18n.getText("hideGroupsBtn_tooltip"));this.setWidth('100%');this.setText(sap.ushell.resources.i18n.getText("hideGroupsBtn_title"));this.attachPress(this.openHideGroupsDialog);if(sap.m.Button.prototype.init){sap.m.Button.prototype.init.apply(this,arguments)}};sap.ushell.ui.footerbar.HideGroupsButton.prototype.openHideGroupsDialog=function(){jQuery.sap.require("sap.m.Dialog");jQuery.sap.require("sap.m.Button");jQuery.sap.require("sap.m.Table");jQuery.sap.require("sap.m.Switch");var t=this;this.handleChange=function(a){var b=a.oSource.getParent();b.toggleStyleClass('hideGroupsTableItem');b.getCells()[0].toggleStyleClass('hideGroupsDisabledCell')};this.groupsTableTemplate=new sap.m.ColumnListItem({cells:[new sap.m.Text({text:"{title}"}),new sap.m.Switch({state:"{isGroupVisible}",visible:"{isEnabled}",change:t.handleChange,customTextOff:" ",customTextOn:" ",tooltip:sap.ushell.resources.i18n.getText("hideGroups_switchTooltip")})]});this.groupsTable=new sap.m.Table("hideGroupsTable",{backgroundDesign:sap.m.BackgroundDesign.Transparent,showSeparators:sap.m.ListSeparators.Inner,columns:[new sap.m.Column({hAlign:sap.ui.core.TextAlign.Left,vAlign:"Middle"}),new sap.m.Column({hAlign:sap.ui.core.TextAlign.Right,vAlign:"Middle",width:"79px"})]});this.groupsTable.addStyleClass('hideGroupsTable');var o=this.groupsTable.onAfterRendering;this.groupsTable.onAfterRendering=function(a){o.apply(t.groupsTable,arguments);var b=a.srcControl.mAggregations.items;if(b){for(var i=0;i<b.length;i++){if(!b[i].getCells()[1].mProperties.state){b[i].addStyleClass('hideGroupsTableItem');b[i].getCells()[0].addStyleClass('hideGroupsDisabledCell')}}}setTimeout(function(){$('.sapMListTblRow').first().focus()},200)};this.groupsTable.setModel(this.getModel());var p=this.getModel().getProperty("/personalization");var e=[];if(!p){e.push(new sap.ui.model.Filter("tiles/length",sap.ui.model.FilterOperator.GT,0))}this.groupsTable.bindItems({path:"/groups",template:this.groupsTableTemplate,filters:e});this.saveButton=new sap.m.Button("saveBtn",{text:sap.ushell.resources.i18n.getText("okBtn"),press:function(){setTimeout(function(){var m=this.getModel();var g=m.getProperty('/groups');if(g){var l=sap.ushell.Container.getService("LaunchPage");var h=[];for(var i=0;i<g.length;i++){if(!g[i].isGroupVisible){var a=l.getGroupId(g[i].object);h.push(a)}}l.hideGroups(h).done(function(){t.handleToastMessage(h.length)}).fail(function(){var b=new sap.ushell.ui.launchpad.EmbeddedSupportErrorMessage("HideGroupsErrorMessage",{title:sap.ushell.resources.i18n.getText("error"),content:new sap.m.Text({text:sap.ushell.resources.i18n.getText("hideGroups_error")})});b.open()});m.updateBindings('items');m.updateBindings('groups')}}.bind(this),100);this.oDialog.close()}.bind(this)});this.handleToastMessage=function(n){var m="";if(typeof(n)===undefined)return;if(n===0){m=sap.ushell.resources.i18n.getText("hideGroups_none")}else if(n===1){m=sap.ushell.resources.i18n.getText("hideGroups_single")}else{m=sap.ushell.resources.i18n.getText("hideGroups_multiple",n)}sap.ushell.Container.getService("Message").show(sap.ushell.services.Message.Type.INFO,m)};this.cancelButton=new sap.m.Button("CancelBtn",{text:sap.ushell.resources.i18n.getText("cancelBtn"),press:function(){if(t.aGroupsStates){var g=this.getModel().getProperty('/groups');for(var i=0;i<t.aGroupsStates.length;i++){if(g[i].groupId===t.aGroupsStates[i].groupId){g[i].isGroupVisible=t.aGroupsStates[i].isVisible}}}this.oDialog.close()}.bind(this)});this.oDialog=new sap.m.Dialog({id:"groupsVisibilityDialog",title:sap.ushell.resources.i18n.getText("hideGroups_title"),contentWidth:"300px",stretch:jQuery.device.is.phone,content:this.groupsTable,beginButton:this.saveButton,endButton:this.cancelButton,initialFocus:"groupsVisibilityDialog",afterClose:function(){this.oDialog.destroy()}.bind(this)});this.getModelStates=function(g){if(!g)return;var s=[];for(var i=0;i<g.length;i++){s.push({groupId:g[i].groupId,isVisible:g[i].isGroupVisible})}return s};this.aGroupsStates=this.getModelStates(this.getModel().getProperty('/groups'));this.oDialog.open()}}())};if(!jQuery.sap.isDeclared('sap.ushell.ui.footerbar.HideGroupsButtonRenderer')){(function(){"use strict";jQuery.sap.declare("sap.ushell.ui.footerbar.HideGroupsButtonRenderer");jQuery.sap.require('sap.ui.core.Renderer');jQuery.sap.require('sap.m.ButtonRenderer');sap.ushell.ui.footerbar.HideGroupsButtonRenderer=sap.ui.core.Renderer.extend(sap.m.ButtonRenderer)}())};if(!jQuery.sap.isDeclared('sap.ushell.ui.footerbar.JamDiscussButton')){
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5) (c) Copyright 2009-2013 SAP AG. All rights reserved
 */
jQuery.sap.declare("sap.ushell.ui.footerbar.JamDiscussButton");jQuery.sap.require('sap.m.Button');sap.m.Button.extend("sap.ushell.ui.footerbar.JamDiscussButton",{metadata:{library:"sap.ushell",properties:{"beforePressHandler":{type:"any",group:"Misc",defaultValue:null},"afterPressHandler":{type:"any",group:"Misc",defaultValue:null},"jamData":{type:"object",group:"Misc",defaultValue:null}}}});
// Copyright (c) 2013 SAP AG, All Rights Reserved
(function(){"use strict";jQuery.sap.declare("sap.ushell.ui.footerbar.JamDiscussButton");sap.ushell.ui.footerbar.JamDiscussButton.prototype.init=function(){jQuery.sap.require("sap.ushell.services.Container");var s=this;this.setEnabled();this.setIcon('sap-icon://discussion-2');this.setText(sap.ushell.resources.i18n.getText("discussBtn"));this.attachPress(function(){if(s.getBeforePressHandler()){s.getBeforePressHandler()()}this.showDiscussDialog(s.getAfterPressHandler())});if(sap.m.Button.prototype.init){sap.m.Button.prototype.init.apply(this,arguments)}};sap.ushell.ui.footerbar.JamDiscussButton.prototype.showDiscussDialog=function(c){jQuery.sap.require('sap.collaboration.components.fiori.feed.dialog.Component');if(!this.discussComponent){this.discussComponent=sap.ui.getCore().createComponent({name:"sap.collaboration.components.fiori.feed.dialog"})}this.discussComponent.setSettings(this.getJamData());this.discussComponent.open();if(c){c()}};sap.ushell.ui.footerbar.JamDiscussButton.prototype.setEnabled=function(e){if(!sap.ushell.Container){if(this.getEnabled()){jQuery.sap.log.warning("Disabling JamDiscussButton: unified shell container not initialized",null,"sap.ushell.ui.footerbar.JamDiscussButton")}e=false}else{var u=sap.ushell.Container.getUser();if(!(u&&u.isJamActive())){if(this.getEnabled()){jQuery.sap.log.info("Disabling JamDiscussButton: user not logged in or Jam not active",null,"sap.ushell.ui.footerbar.JamDiscussButton")}e=false;this.setVisible(false)}}sap.m.Button.prototype.setEnabled.call(this,e)}}())};if(!jQuery.sap.isDeclared('sap.ushell.ui.footerbar.JamDiscussButtonRenderer')){(function(){"use strict";jQuery.sap.declare("sap.ushell.ui.footerbar.JamDiscussButtonRenderer");jQuery.sap.require('sap.ui.core.Renderer');jQuery.sap.require('sap.m.ButtonRenderer');sap.ushell.ui.footerbar.JamDiscussButtonRenderer=sap.ui.core.Renderer.extend(sap.m.ButtonRenderer)}())};if(!jQuery.sap.isDeclared('sap.ushell.ui.footerbar.JamShareButton')){
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5) (c) Copyright 2009-2013 SAP AG. All rights reserved
 */
jQuery.sap.declare("sap.ushell.ui.footerbar.JamShareButton");jQuery.sap.require('sap.m.Button');sap.m.Button.extend("sap.ushell.ui.footerbar.JamShareButton",{metadata:{library:"sap.ushell",properties:{"beforePressHandler":{type:"any",group:"Misc",defaultValue:null},"afterPressHandler":{type:"any",group:"Misc",defaultValue:null},"jamData":{type:"object",group:"Misc",defaultValue:null}}}});
// Copyright (c) 2013 SAP AG, All Rights Reserved
(function(){"use strict";jQuery.sap.declare("sap.ushell.ui.footerbar.JamShareButton");sap.ushell.ui.footerbar.JamShareButton.prototype.init=function(){jQuery.sap.require("sap.ushell.services.Container");var s=this;this.setEnabled();this.setIcon('sap-icon://share-2');this.setText(sap.ushell.resources.i18n.getText("shareBtn"));this.attachPress(function(){if(s.getBeforePressHandler()){s.getBeforePressHandler()()}this.showShareDialog(s.getAfterPressHandler())});if(sap.m.Button.prototype.init){sap.m.Button.prototype.init.apply(this,arguments)}};sap.ushell.ui.footerbar.JamShareButton.prototype.showShareDialog=function(c){jQuery.sap.require('sap.collaboration.components.fiori.sharing.dialog.Component');if(!this.shareComponent){this.shareComponent=sap.ui.getCore().createComponent({name:"sap.collaboration.components.fiori.sharing.dialog"})}this.shareComponent.setSettings(this.getJamData());this.shareComponent.open();if(c){c()}};sap.ushell.ui.footerbar.JamShareButton.prototype.exit=function(){if(this.shareComponent){this.shareComponent.destroy()}if(sap.m.Button.prototype.exit){sap.m.Button.prototype.exit.apply(this,arguments)}};sap.ushell.ui.footerbar.JamShareButton.prototype.setEnabled=function(e){if(!sap.ushell.Container){if(this.getEnabled()){jQuery.sap.log.warning("Disabling JamShareButton: unified shell container not initialized",null,"sap.ushell.ui.footerbar.JamShareButton")}e=false}else{var u=sap.ushell.Container.getUser();if(!(u&&u.isJamActive())){if(this.getEnabled()){jQuery.sap.log.info("Disabling JamShareButton: user not logged in or Jam not active",null,"sap.ushell.ui.footerbar.JamShareButton")}e=false;this.setVisible(false)}}sap.m.Button.prototype.setEnabled.call(this,e)}}())};if(!jQuery.sap.isDeclared('sap.ushell.ui.footerbar.JamShareButtonRenderer')){(function(){"use strict";jQuery.sap.declare("sap.ushell.ui.footerbar.JamShareButtonRenderer");jQuery.sap.require('sap.ui.core.Renderer');jQuery.sap.require('sap.m.ButtonRenderer');sap.ushell.ui.footerbar.JamShareButtonRenderer=sap.ui.core.Renderer.extend(sap.m.ButtonRenderer)}())};if(!jQuery.sap.isDeclared('sap.ushell.ui.footerbar.LoginDetailsButtonRenderer')){(function(){"use strict";jQuery.sap.declare("sap.ushell.ui.footerbar.LoginDetailsButtonRenderer");jQuery.sap.require('sap.ui.core.Renderer');jQuery.sap.require('sap.m.ButtonRenderer');sap.ushell.ui.footerbar.LoginDetailsButtonRenderer=sap.ui.core.Renderer.extend(sap.m.ButtonRenderer)}())};if(!jQuery.sap.isDeclared('sap.ushell.ui.footerbar.LogoutButton')){
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5) (c) Copyright 2009-2013 SAP AG. All rights reserved
 */
jQuery.sap.declare("sap.ushell.ui.footerbar.LogoutButton");jQuery.sap.require('sap.m.Button');sap.m.Button.extend("sap.ushell.ui.footerbar.LogoutButton",{metadata:{library:"sap.ushell"}});
// Copyright (c) 2013 SAP AG, All Rights Reserved
(function(){"use strict";jQuery.sap.declare("sap.ushell.ui.footerbar.LogoutButton");sap.ushell.ui.footerbar.LogoutButton.prototype.init=function(){this.setIcon('sap-icon://log');this.setTooltip(sap.ushell.resources.i18n.getText("logoutBtn_tooltip"));this.setWidth('100%');this.setText(sap.ushell.resources.i18n.getText("logoutBtn_title"));this.attachPress(this.logout);this.setEnabled();if(sap.m.Button.prototype.init){sap.m.Button.prototype.init.apply(this,arguments)}};sap.ushell.ui.footerbar.LogoutButton.prototype.logout=function(){jQuery.sap.require('sap.m.MessageBox');var s=true,i=false,l=new sap.ushell.ui.launchpad.LoadingDialog({text:""});sap.ushell.Container.getGlobalDirty().done(function(d){s=false;if(i===true){l.exit();l=new sap.ushell.ui.launchpad.LoadingDialog({text:""})}var a=sap.ui.getCore().byId("shell");if(a){var c=a.getModel().getProperty("/currentState/stateName");if(d===sap.ushell.Container.DirtyState.MAYBE_DIRTY&&((c==="home"||c==="catalog"))){d=sap.ushell.Container.DirtyState.CLEAN}}var L=_(d);sap.m.MessageBox.show(L.message,L.icon,L.messageTitle,[sap.m.MessageBox.Action.OK,sap.m.MessageBox.Action.CANCEL],function(A){if(A===sap.m.MessageBox.Action.OK){l.openLoadingScreen();l.showAppInfo(sap.ushell.resources.i18n.getText('beforeLogoutMsg'),null);sap.ushell.Container.logout()}},sap.ui.core.ElementMetadata.uid("confirm"))});if(s===true){l.openLoadingScreen();i=true}};sap.ushell.ui.footerbar.LogoutButton.prototype.setEnabled=function(e){if(!sap.ushell.Container){if(this.getEnabled()){jQuery.sap.log.warning("Disabling 'Logout' button: unified shell container not initialized",null,"sap.ushell.ui.footerbar.LogoutButton")}e=false}sap.m.Button.prototype.setEnabled.call(this,e)};var _=function(d){var l={},r=sap.ushell.resources.i18n;if(d===sap.ushell.Container.DirtyState.DIRTY||d===sap.ushell.Container.DirtyState.MAYBE_DIRTY){l.message=r.getText('unsaved_data_warning_popup_message');l.icon=sap.m.MessageBox.Icon.WARNING;l.messageTitle=r.getText("unsaved_data_warning_popup_title")}else{l.message=r.getText('logoutConfirmationMsg');l.icon=sap.m.MessageBox.Icon.QUESTION;l.messageTitle=r.getText("title_confirm")}return l}}())};if(!jQuery.sap.isDeclared('sap.ushell.ui.footerbar.LogoutButtonRenderer')){(function(){"use strict";jQuery.sap.declare("sap.ushell.ui.footerbar.LogoutButtonRenderer");jQuery.sap.require('sap.ui.core.Renderer');jQuery.sap.require('sap.m.ButtonRenderer');sap.ushell.ui.footerbar.LogoutButtonRenderer=sap.ui.core.Renderer.extend(sap.m.ButtonRenderer)}())};if(!jQuery.sap.isDeclared('sap.ushell.ui.footerbar.SettingsButton')){
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5) (c) Copyright 2009-2013 SAP AG. All rights reserved
 */
jQuery.sap.declare("sap.ushell.ui.footerbar.SettingsButton");jQuery.sap.require('sap.m.Button');sap.m.Button.extend("sap.ushell.ui.footerbar.SettingsButton",{metadata:{library:"sap.ushell"}});
// Copyright (c) 2013 SAP AG, All Rights Reserved
(function(){"use strict";jQuery.sap.declare("sap.ushell.ui.footerbar.SettingsButton");sap.ushell.ui.footerbar.SettingsButton.prototype.init=function(){jQuery.sap.require("sap.ushell.ui.footerbar.AboutButton");jQuery.sap.require("sap.ushell.ui.footerbar.LoginDetailsButton");jQuery.sap.require("sap.ushell.ui.footerbar.LogoutButton");this.setIcon('sap-icon://action-settings');this.setTooltip(sap.ushell.resources.i18n.getText("helpBtn_tooltip"));this.attachPress(this.showSettingsMenu);var a=new sap.ushell.ui.footerbar.AboutButton(),l=new sap.ushell.ui.footerbar.LoginDetailsButton(),L=new sap.ushell.ui.footerbar.LogoutButton();this.defaultMenuItems=[a,l,L];if(sap.m.Button.prototype.init){sap.m.Button.prototype.init.apply(this,arguments)}};sap.ushell.ui.footerbar.SettingsButton.prototype.setMenuItems=function(b){this.menuItems=b};sap.ushell.ui.footerbar.SettingsButton.prototype.showSettingsMenu=function(){var a=new sap.m.ActionSheet({id:'settingsMenu',showHeader:false,buttons:(this.menuItems||[]).concat(this.defaultMenuItems)});a.setPlacement(sap.m.PlacementType.Vertical);a.openBy(this);a.attachAfterClose(function(){a.removeAllButtons();a.destroy()})}}())};if(!jQuery.sap.isDeclared('sap.ushell.ui.footerbar.SettingsButtonRenderer')){(function(){"use strict";jQuery.sap.declare("sap.ushell.ui.footerbar.SettingsButtonRenderer");jQuery.sap.require('sap.ui.core.Renderer');jQuery.sap.require('sap.m.ButtonRenderer');sap.ushell.ui.footerbar.SettingsButtonRenderer=sap.ui.core.Renderer.extend(sap.m.ButtonRenderer)}())};if(!jQuery.sap.isDeclared('sap.ushell.ui.launchpad.CatalogListItem')){
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5) (c) Copyright 2009-2013 SAP AG. All rights reserved
 */
jQuery.sap.declare("sap.ushell.ui.launchpad.CatalogListItem");jQuery.sap.require('sap.m.ListItemBase');sap.m.ListItemBase.extend("sap.ushell.ui.launchpad.CatalogListItem",{metadata:{library:"sap.ushell",properties:{"title":{type:"string",group:"Misc",defaultValue:null},"description":{type:"string",group:"Misc",defaultValue:null},"info":{type:"string",group:"Misc",defaultValue:null},"groupId":{type:"string",group:"Misc",defaultValue:null},"infoState":{type:"sap.ui.core.ValueState",group:"Misc",defaultValue:sap.ui.core.ValueState.None},"icon":{type:"sap.ui.core.URI",group:"Misc",defaultValue:null},"activeIcon":{type:"sap.ui.core.URI",group:"Misc",defaultValue:null},"iconInset":{type:"boolean",group:"Misc",defaultValue:true},"iconDensityAware":{type:"boolean",group:"Misc",defaultValue:true},"headerLevel":{type:"sap.m.HeaderLevel",group:"Misc",defaultValue:sap.m.HeaderLevel.H6},"editMode":{type:"boolean",group:"Misc",defaultValue:false},"allowEditMode":{type:"boolean",group:"Misc",defaultValue:true},"markChange":{type:"int",group:"Misc",defaultValue:0}},events:{"drop":{},"afterRendering":{},"press":{},"dblPress":{},"sapEnter":{},"sapEscape":{},"focusOut":{}}}});sap.ushell.ui.launchpad.CatalogListItem.M_EVENTS={'drop':'drop','afterRendering':'afterRendering','press':'press','dblPress':'dblPress','sapEnter':'sapEnter','sapEscape':'sapEscape','focusOut':'focusOut'};
// Copyright (c) 2013 SAP AG, All Rights Reserved
jQuery.sap.require('sap.ui.core.EnabledPropagator');jQuery.sap.require('sap.ui.core.IconPool');jQuery.sap.require('sap.ui.thirdparty.jqueryui.jquery-ui-core');jQuery.sap.require('sap.ui.thirdparty.jqueryui.jquery-ui-widget');jQuery.sap.require('sap.ui.thirdparty.jqueryui.jquery-ui-mouse');jQuery.sap.require('sap.ui.thirdparty.jqueryui.jquery-ui-droppable');sap.ushell.ui.launchpad.CatalogListItem.prototype.init=function(){this.oEditInputField=new sap.m.Input();this.oEditInputField.setPlaceholder(sap.ushell.resources.i18n.getText("new_group_name"))};sap.ushell.ui.launchpad.CatalogListItem.prototype.getEditInputField=function(){return this.oEditInputField};sap.ushell.ui.launchpad.CatalogListItem.prototype.onAfterRendering=function(){this.$().droppable({hoverClass:"sapUshellCatalogLIHover",tolerance:"pointer",}).bind("drop",jQuery.proxy(this._handleDrop,this));this.fireAfterRendering()};sap.ushell.ui.launchpad.CatalogListItem.prototype.onBeforeRendering=function(){this.$().unbind("drop",this._handleDrop).droppable("destroy");this.oEditInputField.setValue(this.getTitle())};sap.ushell.ui.launchpad.CatalogListItem.prototype.exit=function(){this.$().unbind("drop",this._handleDrop).droppable("destroy");if(this._image){this._image.destroy()}sap.m.ListItemBase.prototype.exit.apply(this,arguments)};sap.ushell.ui.launchpad.CatalogListItem.prototype._handleDrop=function(e,u){this.fireDrop({control:u&&u.draggable&&(u.draggable.length>0)&&sap.ui.getCore().byId(u.draggable[0].id)||undefined})};sap.ushell.ui.launchpad.CatalogListItem.prototype._getImage=function(i,I,s,b){var o=this._image;if(o){o.setSrc(s);if(o instanceof sap.m.Image)o.setDensityAware(b)}else{o=sap.ui.core.IconPool.createControlByURI({id:i,src:s,densityAware:b},sap.m.Image).setParent(this,null,true)}if(o instanceof sap.m.Image){o.addStyleClass(I,true)}else{o.addStyleClass(I+"Icon",true)}return this._image=o};sap.ushell.ui.launchpad.CatalogListItem.prototype._activeHandlingInheritor=function(){var i=sap.ui.getCore().byId(this.getId()+"-img");if(i instanceof sap.ui.core.Icon){i.$().toggleClass('sapMSLIIconActive',this._active);return}if(i&&this.getActiveIcon()){i.setSrc(this.getActiveIcon())}};sap.ushell.ui.launchpad.CatalogListItem.prototype._inactiveHandlingInheritor=function(){var i=sap.ui.getCore().byId(this.getId()+"-img");if(i instanceof sap.ui.core.Icon){i.$().toggleClass('sapMSLIIconActive',this._active);return}if(i){i.setSrc(this.getIcon())}};sap.ushell.ui.launchpad.CatalogListItem.prototype.onclick=function(b){this.firePress({id:this.getId()})};sap.ushell.ui.launchpad.CatalogListItem.prototype.ondblclick=function(b){this.fireDblPress({id:this.getId()})};sap.ushell.ui.launchpad.CatalogListItem.prototype.onsapenter=function(b){this.fireSapEnter({id:this.getId()})};sap.ushell.ui.launchpad.CatalogListItem.prototype.onsapescape=function(b){this.fireSapEscape({id:this.getId()})};sap.ushell.ui.launchpad.CatalogListItem.prototype.onfocusout=function(){this.fireFocusOut()};sap.ushell.ui.launchpad.CatalogListItem.prototype.setDescription=function(d){var D=this.$().find('.sapUshellCatalogLIDescription');this.setProperty("description",d,true);if(this.getMarkChange()&&D.text()){this.addStyleClass("sapUshellCatalogLIRecentChange");window.clearTimeout(this.markChangeTimer);this.markChangeTimer=window.setTimeout($.proxy(this.removeStyleClass,this,"sapUshellCatalogLIRecentChange"),this.getMarkChange())}D.text(d);return this}};if(!jQuery.sap.isDeclared('sap.ushell.ui.launchpad.CatalogListItemRenderer')){jQuery.sap.declare("sap.ushell.ui.launchpad.CatalogListItemRenderer");jQuery.sap.require('sap.ui.core.Renderer');jQuery.sap.require('sap.m.ListItemBaseRenderer');sap.ushell.ui.launchpad.CatalogListItemRenderer=sap.ui.core.Renderer.extend(sap.m.ListItemBaseRenderer);var translationBundle=sap.ushell.resources.i18n;sap.ushell.ui.launchpad.CatalogListItemRenderer.renderLIAttributes=function(r,l){r.addClass("sapUshellCatalogLI");if(l._showSeparators==sap.m.ListSeparators.None&&!l.getIconInset()){r.addClass("sapUshellCatalogLIShowSeparatorNone")}if(l.getIcon())r.addClass("sapUshellCatalogLIIcon");if(!l.getIconInset())r.addClass("sapUshellCatalogLIIconThumb");if(l.getDescription()&&l.getIcon()&&l.getIconInset())r.addClass("sapUshellCatalogLIDescIcon");if(l.getDescription()&&!l.getIcon())r.addClass("sapUshellCatalogLIDescNoIcon");if(!l.getDescription()&&l.getIcon())r.addClass("sapUshellCatalogLINoDescIcon");if(l.getType()==sap.m.ListType.Detail||l.getType()==sap.m.ListType.DetailAndActive)r.addClass("sapUshellCatalogLIDetail")};sap.ushell.ui.launchpad.CatalogListItemRenderer.renderLIContent=function(r,l){var i=l.getTitle()&&l.getDescription()||(l._showSeparators==sap.m.ListSeparators.None&&!l.getIconInset());var a=l.getInfo();if(i){r.write("<div");r.addClass("sapUshellCatalogLIDiv");r.writeAttributeEscaped("title",l.getTitle()+" "+translationBundle.getText("catalogListItem_tooltip"));r.writeClasses();r.write(">")}r.write("<div");if(!i){r.addClass("sapUshellCatalogLIDiv")}r.addClass("sapUshellCatalogLITitleDiv");r.writeClasses();r.write(">");if(!i&&l._bNoFlex){r.write('<div class="sapMLIBNoFlex">')}r.write("<");r.write(l.getHeaderLevel().toLowerCase());if(i){r.addClass("sapUshellCatalogLITitle")}else{r.addClass("sapUshellCatalogLITitleOnly")}r.writeClasses();r.writeAccessibilityState(l,{label:l.getTitle()+" "+translationBundle.getText("CatalogListItemTitle_label")});r.write(">");if(l.getEditMode()){r.renderControl(l.getEditInputField())}else{r.writeEscaped(l.getTitle())}r.write("</");r.write(l.getHeaderLevel().toLowerCase());r.write(">");if(a&&(sap.ui.core.theming.Parameters.get("sapUiInfoTop")=="true"||!i)){r.write("<div");r.writeAttribute("id",l.getId()+"-info");r.addClass("sapUshellCatalogLIInfo");r.addClass("sapUshellCatalogLIInfo"+l.getInfoState());r.writeClasses();r.write(">");r.writeEscaped(a);r.write("</div>")}if(!i&&l._bNoFlex){r.write('</div>')}r.write("</div>");r.write("<div");r.addClass("sapUshellCatalogLIDescriptionDiv");r.writeClasses();r.write(">");if(i){r.write("<div");r.addClass("sapUshellCatalogLIDescription");r.writeClasses();r.writeAccessibilityState(l,{label:translationBundle.getText("CatalogListItemDescription_label")+l.getDescription()});r.write(">");r.writeEscaped(l.getDescription());r.write("</div>")}if(a&&sap.ui.core.theming.Parameters.get("sapUiInfoTop")=="false"&&i){r.write("<div");r.writeAttribute("id",l.getId()+"-info");r.addClass("sapUshellCatalogLIInfo");if(l._showSeparators==sap.m.ListSeparators.None&&l.getInfoState()==sap.ui.core.ValueState.None)r.addClass("sapUshellCatalogLIInfo"+l.getInfoState()+"ShowSeparatorNone");else r.addClass("sapUshellCatalogLIInfo"+l.getInfoState());r.writeClasses();r.write(">");r.writeEscaped(a);r.write("</div>")}r.write("</div>");if(i){r.write("</div>")}if(l.getIcon()){if(l.getIconInset()){var L=sap.ui.getCore().byId(l._listId);if(L&&L.getMode()==sap.m.ListMode.None&&!L.getShowUnread()){r.renderControl(l._getImage((l.getId()+"-img"),"sapUshellCatalogLIImgFirst",l.getIcon(),l.getIconDensityAware()))}else{r.renderControl(l._getImage((l.getId()+"-img"),"sapUshellCatalogLIImg",l.getIcon(),l.getIconDensityAware()))}}else{r.renderControl(l._getImage((l.getId()+"-img"),"sapUshellCatalogLIImgThumb",l.getIcon(),l.getIconDensityAware()))}}}};if(!jQuery.sap.isDeclared('sap.ushell.ui.launchpad.DashboardGroupsContainer')){
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5) (c) Copyright 2009-2013 SAP AG. All rights reserved
 */
jQuery.sap.declare("sap.ushell.ui.launchpad.DashboardGroupsContainer");jQuery.sap.require('sap.ui.core.Control');sap.ui.core.Control.extend("sap.ushell.ui.launchpad.DashboardGroupsContainer",{metadata:{library:"sap.ushell",properties:{"accessibilityLabel":{type:"string",group:"",defaultValue:null}},aggregations:{"groups":{type:"sap.ui.core.Control",multiple:true,singularName:"group"}},events:{"afterRendering":{}}}});sap.ushell.ui.launchpad.DashboardGroupsContainer.M_EVENTS={'afterRendering':'afterRendering'};
// Copyright (c) 2013 SAP AG, All Rights Reserved
(function(){"use strict";sap.ushell.ui.launchpad.DashboardGroupsContainer.prototype.updateGroups=sap.ushell.override.updateAggregatesFactory("groups");sap.ushell.ui.launchpad.DashboardGroupsContainer.prototype.onAfterRendering=function(){this.fireAfterRendering()}}())};if(!jQuery.sap.isDeclared('sap.ushell.ui.launchpad.DashboardGroupsContainerRenderer')){(function(){"use strict";jQuery.sap.declare("sap.ushell.ui.launchpad.DashboardGroupsContainerRenderer");sap.ushell.ui.launchpad.DashboardGroupsContainerRenderer={};sap.ushell.ui.launchpad.DashboardGroupsContainerRenderer.render=function(r,c){r.write("<div");r.writeControlData(c);r.addClass("sapUshellDashboardGroupsContainer");r.writeClasses();if(c.getAccessibilityLabel()){r.writeAccessibilityState(c,{label:c.getAccessibilityLabel()})}r.write(">");var g=c.getGroups();jQuery.each(g,function(){r.write("<div");r.addClass("sapUshellDashboardGroupsContainerItem");r.writeClasses();r.write(">");r.renderControl(this);r.write("</div>")});r.write("</div>")}}())};if(!jQuery.sap.isDeclared('sap.ushell.ui.launchpad.DeleteArea')){
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5) (c) Copyright 2009-2013 SAP AG. All rights reserved
 */
jQuery.sap.declare("sap.ushell.ui.launchpad.DeleteArea");jQuery.sap.require('sap.ui.core.Control');sap.ui.core.Control.extend("sap.ushell.ui.launchpad.DeleteArea",{metadata:{library:"sap.ushell",properties:{"type":{type:"sap.ushell.ui.launchpad.DeleteAreaType",group:"Misc",defaultValue:sap.ushell.ui.launchpad.DeleteAreaType.Dashboard},"message":{type:"string",group:"Misc",defaultValue:''},"icon":{type:"string",group:"Misc",defaultValue:''}},events:{"drop":{},"tileOver":{},"tileOut":{}}}});sap.ushell.ui.launchpad.DeleteArea.M_EVENTS={'drop':'drop','tileOver':'tileOver','tileOut':'tileOut'};
// Copyright (c) 2013 SAP AG, All Rights Reserved
(function(){"use strict";sap.ushell.ui.launchpad.DeleteArea.prototype.init=function(){};sap.ushell.ui.launchpad.DeleteArea.prototype.onAfterRendering=function(){if(this.getType()===sap.ushell.ui.launchpad.DeleteAreaType.Dashboard){this.jqDeleteArea_visual=this.$().find(".sapUshellDeleteArea_dashboard_visual");this.jqDeleteArea_functional=this.$().find(".sapUshellDeleteArea_dashboard_functional");this.tileOver(false)}else{this.jqDeleteArea_visual=this.$().find(".sapUshellDeleteArea_grouplist_visual");this.jqDeleteArea_functional=this.$().find(".sapUshellDeleteArea_grouplist_functional");this.groupOver(false)}this.jqDeleteArea_HoverMessage=this.jqDeleteArea_visual.siblings(".sapUshellDeleteArea_HoverMessage");if(sap.ui.Device.system.desktop){this._addDroppable()}};sap.ushell.ui.launchpad.DeleteArea.prototype.setMessage=function(m){this.setProperty("message",m,true);this.$().find(".sapUshellDeleteArea_HoverMessage").text(m)};sap.ushell.ui.launchpad.DeleteArea.prototype._addDroppable=function(){if(this.jqDeleteArea_functional.is(".ui-droppable")){return}this.jqDeleteArea_functional.droppable({greedy:'true',tolerance:'touch',accept:jQuery.proxy(this._handleAccept,this),drop:jQuery.proxy(this._handleDrop,this),over:jQuery.proxy(this._handleOver,this),out:jQuery.proxy(this._handleOut,this)})};sap.ushell.ui.launchpad.DeleteArea.prototype.tileOver=function(b){this.jqDeleteArea_functional.data("tileOver",b)};sap.ushell.ui.launchpad.DeleteArea.prototype.groupOver=function(b){this.jqDeleteArea_functional.data("groupOver",b)};sap.ushell.ui.launchpad.DeleteArea.prototype.getFunctionalArea=function(){return this.jqDeleteArea_functional};sap.ushell.ui.launchpad.DeleteArea.prototype.getVisualArea=function(){return this.jqDeleteArea_visual};sap.ushell.ui.launchpad.DeleteArea.prototype.show=function(){this.jqDeleteArea_functional.removeClass("sapUshellDeleteArea_functional_hidden").addClass("sapUshellDeleteArea_functional_show");if(this.getType()===sap.ushell.ui.launchpad.DeleteAreaType.Dashboard){if(sap.ui.Device.os.android){this.jqDeleteArea_visual.removeClass("sapUshellDeleteArea_visual_hidden").addClass("sapUshellDeleteArea_visual_show sapUshellDeleteArea_dashboard_visual_show")}else{this.jqDeleteArea_visual.switchClass("sapUshellDeleteArea_visual_hidden","sapUshellDeleteArea_visual_show sapUshellDeleteArea_dashboard_visual_show",250,"swing")}}else{if(sap.ui.Device.os.android){this.jqDeleteArea_visual.removeClass("sapUshellDeleteArea_visual_hidden").addClass("sapUshellDeleteArea_visual_show sapUshellDeleteArea_grouplist_visual_show")}else{this.jqDeleteArea_visual.switchClass("sapUshellDeleteArea_visual_hidden","sapUshellDeleteArea_visual_show sapUshellDeleteArea_grouplist_visual_show",250,"swing")}}};sap.ushell.ui.launchpad.DeleteArea.prototype.hide=function(){this.jqDeleteArea_visual.removeClass("sapUshellDeleteArea_visual_hover");if(this.getType()===sap.ushell.ui.launchpad.DeleteAreaType.Dashboard){this.jqDeleteArea_visual.switchClass("sapUshellDeleteArea_visual_show sapUshellDeleteArea_dashboard_visual_show","sapUshellDeleteArea_visual_hidden",250,"swing");this.jqDeleteArea_visual.removeClass("sapUshellDeleteArea_dashboard_visual_hover")}else{this.jqDeleteArea_visual.switchClass("sapUshellDeleteArea_visual_show sapUshellDeleteArea_grouplist_visual_show","sapUshellDeleteArea_visual_hidden",250,"swing");this.jqDeleteArea_visual.removeClass("sapUshellDeleteArea_grouplist_visual_hover")}this.jqDeleteArea_functional.removeClass("sapUshellDeleteArea_functional_show").addClass("sapUshellDeleteArea_functional_hidden");this.jqDeleteArea_HoverMessage.switchClass("","sapUshellDeleteArea_HoverMessage_Hide",50,"swing")};sap.ushell.ui.launchpad.DeleteArea.prototype._handleAccept=function(d){if(this.getType()===sap.ushell.ui.launchpad.DeleteAreaType.GroupList){return d.hasClass("sapUshellGroupListItem")}else{return true}};sap.ushell.ui.launchpad.DeleteArea.prototype._handleDrop=function(e,u){this.fireEvent("drop",{functionalArea:this.jqDeleteArea_functional,ui:u});this.jqDeleteArea_HoverMessage.switchClass("","sapUshellDeleteArea_HoverMessage_Hide",50,"swing")};sap.ushell.ui.launchpad.DeleteArea.prototype.adjustStyleOnOverIn=function(i,o){if(i){this.jqDeleteArea_visual.switchClass("","sapUshellDeleteArea_visual_hover sapUshellDeleteArea_dashboard_visual_hover",100,"swing")}else{this.jqDeleteArea_visual.switchClass("","sapUshellDeleteArea_visual_hover sapUshellDeleteArea_grouplist_visual_hover",100,"swing")}this.jqDeleteArea_HoverMessage.switchClass("sapUshellDeleteArea_HoverMessage_Hide","",150,"swing");if(o){o.addClass("sapUshellDeletedObjectTranparency")}};sap.ushell.ui.launchpad.DeleteArea.prototype._handleOver=function(e,u){var t=this,i=(this.getType()===sap.ushell.ui.launchpad.DeleteAreaType.Dashboard);if(i){this.tileOver(true)}else{if(u.draggable){var d=sap.ui.getCore().byId(u.draggable.attr('id'));if(d){this.setDeleteAreaMessage(d)}}this.groupOver(true)}this.fireTileOver();this.adjustStyleOnOverIn(i,u.helper)};sap.ushell.ui.launchpad.DeleteArea.prototype.setDeleteAreaMessage=function(e){if(e.getRemovable()){this.setMessage(sap.ushell.resources.i18n.getText("deleteAreaMsgForGroup"))}else{this.setMessage(sap.ushell.resources.i18n.getText("reset_group"))}};sap.ushell.ui.launchpad.DeleteArea.prototype.isElementOverDeleteArea=function(e){var a=e.getBoundingClientRect(),d,b,c,f;d=this.jqDeleteArea_visual[0].offsetTop;b=this.jqDeleteArea_visual[0].offsetLeft;c=a.top+a.height;f=a.left+a.width;var i=f>=b+this.jqDeleteArea_visual[0].offsetWidth/5;var g=c>=d+this.jqDeleteArea_visual[0].offsetHeight/5;return i&&g};sap.ushell.ui.launchpad.DeleteArea.prototype.adjustStyleOnOverOut=function(i,o){if(i){this.jqDeleteArea_visual.switchClass("sapUshellDeleteArea_visual_hover sapUshellDeleteArea_dashboard_visual_hover","",100,"swing")}else{this.jqDeleteArea_visual.switchClass("sapUshellDeleteArea_visual_hover sapUshellDeleteArea_grouplist_visual_hover","",100,"swing")}this.jqDeleteArea_HoverMessage.switchClass("","sapUshellDeleteArea_HoverMessage_Hide",50,"swing");if(o){o.removeClass("sapUshellDeletedObjectTranparency")}};sap.ushell.ui.launchpad.DeleteArea.prototype._handleOut=function(e,u){var t=this,i=(this.getType()===sap.ushell.ui.launchpad.DeleteAreaType.Dashboard);if(i){this.tileOver(false)}else{this.groupOver(false)}this.fireTileOut();this.adjustStyleOnOverOut(i,u.helper)}}())};if(!jQuery.sap.isDeclared('sap.ushell.ui.launchpad.DeleteAreaRenderer')){(function(){"use strict";jQuery.sap.declare("sap.ushell.ui.launchpad.DeleteAreaRenderer");sap.ushell.ui.launchpad.DeleteAreaRenderer={};sap.ushell.ui.launchpad.DeleteAreaRenderer.render=function(r,c){r.write("<div");r.writeControlData(c);r.write(">");r.write("<div");r.addClass("sapUshellDeleteArea_visual");r.addClass("sapUshellDeleteArea_visual_hidden");if(c.getType()===sap.ushell.ui.launchpad.DeleteAreaType.Dashboard){r.addClass("sapUshellDeleteArea_dashboard");r.addClass("sapUshellDeleteArea_dashboard_visual")}else{r.addClass("sapUshellDeleteArea_grouplist");r.addClass("sapUshellDeleteArea_grouplist_visual")}r.writeStyles();r.writeClasses();r.write(">");if(c.getIcon()){var i=new sap.ui.core.Icon({src:c.getIcon()});i.addStyleClass('sapUshellDeleteAreaIcon');r.renderControl(i)}r.write("</div>");r.write("<div");r.addClass("sapUshellDeleteArea_HoverMessage");r.addClass("sapUshellDeleteArea_HoverMessage_Hide");r.writeStyles();r.writeClasses();r.write(">"+c.getMessage());r.write("</div>");r.write("<div");r.addClass("sapUshellDeleteArea_functional");r.addClass("sapUshellDeleteArea_functional_hidden");if(c.getType()===sap.ushell.ui.launchpad.DeleteAreaType.Dashboard){r.addClass("sapUshellDeleteArea_dashboard_functional")}else{r.addClass("sapUshellDeleteArea_grouplist_functional")}r.writeStyles();r.writeClasses();r.write(">");r.write("</div>");r.write("</div>")}}())};if(!jQuery.sap.isDeclared('sap.ushell.ui.launchpad.EmbeddedSupportErrorMessage')){
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5) (c) Copyright 2009-2013 SAP AG. All rights reserved
 */
jQuery.sap.declare("sap.ushell.ui.launchpad.EmbeddedSupportErrorMessage");jQuery.sap.require('sap.m.Dialog');sap.m.Dialog.extend("sap.ushell.ui.launchpad.EmbeddedSupportErrorMessage",{metadata:{library:"sap.ushell",events:{"afterClose":{}}}});sap.ushell.ui.launchpad.EmbeddedSupportErrorMessage.M_EVENTS={'afterClose':'afterClose'};
// Copyright (c) 2013 SAP AG, All Rights Reserved
(function(){"use strict";jQuery.sap.require('sap.m.Dialog');jQuery.sap.require('sap.m.Button');jQuery.sap.declare("sap.ushell.ui.launchpad.EmbeddedSupportErrorMessage");sap.ushell.ui.launchpad.EmbeddedSupportErrorMessage.prototype.open=function(){var c,C,o;this.translationBundle=sap.ushell.resources.i18n;c=new sap.m.Button({id:sap.ui.core.ElementMetadata.uid("supportBtn"),text:this.translationBundle.getText("contactSupportBtn"),press:function(){this.close();jQuery.sap.require("sap.ushell.ui.footerbar.ContactSupportButton");this.oContactSupport=new sap.ushell.ui.footerbar.ContactSupportButton("ContactSupportErrorMsg",{visible:true});if(this.oContactSupport){this.oContactSupport.showContactSupportDialog();this.oContactSupport.destroy()}}.bind(this)});o=new sap.m.Button({id:sap.ui.core.ElementMetadata.uid("closeBtn"),text:this.translationBundle.getText("close"),press:function(){this.close()}.bind(this)});this.setType(sap.m.DialogType.Message);this.setIcon('sap-icon://alert');this.setRightButton(o);this.setLeftButton(c);this._addStyleClassToContent();this.addStyleClass('sapMMessageBoxError');this.attachAfterClose(function(){this.destroy()}.bind(this));if(sap.m.Dialog.prototype.open){sap.m.Dialog.prototype.open.apply(this,arguments)}};sap.ushell.ui.launchpad.EmbeddedSupportErrorMessage.prototype._addStyleClassToContent=function(){var c=this.getContent(),C,i;for(i in c){C=c[i];if("sap.m.Text"===C.getMetadata().getName()&&!C.aCustomStyleClasses){C.addStyleClass("sapMMsgBoxText")}}}}())};if(!jQuery.sap.isDeclared('sap.ushell.ui.launchpad.EmbeddedSupportErrorMessageRenderer')){(function(){"use strict";jQuery.sap.declare("sap.ushell.ui.launchpad.EmbeddedSupportErrorMessageRenderer");jQuery.sap.require('sap.ui.core.Renderer');jQuery.sap.require('sap.m.DialogRenderer');sap.ushell.ui.launchpad.EmbeddedSupportErrorMessageRenderer=sap.ui.core.Renderer.extend(sap.m.DialogRenderer)}())};if(!jQuery.sap.isDeclared('sap.ushell.ui.launchpad.GroupListItem')){
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5) (c) Copyright 2009-2013 SAP AG. All rights reserved
 */
jQuery.sap.declare("sap.ushell.ui.launchpad.GroupListItem");jQuery.sap.require('sap.m.ListItemBase');sap.m.ListItemBase.extend("sap.ushell.ui.launchpad.GroupListItem",{metadata:{library:"sap.ushell",properties:{"title":{type:"string",group:"Misc",defaultValue:null},"defaultGroup":{type:"boolean",group:"Misc",defaultValue:false},"show":{type:"boolean",group:"Misc",defaultValue:true},"editMode":{type:"boolean",group:"Misc",defaultValue:false},"groupId":{type:"string",group:"Misc",defaultValue:null},"index":{type:"int",group:"Misc",defaultValue:null},"allowEditMode":{type:"boolean",group:"Misc",defaultValue:true},"removable":{type:"boolean",group:"Misc",defaultValue:null},"numberOfTiles":{type:"int",group:"Misc",defaultValue:0},"isGroupVisible":{type:"boolean",group:"Misc",defaultValue:true}},events:{"press":{},"change":{},"drop":{},"over":{},"afterRendering":{},"out":{}}}});sap.ushell.ui.launchpad.GroupListItem.M_EVENTS={'press':'press','change':'change','drop':'drop','over':'over','afterRendering':'afterRendering','out':'out'};
// Copyright (c) 2013 SAP AG, All Rights Reserved
(function(){"use strict";jQuery.sap.require('sap.m.Input');jQuery.sap.require('sap.ui.thirdparty.jqueryui.jquery-ui-core');jQuery.sap.require('sap.ui.thirdparty.jqueryui.jquery-ui-widget');jQuery.sap.require('sap.ui.thirdparty.jqueryui.jquery-ui-mouse');jQuery.sap.require('sap.ui.thirdparty.jqueryui.jquery-ui-droppable');sap.ushell.ui.launchpad.GroupListItem.prototype.init=function(){this._sDefaultValue=sap.ushell.resources.i18n.getText("new_group_name");this._sOldTitle="";this.oEditInputField=new sap.m.Input({placeholder:this._sDefaultValue,value:this.getTitle()});var t=this;this.oEditInputField.onfocusout=function(){jQuery.proxy(t._stopEdit,t)();window.scrollTo(0,0)}};sap.ushell.ui.launchpad.GroupListItem.prototype.exit=function(){if(sap.ui.Device.system.desktop){this.$().unbind("drop",this._handleDrop).unbind("dropover",this._handleDropOver).droppable("destroy")}this.oEditInputField.destroy();sap.m.ListItemBase.prototype.exit.apply(this,arguments)};sap.ushell.ui.launchpad.GroupListItem.prototype.onBeforeRendering=function(){if(sap.ui.Device.system.desktop){this.$().unbind("drop",this._handleDrop).unbind("dropover",this._handleDropOver).droppable("destroy")}};sap.ushell.ui.launchpad.GroupListItem.prototype.onAfterRendering=function(){var j=jQuery.sap.byId(this.sId),h=!this.getShow()||(this.getDefaultGroup()&&!this.groupHasVisibleTiles())||(!this.groupHasVisibleTiles()&&sap.ui.getCore().byId("shell")&&sap.ui.getCore().byId("shell").getModel()&&!sap.ui.getCore().byId("shell").getModel().getProperty("/personalization"));if(this.getEditMode()){this.focus();jQuery.sap.byId(this.oEditInputField.sId).click()}if(sap.ui.Device.system.desktop){this.$().droppable({greedy:true,tolerance:"pointer",accept:".sapUshellTile",over:jQuery.proxy(this._handleOver,this),out:jQuery.proxy(this._handleOut,this),drop:jQuery.proxy(this._handleDrop,this)})}if(!h){j.css("display","flex")}else{j.css("display","none")}this.fireAfterRendering()};sap.ushell.ui.launchpad.GroupListItem.prototype.groupHasVisibleTiles=function(){var g=this.getModel().getProperty("/groups/"+this.getIndex()+"/tiles");return sap.ushell.utils.groupHasVisibleTiles(g)};sap.ushell.ui.launchpad.GroupListItem.prototype.getFocusDomRef=function(){return(this.getEditMode()&&this.oEditInputField&&this.oEditInputField.getFocusDomRef())||this.getDomRef()};sap.ushell.ui.launchpad.GroupListItem.prototype._startEdit=function(){if(this.getAllowEditMode()){this._sOldTitle=this.oEditInputField.getValue();this.setEditMode(true);this.focus();var t=this;setTimeout(function(){t.oEditInputField.selectText(0,t.oEditInputField.getValue().length)})}};sap.ushell.ui.launchpad.GroupListItem.prototype._stopEdit=function(){if(!this.getEditMode()){return}var c=this.oEditInputField.getValue().trim(),n=c||this._sDefaultValue,h=n!==this._sOldTitle;if(h){this.setTitle(n).fireChange({newTitle:n})}this.setEditMode(false);var a=document.activeElement;if(a.nodeName.toLowerCase()!=="body"&&a.nodeName.toLowerCase()!=="span"){a.blur()}var j=jQuery("#groupList");j.trigger("resize",[j.width(),j.height()])};sap.ushell.ui.launchpad.GroupListItem.prototype._handleOver=function(e,u){jQuery("#"+this.sId).addClass("sapUshellDrop");this.fireOver({control:(u&&u.draggable&&(u.draggable.length>0)&&sap.ui.getCore().byId(u.draggable[0].id))||undefined})};sap.ushell.ui.launchpad.GroupListItem.prototype._handleOut=function(e,u){jQuery("#"+this.sId).removeClass("sapUshellDrop");this.fireOut({control:(u&&u.draggable&&(u.draggable.length>0)&&sap.ui.getCore().byId(u.draggable[0].id))||undefined})};sap.ushell.ui.launchpad.GroupListItem.prototype._handleDrop=function(e,u){this.fireDrop({control:(u&&u.draggable&&(u.draggable.length>0)&&sap.ui.getCore().byId(u.draggable[0].id))||undefined})};sap.ushell.ui.launchpad.GroupListItem.prototype.onclick=function(e){this.firePress({id:this.getId()})};sap.ushell.ui.launchpad.GroupListItem.prototype.onmousedown=function(){this.focus()};sap.ushell.ui.launchpad.GroupListItem.prototype.ondblclick=function(){if(sap.ui.getCore().byId("shell")&&sap.ui.getCore().byId("shell").getModel()&&sap.ui.getCore().byId("shell").getModel().getProperty("/personalization")){this._startEdit()}};sap.ushell.ui.launchpad.GroupListItem.prototype.onsapenter=function(){this._stopEdit();this.firePress({id:this.getId(),action:"sapenter"})};sap.ushell.ui.launchpad.GroupListItem.prototype.onsapescape=function(){this._stopEdit()};sap.ushell.ui.launchpad.GroupListItem.prototype.setEditMode=function(m){this.setProperty("editMode",m,true);setTimeout(function(){var j=jQuery("#groupList");j.trigger("resize",[j.width(),j.height()])},5);return this.toggleStyleClass("sapUshellEditing",m)};sap.ushell.ui.launchpad.GroupListItem.prototype.setAllowEditMode=function(a){this.setProperty("allowEditMode",a,true);return this};sap.ushell.ui.launchpad.GroupListItem.prototype.setRemovable=function(r){this.setProperty("removable",r,true);return this};sap.ushell.ui.launchpad.GroupListItem.prototype.setGroupId=function(g){this.setProperty("groupId",g,true);return this};sap.ushell.ui.launchpad.GroupListItem.prototype.setTitle=function(t){this.setProperty("title",t);this.oEditInputField.setValue(t);this.$().find(".sapMSLITitleOnly").text(t);return this}}())};if(!jQuery.sap.isDeclared('sap.ushell.ui.launchpad.GroupListItemRenderer')){(function(){"use strict";jQuery.sap.declare("sap.ushell.ui.launchpad.GroupListItemRenderer");jQuery.sap.require('sap.m.ListItemBaseRenderer');sap.ushell.ui.launchpad.GroupListItemRenderer=sap.ui.core.Renderer.extend(sap.m.ListItemBaseRenderer);var t=sap.ushell.resources.i18n;sap.ushell.ui.launchpad.GroupListItemRenderer.renderLIAttributes=function(r,l){r.addClass("sapUshellGroupLI");if(l.getEditMode()){r.addClass("sapUshellEditing")}};sap.ushell.ui.launchpad.GroupListItemRenderer.renderLIContent=function(r,l){r.write("<div");r.addClass("sapMSLIDiv");r.addClass("sapMSLITitleDiv");r.writeClasses();if(!l.getVisible()){r.addStyle("display","none");r.writeStyles()}r.write(">");r.renderControl(l.oEditInputField);r.write("<div");r.addClass("sapMSLITitleOnly");r.writeClasses();r.writeAccessibilityState(l,{label:l.getTitle()+t.getText("GroupListItem_label")});r.write(">");r.writeEscaped(l.getTitle());r.write("</div>");r.write("</div>")}}())};if(!jQuery.sap.isDeclared('sap.ushell.ui.launchpad.HeaderTileRenderer')){jQuery.sap.declare("sap.ushell.ui.launchpad.HeaderTileRenderer");sap.ushell.ui.launchpad.HeaderTileRenderer={};var translationBundle=sap.ushell.resources.i18n;sap.ushell.ui.launchpad.HeaderTileRenderer.render=function(r,c){r.write("<");r.write(c.getHeaderLevel().toLowerCase());r.writeControlData(c);r.addClass("sapUshellHeaderTile");r.addClass("sapUiStrongBackgroundTextColor");if(!c.getVisible()){r.addClass("sapUshellHidden")}r.writeClasses();r.writeAccessibilityState(c,{label:c.getHeaderText()+translationBundle.getText("HeaderCategory")});r.write(">");r.writeEscaped(c.getHeaderText());r.write("</");r.write(c.getHeaderLevel().toLowerCase());r.write(">")}};if(!jQuery.sap.isDeclared('sap.ushell.ui.launchpad.LoadingDialog')){
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5) (c) Copyright 2009-2013 SAP AG. All rights reserved
 */
jQuery.sap.declare("sap.ushell.ui.launchpad.LoadingDialog");jQuery.sap.require('sap.m.BusyDialog');sap.m.BusyDialog.extend("sap.ushell.ui.launchpad.LoadingDialog",{metadata:{library:"sap.ushell",properties:{"iconUri":{type:"sap.ui.core.URI",group:"Appearance",defaultValue:null}}}});
// Copyright (c) 2013 SAP AG, All Rights Reserved
(function(){"use strict";jQuery.sap.require('sap.ui.core.Icon');sap.ushell.ui.launchpad.LoadingDialog.prototype.init=function(){sap.m.BusyDialog.prototype.init.call(this,arguments);this.oIcon=new sap.ui.core.Icon()};sap.ushell.ui.launchpad.LoadingDialog.prototype.exit=function(){sap.m.BusyDialog.prototype.exit.call(this,arguments);if(this.oIcon){this.oIcon.destroy();this.oIcon=null}};sap.ushell.ui.launchpad.LoadingDialog.prototype.isOpen=function(){var p=this._oPopup;return p.isOpen()};sap.ushell.ui.launchpad.LoadingDialog.prototype.setPopupVisible=function(v){this.toggleStyleClass("sapUshellLoadingDialogInvisible",!v)};sap.ushell.ui.launchpad.LoadingDialog.prototype.setAppInfoVisible=function(v){this.toggleStyleClass("sapUshellLoadingDialogAppDataInvisible",!v)};sap.ushell.ui.launchpad.LoadingDialog.prototype.openLoadingScreen=function(){if(!this._oPopup.isOpen()){this.setPopupVisible(true);this.open();jQuery('.sapUiBLy').addClass('sapUshellLoadingDialog')}};sap.ushell.ui.launchpad.LoadingDialog.prototype.showAppInfo=function(a,i){var t=this,T=function(t){t.setAppInfoVisible(true)};this.setText(a);this.setIconUri(i);this.oIcon.setSrc(i);window.setTimeout(function(){T(t)},50)};sap.ushell.ui.launchpad.LoadingDialog.prototype.closeLoadingScreen=function(){var t=this,T=function(t){t.setText(null);t.setIconUri(null);t.setAppInfoVisible(false);if(t.isActive()){t.close()}jQuery('.sapMDialogBLyInit').removeClass('sapUshellLoadingDialog')};if(this._oPopup&&this._oPopup.isOpen()){this.setPopupVisible(false);window.setTimeout(function(){T(t)},300)}}}())};if(!jQuery.sap.isDeclared('sap.ushell.ui.launchpad.LoadingDialogRenderer')){(function(){"use strict";jQuery.sap.declare("sap.ushell.ui.launchpad.LoadingDialogRenderer");sap.ushell.ui.launchpad.LoadingDialogRenderer={};sap.ushell.ui.launchpad.LoadingDialogRenderer.render=function(r,c){var t=c.getTooltip_AsString();c._oLabel.addStyleClass("sapUshellLoadingDialogLabel");r.write("<div");r.writeControlData(c);r.addClass("sapUshellLoadingDialogControl sapMBusyDialog sapMCommonDialog");if(sap.ui.Device.system.iphone){r.addClass("sapMDialogHidden")}if(!c._isPlatformDependent){if(!c.getText()&&!c.getTitle()&&!c.getShowCancelButton()){r.addClass("sapMBusyDialogSimple")}}r.writeClasses();if(t){r.writeAttributeEscaped("title",t)}r.write(">");if(c.getTitle()){r.write("<header class=\"sapMDialogTitle\">");r.writeEscaped(c.getTitle());r.write("</header>")}if(jQuery.os.ios||!c._isPlatformDependent){this.renderAppInfo(r,c);this.renderFioriFlower(r,c)}else{this.renderFioriFlower(r,c);this.renderAppInfo(r,c)}if(c.getShowCancelButton()){r.write("<footer class='sapMBusyDialogFooter sapMFooter-CTX'>");r.renderControl(c._oButton);r.write("</footer>")}r.write("</div>")};sap.ushell.ui.launchpad.LoadingDialogRenderer.renderAppInfo=function(r,c){r.write("<div").addClass("sapUshellLoadingDialogAppData").writeClasses().write(">");if(c.getIconUri()){r.renderControl(c.oIcon)}r.renderControl(c._oLabel);r.write("</div>")};sap.ushell.ui.launchpad.LoadingDialogRenderer.renderFioriFlower=function(r,c){var i,R=false,u=[/Android\s4\.2.+GT-I9505.+Chrome\/18/];if(navigator.userAgent){for(i=0;i<u.length;i=i+1){if(u[i].test(navigator.userAgent)){R=true;break}}}if(jQuery.support.cssAnimations&&!R){var b=sap.ui.getCore().getConfiguration().getRTL();r.write("<div id='fiori2-loader'>");r.write("<div class='fiori2-blossom'>");if(!b){for(i=1;i<6;i=i+1){r.write("<div class='fiori2-leafContainer fiori2-leafContainer"+i+"'>");r.write("<div class='fiori2-leaf fiori2-leaf"+i+"'></div>");r.write("</div>")}}else{for(i=1;i<6;i=i+1){r.write("<div class='fiori2-leafContainer fiori2-leafContainer"+i+"'>");r.write("<div class='fiori2-leaf rtlFiori2-leaf"+i+"'></div>");r.write("</div>")}}r.write("</div>");r.write("</div>")}else{r.renderControl(c._busyIndicator)}}}())};if(!jQuery.sap.isDeclared('sap.ushell.ui.launchpad.Panel')){
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5) (c) Copyright 2009-2013 SAP AG. All rights reserved
 */
jQuery.sap.declare("sap.ushell.ui.launchpad.Panel");jQuery.sap.require('sap.m.Panel');sap.m.Panel.extend("sap.ushell.ui.launchpad.Panel",{metadata:{library:"sap.ushell",properties:{"translucent":{type:"boolean",group:"Misc",defaultValue:false}},aggregations:{"headerContent":{type:"sap.ui.core.Control",multiple:true,singularName:"headerContent"},"headerBar":{type:"sap.m.Bar",multiple:false}}}});
// Copyright (c) 2013 SAP AG, All Rights Reserved
sap.ushell.ui.launchpad.Panel.prototype.updateAggregation=sap.ushell.override.updateAggregation};if(!jQuery.sap.isDeclared('sap.ushell.ui.launchpad.PanelRenderer')){jQuery.sap.declare("sap.ushell.ui.launchpad.PanelRenderer");sap.ushell.ui.launchpad.PanelRenderer={};sap.ushell.ui.launchpad.PanelRenderer.render=function(r,c){if(!c.getVisible()){return}r.write("<section");r.writeControlData(c);r.addClass("sapMPanel");r.addClass("sapUshellPanel");if(!c.getTranslucent()){r.addClass("sapMPanelBG")}r.addStyle("width",c.getWidth());r.addStyle("height",c.getHeight());r.writeClasses();r.writeStyles();r.write(">");var h=c.getHeaderContent();var l=h.length;if(c.getHeaderText()||l>0||c.getHeaderBar()){r.write("<header");r.addClass("sapMPanelHdr");r.writeClasses();r.write(">");if(c.getHeaderText()||l>0){r.write("<");r.write(c.getHeaderLevel().toLowerCase());r.write(">");if(c.getHeaderText()){r.writeEscaped(c.getHeaderText())}for(var j=0;j<l;j++){r.renderControl(h[j])}r.write("</");r.write(c.getHeaderLevel().toLowerCase());r.write(">")}if(c.getHeaderBar()){r.renderControl(c.getHeaderBar())}r.write("</header>")}r.write("<div");r.addClass("sapMPanelContent");r.writeClasses();r.write(">");var C=c.getContent();var L=C.length;for(var i=0;i<L;i++){r.renderControl(C[i])}r.write("</div>");r.write("</section>")}};if(!jQuery.sap.isDeclared('sap.ushell.ui.launchpad.PlusTileRenderer')){(function(){"use strict";jQuery.sap.declare("sap.ushell.ui.launchpad.PlusTileRenderer");sap.ushell.ui.launchpad.PlusTileRenderer={};var t=sap.ushell.resources.i18n;sap.ushell.ui.launchpad.PlusTileRenderer.render=function(r,c){r.write("<div");r.writeAttribute("tabindex","0");r.writeControlData(c);r.addClass("sapUshellTile");r.addClass("sapUshellPlusTile");r.writeClasses();r.writeAccessibilityState(c,{label:t.getText("TilePlus_label")});r.write(">");r.renderControl(c.oIcon);r.write("</div>")}}())};if(!jQuery.sap.isDeclared('sap.ushell.ui.launchpad.SearchResultAppItem')){
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5) (c) Copyright 2009-2013 SAP AG. All rights reserved
 */
jQuery.sap.declare("sap.ushell.ui.launchpad.SearchResultAppItem");jQuery.sap.require('sap.m.Button');sap.m.Button.extend("sap.ushell.ui.launchpad.SearchResultAppItem",{metadata:{library:"sap.ushell",properties:{"searchTerm":{type:"string",group:"Appearance",defaultValue:null},"targetUrl":{type:"sap.ui.core.URI",group:"Behavior",defaultValue:null}}}});
// Copyright (c) 2013 SAP AG, All Rights Reserved
(function(){"use strict";sap.ushell.ui.launchpad.SearchResultAppItem.prototype.init=function(){if(sap.m.Button.prototype.init){sap.m.Button.prototype.init.call(this)}this.setType(sap.m.ButtonType.Transparent);this.attachPress(this._onPress,this);this.addStyleClass("sapUshellSearchResultAppItem")};sap.ushell.ui.launchpad.SearchResultAppItem.prototype.exit=function(){if(sap.m.Button.prototype.exit){sap.m.Button.prototype.exit.call(this)}this.detachPress(this._onPress,this)};sap.ushell.ui.launchpad.SearchResultAppItem.prototype.setTargetUrl=function(u){this.setEnabled(!!u);this.setProperty("targetUrl",u);return this};sap.ushell.ui.launchpad.SearchResultAppItem.prototype._onPress=function(){if(this.getTargetUrl()){if(this.getTargetUrl().startsWith('#'))window.location=this.getTargetUrl();else window.open(this.getTargetUrl())}}}())};if(!jQuery.sap.isDeclared('sap.ushell.ui.launchpad.SearchResultAppItemRenderer')){(function(){"use strict";jQuery.sap.declare("sap.ushell.ui.launchpad.SearchResultAppItemRenderer");jQuery.sap.require('sap.ui.core.Renderer');jQuery.sap.require('sap.m.ButtonRenderer');sap.ushell.ui.launchpad.SearchResultAppItemRenderer=sap.ui.core.Renderer.extend(sap.m.ButtonRenderer);sap.ushell.ui.launchpad.SearchResultAppItemRenderer.highlight=function(h,t){var r;if(h){r=new RegExp("("+h.replace(/([.*+?\^=!:${}()|\[\]\/\\])/g,"\\$1")+")","gi");t=t.replace(r,"<b>$1</b>")}return t}}())};if(!jQuery.sap.isDeclared('sap.ushell.ui.launchpad.SearchResultApps')){
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5) (c) Copyright 2009-2013 SAP AG. All rights reserved
 */
jQuery.sap.declare("sap.ushell.ui.launchpad.SearchResultApps");jQuery.sap.require('sap.m.Table');sap.m.Table.extend("sap.ushell.ui.launchpad.SearchResultApps",{metadata:{publicMethods:["resetGrowing"],library:"sap.ushell",properties:{"showGrowingTrigger":{type:"boolean",group:"Misc",defaultValue:true}},aggregations:{"results":{type:"sap.ui.core.Control",multiple:true,singularName:"result"}}}});
// Copyright (c) 2013 SAP AG, All Rights Reserved
(function(){"use strict";sap.ushell.ui.launchpad.SearchResultApps.RANGESET="SearchResultApps";sap.ushell.ui.launchpad.SearchResultApps._columns={Phone:1,Tablet:2,Desktop:3};sap.ushell.ui.launchpad.SearchResultApps.prototype.init=function(){if(sap.m.Table.prototype.init){sap.m.Table.prototype.init.call(this)}this._internalModel=new sap.ui.model.json.JSONModel({items:[]});this.setModel(this._internalModel,"internalModel");this._oColumnList=new sap.m.ColumnListItem({cells:{path:"internalModel>cells",factory:function(i,c){return new sap.ushell.ui.launchpad.SearchResultAppItem({icon:c.getProperty("icon"),text:c.getProperty("text"),targetUrl:c.getProperty("targetUrl")})}}});this.bindItems({path:"internalModel>/items",template:this._oColumnList});sap.ui.Device.media.initRangeSet(sap.ushell.ui.launchpad.SearchResultApps.RANGESET,[500,1024],"px",["Phone","Tablet","Desktop"]);sap.ui.Device.media.attachHandler(this._handleMediaChange,this,sap.ushell.ui.launchpad.SearchResultApps.RANGESET)};sap.ushell.ui.launchpad.SearchResultApps.prototype.exit=function(){sap.ui.Device.media.detachHandler(this._handleMediaChange,this,sap.ushell.ui.launchpad.SearchResultApps.RANGESET);if(sap.m.Table.prototype.exit){sap.m.Table.prototype.exit.call(this)}if(this._oColumnList){this._oColumnList.destroy()}};sap.ushell.ui.launchpad.SearchResultApps.prototype.resetGrowing=function(){this._internalModel.setData({items:[]});if(this._oGrowingDelegate){this._oGrowingDelegate.reset()}};sap.ushell.ui.launchpad.SearchResultApps.prototype.setGrowing=function(g){sap.m.Table.prototype.setGrowing.apply(this,[g]);if(g&&this._oGrowingDelegate){this._oGrowingDelegate._getTrigger=this._getTrigger}return this};sap.ushell.ui.launchpad.SearchResultApps.prototype._handleMediaChange=function(e){this.rerender()};sap.ushell.ui.launchpad.SearchResultApps.prototype._getTrigger=function(i){if(!this._oTrigger){this._oTrigger=new sap.m.CustomListItem({id:i,visible:this._oControl.getShowGrowingTrigger(),content:new sap.m.Button({type:sap.m.ButtonType.Transparent,text:this._oControl.getGrowingTriggerText(),press:[this.requestNewPage,this]}).addStyleClass("sapUshellSearchResultAppsGrowingTriggerBtn")});this._oTrigger.setParent(this._oControl,null,true).addStyleClass("sapUshellSearchResultAppsGrowingTrigger")}return this._oTrigger};sap.ushell.ui.launchpad.SearchResultApps.prototype.onBeforeRendering=function(){var d=sap.ui.Device.media.getCurrentRange(sap.ushell.ui.launchpad.SearchResultApps.RANGESET),c=sap.ushell.ui.launchpad.SearchResultApps._columns[d.name],I=[],r=this.getResults(),m=r.length<c?r.length:c,l,i,j;this.destroyAggregation("columns",true);for(i=0;i<m;i=i+1){this.addColumn(new sap.m.Column())}for(i=0;i<r.length;i=i+c){l={cells:[]};for(j=0;j<c;j=j+1){if(r[i+j]){l.cells.push({icon:r[i+j].getIcon(),text:r[i+j].getText(),targetUrl:r[i+j].getTargetUrl()})}else{l.cells.push({})}}I.push(l)}this._internalModel.setProperty("/items",I)}}())};if(!jQuery.sap.isDeclared('sap.ushell.ui.launchpad.SearchResultAppsRenderer')){(function(){"use strict";jQuery.sap.declare("sap.ushell.ui.launchpad.SearchResultAppsRenderer");jQuery.sap.require('sap.ui.core.Renderer');jQuery.sap.require('sap.m.TableRenderer');sap.ushell.ui.launchpad.SearchResultAppsRenderer=sap.ui.core.Renderer.extend(sap.m.TableRenderer);sap.ushell.ui.launchpad.SearchResultAppsRenderer.renderContainerAttributes=function(r,c){sap.m.TableRenderer.renderContainerAttributes(r,c);r.addClass("sapUshellSearchResultApps")}}())};if(!jQuery.sap.isDeclared('sap.ushell.ui.launchpad.SearchSuggestionList')){
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5) (c) Copyright 2009-2013 SAP AG. All rights reserved
 */
jQuery.sap.declare("sap.ushell.ui.launchpad.SearchSuggestionList");jQuery.sap.require('sap.m.List');sap.m.List.extend("sap.ushell.ui.launchpad.SearchSuggestionList",{metadata:{library:"sap.ushell",properties:{"disableKeyboardNavigation":{type:"boolean",group:"Misc",defaultValue:false}},events:{"pressEsc":{},"pressUpFirstItem":{}}}});sap.ushell.ui.launchpad.SearchSuggestionList.M_EVENTS={'pressEsc':'pressEsc','pressUpFirstItem':'pressUpFirstItem'};
// Copyright (c) 2013 SAP AG, All Rights Reserved
(function(){"use strict";jQuery.sap.require('sap.ui.core.delegate.ItemNavigation');sap.ushell.ui.launchpad.SearchSuggestionList.prototype.init=function(e){sap.m.List.prototype.init.call(this,e);this.setShowNoData(false);this.setShowSeparators(sap.m.ListSeparators.Inner);this.oItemNavigation=new sap.ui.core.delegate.ItemNavigation();this.oItemNavigation.attachEvent("AfterFocus",this._afterFocus)};sap.ushell.ui.launchpad.SearchSuggestionList.prototype.exit=function(e){this.oItemNavigation.detachEvent("AfterFocus",this._afterFocus);this.oItemNavigation.destroy()};sap.ushell.ui.launchpad.SearchSuggestionList.prototype.updateAggregation=sap.ushell.override.updateAggregation;sap.ushell.ui.launchpad.SearchSuggestionList.prototype.addItem=function(i){if(i instanceof sap.ushell.ui.launchpad.SearchSuggestionListItem){i.attachFocus(this._focusItem,this)}return sap.m.List.prototype.addItem.call(this,i)};sap.ushell.ui.launchpad.SearchSuggestionList.prototype.removeItem=function(i){if(i instanceof sap.ushell.ui.launchpad.SearchSuggestionListItem){i.detachFocus(this._focusItem,this)}return sap.m.List.prototype.removeItem.call(this,i)};sap.ushell.ui.launchpad.SearchSuggestionList.prototype.setDisableKeyboardNavigation=function(d){if(d){this.removeDelegate(this.oItemNavigation)}else{this.addDelegate(this.oItemNavigation)}this.setProperty("disableKeyboardNavigation",d);return this};sap.ushell.ui.launchpad.SearchSuggestionList.prototype.onsapright=function(){var s=this.oItemNavigation;s.setFocusedIndex(s.getItemDomRefs().lastIndexOf(s.getFocusedDomRef()))};sap.ushell.ui.launchpad.SearchSuggestionList.prototype.onsapup=function(e){if(e.srcControl===this.getItems()[0]){this.removeDelegate(this.oItemNavigation);this.firePressUpFirstItem()}};sap.ushell.ui.launchpad.SearchSuggestionList.prototype.onsapescape=function(){this.removeDelegate(this.oItemNavigation);this.firePressEsc()};sap.ushell.ui.launchpad.SearchSuggestionList.prototype.onAfterRendering=function(){var f=this.getDomRef(),d=f.getElementsByTagName("li"),I=[],m=0;jQuery.each(d,function(i,v){var c=v.getElementsByClassName("sapUshellSearchSuggestionListItemNavItem").length;if(c>m){m=c}});jQuery.each(d,function(i,v){var l=v.getElementsByClassName("sapUshellSearchSuggestionListItemNavItem"),j=0;if(l.length>0){for(j;j<m;j=j+1){I.push(l[j]||I[I.length-1])}}});this.oItemNavigation.setRootDomRef(f).setItemDomRefs(I).setCycling(true).setColumns(m).setSelectedIndex(0)};sap.ushell.ui.launchpad.SearchSuggestionList.prototype._afterFocus=function(e){this.setFocusedIndex(this.getItemDomRefs().indexOf(this.getFocusedDomRef()))};sap.ushell.ui.launchpad.SearchSuggestionList.prototype._focusItem=function(){this.addDelegate(this.oItemNavigation)}}())};if(!jQuery.sap.isDeclared('sap.ushell.ui.launchpad.SearchSuggestionListItem')){
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5) (c) Copyright 2009-2013 SAP AG. All rights reserved
 */
jQuery.sap.declare("sap.ushell.ui.launchpad.SearchSuggestionListItem");jQuery.sap.require('sap.m.ListItemBase');sap.m.ListItemBase.extend("sap.ushell.ui.launchpad.SearchSuggestionListItem",{metadata:{library:"sap.ushell",properties:{"text":{type:"string",group:"Misc",defaultValue:null},"isGroupFooter":{type:"boolean",group:"Misc",defaultValue:false},"categorySeperator":{type:"string",group:"Misc",defaultValue:'/'},"categoryFirstSeperator":{type:"string",group:"Misc",defaultValue:''},"icon":{type:"sap.ui.core.URI",group:"Misc",defaultValue:null},"maxCategories":{type:"int",group:"Misc",defaultValue:2},"isGroupHeader":{type:"boolean",group:"Misc",defaultValue:null}},aggregations:{"categories":{type:"sap.ui.core.Control",multiple:true,singularName:"category"}},events:{"press":{},"focus":{}}}});sap.ushell.ui.launchpad.SearchSuggestionListItem.M_EVENTS={'press':'press','focus':'focus'};
// Copyright (c) 2013 SAP AG, All Rights Reserved
(function(){"use strict";sap.ushell.ui.launchpad.SearchSuggestionListItem.prototype.addCategory=function(c){this.addAggregation("categories",c);c.addEventDelegate({onmouseover:this._focusCategory},this);c.addEventDelegate({onsapenter:this.onsapenter},c);return this};sap.ushell.ui.launchpad.SearchSuggestionListItem.prototype.setActive=function(e){return this};sap.ushell.ui.launchpad.SearchSuggestionListItem.prototype.updateAggregation=sap.ushell.override.updateAggregation;sap.ushell.ui.launchpad.SearchSuggestionListItem.prototype.firePress=function(e){if(!this.getIsGroupFooter()){sap.m.ListItemBase.prototype.firePress.call(this)}};sap.ushell.ui.launchpad.SearchSuggestionListItem.prototype.onmouseover=function(e){if(jQuery(e.target).hasClass('sapUshellSearchSuggestionListItemNavItem')){this.focus();this.fireFocus()}};sap.ushell.ui.launchpad.SearchSuggestionListItem.prototype.onsapenter=function(){this.firePress()};sap.ushell.ui.launchpad.SearchSuggestionListItem.prototype.getFocusDomRef=function(){return(this.getDomRef()&&this.getDomRef().getElementsByClassName("sapUshellSearchSuggestionListItemNavItem")[0])||null};sap.ushell.ui.launchpad.SearchSuggestionListItem.prototype._focusCategory=function(e){e.srcControl.focus();e.preventDefault();e.stopPropagation();this.fireFocus()}}())};if(!jQuery.sap.isDeclared('sap.ushell.ui.launchpad.SearchSuggestionListItemRenderer')){(function(){"use strict";jQuery.sap.declare("sap.ushell.ui.launchpad.SearchSuggestionListItemRenderer");jQuery.sap.require('sap.ui.core.Renderer');jQuery.sap.require('sap.m.ListItemBaseRenderer');sap.ushell.ui.launchpad.SearchSuggestionListItemRenderer=sap.ui.core.Renderer.extend(sap.m.ListItemBaseRenderer);sap.ushell.ui.launchpad.SearchSuggestionListItemRenderer.renderLIAttributes=function(r,l){r.addClass("sapUshellSearchSuggestionListItem");if(l.getIsGroupFooter()){r.addClass("sapUshellSearchSuggestionListItemGroupFooter")}if(l.getIsGroupHeader()){r.addClass("sapMGHLI sapMGHLIUpperCase sapMLIBTypeInactive sapMListHdr")}};sap.ushell.ui.launchpad.SearchSuggestionListItemRenderer.renderLIContent=function(r,l){var c=l.getCategories();if(l.getIsGroupHeader()){this.renderLIGroupHeader(r,l)}else if(l.getIsGroupFooter()){this.renderLIGroupFooter(r,l)}else if(l.getText()){if(l.getIcon()){this.renderLIIcon(r,l)}this.renderLIText(r,l)}if(c.length>0){this.renderLICategories(r,l,c)}};sap.ushell.ui.launchpad.SearchSuggestionListItemRenderer.renderLIIcon=function(r,l){r.write("<div");r.addClass("sapUshellSearchSuggestionListItemIcon");r.writeClasses();r.write(">");r.renderControl(new sap.ui.core.Icon({src:l.getIcon()}));r.write('</div>')};sap.ushell.ui.launchpad.SearchSuggestionListItemRenderer.renderLIGroupHeader=function(r,l){r.write("<label");r.addClass("sapMGHLITitle");r.writeClasses();r.write(">");r.writeEscaped(l.getText());r.write('</label>')};sap.ushell.ui.launchpad.SearchSuggestionListItemRenderer.renderLIGroupFooter=function(r,l){r.write("<span>");r.writeEscaped(l.getText());r.write('</span>')};sap.ushell.ui.launchpad.SearchSuggestionListItemRenderer.renderLIText=function(r,l){r.write("<div");r.addClass("sapUshellSearchSuggestionListItemText");r.writeClasses();r.write(">");r.write("<a");r.addClass("sapUshellSearchSuggestionListItemNavItem");r.writeClasses();r.write("style='display: inline-block;' tabindex='0'>");r.write(l.getText());r.write('</a>');r.write('</div>')};sap.ushell.ui.launchpad.SearchSuggestionListItemRenderer.renderLICategories=function(r,l,c){var m=l.getMaxCategories(),C=c.length<m?c.length:m,i;r.write("<div");r.addClass("sapUshellSearchSuggestionListItemCategory");r.writeClasses();r.write(">");this.renderLICategoryFirstSeperator(r,l);for(i=0;i<C;i=i+1){r.renderControl(c[i].addStyleClass("sapUshellSearchSuggestionListItemNavItem"));if((i+1)<C){this.renderLICategorySeperator(r,l)}}r.write('</div>')};sap.ushell.ui.launchpad.SearchSuggestionListItemRenderer.renderLICategoryFirstSeperator=function(r,l){r.write("<div");r.addClass("sapUshellSearchSuggestionListItemCategoryFirstSeperator");r.writeClasses();r.write(">");r.writeEscaped(l.getCategoryFirstSeperator());r.write('</div>')};sap.ushell.ui.launchpad.SearchSuggestionListItemRenderer.renderLICategorySeperator=function(r,l){r.write("<div");r.addClass("sapUshellSearchSuggestionListItemCategorySeperator");r.writeClasses();r.write(">");r.writeEscaped(l.getCategorySeperator());r.write('</div>')}}())};if(!jQuery.sap.isDeclared('sap.ushell.ui.launchpad.SearchSuggestionListRenderer')){(function(){"use strict";jQuery.sap.declare("sap.ushell.ui.launchpad.SearchSuggestionListRenderer");jQuery.sap.require('sap.ui.core.Renderer');jQuery.sap.require('sap.m.ListRenderer');sap.ushell.ui.launchpad.SearchSuggestionListRenderer=sap.ui.core.Renderer.extend(sap.m.ListRenderer);sap.ushell.ui.launchpad.SearchSuggestionListRenderer.renderContainerAttributes=function(r,c){r.addClass("sapUshellSearchSuggestionList")}}())};if(!jQuery.sap.isDeclared('sap.ushell.ui.launchpad.Tile')){
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5) (c) Copyright 2009-2013 SAP AG. All rights reserved
 */
jQuery.sap.declare("sap.ushell.ui.launchpad.Tile");jQuery.sap.require('sap.ui.core.Control');sap.ui.core.Control.extend("sap.ushell.ui.launchpad.Tile",{metadata:{library:"sap.ushell",properties:{"tall":{type:"boolean",group:"Misc",defaultValue:false},"long":{type:"boolean",group:"Misc",defaultValue:false},"uuid":{type:"string",group:"Misc",defaultValue:null},"target":{type:"string",group:"Misc",defaultValue:null},"draggable":{type:"boolean",group:"Misc",defaultValue:false},"dragContainer":{type:"string",group:"Misc",defaultValue:null},"visible":{type:"boolean",group:"Misc",defaultValue:true},"debugInfo":{type:"string",group:"Misc",defaultValue:null},"rgba":{type:"string",group:"Misc",defaultValue:null},"animationRendered":{type:"boolean",group:"Misc",defaultValue:false}},aggregations:{"tileViews":{type:"sap.ui.core.Control",multiple:true,singularName:"tileView"},"footItems":{type:"sap.ui.core.Control",multiple:true,singularName:"footItem"}},events:{"press":{},"dragStart":{},"dragStop":{},"afterRendering":{}}}});sap.ushell.ui.launchpad.Tile.M_EVENTS={'press':'press','dragStart':'dragStart','dragStop':'dragStop','afterRendering':'afterRendering'};
// Copyright (c) 2013 SAP AG, All Rights Reserved
(function(){"use strict";jQuery.sap.require('sap.ui.thirdparty.jqueryui.jquery-ui-core');jQuery.sap.require('sap.ui.thirdparty.jqueryui.jquery-ui-widget');jQuery.sap.require('sap.ui.thirdparty.jqueryui.jquery-ui-mouse');jQuery.sap.require('sap.ui.thirdparty.jqueryui.jquery-ui-draggable');sap.ushell.ui.launchpad.Tile.prototype.ontap=function(e,u){jQuery.sap.log.info("Tile clicked:",this.getDebugInfo(),"sap.ushell.ui.launchpad.Tile");return;var s=e.srcElement,I=true,i,t=function(){var h=function(){this.toggleStyleClass("sapUshellTileHide",false)};this.toggleStyleClass("sapUshellTileHide",true);this.toggleStyleClass("sapUshellTileTapped",false);window.setTimeout(jQuery.proxy(h,this),800)};if(sap.ui.Device.system.phone||!jQuery.support.cssAnimations){return}for(i=0;i<6;i=i+1){if(jQuery(s)&&(jQuery(s).hasClass("sapUshellTileInner")||jQuery(s).hasClass("sapUshellPlusTile"))){I=false;break}s=jQuery(s).parent()}if(I){return}this.toggleStyleClass("sapUshellTileTapped",true);window.setTimeout(jQuery.proxy(t,this),1000)};sap.ushell.ui.launchpad.Tile.prototype.destroy=function(s){this.destroyTileViews();sap.ui.core.Control.prototype.destroy.call(this,s)};sap.ushell.ui.launchpad.Tile.prototype.addTileView=function(o,s){o.setParent(null);sap.ui.base.ManagedObject.prototype.addAggregation.call(this,"tileViews",o,s)};sap.ushell.ui.launchpad.Tile.prototype.destroyTileViews=function(){if(this.mAggregations["tileViews"]){this.mAggregations["tileViews"].length=0}};sap.ushell.ui.launchpad.Tile.prototype.exit=function(){if(this.getDraggable()){this._setDraggable(false)}};sap.ushell.ui.launchpad.Tile.prototype.onBeforeRendering=function(){if(this.getDraggable()){this._setDraggable(false)}};sap.ushell.ui.launchpad.Tile.prototype.onAfterRendering=function(){if(this.getDraggable()){this._setDraggable(true)}var r=this.getRgba();if(r){this._redrawRGBA()}this.fireAfterRendering()};sap.ushell.ui.launchpad.Tile.prototype.onsapenter=function(){this.firePress({id:this.getId()})};sap.ushell.ui.launchpad.Tile.prototype.onsapspace=function(){this.firePress({id:this.getId()})};sap.ushell.ui.launchpad.Tile.prototype._handleDragStart=function(e,u){this.fireDragStart()};sap.ushell.ui.launchpad.Tile.prototype._handleDragStop=function(e,u){this.fireDragStop()};sap.ushell.ui.launchpad.Tile.prototype.setDraggable=function(d){this.setProperty("draggable",d,true);this._setDraggable(d);return this};sap.ushell.ui.launchpad.Tile.prototype.setVisible=function(v){this.setProperty("visible",v,true);return this.toggleStyleClass("sapUshellHidden",!v)};sap.ushell.ui.launchpad.Tile.prototype.setRgba=function(v){this.setProperty("rgba",v,true);this._redrawRGBA(arguments)};sap.ushell.ui.launchpad.Tile.prototype.setAnimationRendered=function(v){this.setProperty('animationRendered',v,true)};sap.ushell.ui.launchpad.Tile.prototype._handleTileShadow=function(j,a){j.unbind('mouseenter mouseleave');var u=this.getRgba();j.hover(function(){var o=jQuery(j).css('box-shadow'),t=o?o.split(') ')[1]:null,U;if(t){U=t+" "+u;jQuery(this).css('box-shadow',U)}},function(){jQuery(this).css('box-shadow','')})};sap.ushell.ui.launchpad.Tile.prototype._redrawRGBA=function(a){var r=this.getRgba();if(r){var j=jQuery.sap.byId(this.getId()),i=(jQuery.browser.msie&&(parseInt(jQuery.browser.version,9)===9));if(!j){return}if(!this.getModel().getProperty('/animationRendered')){if(i){j.animate({backgroundColor:r},2000)}else{j.css('transition','background-color 2s');j.css('background-color',r)}}else{j.css('background-color',r)}this._handleTileShadow(j,a)}};sap.ushell.ui.launchpad.Tile.prototype.setLong=function(l){this.setProperty("long",l,true);return this.toggleStyleClass("sapUshellLong",l)};sap.ushell.ui.launchpad.Tile.prototype.setTall=function(t){this.setProperty("tall",t,true);return this.toggleStyleClass("sapUshellTall",t)};sap.ushell.ui.launchpad.Tile.prototype.setUuid=function(u){this.setProperty("uuid",u,true);return this};sap.ushell.ui.launchpad.Tile.prototype._setDraggable=function(d){if(this.getDomRef()){if(d){this.$().draggable({containment:"window",handle:".sapUshellTileInner",helper:function(){var c=jQuery(this).clone();c.removeClass('sapUshellTileFooter');c.find('.sapUshellTileFooterElement').remove();c.css("margin",0);return c},appendTo:this.getDragContainer()||"body",opacity:0.5,delay:200,zIndex:100,scroll:false}).bind("dragstart",jQuery.proxy(this._handleDragStart,this)).bind("dragstop",jQuery.proxy(this._handleDragStop,this))}else{if(this.$().hasClass("ui-draggable")){this.$().unbind("dragstart",this._handleDragStart).unbind("dragstop",this._handleDragStop).draggable("destroy")}}}}}())};if(!jQuery.sap.isDeclared('sap.ushell.ui.launchpad.TileContainer')){
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5) (c) Copyright 2009-2013 SAP AG. All rights reserved
 */
jQuery.sap.declare("sap.ushell.ui.launchpad.TileContainer");jQuery.sap.require('sap.ui.core.Control');sap.ui.core.Control.extend("sap.ushell.ui.launchpad.TileContainer",{metadata:{library:"sap.ushell",properties:{"scrollType":{type:"string",group:"Misc",defaultValue:'item'},"animationSpeed":{type:"int",group:"Misc",defaultValue:500},"groupId":{type:"string",group:"Misc",defaultValue:null},"showHeader":{type:"boolean",group:"Misc",defaultValue:true},"showPlaceholder":{type:"boolean",group:"Misc",defaultValue:true},"defaultGroup":{type:"boolean",group:"Misc",defaultValue:false},"headerText":{type:"string",group:"Misc",defaultValue:null},"headerLevel":{type:"sap.m.HeaderLevel",group:"Misc",defaultValue:sap.m.HeaderLevel.H2},"groupHeaderLevel":{type:"sap.m.HeaderLevel",group:"Misc",defaultValue:sap.m.HeaderLevel.H4},"showGroupHeader":{type:"boolean",group:"Misc",defaultValue:true},"visible":{type:"boolean",group:"Misc",defaultValue:true},"sortable":{type:"boolean",group:"Misc",defaultValue:true},"showNoData":{type:"boolean",group:"Misc",defaultValue:false},"noDataText":{type:"string",group:"Misc",defaultValue:null}},aggregations:{"tiles":{type:"sap.ushell.ui.launchpad.Tile",multiple:true,singularName:"tile"},"footerContent":{type:"sap.ui.core.Control",multiple:true,singularName:"footerContent"}},events:{"afterRendering":{},"add":{}}}});sap.ushell.ui.launchpad.TileContainer.M_EVENTS={'afterRendering':'afterRendering','add':'add'};
// Copyright (c) 2013 SAP AG, All Rights Reserved
(function(){"use strict";sap.ushell.ui.launchpad.TileContainer.prototype.init=function(){jQuery.sap.require("sap.ushell.ui.launchpad.PlusTile");this.oPlusTile=new sap.ushell.ui.launchpad.PlusTile({groupId:this.getGroupId(),press:[this.fireAdd,this]});this.oPlusTile.setParent(this)};sap.ushell.ui.launchpad.TileContainer.prototype.exit=function(){if(this.oPlusTile){this.oPlusTile.destroy()}};sap.ushell.ui.launchpad.TileContainer.prototype.onAfterRendering=function(){this.setVisible();this.fireAfterRendering()};sap.ushell.ui.launchpad.TileContainer.prototype.updateAggregation=sap.ushell.override.updateAggregation;sap.ushell.ui.launchpad.TileContainer.prototype.updateTiles=function(r){var n="tiles";if(this.isTreeBinding(n)){sap.ui.base.ManagedObject.prototype.updateAggregation.apply(this,arguments)}else{jQuery.sap.log.debug("Updating TileContainer. Reason: ",r);switch(r){case"filter":try{this.filterTiles()}catch(e){this.updateAggregation(n)}break;default:this.updateAggregation(n)}}};sap.ushell.ui.launchpad.TileContainer.prototype.handleNoItemsToDisplayMessage=function(i){if(i){this.setNoDataText('');this.$().find(".sapUshellNoFilteredItems").removeAttr("tabindex")}else{if(this.getShowNoData()){if(this.getNoDataText()){this.setNoDataText(this.getNoDataText())}else{this.setNoDataText(sap.ushell.resources.i18n.getText("noFilteredItems"))}this.$().find(".sapUshellNoFilteredItems").attr("tabindex",0)}}};sap.ushell.ui.launchpad.TileContainer.prototype.createMissingElementsInOnScreenElements=function(i,e,a,g,s,b,f,A){var p,n=null,G=null,j=a,S=this.getShowGroupHeader(),c=e.length;for(j=a;j<c;j++){p=e[j].getPath();if(!i.onScreenPathIndexMap[p]){var o;if(g&&s.length>0){n=s[0].fnGroup(e[j]);if(typeof n==="string"){n={key:n}}if(G===null&&j>0){G=s[0].fnGroup(e[j-1])}if(n.key!==G){if(b.groupHeaderFactory){o=b.groupHeaderFactory(n)}if(!i.onScreenHeaders[n.key]){A(n,o);i.onScreenHeaders[n.key]={aItemsRefrenceIndex:this.getTiles().length-1,isVisible:S}}G=n.key}}f(e[j]);i.onScreenPathIndexMap[p]={aItemsRefrenceIndex:this.getTiles().length-1,isVisible:true}}else{throw true}}};sap.ushell.ui.launchpad.TileContainer.prototype.addNewItem=function(e){var n="tiles",a=this.getMetadata().getJSONKeys()[n],b=this.mBindingInfos[n],f=b.factory,c=$.proxy(function(C){var i=this.getId()+"-"+jQuery.sap.uid(),o=f(i,C);o.setBindingContext(C,b.model);this[a._sMutator](o)},this);c(e)};sap.ushell.ui.launchpad.TileContainer.prototype.markVisibleOnScreenElements=function(e,i){var a=0,p,b=e.length;for(a=0;a<b;a++){p=e[a].getPath();if(i.onScreenPathIndexMap[p]){i.onScreenPathIndexMap[p].isVisible=true}else{return a}}return a};sap.ushell.ui.launchpad.TileContainer.prototype.indexOnScreenElements=function(o){var p,i,a={onScreenHeaders:{},onScreenPathIndexMap:{}},b=o.length;for(i=0;i<b;i++){var c=o[i];if(c.getHeaderText){a.onScreenHeaders[c.getHeaderText()]={aItemsRefrenceIndex:i,isVisible:false}}else if(c.getBindingContext()){p=c.getBindingContext().getPath();a.onScreenPathIndexMap[p]={aItemsRefrenceIndex:i,isVisible:false}}}return a};sap.ushell.ui.launchpad.TileContainer.prototype.showHideTilesAndHeaders=function(i,o){var s,n="tiles",a=false,S=this.getShowGroupHeader(),b=this.mBindingInfos[n].binding,e;for(s in i.onScreenPathIndexMap){if(i.onScreenPathIndexMap.hasOwnProperty(s)){e=i.onScreenPathIndexMap[s];var r=o[e.aItemsRefrenceIndex];r.setVisible(e.isVisible);if(e.isVisible){var g=b.aSorters[0].fnGroup(r.getBindingContext());i.onScreenHeaders[g].isVisible=S;a=true}}}for(s in i.onScreenHeaders){if(i.onScreenHeaders.hasOwnProperty(s)){e=i.onScreenHeaders[s];o[e.aItemsRefrenceIndex].setVisible(e.isVisible)}}return a};sap.ushell.ui.launchpad.TileContainer.prototype.filterTiles=function(){var n="tiles",b=this.mBindingInfos[n],B=this.mBindingInfos[n].binding,a=B.getContexts(),i=this.getTiles(),c=false,d;var e=this.indexOnScreenElements(i);d=this.markVisibleOnScreenElements(a,e);if(a[d]&&this.getTiles().length>0){var l=this.getTiles()[this.getTiles().length-1].getBindingContext().getPath();var f=a[d].getPath();var s=l.split('/');var g=f.split('/');var h=s[s.length-1];var j=g[g.length-1];if(parseInt(h)>parseInt(j)){throw true}}this.createMissingElementsInOnScreenElements(e,a,d,B.isGrouped(),B.aSorters,b,this.addNewItem.bind(this),this.addTileGroup.bind(this));i=this.getTiles();c=this.showHideTilesAndHeaders(e,i);this.handleNoItemsToDisplayMessage(c)};sap.ushell.ui.launchpad.TileContainer.prototype.addTileGroup=function(g,h){this.addAggregation("tiles",h||new sap.ushell.ui.launchpad.HeaderTile({headerText:g.text||g.key,headerLevel:g.headerLevel||this.getGroupHeaderLevel(),visible:this.getShowGroupHeader()}).addStyleClass("sapUshellTileContainerHdr"))};sap.ushell.ui.launchpad.TileContainer.prototype.setNoDataText=function(n){this.setProperty("noDataText",n,true);if(this.getShowNoData()){this.$().find(".sapUshellNoFilteredItems").text(n)}return this};sap.ushell.ui.launchpad.TileContainer.prototype.setGroupId=function(v){this.setProperty("groupId",v,true);if(this.oPlusTile){this.oPlusTile.setGroupId(v)}return this};sap.ushell.ui.launchpad.TileContainer.prototype.setHeaderText=function(h){this.setProperty("headerText",h,true);this.$().find(".sapUshellContainerTitle").text(h);return this};sap.ushell.ui.launchpad.TileContainer.prototype.setSortable=function(s){if(s){this.$().find(".ui-sortable").sortable('enable')}else{this.$().find(".ui-sortable").sortable('disable')}return this};sap.ushell.ui.launchpad.TileContainer.prototype.setVisible=function(v){if(!this.groupHasVisibleTiles()&&sap.ui.getCore().byId("shell")&&sap.ui.getCore().byId("shell").getModel()&&!sap.ui.getCore().byId("shell").getModel().getProperty("/personalization")){v=false}this.setProperty("visible",v);return this.toggleStyleClass("sapUshellHidden",!v)};sap.ushell.ui.launchpad.TileContainer.prototype.groupHasVisibleTiles=function(){var p='',t=this.getTiles();if(this.getBindingContext()){p=this.getBindingContext().sPath;t=this.getModel().getProperty(p).tiles}return sap.ushell.utils.groupHasVisibleTiles(t)}}())};if(!jQuery.sap.isDeclared('sap.ushell.ui.launchpad.TileContainerRenderer')){(function(){"use strict";jQuery.sap.declare("sap.ushell.ui.launchpad.TileContainerRenderer");sap.ushell.ui.launchpad.TileContainerRenderer={};sap.ushell.ui.launchpad.TileContainerRenderer.render=function(r,c){var t=c.getTiles(),f=c.getFooterContent()||[],h=(c.getDefaultGroup()&&t.length===0)||!c.getVisible(),v=false;r.write("<div");r.writeControlData(c);r.addClass("sapUshellTileContainer");r.writeAttribute("tabindex","0");r.writeClasses();if(h){r.addStyle("display","none");r.writeStyles()}r.write(">");r.write("<a");r.addClass("sapUshellContainerPositionAnchor");r.writeClasses();r.writeAttribute("name",c.getId()+"-position");r.write("></a>");if(c.getShowHeader()){r.write("<");r.write(c.getHeaderLevel().toLowerCase());r.addClass('sapUshellContainerTitle');r.addClass("sapUiStrongBackgroundTextColor");r.writeClasses();r.write(">");r.writeEscaped(c.getHeaderText());r.write("</");r.write(c.getHeaderLevel().toLowerCase());r.write(">")}r.write("<div");r.addClass('sapUshellTilesContainer-sortable');r.addClass('sapUshellInner');r.writeClasses();r.write(">");jQuery.each(t,function(i,a){if(a.getVisible()){v=true}if(this.getVisible){r.renderControl(this)}});if(c.getShowPlaceholder()&&t.length===0&&!h){r.renderControl(c.oPlusTile)}if(c.getShowNoData()){this.renderNoData(r,c,!t.length||!v)}r.write("</div>");if(f.length>0){r.write("<footer");r.addClass('sapUshellTilesContainerFtr');r.writeClasses();r.write(">");jQuery.each(f,function(){r.renderControl(this)});r.write("</footer>")}r.write("</div>")};sap.ushell.ui.launchpad.TileContainerRenderer.renderNoData=function(r,c,d){r.write("<div id='"+c.getId()+"-listNoData' class='sapUshellNoFilteredItems sapUiStrongBackgroundTextColor'>");if(d){if(c.getNoDataText()){r.writeEscaped(c.getNoDataText())}else{r.writeEscaped(c.getNoDataText(sap.ushell.resources.i18n.getText("noFilteredItems")))}}else{r.writeEscaped("")}r.write("</div>")}}())};if(!jQuery.sap.isDeclared('sap.ushell.ui.launchpad.TileRenderer')){(function(){"use strict";jQuery.sap.declare("sap.ushell.ui.launchpad.TileRenderer");sap.ushell.ui.launchpad.TileRenderer={};var t=sap.ushell.resources.i18n;sap.ushell.ui.launchpad.TileRenderer.render=function(r,c){var T=null;try{T=c.getTileViews()[0]}catch(e){jQuery.sap.log.warning("Failed to load tile view: ",e.message);T=new sap.m.Text({text:"Failed to load. "})}r.write("<div");r.writeControlData(c);r.addClass("sapUshellTile");if(c.getFootItems()&&c.getFootItems().length>0){r.addClass("sapUshellTileFooter")}if(c.getLong()){r.addClass("sapUshellLong")}if(c.getTall()){r.addClass("sapUshellTall")}if(!c.getVisible()){r.addClass("sapUshellHidden")}r.writeClasses();r.writeAccessibilityState(c,{role:'link',label:t.getText("TileDetails_lable")});r.write(">");r.addClass("sapUshellTileInner");if(this.renderTileView){this.renderTileView(r,T,c.getTarget())}r.write("<footer");r.addClass("sapUshellTileFooterElement");r.writeClasses();r.write(">");jQuery.each(c.getFootItems(),function(){r.renderControl(this)});r.write("</footer>");r.write("</div>")};sap.ushell.ui.launchpad.TileRenderer.renderTileView=function(r,T,s){if((s||"")!==""){r.write("<a");r.writeClasses();r.writeAttributeEscaped("href","#"+s);r.write(">");r.renderControl(T);r.write("</a>")}else{r.write("<div");r.writeClasses();r.writeAttribute("title",sap.ushell.resources.i18n.getText("launchTile_tooltip"));r.write(">");r.renderControl(T);r.write("</div>")}}}())};if(!jQuery.sap.isDeclared('sap.ushell.ui.launchpad.TileState')){
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5) (c) Copyright 2009-2013 SAP AG. All rights reserved
 */
jQuery.sap.declare("sap.ushell.ui.launchpad.TileState");jQuery.sap.require('sap.ui.core.Control');sap.ui.core.Control.extend("sap.ushell.ui.launchpad.TileState",{metadata:{library:"sap.ushell",properties:{"state":{type:"string",group:"Misc",defaultValue:'Loaded'}}}});jQuery.sap.require('sap.m.Text');jQuery.sap.require('sap.ui.core.IconPool');sap.ushell.ui.launchpad.TileState.prototype.init=function(){this._rb=sap.ushell.resources.i18n;this._sFailedToLoad=this._rb.getText("cannotLoadTile");this._oWarningIcon=new sap.ui.core.Icon(this.getId()+"-warn-icon",{src:"sap-icon://notification",size:"1.37rem"});this._oWarningIcon.addStyleClass("sapSuiteGTFtrFldIcnMrk")};sap.ushell.ui.launchpad.TileState.prototype.exit=function(){this._oWarningIcon.destroy()};sap.ushell.ui.launchpad.TileState.prototype.setState=function(s,i){this.setProperty("state",s,i);return this}};if(!jQuery.sap.isDeclared('sap.ushell.ui.launchpad.TileStateRenderer')){jQuery.sap.declare("sap.ushell.ui.launchpad.TileStateRenderer");sap.ushell.ui.launchpad.TileStateRenderer={};sap.ushell.ui.launchpad.TileStateRenderer.render=function(r,c){r.write("<div");r.writeControlData(c);r.addClass("sapUshellGT");r.write(">");var s=c.getState();r.write("<div");r.addClass("sapUshellOverlay");r.writeClasses();r.writeAttribute("id",c.getId()+"-overlay");r.write(">");switch(s){case"Loading":var b=new sap.ui.core.HTML({content:"<div class='sapUshellTileStateLoading'><div>"});b.setBusyIndicatorDelay(0);b.setBusy(true);r.renderControl(b);break;case"Failed":r.write("<div");r.writeAttribute("id",c.getId()+"-failed-ftr");r.addClass("sapUshellTileStateFtrFld");r.writeClasses();r.write(">");r.write("<div");r.writeAttribute("id",c.getId()+"-failed-icon");r.addClass("sapUshellTileStateFtrFldIcn");r.writeClasses();r.write(">");r.renderControl(c._oWarningIcon);r.write("</div>");r.write("<div");r.writeAttribute("id",c.getId()+"-failed-text");r.addClass("sapUshellTileStateFtrFldTxt");r.writeClasses();r.write(">");r.writeEscaped(c._sFailedToLoad);r.write("</div>");r.write("</div>");break;default:}r.write("</div>");r.write("</div>")}};if(!jQuery.sap.isDeclared('sap.ushell.ui.tile.TileBase')){jQuery.sap.declare("sap.ushell.ui.tile.TileBase");jQuery.sap.require('sap.ui.core.Control');sap.ui.core.Control.extend("sap.ushell.ui.tile.TileBase",{metadata:{library:"sap.ushell",properties:{"title":{type:"string",group:"Data",defaultValue:null},"subtitle":{type:"string",group:"Data",defaultValue:null},"icon":{type:"string",group:"Data",defaultValue:null},"info":{type:"string",group:"Data",defaultValue:null},"infoState":{type:"sap.ushell.ui.tile.State",group:"",defaultValue:sap.ushell.ui.tile.State.Neutral},"targetURL":{type:"string",group:"Behavior",defaultValue:null},"highlightTerms":{type:"any",group:"Appearance",defaultValue:[]},"actions":{type:"any",group:"Appearance",defaultValue:[]}},aggregations:{"content":{type:"sap.ui.core.Control",multiple:true,singularName:"content"}},events:{"press":{}}}});sap.ushell.ui.tile.TileBase.M_EVENTS={'press':'press'};
// Copyright (c) 2013 SAP AG, All Rights Reserved
(function(){"use strict";function _(p,c){if(c!=null){while(c.parentNode){if((c=c.parentNode)==p){return true}}}return false}var a=undefined;sap.ushell.ui.tile.TileBase.prototype._getActionButton=function(d){var b={press:function(){var t=b.targetURL;if(typeof t!=="string"){return}t=jQuery.trim(t);if(t.length){var n=sap.ushell.Container.getService("CrossApplicationNavigation");n.toExternal({target:{shellHash:t}})}}};jQuery.extend(b,d);return new sap.m.Button(b)};sap.ushell.ui.tile.TileBase.prototype.setActions=function(b){this.setProperty('actions',b);if((!b||!b.length)&&!this.oActionSheet){return}if(!jQuery.sap.isDeclared('sap.m.ActionSheet')){jQuery.sap.require("sap.m.Button");jQuery.sap.require("sap.m.ActionSheet")}if(!b||!b.length){this.oActionSheet.destroy();delete this.oActionSheet;return}if(!this.oActionSheet){this.oActionSheet=new sap.m.ActionSheet({placement:sap.m.PlacementType.Auto})}this.oActionSheet.removeAllButtons();for(var i=0;i<b.length;i++){this.oActionSheet.addButton(this._getActionButton(b[i]))}return this};sap.ushell.ui.tile.TileBase.prototype.ontap=function(e){this.firePress({})};sap.ushell.ui.tile.TileBase.prototype.onsapenter=function(e){this.firePress({})};sap.ushell.ui.tile.TileBase.prototype.onsapspace=function(e){this.firePress({})};sap.ushell.ui.tile.TileBase.prototype.onmouseover=function(e){if(!sap.ui.Device.system.desktop){return}if(this._mouseOverInProgress||(this.oActionSheet&&this.oActionSheet.isOpen()))return;this._mouseOverInProgress=true;var b=this.getActions();if(!b||!b.length)return;this._showActionsTimeout=setTimeout((function(){if(!this.oActionSheet)return;if(typeof a==='object'){try{a.close()}catch(e){}}this.oActionSheet.openBy(this.getParent());a=this.oActionSheet}).bind(this),800)};sap.ushell.ui.tile.TileBase.prototype.onmouseout=function(e){var b=this.getDomRef();var c=null;if(e.toElement){c=event.toElement}else if(e.relatedTarget){c=event.relatedTarget}if(!_(b,c)&&b!=c){this._mouseOverInProgress=false;clearTimeout(this._showActionsTimeout)}}}())};if(!jQuery.sap.isDeclared('sap.ushell.ui.tile.TileBaseRenderer')){(function(){"use strict";jQuery.sap.declare("sap.ushell.ui.tile.TileBaseRenderer");sap.ushell.ui.tile.TileBaseRenderer={};var t=sap.ushell.resources.i18n;sap.ushell.ui.tile.TileBaseRenderer.highlight=function(h,T){var i,r,e=jQuery.sap.encodeHTML(T).replace(/&#xa;/g,"<br/>");if(h&&h.length&&h.length>0){for(i=0;i<h.length;i=i+1){r=new RegExp("("+jQuery.sap.encodeHTML(h[i]).replace(/([.*+?\^=!:${}()|\[\]\/\\])/g,"\\$1")+")","gi");e=e.replace(r,"<b>$1</b>")}}return e};sap.ushell.ui.tile.TileBaseRenderer.render=function(r,c){var T=t.getText('launchTileTitle_tooltip',[c.getTitle()]),i,I;r.write("<div");r.writeControlData(c);if(c.getTargetURL()){r.writeAttributeEscaped("data-targeturl",c.getTargetURL())}r.writeAttributeEscaped("tabindex","0");r.addClass("sapUshellTileBase");r.writeClasses();r.write(">");r.write("<div");r.addClass("sapUshellTileBaseHeader");r.writeClasses();r.write(">");r.write("<h3");r.addClass("sapUshellTileBaseTitle");r.writeClasses();r.writeAttributeEscaped('title',T);r.writeAccessibilityState(c,{label:t.getText("TileTitle_lable")+c.getTitle()});r.write(">");r.write(this.highlight(c.getHighlightTerms(),c.getTitle()||""));r.write("</h3>");if(c.getSubtitle()){r.write("<h4");r.addClass("sapUshellTileBaseSubtitle");r.writeClasses();r.writeAccessibilityState(c,{label:t.getText("TileSubTitle_lable")+c.getSubtitle()});r.write(">");r.write(this.highlight(c.getHighlightTerms(),c.getSubtitle()));r.write("</h4>")}r.write("</div>");if(typeof(this.renderPart)==='function'){this.renderPart(r,c)}if(c.getIcon()){I=new sap.ui.core.Icon({src:c.getIcon()});I.addStyleClass("sapUshellTileBaseIcon");r.renderControl(I)}if(c.getInfo()||((typeof(this.getInfoPrefix)==='function'))&&this.getInfoPrefix(c)){r.write("<div");r.addClass("sapUshellTileBaseInfo");r.addClass(c.getInfoState()?"sapUshellTileBase"+c.getInfoState():"sapUshellTileBase"+sap.ushell.ui.tile.State.Neutral);r.writeClasses();r.writeAccessibilityState(c,{label:t.getText("TileInfo_lable")+c.getInfo()});r.write(">");if(typeof(this.getInfoPrefix)==='function'){i=this.getInfoPrefix(c);r.writeEscaped(i)}if(c.getInfo()){if(i){r.write(", ")}r.write(this.highlight(c.getHighlightTerms(),c.getInfo()))}r.write("</div>")}r.write("</div>")}}())};if(!jQuery.sap.isDeclared('sap.ushell.utils')){(function(){"use strict";jQuery.sap.declare("sap.ushell.utils");sap.ushell.utils={};var v;sap.ushell.utils.Error=function(m,c){this.name="sap.ushell.utils.Error";this.message=m;jQuery.sap.log.error(m,null,c)};sap.ushell.utils.Error.prototype=new Error();sap.ushell.utils.localStorageSetItem=function(k,V,l){var E;try{localStorage.setItem(k,V);if(l){E=document.createEvent("StorageEvent");E.initStorageEvent("storage",false,false,k,"",V,"",localStorage);dispatchEvent(E)}}catch(e){jQuery.sap.log.warning("Error calling localStorage.setItem(): "+e,null,"sap.ushell.utils")}};sap.ushell.utils.Map=function(){this.entries={}};sap.ushell.utils.Map.prototype.put=function(k,V){var o=this.get(k);this.entries[k]=V;return o};sap.ushell.utils.Map.prototype.containsKey=function(k){if(typeof k!=="string"){throw new sap.ushell.utils.Error("Not a string key: "+k,"sap.ushell.utils.Map")}return Object.prototype.hasOwnProperty.call(this.entries,k)};sap.ushell.utils.Map.prototype.get=function(k){if(this.containsKey(k)){return this.entries[k]}};sap.ushell.utils.Map.prototype.keys=function(){return Object.keys(this.entries)};sap.ushell.utils.Map.prototype.remove=function(k){delete this.entries[k]};sap.ushell.utils.Map.prototype.toString=function(){var r=['sap.ushell.utils.Map('];r.push(JSON.stringify(this.entries));r.push(')');return r.join('')};sap.ushell.utils.testPublishAt=function(o,e){};sap.ushell.utils.handleTilesVisibility=function(){clearTimeout(v);v=setTimeout(function(){var s=new Date(),t=sap.ushell.utils.getVisibleTiles();if((typeof t!="undefined")&&t.length>0){var l=sap.ushell.Container.getService("LaunchPage");t.forEach(function(T){l.setTileVisible(sap.ushell.utils.getTileObject(T),T.isDisplayedInViewPort)});jQuery.sap.log.debug("Visible Tiles: "+t.filter(function(T){return T.isDisplayedInViewPort}).length);jQuery.sap.log.debug("NonVisible Tiles: "+t.filter(function(T){return!T.isDisplayedInViewPort}).length)}var d=new Date()-s;jQuery.sap.log.debug("Start time is: "+s+" and duration is: "+d)},1000)};sap.ushell.utils.setTilesNoVisibility=function(){var t=sap.ushell.utils.getVisibleTiles();if((typeof t!=="undefined")&&t.length>0){var l=sap.ushell.Container.getService("LaunchPage");t.forEach(function(T){l.setTileVisible(sap.ushell.utils.getTileObject(T),false)});jQuery.sap.log.debug("Visible Tiles: "+t.filter(function(T){return T.isDisplayedInViewPort}).length);jQuery.sap.log.debug("NonVisible Tiles: "+t.filter(function(T){return!T.isDisplayedInViewPort}).length)}};sap.ushell.utils.getBasicHash=function(h){if(!sap.ushell.utils.validHash(h)){jQuery.sap.log.debug("Utils ; getBasicHash ; Got invalid hash");return}var u=sap.ushell.Container.getService("URLParsing"),s=u.parseShellHash(h);return s?s.semanticObject+"-"+s.action:h};sap.ushell.utils.validHash=function(h){return(h&&h.constructor===String&&$.trim(h)!="")};sap.ushell.utils.handleTilesOpacity=function(){jQuery.sap.require("sap.ui.core.theming.Parameters");var t=this,T,c,a,b,C=sap.ui.core.theming.Parameters.get("sapUshellTileBackgroundColor"),r=this.hexToRgb(C),j,d,R,e,s,f,o,p,g,h,i=sap.ui.getCore(),m=i.byId("shell").getModel(),u=sap.ushell.Container.getService("UserRecents");if(r){R="rgba("+r.r+","+r.g+","+r.b+",{0})";a=u.getAppsUsage();a.done(function(b){T=b.usageMap;j=jQuery('.sapUshellTile');var k=m.getProperty("/groups");m.setProperty('/animationRendered',true);for(var l=0;l<j.length;l++){e=jQuery(j[l]);s=this.getBasicHash(e.find('.sapUshellTileBase').attr('data-targeturl'));if(s){d=this.convertToRealOpacity(T[s],b.maxUsage);f=R.replace("{0}",d);c=sap.ui.getCore().byId(e.attr('id'));o=c.getBindingContext();p=o.sPath.split('/');g=p[2];h=p[4];k[g].tiles[h].rgba=f}}m.setProperty("/groups",k)}.bind(this))}};sap.ushell.utils.convertToRealOpacity=function(a,m){var o=[1,0.95,0.9,0.85,0.8],O=Math.floor(m/o.length),i;if(!a){return o[0]}else if(!m){return o[o.length-1]}else{i=Math.floor((m-a)/O);return i<o.length?o[i]:o[o.length-1]}};sap.ushell.utils.hexToRgb=function(h){var i=!h||h[0]!='#'||(h.length!=4&&h.length!=7),r;h=!i&&h.length===4?'#'+h[1]+h[1]+h[2]+h[2]+h[3]+h[3]:h;r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(h);return r?{r:parseInt(r[1],16),g:parseInt(r[2],16),b:parseInt(r[3],16)}:null};sap.ushell.utils.getVisibleTiles=function(){var n=document.body.clientHeight,c=sap.ui.getCore().byId("dashboardGroups"),N=sap.ui.getCore().byId("navContainer"),g,t,a,b,T,d,e,f,h,s=jQuery('#shell-hdr').height(),i=[];if(c&&c.getGroups()&&N){var C=N.getModel().getProperty("/currentState/stateName"),I=C==="home",G=c.getGroups();for(g=0;g<G.length;g=g+1){a=G[g];b=a.getTiles();if(b){for(t=0;t<b.length;t=t+1){T=b[t];if(!I){T.isDisplayedInViewPort=false}else{d=jQuery(T.getDomRef());e=d.offset();if(!e){return}f=d.offset().top;h=f+d.height();T.isDisplayedInViewPort=(h>s)&&(f<n)}i.push(T)}}}}return i};sap.ushell.utils.getTileObject=function(u){var b=u.getBindingContext();return b.getObject().object};sap.ushell.utils.addBottomSpace=function(){var j=jQuery('#dashboardGroups').find('.sapUshellTileContainer'),o=jQuery('#dashboardPage').offset(),e=o&&o.top;var n=jQuery(window).height()-e-j.last().parent().height();n=(n<0)?0:n;jQuery('.sapUshellDashboardGroupsContainer').css("margin-bottom",n+"px")};sap.ushell.utils.groupHasVisibleTiles=function(g){var a=false,t,b;if(!g||(g&&g.length===0)){return false}for(t=0;t<g.length;t=t+1){b=g[t];if(b.isTileIntentSupported){a=true;break}}return a}}())};if(!jQuery.sap.isDeclared('sap.ushell.User')){(function(){"use strict";jQuery.sap.declare("sap.ushell.User");function d(t,s){if(t.indexOf("sap_")===0){return""}return s}function c(o){if(o===undefined){return undefined}try{return JSON.parse(JSON.stringify(o))}catch(e){return undefined}}sap.ushell.User=function(C){var a=[],s=C.themeRoot||"",o=C.bootTheme||{theme:"",root:""},n=o;this.getEmail=function(){return C.email};this.getFirstName=function(){return C.firstName};this.getFullName=function(){return C.fullName};this.getId=function(){return C.id};this.getLanguage=function(){return C.language};this.getLanguageBcp47=function(){return C.languageBcp47};this.getLastName=function(){return C.lastName};this.getImage=function(){return C.image};this.isJamActive=function(){return C.isJamActive===true};this.getTheme=function(){return o.theme};this.setTheme=function(N){if(this.isSetThemePermitted()===false){throw new Error("setTheme not permitted")}if(N!==n.theme){this.setChangedProperties("THEME",n.theme,N);n.theme=N}o.theme=N;o.root=d(N,s);if(o.root){sap.ui.getCore().applyTheme(o.theme,o.root+"/UI5/")}else{sap.ui.getCore().applyTheme(o.theme)}};this.getAccessibilityMode=function(){return C.accessibility};this.setAccessibilityMode=function(b){if(this.isSetAccessibilityPermitted()===false){jQuery.sap.log.error("setAccessibilityMode not permitted");throw true}C.accessibility=b};this.isSetAccessibilityPermitted=function(){return C.setAccessibilityPermitted};this.isSetThemePermitted=function(){return C.setThemePermitted};this.getChangedProperties=function(){return c(a)};this.setChangedProperties=function(p,b,e){a.push({name:p,oldValue:b,newValue:e})};this.resetChangedProperties=function(){a=[]}}}())};if(!jQuery.sap.isDeclared('sap.ushell.components.container.ApplicationContainer')){
//Copyright (c) 2013 SAP AG, All Rights Reserved
(function(){"use strict";var p="sap.ushell.components.container.",c=p+"ApplicationContainer",d="sap.ushell.Container.dirtyState.",l,r;jQuery.sap.declare("sap.ushell.components.container.ApplicationContainer");jQuery.sap.require('sap.ui.core.UIComponent');l=new sap.ushell.utils.Map();sap.ushell.components.container.ApplicationType={URL:"URL",WDA:"WDA",NWBC:"NWBC"};sap.ushell.utils.testPublishAt(sap.ushell.components.container);function g(C){return l.get(C.getId())}sap.ushell.utils.testPublishAt(sap.ushell.components.container);function a(u){return jQuery.sap.getUriParameters(u).mParams}sap.ushell.utils.testPublishAt(sap.ushell.components.container);function b(K,A){if(!r){r=jQuery.sap.resources({url:jQuery.sap.getModulePath(p)+"/resources/resources.properties",language:sap.ui.getCore().getConfiguration().getLanguage()})}return r.getText(K,A)}sap.ushell.utils.testPublishAt(sap.ushell.components.container);function f(){return new sap.ui.core.Icon({size:"2rem",src:"sap-icon://error",tooltip:b("an_error_has_occured")})}sap.ushell.utils.testPublishAt(sap.ushell.components.container);function h(C){var e=C.getAggregation("child"),u;if(e instanceof sap.ui.core.ComponentContainer){u=e.getComponentInstance().getMetadata().getName().replace(/\.Component$/,"");jQuery.sap.log.debug("unloading component "+u,null,c)}C.destroyAggregation("child")}sap.ushell.utils.testPublishAt(sap.ushell.components.container);function i(C,u,A){var e,v,I,L,M,N,V,w,x;I=u.indexOf("?");if(I>=0){V=a(u);u=u.slice(0,I)}if(u.slice(-1)!=='/'){u+='/'}if(/\.view\.(\w+)$/i.test(A)){M=/^SAPUI5=(?:([^\/]+)\/)?([^\/]+)\.view\.(\w+)$/i.exec(A);if(!M){jQuery.sap.log.error("Invalid SAPUI5 URL",A,c);return f()}N=M[1];w=M[2];x=M[3].toUpperCase();if(N){w=N+"."+w}else{L=w.lastIndexOf(".");if(L<1){jQuery.sap.log.error("Missing namespace",A,c);return f()}N=w.slice(0,L)}}else{N=A.replace(/^SAPUI5=/,"")}jQuery.sap.registerModulePath(N,u+N.replace(/\./g,'/'));h(C);if(w){v=sap.ui.view({id:C.getId()+"-content",type:x,viewData:V||{},viewName:w});C.fireEvent("applicationConfiguration")}else{jQuery.sap.log.debug("loading component "+N,null,c);e=sap.ui.component({id:C.getId()+"-component",componentData:V?{startupParameters:V}:{},name:N});C.fireEvent("applicationConfiguration",{"configuration":e.getMetadata().getConfig()});v=new sap.ui.core.ComponentContainer({id:C.getId()+"-content",component:e})}v.setWidth(C.getWidth());v.setHeight(C.getHeight());v.addStyleClass("sapUShellApplicationContainer");C.setAggregation("child",v,true);return v}sap.ushell.utils.testPublishAt(sap.ushell.components.container);function j(C,u,e){var I,v,w,x={};I=u.indexOf("?");if(I>=0){x={startupParameters:a(u)};u=u.slice(0,I)}if(u.slice(-1)!=='/'){u+='/'}jQuery.sap.registerModulePath(e,u);jQuery.sap.require("sap.ushell.services.CrossApplicationNavigation");h(C);jQuery.sap.log.debug("loading component "+e,null,c);v=sap.ui.component({id:C.getId()+"-component",name:e,componentData:x});C.fireEvent("applicationConfiguration",{"configuration":v.getMetadata().getConfig()});w=new sap.ui.core.ComponentContainer({id:C.getId()+"-content",component:v});w.setHeight(C.getHeight());w.setWidth(C.getWidth());w.addStyleClass("sapUShellApplicationContainer");C.setAggregation("child",w,true);return w}sap.ushell.utils.testPublishAt(sap.ushell.components.container);function k(u){var A=document.createElement("a"),C=jQuery.sap.getUriParameters(u).get("sap-client"),B;A.href=u;B=A.protocol+"//"+A.host;return new sap.ushell.System({alias:C?B+"?sap-client="+C:B,baseUrl:B,client:C||undefined,platform:"abap"})}function m(C,M){var T=false,D=C.getDomRef(),A=C.getApplicationType(),u,O;if(D){if(A===sap.ushell.components.container.ApplicationType.NWBC){u=URI(D.src);O=u.protocol()+"://"+u.host();T=(M.source===D.contentWindow)||(M.origin===O)}else if(A===sap.ushell.components.container.ApplicationType.URL){u=URI();O=u.protocol()+"://"+u.host();T=(M.origin===O)}}return T}sap.ushell.utils.testPublishAt(sap.ushell.components.container);function n(C,M,e){var P=jQuery.sap.getObject("sap-ushell-config.services.PostMessage.config",0),S=e&&e.service;if(!(S&&(S.indexOf("sap.ushell.services.CrossApplicationNavigation")===0))){return}if(!(P&&P.enabled===true)){jQuery.sap.log.error("Received message for CrossApplicationNavigation, but this feature is disabled."+" It can be enabled via launchpad configuration property 'services.PostMessage.config.enabled: true'",undefined,"sap.ushell.components.container.ApplicationContainer");return}if(!m(C,M)){jQuery.sap.log.warning("Received message from untrusted origin: "+M.origin,M.data,"sap.ushell.components.container.ApplicationContainer");return}if(e.service==="sap.ushell.services.CrossApplicationNavigation.hrefForExternal"&&e.type==="request"){M.source.postMessage(JSON.stringify({type:"response",service:e.service,request_id:e.request_id,status:"success",body:{result:sap.ushell.Container.getService("CrossApplicationNavigation").hrefForExternal(e.body.args)}}),M.origin)}else if(e.service==="sap.ushell.services.CrossApplicationNavigation.getSemanticObjectLinks"){try{sap.ushell.Container.getService("CrossApplicationNavigation").getSemanticObjectLinks(e.body.semanticObject,e.body.parameters,e.body.ignoreFormFactors).done(function(R){M.source.postMessage(JSON.stringify({type:"response",service:e.service,request_id:e.request_id,status:"success",body:{result:R}}),M.origin)})}catch(E){M.source.postMessage(JSON.stringify({type:"response",service:e.service,request_id:e.request_id,status:"error",body:{message:E.message}}),M.origin)}}else if(e.service==="sap.ushell.services.CrossApplicationNavigation.isIntentSupported"){sap.ushell.Container.getService("CrossApplicationNavigation").isIntentSupported(e.body.intents).done(function(R){M.source.postMessage(JSON.stringify({type:"response",service:e.service,request_id:e.request_id,status:"success",body:{result:R}}),M.origin)})}else if(e.service==="sap.ushell.services.CrossApplicationNavigation.toExternal"&&e.type==="request"){sap.ushell.Container.getService("CrossApplicationNavigation").toExternal(e.body.args);M.source.postMessage(JSON.stringify({type:"response",service:e.service,request_id:e.request_id,status:"success",body:{}}),M.origin)}}sap.ushell.utils.testPublishAt(sap.ushell.components.container);function o(C,M){var u=M.data;if(typeof u==="string"){try{u=JSON.parse(M.data)}catch(e){jQuery.sap.log.debug("Message received from origin '"+M.origin+"' cannot be parsed: "+e,u,"sap.ushell.components.container.ApplicationContainer");return}}if(u.action==="pro54_setGlobalDirty"&&localStorage.getItem(C.globalDirtyStorageKey)===sap.ushell.Container.DirtyState.PENDING){if(!m(C,M)){jQuery.sap.log.warning("Received message from untrusted origin: "+M.origin,u,"sap.ushell.components.container.ApplicationContainer");return}jQuery.sap.log.debug("getGlobalDirty() pro54_setGlobalDirty SetItem key:"+C.globalDirtyStorageKey+" value: "+u.parameters.globalDirty,null,"sap.ushell.components.container.ApplicationContainer");sap.ushell.utils.localStorageSetItem(C.globalDirtyStorageKey,u.parameters.globalDirty,true)}else{n(C,M,u)}}sap.ushell.utils.testPublishAt(sap.ushell.components.container);function q(C,e){var I=C.getDomRef();if(C.getApplicationType()===sap.ushell.components.container.ApplicationType.NWBC&&I&&I.tagName==="IFRAME"){I.contentWindow.postMessage(JSON.stringify({action:"pro54_disableDirtyHandler"}),'*');e.preventDefault()}}sap.ushell.utils.testPublishAt(sap.ushell.components.container);function s(R,C,e){R.write("<div").writeControlData(C).writeAccessibilityState(C).addClass("sapUShellApplicationContainer").writeClasses(C).addStyle("height",C.getHeight()).addStyle("width",C.getWidth()).writeStyles().write(">").renderControl(e);R.write("</div>")}sap.ushell.utils.testPublishAt(sap.ushell.components.container);function t(R,C,A,u,e){var L;localStorage.removeItem(C.globalDirtyStorageKey);if(e&&e.indexOf("SAPUI5.Component=")===0&&A===sap.ushell.components.container.ApplicationType.URL){s(R,C,j(C,u,e.replace(/^SAPUI5\.Component=/,"")));return}if(e&&e.indexOf("SAPUI5=")===0&&A===sap.ushell.components.container.ApplicationType.URL){s(R,C,i(C,u,e));return}jQuery.sap.log.debug("Not resolved as \"SAPUI5.Component=\" or \"SAPUI5=\" , "+"will attempt to load into iframe "+e);try{u=C.getFrameSource(A,u,e)}catch(v){jQuery.sap.log.error(v.message||v,null,c);C.fireEvent("applicationConfiguration");R.renderControl(f());return}if(sap.ushell.Container){L=g(C);if(!L){if(A===sap.ushell.components.container.ApplicationType.NWBC){L=q.bind(null,C);l.put(C.getId(),L);sap.ushell.Container.attachLogoutEvent(L);sap.ushell.Container.addRemoteSystem(k(u))}}else{if(A!==sap.ushell.components.container.ApplicationType.NWBC){sap.ushell.Container.detachLogoutEvent(L);l.remove(C.getId())}}}if(A===sap.ushell.components.container.ApplicationType.NWBC){sap.ushell.utils.localStorageSetItem(C.globalDirtyStorageKey,sap.ushell.Container.DirtyState.INITIAL)}C.fireEvent("applicationConfiguration");R.write("<iframe").writeControlData(C).writeAccessibilityState(C).writeAttributeEscaped("src",u).addClass("sapUShellApplicationContainer").writeClasses(C).addStyle("height",C.getHeight()).addStyle("width",C.getWidth()).writeStyles().write("></iframe>")}sap.ui.core.Control.extend(c,{metadata:{properties:{additionalInformation:{defaultValue:"",type:"string"},application:{type:"object"},applicationType:{defaultValue:"URL",type:p+"ApplicationType"},height:{defaultValue:"100%",type:"sap.ui.core.CSSSize"},url:{defaultValue:"",type:"string"},visible:{defaultValue:true,type:"boolean"},width:{defaultValue:"100%",type:"sap.ui.core.CSSSize"}},events:{"applicationConfiguration":{}},aggregations:{child:{multiple:false,type:"sap.ui.core.Control",visibility:"hidden"}},library:"sap.ushell"},exit:function(){var L;if(sap.ushell.Container){L=g(this);if(L){sap.ushell.Container.detachLogoutEvent(L);l.remove(this.getId())}}localStorage.removeItem(this.globalDirtyStorageKey);if(this._unloadEventListener){removeEventListener("unload",this._unloadEventListener)}if(this._storageEventListener){removeEventListener("storage",this._storageEventListener)}if(this._messageEventListener){removeEventListener("message",this._messageEventListener)}h(this);if(sap.ui.core.Control.exit){sap.ui.core.Control.exit.apply(this)}},init:function(){var e=this;this.globalDirtyStorageKey=d+jQuery.sap.uid();this._unloadEventListener=this.exit.bind(this);addEventListener("unload",this._unloadEventListener);this._storageEventListener=function(S){if(S.key===e.globalDirtyStorageKey&&S.newValue===sap.ushell.Container.DirtyState.PENDING&&e.getApplicationType()===sap.ushell.components.container.ApplicationType.NWBC){var I=e.getDomRef();if(I&&I.tagName==="IFRAME"){jQuery.sap.log.debug("getGlobalDirty() send pro54_getGlobalDirty ",null,"sap.ushell.components.container.ApplicationContainer");I.contentWindow.postMessage(JSON.stringify({action:"pro54_getGlobalDirty"}),'*')}}};addEventListener('storage',this._storageEventListener);this._messageEventListener=o.bind(null,this);addEventListener('message',this._messageEventListener)},renderer:function(R,C){var A=C.getApplication(),L=C.launchpadData,e;if(!C.getVisible()){s(R,C);return}if(C.error){delete C.error;s(R,C,f())}else if(!A){t(R,C,C.getApplicationType(),C.getUrl(),C.getAdditionalInformation())}else if(!A.isResolvable()){t(R,C,A.getType(),A.getUrl(),"")}else if(L){t(R,C,L.applicationType,L.Absolute.url.replace(/\?$/,""),L.applicationData)}else{jQuery.sap.log.debug("Resolving "+A.getUrl(),null,c);A.resolve(function(u){jQuery.sap.log.debug("Resolved "+A.getUrl(),JSON.stringify(u),c);C.launchpadData=u;h(C)},function(E){var u=A.getMenu().getDefaultErrorHandler();if(u){u(E)}h(C);C.error=E});e=new sap.m.Text({text:b("loading",[A.getText()])});h(C);C.setAggregation("child",e);s(R,C,e)}}});sap.ushell.components.container.ApplicationContainer.prototype.getFrameSource=function(A,u,e){if(!Object.prototype.hasOwnProperty.call(sap.ushell.components.container.ApplicationType,A)){throw new Error("Illegal application type: "+A)}return u}}())};if(!jQuery.sap.isDeclared('sap.ushell.components.factsheet.controls.PictureTile')){
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5) (c) Copyright 2009-2013 SAP AG. All rights reserved
 */
jQuery.sap.declare("sap.ushell.components.factsheet.controls.PictureTile");jQuery.sap.require('sap.m.CustomTile');sap.m.CustomTile.extend("sap.ushell.components.factsheet.controls.PictureTile",{metadata:{library:"sap.ushell",properties:{"height":{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:'32px'},"width":{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:'32px'}},associations:{"tileContent":{type:"sap.ushell.components.factsheet.controls.PictureViewerItem",multiple:false}},events:{"pictureDelete":{}}}});sap.ushell.components.factsheet.controls.PictureTile.M_EVENTS={'pictureDelete':'pictureDelete'};sap.ushell.components.factsheet.controls.PictureTile.prototype.init=function(t){this._oDeletePictureButton=new sap.m.Button({icon:"sap-icon://sys-cancel",press:jQuery.proxy(this._deletePictureRequestHandler,this),type:sap.m.ButtonType.Transparent}).addStyleClass("sapCaUiPTDeleteButton");if(!sap.ui.Device.system.desktop){this.attachPress(this._tilePressedHandler);this.attachBrowserEvent("swipe",jQuery.proxy(this._tileSwipedHandler,this));this._oDeletePictureButton.addStyleClass("hide")}};sap.ushell.components.factsheet.controls.PictureTile.prototype.setTileContent=function(t){this.setContent(null);if(t){var i=t.getImage();this.setContent(i)}else{this.setContent(null)}this.setAssociation("tileContent",t)};sap.ushell.components.factsheet.controls.PictureTile.prototype.setSize=function(w,h){this._width=w;this._height=h;var $=this.$();if($){$.css({width:w+"px",height:h+"px"});jQuery.sap.byId(this.getId()+"-wrapper").addClass("sapCaUiPTWrapper")}};sap.ushell.components.factsheet.controls.PictureTile.prototype._tilePressedHandler=function(e){this.switchVisibility()};sap.ushell.components.factsheet.controls.PictureTile.prototype.switchVisibility=function(v){var $=this._oDeletePictureButton.$();if(v===undefined){$.toggleClass("hide")}else{$.toggleClass("hide",!v)}};sap.ushell.components.factsheet.controls.PictureTile.prototype._tileSwipedHandler=function(e){var $=this._oDeletePictureButton.$();if($&&!$.hasClass("hide")){$.addClass("hide")}};sap.ushell.components.factsheet.controls.PictureTile.prototype._deletePictureRequestHandler=function(){this.firePictureDelete()}};if(!jQuery.sap.isDeclared('sap.ushell.components.factsheet.controls.PictureViewer')){jQuery.sap.declare("sap.ushell.components.factsheet.controls.PictureViewer");jQuery.sap.require('sap.m.TileContainer');sap.m.TileContainer.extend("sap.ushell.components.factsheet.controls.PictureViewer",{metadata:{library:"sap.ushell",properties:{"tileScaling":{type:"float",group:"Misc",defaultValue:0.95},"removable":{type:"boolean",group:"Misc",defaultValue:false}},defaultAggregation:"items",aggregations:{"items":{type:"sap.ushell.components.factsheet.controls.PictureViewerItem",multiple:true,singularName:"item"}},events:{"pictureDeleted":{}}}});sap.ushell.components.factsheet.controls.PictureViewer.M_EVENTS={'pictureDeleted':'pictureDeleted'};jQuery.sap.declare("sap.ushell.components.factsheet.controls.PictureViewer");jQuery.sap.require('sap.ui.core.ResizeHandler');jQuery.sap.require('sap.m.TileContainer');sap.ushell.components.factsheet.controls.PictureViewer.prototype.init=function(){sap.m.TileContainer.prototype.init.apply(this);this.setEditable(false);if(sap.ui.getCore().isMobile()){jQuery(window).bind("tap",jQuery.proxy(this._reset,this));var s=sap.ui.getCore().getStaticAreaRef();this.$blocker=jQuery("<div class='sapCaPVBly sapUiBLy'></div>").css("visibility","hidden");jQuery(s).append(this.$blocker)}if(sap.ui.getCore().isMobile()){}else{jQuery(window).bind("resize",jQuery.proxy(this._resize,this))}this.addStyleClass("sapCaPW");this.addStyleClass("sapCaPWRendering")};sap.ushell.components.factsheet.controls.PictureViewer.prototype._resize=function(){if(this._oDragSession){return}setTimeout(jQuery.proxy(function(){this._applyDimension();this._update(false);delete this._iInitialResizeTimeout},this),this._iInitialResizeTimeout);this._iInitialResizeTimeout=0};sap.ushell.components.factsheet.controls.PictureViewer.prototype.exit=function(){this.$blocker.remove();if(sap.ui.getCore().isMobile()){}else{jQuery(window).unbind("resize",jQuery.proxy(this._resize,this))}sap.m.TileContainer.prototype.exit.apply(this);if(!sap.ui.Device.system.desktop){jQuery(window).unbind("tap",jQuery.proxy(this._reset,this))}};sap.ushell.components.factsheet.controls.PictureViewer.prototype.setTileScaling=function(t){if(t<0||t>1){t=0.75;jQuery.sap.log.error("Tile Scaling should be a float value between 0 and 1 and not "+t+". Setting it to 0.75 by default.")}this.setProperty('tileScaling',t)};sap.ushell.components.factsheet.controls.PictureViewer.prototype.addItem=function(i){this.insertItem(i,this.getItems().length)};sap.ushell.components.factsheet.controls.PictureViewer.prototype.insertItem=function(i,I){var t=new sap.ushell.components.factsheet.controls.PictureTile({tileContent:i});t.attachPictureDelete(jQuery.proxy(this._deletePictureRequestHandler,this));this.insertTile(t,I);this.insertAggregation("items",i,I);return this};sap.ushell.components.factsheet.controls.PictureViewer.prototype.insertTile=function(t,i){t.attachPictureDelete(jQuery.proxy(this._deletePictureRequestHandler,this));sap.m.TileContainer.prototype.insertTile.apply(this,arguments)};sap.ushell.components.factsheet.controls.PictureViewer.prototype.deleteTile=function(t){sap.m.TileContainer.prototype.deleteTile.apply(this,arguments);t.destroy()};sap.ushell.components.factsheet.controls.PictureViewer.prototype.deletePicture=function(i){var p,a,n;n=this.getTiles().length;if(typeof i!="number"||i<0||i>=n){p=this.getPageFirstTileIndex()}else{p=i}if(p>-1){a=this.getTiles()[p];a.detachPictureDelete(jQuery.proxy(this._deletePictureRequestHandler,this));this.deleteTile(a);this.removeAggregation("items",p,true)}else{jQuery.sap.log.warning("Cannot find and delete a picture at index : "+i)}return this};sap.ushell.components.factsheet.controls.PictureViewer.prototype.selectPicture=function(i){var n=this.getTiles().length;if(typeof i!="number"){i=0}else if(i<0){i=0}else if(i>=n){i=n-1}if(this._bRendered){this.addStyleClass("sapCaPWRendering")}else{}this._selectedIndex=i;return this};sap.ushell.components.factsheet.controls.PictureViewer.prototype.setSelectedIndex=function(i){this.selectPicture(i)};sap.ushell.components.factsheet.controls.PictureViewer.prototype.getCurrentPictureIndex=function(){return this.getPageFirstTileIndex()};sap.ushell.components.factsheet.controls.PictureViewer.prototype._deletePictureRequestHandler=function(e){var p=this.indexOfTile(e.getSource());this.deleteTile(e.getSource());this.firePictureDeleted({index:p})};sap.ushell.components.factsheet.controls.PictureViewer.prototype._reset=function(e){var i=this.getCurrentPictureIndex();var t=this.getTiles();if(i>-1&&t&&t.length>i){var T=t[i];if(T){var $=jQuery(e.target);var a=this.$();if(a.length>0&&$.length>0){var b=$.closest(this.$());if(b.length===0){T.switchVisibility(false)}}}}};sap.ushell.components.factsheet.controls.PictureViewer.prototype.setRemovable=function(v){this.setProperty("removable",v,true);this.toggleStyleClass("sapCaPWEditable",v)};sap.ushell.components.factsheet.controls.PictureViewer.prototype.setEditable=function(v){sap.m.TileContainer.prototype.setEditable.call(this,false)};sap.ushell.components.factsheet.controls.PictureViewer.prototype._getTileDimension=function(){if(!this._bRendered)return;var $=jQuery.sap.byId(this.getId()+"-scrl");var t={width:$.width(),height:$.height()};return t};sap.ushell.components.factsheet.controls.PictureViewer.prototype.onBeforeRendering=function(){this.addStyleClass("sapCaPWRendering")};sap.ushell.components.factsheet.controls.PictureViewer.prototype.onAfterRendering=function(){var t=this;this._bRendered=true;this._applyDimension();this.$().toggleClass("sapCaPWEditable",this.getRemovable()===true);this._sInitialResizeTimeoutId=setTimeout(function(){t.addStyleClass("sapCaPWRendering");t._applyPageStartIndex(t._selectedIndex);t._update(false)},this._iInitialResizeTimeout);if(sap.ui.Device.system.desktop){var f=this.getTiles()[0],T=this._iInitialResizeTimeout;if(!!f){setTimeout(jQuery.proxy(function(){this._findTile(f.$()).focus()},this),T)}}};sap.ushell.components.factsheet.controls.PictureViewer.prototype._update=function(a){sap.m.TileContainer.prototype._update.apply(this,arguments);this.removeStyleClass("sapCaPWRendering");if(sap.ui.getCore().isMobile()){var t=this;var b=this.$blocker;setTimeout(jQuery.proxy(function(){b.fadeOut(200,function(){t.css("visibility","hidden").css("z-index",0)})},this),250)}};sap.ushell.components.factsheet.controls.PictureViewer.prototype._applyDimension=function(){var d=this._getContainerDimension(),i=this.getId(),$=this.$(),t,o=10,T=60,c=jQuery.sap.byId(i+"-cnt"),a,b,p=jQuery.sap.byId(i+"-pager").outerHeight();jQuery.sap.byId(i+"-scrl").css({width:d.outerwidth+"px",height:(d.outerheight-p)+"px"});c.css({height:(d.outerheight-p)+"px",visibility:"visible"});$.css("visibility","visible");t=$.position();a=c.position();b=c.outerHeight();if(jQuery.device.is.phone){o=2}else if(sap.ui.Device.system.desktop){o=0}jQuery.sap.byId(i+"-blind").css({top:(a.top+o)+"px",left:(a.left+o)+"px",width:(c.outerWidth()-o)+"px",height:(b-o)+"px"});jQuery.sap.byId(i+"-rightedge").css({top:(t.top+o+T)+"px",right:o+"px",height:(b-o-T)+"px"});jQuery.sap.byId(i+"-leftedge").css({top:(t.top+o+T)+"px",left:(t.left+o)+"px",height:(b-o-T)+"px"})};sap.ushell.components.factsheet.controls.PictureViewer.prototype.showBlockerLayer=function(c){if(sap.ui.getCore().isMobile()){var a=20;jQuery(sap.ui.getCore().getStaticAreaRef()).children().each(function(i,v){var z=parseInt(jQuery(v).css("z-index"));if(!isNaN(z)){a=Math.max(a,z)}});jQuery.sap.log.debug("blocker layer z-index calculated : "+a+1);this.$blocker.css("z-index",a+1).css("visibility","visible").fadeIn(200,function(){if(c)c.call()})}else{if(c)c.call()}}};if(!jQuery.sap.isDeclared('sap.ushell.components.factsheet.controls.PictureViewerItem')){jQuery.sap.declare("sap.ushell.components.factsheet.controls.PictureViewerItem");jQuery.sap.require('sap.ui.core.Control');sap.ui.core.Control.extend("sap.ushell.components.factsheet.controls.PictureViewerItem",{metadata:{library:"sap.ushell",properties:{"src":{type:"string",group:"Misc",defaultValue:null}},aggregations:{"image":{type:"sap.m.Image",multiple:false}}}});
/*!
 * @copyright@
*/
sap.ushell.components.factsheet.controls.PictureViewerItem.prototype.setSrc=function(s){this.setProperty("src",s);var i=this.getImage();if(i==null){i=new sap.m.Image()}i.setSrc(s);this.setImage(i);return this};sap.ushell.components.factsheet.controls.PictureViewerItem.prototype.exit=function(){var i=this.getImage();if(i){i.destroy()}}};if(!jQuery.sap.isDeclared('sap.ushell.components.tiles.action.ActionTile.controller')){jQuery.sap.declare('sap.ushell.components.tiles.action.ActionTile.controller');
// Copyright (c) 2013 SAP AG, All Rights Reserved
(function(){"use strict";sap.ui.getCore().loadLibrary("sap.m");jQuery.sap.require('sap.ui.core.IconPool');sap.ui.controller("sap.ushell.components.tiles.action.ActionTile",{onInit:function(){var v=this.getView(),V=v.getViewData(),r=sap.ushell.components.tiles.utils.getResourceBundleModel(),t=V.chip,c=t.configuration.getParameterValueAsString('tileConfiguration'),C=sap.ushell.components.tiles.utils.getActionConfiguration(c,t.configurationUi.isEnabled()),m,a=this;function f(s,S){var b=r.getResourceBundle(),R=b.getText("configuration.semantic_object")+":\n"+s+"\n\n"+b.getText("configuration.semantic_action")+":\n"+S;return R}v.setModel(r,"i18n");m=new sap.ui.model.json.JSONModel({config:C,displayText:f(C.semantic_object,C.semantic_action)});v.setModel(m);if(t.configurationUi.isEnabled()){t.configurationUi.setUiProvider(function(){var o=sap.ushell.components.tiles.utils.getConfigurationUi(a.getView(),"sap.ushell.components.tiles.action.Configuration");t.configurationUi.attachCancel(this.onCancelConfiguration.bind(null,o));t.configurationUi.attachSave(this.onSaveConfiguration.bind(this,o,f));return o}.bind(this));v.byId("actionTile").setTooltip(r.getResourceBundle().getText("edit_configuration.tooltip"))}},onPress:function(e){var t=this.getView().getViewData().chip;if(t.configurationUi.isEnabled()){t.configurationUi.display()}},onSaveConfiguration:function(c,f){var d=jQuery.Deferred(),m=c.getModel(),t=m.getProperty("/tileModel"),T=c.getViewData().chip;function l(E){jQuery.sap.log.warning(E,null,"sap.ushell.components.tiles.action.ActionTile.controller");d.reject(E)}if(jQuery.trim(m.getProperty("/config/semantic_action"))==""||(jQuery.trim(m.getProperty("/config/navigation_provider"))=="LPD"&&(jQuery.trim(m.getProperty("/config/navigation_provider_role"))==""||jQuery.trim(m.getProperty("/config/navigation_provider_instance"))==""||(jQuery.trim(m.getProperty("/config/target_application_alias"))==""&&jQuery.trim(m.getProperty("/config/target_application_id"))=="")))||(jQuery.trim(m.getProperty("/config/navigation_provider"))=="SAPUI5"&&(jQuery.trim(m.getProperty("/config/display_title_text"))==""||jQuery.trim(m.getProperty("/config/url"))==""||jQuery.trim(m.getProperty("/config/ui5_component"))==""))||(jQuery.trim(m.getProperty("/config/desktopChecked"))==""&&jQuery.trim(m.getProperty("/config/phoneChecked"))==""&&jQuery.trim(m.getProperty("/config/tabletChecked")))){var s=c.byId("semantic_actionInput"),o=c.byId("target_application_descriptionInput"),a=c.byId("target_application_urlInput"),b=c.byId("target_application_componentInput"),n=c.byId("navigation_provider_roleInput"),N=c.byId("navigation_provider_instanceInput"),e=c.byId("target_application_aliasInput"),g=c.byId("target_application_idInput"),F=c.byId("desktopCB"),h=c.byId("tabletCB"),i=c.byId("phoneCB");if(s.getValue()==""){s.setValueState(sap.ui.core.ValueState.Error)}if(jQuery.trim(m.getProperty("/config/navigation_provider"))=="SAPUI5"&&o.getValue()==""){o.setValueState(sap.ui.core.ValueState.Error)}if(jQuery.trim(m.getProperty("/config/navigation_provider"))=="SAPUI5"&&a.getValue()==""){a.setValueState(sap.ui.core.ValueState.Error)}if(jQuery.trim(m.getProperty("/config/navigation_provider"))=="SAPUI5"&&b.getValue()==""){b.setValueState(sap.ui.core.ValueState.Error)}if(jQuery.trim(m.getProperty("/config/navigation_provider"))=="LPD"&&n.getValue()==""){n.setValueState(sap.ui.core.ValueState.Error)}if(jQuery.trim(m.getProperty("/config/navigation_provider"))=="LPD"&&N.getValue()==""){N.setValueState(sap.ui.core.ValueState.Error)}if(jQuery.trim(m.getProperty("/config/navigation_provider"))=="LPD"&&e.getValue()==""&&g.getValue()==""){e.setValueState(sap.ui.core.ValueState.Error);g.setValueState(sap.ui.core.ValueState.Error)}if(jQuery.trim(m.getProperty("/config/desktopChecked"))==""&&jQuery.trim(m.getProperty("/config/phoneChecked"))==""&&jQuery.trim(m.getProperty("/config/tabletChecked"))){F.setValueState(sap.ui.core.ValueState.Error);h.setValueState(sap.ui.core.ValueState.Error);i.setValueState(sap.ui.core.ValueState.Error)}d.reject("mandatory_fields_missing");return d.promise()}if(sap.ushell.components.tiles.utils.tableHasDuplicateParameterNames(m.getProperty("/config/rows"))){var B=sap.ushell.components.tiles.utils.getResourceBundleModel().getResourceBundle();d.reject(B.getText("configuration.signature.uniqueParamMessage.text"))}else{var j=m.getProperty("/config/formFactorConfigDefault")?undefined:sap.ushell.components.tiles.utils.buildFormFactorsObject(m);var M=sap.ushell.components.tiles.utils.getMappingSignatureString(m.getProperty("/config/rows"),m.getProperty("/config/isUnknownAllowed"));var k={semantic_object:jQuery.trim(m.getProperty("/config/semantic_object"))||"",semantic_action:jQuery.trim(m.getProperty("/config/semantic_action"))||"",display_title_text:jQuery.trim(m.getProperty("/config/display_title_text"))||"",url:jQuery.trim(m.getProperty("/config/url"))||"",ui5_component:jQuery.trim(m.getProperty("/config/ui5_component"))||"",navigation_provider:jQuery.trim(m.getProperty("/config/navigation_provider")),navigation_provider_role:jQuery.trim(m.getProperty("/config/navigation_provider_role"))||"",navigation_provider_instance:jQuery.trim(m.getProperty("/config/navigation_provider_instance"))||"",target_application_id:jQuery.trim(m.getProperty("/config/target_application_id"))||"",target_application_alias:jQuery.trim(m.getProperty("/config/target_application_alias"))||"",display_info_text:jQuery.trim(m.getProperty("/config/display_info_text")),form_factors:j,mapping_signature:M};var p=T.bag.getBag('tileProperties');p.setText('display_title_text',k.display_title_text);T.writeConfiguration.setParameterValues({tileConfiguration:JSON.stringify(k)},function(){var C=T.configuration.getParameterValueAsString('tileConfiguration'),q=sap.ushell.components.tiles.utils.getActionConfiguration(C,false),r=sap.ushell.components.tiles.utils.getActionConfiguration(C,true);m=new sap.ui.model.json.JSONModel({config:q,tileModel:t});c.setModel(m);t.setData({config:r,displayText:f(r.semantic_object,r.semantic_action)},false);p.save(function(){jQuery.sap.log.debug("property bag 'tileProperties' saved successfully");if(T.title){T.title.setTitle(k.display_title_text,function(){d.resolve()},l)}else{d.resolve()}},l)},l)}return d.promise()},onCancelConfiguration:function(c){var v=c.getViewData(),m=c.getModel(),t=m.getProperty("/tileModel"),T=v.chip,C=sap.ushell.components.tiles.utils.getActionConfiguration(T.configuration.getParameterValueAsString('tileConfiguration'),false);c.getModel().setData({config:C,tileModel:t},false)}})}())};if(!jQuery.sap.isDeclared('sap.ushell.components.tiles.action.Configuration.controller')){jQuery.sap.declare('sap.ushell.components.tiles.action.Configuration.controller');(function(){"use strict";sap.ui.controller("sap.ushell.components.tiles.action.Configuration",{sEnterValuePlaceHolder:"",sDuplicateErrorMsg:"",sDuplicateErrorTitle:"",sInvalidParmMsg:"",aDefaultObjects:[{obj:"",name:""},{obj:"*",name:"*"}],onConfigurationInputChange:function(c){sap.ushell.components.tiles.utils.checkTMInput(this.getView(),c)},onInit:function(){var v=this.getView(),s=v.byId("semantic_objectInput"),r=sap.ushell.components.tiles.utils.getResourceBundleModel();v.setModel(r,"i18n");v.setViewName("sap.ushell.components.tiles.action.Configuration");sap.ushell.components.tiles.utils.createSemanticObjectModel(this,s,this.aDefaultObjects);s.attachChange(function(c){var V=c.getSource().getValue();v.getModel().setProperty("/config/semantic_object",V)});var b=r.getResourceBundle();this.sEnterValuePlaceHolder=b.getText("configuration.signature.table.valueFieldLbl");this.sDuplicateErrorMsg=b.getText("configuration.signature.uniqueParamMessage.text");this.sDuplicateErrorTitle=b.getText("configuration.signature.uniqueParamMessage.title");this.sInvalidParmMsg=b.getText("configuration.signature.invalidParamMessage.text")},handleMandatoryChange:function(m){var i=m.getParameter('id');var p=sap.ui.getCore().byId(i).getParent().getCells();var I=m.getParameter('checked');if(I){p[2].setEnabled(true);p[2].setPlaceholder(this.sEnterValuePlaceHolder);p[4].setEnabled(false);p[4].setValue("");p[4].setPlaceholder("");p[3].setEnabled(true)}else{p[2].setEnabled(false);p[2].setValue("");p[2].setPlaceholder("");p[4].setEnabled(true);p[4].setPlaceholder(this.sEnterValuePlaceHolder);p[3].setEnabled(false);p[3].setChecked(false)}},addRow:function(){var v=this.getView();var m=v.getModel();var r=m.getProperty('/config/rows');var n=sap.ushell.components.tiles.utils.getEmptyRowObj();r.push(n);m.setProperty('/config/rows',r)},deleteRow:function(){var v=this.getView();var m=v.getModel();var r=m.getProperty('/config/rows');var t=v.byId("mappingSignatureTable");var s=t.getSelectedIndices();var S=s.sort(function(a,b){return b-a}).slice();for(var i=0;i<S.length;i++){t.removeSelectionInterval(S[i],S[i]);r.splice(S[i],1)}m.setProperty('/config/rows',r)},checkDuplicateNames:function(c){var m=this.getView().getModel();var r=m.getProperty('/config/rows');var n=sap.ui.getCore().byId(c.getParameter('id'));var N=c.getParameter('newValue');if(N!=""&&!(/^[-/\w]+$/.test(N))){n.setValueState(sap.ui.core.ValueState.Error);sap.m.MessageBox.alert(this.sInvalidParmMsg,this.focusNameField.bind(n),this.sDuplicateErrorTitle)}if(sap.ushell.components.tiles.utils.tableHasDuplicateParameterNames(r)){n.setValueState(sap.ui.core.ValueState.Error);sap.m.MessageBox.alert(this.sDuplicateErrorMsg,this.focusNameField.bind(n),this.sDuplicateErrorTitle)}else{n.setValueState(sap.ui.core.ValueState.None)}},focusNameField:function(){this.focus()},onValueHelpRequest:function(e){sap.ushell.components.tiles.utils.objectSelectOnValueHelpRequest(this,e)},onFormFactorChange:function(){var m=this.getView().getModel();m.setProperty('/config/formFactorConfigDefault',false)},onApplicationTypeChange:function(e){sap.ushell.components.tiles.utils.displayApplicationTypeFields(this.getView())}})}())};if(!jQuery.sap.isDeclared('sap.ushell.components.tiles.applauncher.Configuration.controller')){jQuery.sap.declare('sap.ushell.components.tiles.applauncher.Configuration.controller');(function(){"use strict";sap.ui.controller("sap.ushell.components.tiles.applauncher.Configuration",{onConfigurationInputChange:function(c){sap.ushell.components.tiles.utils.checkInput(this.getView(),c)},aDefaultObjects:[{obj:"",name:""}],onInit:function(){var v=this.getView(),t=v.byId("targetUrl"),s=v.byId("navigation_semantic_objectInput"),r=sap.ushell.components.tiles.utils.getResourceBundleModel();v.setModel(r,"i18n");v.setViewName("sap.ushell.components.tiles.applauncher.Configuration");sap.ushell.components.tiles.utils.createSemanticObjectModel(this,s,this.aDefaultObjects);s.attachChange(function(c){var V=c.getSource().getValue();v.getModel().setProperty("/config/navigation_semantic_object",V)});function a(u){return!u}t.bindProperty("enabled",{formatter:a,path:"/config/navigation_use_semantic_object"})},onAfterRendering:function(){sap.ushell.components.tiles.utils.updateTooltipForDisabledProperties(this.getView())},onValueHelpRequest:function(e){sap.ushell.components.tiles.utils.objectSelectOnValueHelpRequest(this,e)},onCheckBoxChange:function(e){var v=this.getView(),s=v.byId("navigation_semantic_objectInput"),m=s.getModel(),a=e.getSource().getSelected();m.setProperty("/enabled",a)},onIconValueHelpRequest:function(e){sap.ushell.components.tiles.utils.iconSelectOnValueHelpRequest(this,e)},onSelectIconClose:function(){sap.ushell.components.tiles.utils.onSelectIconClose(this.getView())},onSelectIconOk:function(){sap.ushell.components.tiles.utils.onSelectIconOk(this.getView())}})}())};if(!jQuery.sap.isDeclared('sap.ushell.components.tiles.applauncher.StaticTile.controller')){jQuery.sap.declare('sap.ushell.components.tiles.applauncher.StaticTile.controller');(function(){"use strict";sap.ui.getCore().loadLibrary("sap.m");jQuery.sap.require('sap.ui.core.IconPool');sap.ui.controller("sap.ushell.components.tiles.applauncher.StaticTile",{onInit:function(){var s=this.getView(),v=s.getViewData(),t=v.chip,c=sap.ushell.components.tiles.utils.getConfiguration(t,t.configurationUi.isEnabled(),false),m,k,K,a=this,N=c.navigation_target_url,S;S=t.url.getApplicationSystem();if(S){N+=((N.indexOf("?")<0)?"?":"&")+"sap-system="+S}this.navigationTargetUrl=N;m=new sap.ui.model.json.JSONModel({config:c,nav:{navigation_target_url:(t.configurationUi&&t.configurationUi.isEnabled()?"":N)},search:{display_highlight_terms:[]}});s.setModel(m);if(t.search){k=s.getModel().getProperty("/config/display_search_keywords");K=jQuery.grep(k.split(/[, ]+/),function(n,i){return n&&n!==""});t.search.setKeywords(K);t.search.attachHighlight(function(h){s.getModel().setProperty("/search/display_highlight_terms",h)})}if(t.preview){t.preview.setTargetUrl(N);t.preview.setPreviewIcon(c.display_icon_url);t.preview.setPreviewTitle(c.display_title_text)}if(t.configurationUi.isEnabled()){t.configurationUi.setUiProvider(function(){var C=sap.ushell.components.tiles.utils.getConfigurationUi(s,"sap.ushell.components.tiles.applauncher.Configuration");t.configurationUi.attachCancel(a.onCancelConfiguration.bind(null,C));t.configurationUi.attachSave(a.onSaveConfiguration.bind(null,C));return C});this.getView().getContent()[0].setTooltip(sap.ushell.components.tiles.utils.getResourceBundleModel().getResourceBundle().getText("edit_configuration.tooltip"))}},onPress:function(e){var s=this.getView(),v=s.getViewData(),t=v.chip;if(t.configurationUi.isEnabled()){t.configurationUi.display()}else if(this.navigationTargetUrl){if(this.navigationTargetUrl[0]==='#'){hasher.setHash(this.navigationTargetUrl)}else{window.open(this.navigationTargetUrl,'_blank')}}},onSaveConfiguration:function(c){var d=jQuery.Deferred(),m=c.getModel(),t=m.getProperty("/tileModel"),T=c.getViewData().chip,a={display_icon_url:m.getProperty("/config/display_icon_url"),display_info_text:m.getProperty("/config/display_info_text"),display_title_text:m.getProperty("/config/display_title_text"),display_subtitle_text:m.getProperty("/config/display_subtitle_text"),navigation_use_semantic_object:m.getProperty("/config/navigation_use_semantic_object"),navigation_target_url:m.getProperty("/config/navigation_target_url"),navigation_semantic_object:jQuery.trim(m.getProperty("/config/navigation_semantic_object"))||"",navigation_semantic_action:jQuery.trim(m.getProperty("/config/navigation_semantic_action"))||"",navigation_semantic_parameters:jQuery.trim(m.getProperty("/config/navigation_semantic_parameters")),display_search_keywords:m.getProperty("/config/display_search_keywords")};var r=sap.ushell.components.tiles.utils.checkInputOnSaveConfig(c);if(r){d.reject("mandatory_fields_missing");return d.promise()}if(a.navigation_use_semantic_object){a.navigation_target_url=sap.ushell.components.tiles.utils.getSemanticNavigationUrl(a);m.setProperty("/config/navigation_target_url",a.navigation_target_url)}var b=T.bag.getBag('tileProperties');b.setText('display_title_text',a.display_title_text);b.setText('display_subtitle_text',a.display_subtitle_text);b.setText('display_info_text',a.display_info_text);b.setText('display_search_keywords',a.display_search_keywords);function l(e){jQuery.sap.log.error(e,null,"sap.ushell.components.tiles.applauncher.StaticTile.controller");d.reject(e)}T.writeConfiguration.setParameterValues({tileConfiguration:JSON.stringify(a)},function(){var C=sap.ushell.components.tiles.utils.getConfiguration(T,false,false),o=sap.ushell.components.tiles.utils.getConfiguration(T,true,false),m=new sap.ui.model.json.JSONModel({config:C,nav:{navigation_target_url:""},tileModel:t});c.setModel(m);t.setData({config:o,nav:{navigation_target_url:""}},false);if(T.preview){T.preview.setTargetUrl(C.navigation_target_url);T.preview.setPreviewIcon(C.display_icon_url);T.preview.setPreviewTitle(C.display_title_text)}b.save(function(){jQuery.sap.log.debug("property bag 'tileProperties' saved successfully");if(T.title){T.title.setTitle(a.display_title_text,function(){d.resolve()},l)}else{d.resolve()}},l)},l);return d.promise()},onCancelConfiguration:function(c){var v=c.getViewData(),m=c.getModel(),t=m.getProperty("/tileModel"),T=v.chip,C=sap.ushell.components.tiles.utils.getConfiguration(T,T.configurationUi.isEnabled(),false);c.getModel().setData({config:C,nav:{navigation_target_url:""},tileModel:t},false)}})}())};if(!jQuery.sap.isDeclared('sap.ushell.components.tiles.applauncherdynamic.Configuration.controller')){jQuery.sap.declare('sap.ushell.components.tiles.applauncherdynamic.Configuration.controller');(function(){"use strict";sap.ui.controller("sap.ushell.components.tiles.applauncherdynamic.Configuration",{onConfigurationInputChange:function(c){sap.ushell.components.tiles.utils.checkInput(this.getView(),c)},aDefaultObjects:[{obj:"",name:""}],onInit:function(){var v=this.getView(),s=v.byId("navigation_semantic_objectInput"),r=sap.ushell.components.tiles.utils.getResourceBundleModel();v.setModel(r,"i18n");v.setViewName("sap.ushell.components.tiles.applauncherdynamic.Configuration");sap.ushell.components.tiles.utils.createSemanticObjectModel(this,s,this.aDefaultObjects);s.attachChange(function(c){var V=c.getSource().getValue();v.getModel().setProperty("/config/navigation_semantic_object",V)});v.byId("targetUrl").bindProperty("enabled",{formatter:function(u){return!u},path:"/config/navigation_use_semantic_object"})},onAfterRendering:function(){sap.ushell.components.tiles.utils.updateTooltipForDisabledProperties(this.getView())},onValueHelpRequest:function(e){sap.ushell.components.tiles.utils.objectSelectOnValueHelpRequest(this,e)},onCheckBoxChange:function(e){var v=this.getView(),s=v.byId("navigation_semantic_objectInput"),m=s.getModel(),a=e.getSource().getSelected();m.setProperty("/enabled",a)},onIconValueHelpRequest:function(e){sap.ushell.components.tiles.utils.iconSelectOnValueHelpRequest(this,e)},onSelectIconClose:function(){sap.ushell.components.tiles.utils.onSelectIconClose(this.getView())},onSelectIconOk:function(){sap.ushell.components.tiles.utils.onSelectIconOk(this.getView())}})}())};if(!jQuery.sap.isDeclared('sap.ushell.components.tiles.applauncherdynamic.DynamicTile.controller')){jQuery.sap.declare('sap.ushell.components.tiles.applauncherdynamic.DynamicTile.controller');(function(){"use strict";sap.ui.getCore().loadLibrary("sap.m");jQuery.sap.require('sap.ui.core.IconPool');jQuery.sap.require('sap.ui.thirdparty.datajs');sap.ui.controller("sap.ushell.components.tiles.applauncherdynamic.DynamicTile",{timer:null,oDataRequest:null,onInit:function(){var v=this.getView(),V=v.getViewData(),t=V.chip,c=sap.ushell.components.tiles.utils.getConfiguration(t,t.configurationUi.isEnabled(),false),m,k,K,a=this,N=c.navigation_target_url,s;s=t.url.getApplicationSystem();if(s){N+=((N.indexOf("?")<0)?"?":"&")+"sap-system="+s}this.navigationTargetUrl=N;m=new sap.ui.model.json.JSONModel({config:c,data:sap.ushell.components.tiles.utils.getDataToDisplay(c,{number:(t.configurationUi.isEnabled()?1234:"...")}),nav:{navigation_target_url:(t.configurationUi&&t.configurationUi.isEnabled()?"":N)},search:{display_highlight_terms:[]}});v.setModel(m);if(t.search){k=v.getModel().getProperty("/config/display_search_keywords");K=jQuery.grep(k.split(/[, ]+/),function(n,i){return n&&n!==""});t.search.setKeywords(K);t.search.attachHighlight(function(h){v.getModel().setProperty("/search/display_highlight_terms",h)})}if(t.preview){t.preview.setTargetUrl(N);t.preview.setPreviewIcon(c.display_icon_url);t.preview.setPreviewTitle(c.display_title_text)}if(t.refresh){t.refresh.attachRefresh(this.refreshHandler.bind(null,this))}if(t.visible){t.visible.attachVisible(this.visibleHandler.bind(this))}if(t.configurationUi.isEnabled()){t.configurationUi.setUiProvider(function(){var C=sap.ushell.components.tiles.utils.getConfigurationUi(v,"sap.ushell.components.tiles.applauncherdynamic.Configuration");t.configurationUi.attachCancel(a.onCancelConfiguration.bind(null,C));t.configurationUi.attachSave(a.onSaveConfiguration.bind(null,C));return C});this.getView().getContent()[0].setTooltip(sap.ushell.components.tiles.utils.getResourceBundleModel().getResourceBundle().getText("edit_configuration.tooltip"))}else{if(!t.preview||!t.preview.isEnabled()){if(!s){sap.ushell.Container.addRemoteSystemForServiceUrl(c.service_url)}this.onUpdateDynamicData()}}},stopRequests:function(){if(this.timer){clearTimeout(this.timer)}if(this.oDataRequest){try{this.oDataRequest.abort()}catch(e){jQuery.sap.log.warning(e.name,e.message)}}},onExit:function(){this.stopRequests()},onPress:function(e){var v=this.getView(),V=v.getViewData(),t=V.chip;if(t.configurationUi.isEnabled()){t.configurationUi.display()}else if(this.navigationTargetUrl){if(this.navigationTargetUrl[0]==='#'){hasher.setHash(this.navigationTargetUrl)}else{window.open(this.navigationTargetUrl,'_blank')}}},onUpdateDynamicData:function(){var v=this.getView(),c=v.getModel().getProperty("/config"),n=c.service_refresh_interval;if(!n){n=0}else if(n<10){jQuery.sap.log.warning("Refresh Interval "+n+" seconds for service URL "+c.service_url+" is less than 10 seconds, which is not supported. "+"Increased to 10 seconds automatically.",null,"sap.ushell.components.tiles.applauncherdynamic.DynamicTile.controller");n=10}if(c.service_url){this.loadData(v,n)}},extractData:function(d){var n,k=["results","icon","title","number","numberUnit","info","infoState","infoStatus","targetParams","subtitle","stateArrow","numberState","numberDigits","numberFactor"];if(typeof d==="object"&&Object.keys(d).length===1){n=Object.keys(d)[0];if(jQuery.inArray(n,k)===-1){return d[n]}}return d},onSaveConfiguration:function(c){var d=jQuery.Deferred(),m=c.getModel(),t=m.getProperty("/tileModel"),T=c.getViewData().chip,a={display_icon_url:m.getProperty("/config/display_icon_url"),display_title_text:m.getProperty("/config/display_title_text"),display_subtitle_text:m.getProperty("/config/display_subtitle_text"),display_info_text:m.getProperty("/config/display_info_text"),display_number_unit:m.getProperty("/config/display_number_unit"),service_url:m.getProperty("/config/service_url"),service_refresh_interval:m.getProperty("/config/service_refresh_interval"),navigation_use_semantic_object:m.getProperty("/config/navigation_use_semantic_object"),navigation_target_url:m.getProperty("/config/navigation_target_url"),navigation_semantic_object:jQuery.trim(m.getProperty("/config/navigation_semantic_object"))||"",navigation_semantic_action:jQuery.trim(m.getProperty("/config/navigation_semantic_action"))||"",navigation_semantic_parameters:jQuery.trim(m.getProperty("/config/navigation_semantic_parameters")),display_search_keywords:m.getProperty("/config/display_search_keywords")};var r=sap.ushell.components.tiles.utils.checkInputOnSaveConfig(c);if(r){d.reject("mandatory_fields_missing");return d.promise()}if(a.navigation_use_semantic_object){a.navigation_target_url=sap.ushell.components.tiles.utils.getSemanticNavigationUrl(a);m.setProperty("/config/navigation_target_url",a.navigation_target_url)}var b=T.bag.getBag('tileProperties');b.setText('display_title_text',a.display_title_text);b.setText('display_subtitle_text',a.display_subtitle_text);b.setText('display_info_text',a.display_info_text);b.setText('display_search_keywords',a.display_search_keywords);function l(e){jQuery.sap.log.error(e,null,"sap.ushell.components.tiles.applauncherdynamic.DynamicTile.controller");d.reject(e)}T.writeConfiguration.setParameterValues({tileConfiguration:JSON.stringify(a)},function(){var C=sap.ushell.components.tiles.utils.getConfiguration(T,false,false),o=sap.ushell.components.tiles.utils.getConfiguration(T,true,false),m=new sap.ui.model.json.JSONModel({config:C,tileModel:t});c.setModel(m);t.setData({data:o,nav:{navigation_target_url:""}},false);if(T.preview){T.preview.setTargetUrl(C.navigation_target_url);T.preview.setPreviewIcon(C.display_icon_url);T.preview.setPreviewTitle(C.display_title_text)}b.save(function(){jQuery.sap.log.debug("property bag 'tileProperties' saved successfully");if(T.title){T.title.setTitle(a.display_title_text,function(){d.resolve()},l)}else{d.resolve()}},l)},l);return d.promise()},onCancelConfiguration:function(c){var v=c.getViewData(),m=c.getModel(),t=m.getProperty("/tileModel"),T=v.chip,C=sap.ushell.components.tiles.utils.getConfiguration(T,false,false);c.getModel().setData({config:C,tileModel:t},false)},loadData:function(d,n){var c=d.getModel().getProperty("/config"),u=c.service_url,t=this;var T=this.getView().getViewData().chip;if(/;o=([;\/?]|$)/.test(u)){u=T.url.addSystemToServiceUrl(u)}if(n>0){jQuery.sap.log.info("Wait "+n+" seconds before calling "+c.service_url+" again",null,"sap.ushell.components.tiles.applauncherdynamic.DynamicTile.controller");this.timer=setTimeout(t.loadData.bind(t,d,n,false),(n*1000))}if(T.visible.isVisible()&&!t.oDataRequest){t.oDataRequest=OData.read({requestUri:u},function(r){t.oDataRequest=undefined;var D=r,o;if(typeof r==="object"){D=t.extractData(D)}else if(typeof r==="string"){D={number:r}}o=sap.ushell.components.tiles.utils.getDataToDisplay(c,D);d.getModel().setProperty("/data",o);d.getModel().setProperty("/nav/navigation_target_url",sap.ushell.components.tiles.utils.addParamsToUrl(t.navigationTargetUrl,o))},function(m){t.oDataRequest=undefined;var M=m&&m.message?m.message:m,r=sap.ushell.components.tiles.utils.getResourceBundleModel().getResourceBundle();if(m.response){M+=" - "+m.response.statusCode+" "+m.response.statusText}jQuery.sap.log.error("Failed to update data via service "+c.service_url+": "+M,null,"sap.ushell.components.tiles.applauncherdynamic.DynamicTile");d.getModel().setProperty("/data",sap.ushell.components.tiles.utils.getDataToDisplay(c,{number:"???",info:r.getText("dynamic_data.error"),infoState:"Critical"}))})}},refreshHandler:function(d){var t=d.getView().getViewData().chip;if(!t.configurationUi.isEnabled()){d.loadData(d.getView(),0)}else{d.stopRequests()}},visibleHandler:function(i){if(i){this.refreshHandler(this)}}})}())};if(!jQuery.sap.isDeclared('sap.ushell.components.tiles.indicatorArea.AreaChartTile.view')){jQuery.sap.declare('sap.ushell.components.tiles.indicatorArea.AreaChartTile.view');
//Copyright (c) 2013 SAP AG, All Rights Reserved
(function(){"use strict";jQuery.sap.require('sap.ca.ui.model.format.NumberFormat');sap.ui.getCore().loadLibrary("sap.suite.ui.commons");sap.ui.jsview("tiles.indicatorArea.AreaChartTile",{getControllerName:function(){return"tiles.indicatorArea.AreaChartTile"},createContent:function(c){this.setHeight('100%');this.setWidth('100%');var p=this.getViewData().chip.preview;var h="Lorem ipsum";var s="Lorem ipsum";if(p&&p.getTitle()){h=p.getTitle();s=p.getDescription()}var b=function(d){return new sap.suite.ui.commons.MicroAreaChartItem({color:"Good",points:{path:"/"+d+"/data",template:new sap.suite.ui.commons.MicroAreaChartPoint({x:"{day}",y:"{balance}"})}})};var a=function(d){return new sap.suite.ui.commons.MicroAreaChartLabel({label:"{/"+d+"/label}",color:"{/"+d+"/color}"})};var g={subheader:s,header:h,footerNum:"",footerComp:"",scale:"",unit:"",value:8888,size:"Auto",frameType:"OneByOne",state:sap.suite.ui.commons.LoadState.Loading,};var n=new sap.suite.ui.commons.MicroAreaChart({width:"{/width}",height:"{/height}",size:"{/size}",target:b("target"),innerMinThreshold:b("innerMinThreshold"),innerMaxThreshold:b("innerMaxThreshold"),minThreshold:b("minThreshold"),maxThreshold:b("maxThreshold"),chart:b("chart"),minXValue:"{/minXValue}",maxXValue:"{/maxXValue}",minYValue:"{/minYValue}",maxYValue:"{/maxYValue}",firstXLabel:a("firstXLabel"),lastXLabel:a("lastXLabel"),firstYLabel:a("firstYLabel"),lastYLabel:a("lastYLabel"),minLabel:a("minLabel"),maxLabel:a("maxLabel"),});var N=new sap.suite.ui.commons.TileContent({unit:"{/unit}",size:"{/size}",footer:"{/footerNum}",content:n,});this.oGenericTile=new sap.suite.ui.commons.GenericTile({subheader:"{/subheader}",frameType:"{/frameType}",size:"{/size}",header:"{/header}",tileContent:[N]});var G=new sap.ui.model.json.JSONModel();G.setData(g);this.oGenericTile.setModel(G);return this.oGenericTile}})}())};if(!jQuery.sap.isDeclared('sap.ushell.renderers.fiori2.Renderer')){
// Copyright (c) 2013 SAP AG, All Rights Reserved
(function(){"use strict";jQuery.sap.declare("sap.ushell.renderers.fiori2.Renderer");jQuery.sap.require('sap.ui.core.UIComponent');sap.ui.core.UIComponent.extend("sap.ushell.renderers.fiori2.Renderer",{metadata:{version:"1.24.5",dependencies:{version:"1.24.5",libs:["sap.ui.core","sap.ui.unified","sap.m"],components:[]}}});sap.ushell.renderers.fiori2.Renderer.prototype.createContent=function(){var p=jQuery.sap.getUriParameters().get("appState")||jQuery.sap.getUriParameters().get("sap-ushell-config"),v=this.getComponentData()||{};if(p){if(!v.config){v.config={}}v.config.appState=p}return sap.ui.view('mainShell',{type:sap.ui.core.mvc.ViewType.JS,viewName:"sap.ushell.renderers.fiori2.Shell",viewData:v})}}())};if(!jQuery.sap.isDeclared('sap.ushell.renderers.fiori2.Shell.controller')){jQuery.sap.declare('sap.ushell.renderers.fiori2.Shell.controller');(function(){"use strict";jQuery.sap.require('sap.ui.core.IconPool');setTimeout(function(){jQuery.sap.require("sap.ushell.renderers.fiori2.launchpad.DashboardManager")},10);var a=true,m=sap.ui.Device.system.phone,u,M=new sap.ui.model.json.JSONModel({groups:[],animationRendered:false,title:"My demo title",searchAvailable:false,rtl:false,personalization:true,searchTerm:"",states:{"home":{"stateName":"home","showCurtain":false,"headerHiding":false,"headerVisible":true,"showCatalog":false,"showPane":false,"headItems":["configBtn"],"headEndItems":["sf"],"search":"","paneContent":[],"actions":["ContactSupportBtn","loginDetails","hideGroupsBtn","logoutBtn"]},"app":{"stateName":"app","showCurtain":false,"headerHiding":true,"headerVisible":true,"headEndItems":["sf"],"showCatalog":false,"showPane":false,"search":"","headItems":["homeBtn"],"actions":["ContactSupportBtn","aboutBtn","loginDetails","logoutBtn"],"shellActions":["ContactSupportBtn","aboutBtn","loginDetails","logoutBtn"]},"minimal":{"stateName":"minimal","showCurtain":false,"headerHiding":false,"headerVisible":true,"headEndItems":[],"showCatalog":false,"showPane":false,"headItems":[],"actions":["ContactSupportBtn","aboutBtn","loginDetails","logoutBtn"],"shellActions":["ContactSupportBtn","aboutBtn","loginDetails","logoutBtn"]},"standalone":{"stateName":"standalone","showCurtain":false,"headerHiding":true,"headerVisible":true,"headEndItems":[],"showCatalog":false,"showPane":false,"headItems":[],"actions":["ContactSupportBtn","aboutBtn"],"shellActions":["ContactSupportBtn","aboutBtn"]},"embedded":{"stateName":"embedded","showCurtain":false,"headerHiding":true,"headerVisible":true,"headEndItems":["standardActionsBtn"],"showCatalog":false,"showPane":false,"headItems":[],"actions":["ContactSupportBtn","aboutBtn"],"shellActions":["ContactSupportBtn","aboutBtn"]},"headerless":{"stateName":"headerless","showCurtain":false,"headerHiding":true,"headerVisible":false,"headEndItems":[],"showCatalog":false,"showPane":false,"headItems":[],"actions":[],"shellActions":[]},"catalog":{"stateName":"catalog","showCurtain":false,"headerHiding":true,"headerVisible":true,"headEndItems":["sf"],"showCatalog":true,"showPane":false,"search":"","headItems":["homeBtn"],"actions":["ContactSupportBtn","loginDetails","logoutBtn"]},"catalogApp":{"stateName":"catalogApp","showCurtain":false,"headerHiding":true,"headerVisible":true,"headEndItems":["sf"],"showCatalog":false,"showPane":false,"search":"","headItems":["backBtn"],"actions":["ContactSupportBtn","aboutBtn","loginDetails","logoutBtn"],"shellActions":["ContactSupportBtn","aboutBtn","loginDetails","logoutBtn"]}}}),c=false,C={},b=['minimal','app','standalone','embedded','headerless'];M.setSizeLimit(10000);sap.ui.controller("sap.ushell.renderers.fiori2.Shell",{catalogPageId:"catalogPage",onInit:function(){this.getView().setModel(M);var v=this.getView().getViewData();if(v){C=v.config||{}}this.getView().setModel(sap.ushell.resources.i18nModel,"i18n");sap.ui.getCore().getEventBus().subscribe("externalSearch",this.externalSearchTriggered,this);sap.ui.getCore().getEventBus().subscribe("showCatalog",this.showCatalog,this);sap.ui.getCore().getEventBus().subscribe("openApp",this.openApp,this);sap.ui.getCore().getEventBus().subscribe("launchpad","contentRendered",this.loadCoreExt);if(C){if(C.appState==="headerless"){M.setProperty("/personalization",false);M.setProperty("/states/home/headerVisible",false)}else{if(C.enablePersonalization!==undefined){M.setProperty("/personalization",C.enablePersonalization)}if(C.enableSetTheme!==undefined){M.setProperty("/setTheme",C.enableSetTheme)}}}u=sap.ushell.Container.getService("UserRecents");this.history=new sap.ushell.renderers.fiori2.History();this.oNavContainer=sap.ui.getCore().byId("navContainer");this.oLoadingDialog=sap.ui.getCore().byId("loadingDialog");this.toggleRtlMode(sap.ui.getCore().getConfiguration().getRTL());this.oShellNavigation=sap.ushell.Container.getService("ShellNavigation");this.oShellNavigation.init(jQuery.proxy(this.doHashChange,this));sap.ushell.Container.getService("Message").init(jQuery.proxy(this.doShowMessage,this));sap.ushell.Container.setLogonFrameProvider(this._getLogonFrameProvider());this.bContactSupportEnabled=sap.ushell.Container.getService("SupportTicket").isEnabled();if(this.bContactSupportEnabled){sap.ushell.UserActivityLog.activate()}if(C&&C.enableHideGroups!==undefined){M.setProperty("/enableHideGroups",C.enableHideGroups)}},_getLogonFrameProvider:function(){var v=this.getView();return{create:function(){return v.createIFrameDialog()},show:function(){v.showIFrameDialog()},destroy:function(){v.destroyIFrameDialog()}}},onExit:function(){sap.ui.getCore().getEventBus().unsubscribe("externalSearch",this.externalSearchTriggered,this);sap.ui.getCore().getEventBus().unsubscribe("showCatalog",this.showCatalog,this);sap.ui.getCore().getEventBus().unsubscribe("openApp",this.openApp,this);this.oShellNavigation.hashChanger.destroy();this.getView().aDanglingControls.forEach(function(o){if(o.destroyContent){o.destroyContent()}o.destroy()});this.getView().oDashboardManager.destroy();sap.ushell.UserActivityLog.deactivate()},getModel:function(){return M},showCatalog:function(s,e,d){if(!this.isCatalogExist()){var o=sap.ui.view({id:this.catalogPageId,viewName:"sap.ushell.renderers.fiori2.launchpad.catalog.Catalog",viewData:{},type:sap.ui.core.mvc.ViewType.JS});this.oNavContainer.addPage(o)}this.switchViewState("catalog");this.oNavContainer.to(this.catalogPageId,this.getAnimationType());this.setAppIcons({title:sap.ushell.resources.i18n.getText("tile_catalog")});this.oLoadingDialog.closeLoadingScreen();sap.ui.getCore().getEventBus().publish("showCatalogEvent",d);jQuery(document).off('keydown.dashboard');jQuery(document).off('keydown.catalog');jQuery(document).on('keydown.catalog',sap.ushell.renderers.fiori2.AccessKeysHandler.catalogKeydownHandler)},isCatalogExist:function(){return(sap.ui.getCore().byId(this.catalogPageId))?true:false},getAnimationType:function(){return sap.ui.Device.os.android?"show":"slide"},openShellOverlay:function(d){},closeShellOverlay:function(){},onCurtainClose:function(e){jQuery.sap.log.warning("Closing Curtain",e);c=false},doShowMessage:function(t,s,p){jQuery.sap.require("sap.m.MessageToast");jQuery.sap.require("sap.m.MessageBox");if(t===sap.ushell.services.Message.Type.ERROR){if(sap.ushell.Container.getService("SupportTicket").isEnabled()){jQuery.sap.require("sap.ushell.ui.launchpad.EmbeddedSupportErrorMessage");var e=new sap.ushell.ui.launchpad.EmbeddedSupportErrorMessage("EmbeddedSupportErrorMessage",{title:p.title||sap.ushell.resources.i18n.getText("error"),content:new sap.m.Text({text:s})});e.open()}else{sap.m.MessageBox.show(s,sap.m.MessageBox.Icon.ERROR,p.title||sap.ushell.resources.i18n.getText("error"))}}else if(t===sap.ushell.services.Message.Type.CONFIRM){if(p.actions){sap.m.MessageBox.show(s,sap.m.MessageBox.Icon.QUESTION,p.title,p.actions,p.callback)}else{sap.m.MessageBox.confirm(s,p.callback,p.title)}}else{sap.m.MessageToast.show(s,{duration:p.duration||3000})}},ignoreHashChange:function(s,A,o){},doHashChange:function(s,A,o,p){if(!a){a=true;return}s=this.fixShellHash(s);var d=this.history.getHistoryLength();if(p){this.hashChangeFailure(d,p.message,null,"sap.ushell.renderers.fiori2.Shell.controller");return}this.history.hashChange(s,o);var U=sap.ushell.Container.getService("URLParsing");var S=U.parseShellHash(s);var e=M.getProperty("/currentState");var i=e&&e.stateName==="catalog";var O=S&&S.action!==sap.ushell.renderers.fiori2.Navigation.CATALOG.ACTION;if(!i||O){this.oLoadingDialog.setText("");this.oLoadingDialog.openLoadingScreen()}if(S&&S.contextRaw&&S.contextRaw==="navResCtx"){var f={};f.additionalInformation=S.params.additionalInformation[0];f.url=S.params.url[0];f.applicationType=S.params.applicationType[0];this.openSomething(s,o,A,f)}else{sap.ushell.Container.getService("NavTargetResolution").resolveHashFragment(s).done(jQuery.proxy(this.openSomething,this,s,o,A)).fail(jQuery.proxy(function(g){this.hashChangeFailure(d,"Failed to resolve navigation target: "+s,g,"sap.ushell.renderers.fiori2.Shell.controller")},this))}},hashChangeFailure:function(h,s,d,e){this.reportError(s,d,e);this.oLoadingDialog.closeLoadingScreen();this.delayedMessageError(sap.ushell.resources.i18n.getText("fail_to_start_app_config_err"));if(h===0){this.cleanHash()}else{this.historyBack()}},reportError:function(s,d,e){jQuery.sap.log.error(s,d,e)},delayedMessageError:function(s){setTimeout(function(){sap.ushell.Container.getService("Message").error(s)},0)},fixShellHash:function(s){if(!s){s='#'}else if(s.charAt(0)!=='#'){s='#'+s}return(s)},cleanHash:function(){window.location.hash=""},changeHash:function(h){window.location.hash=h},historyBack:function(){window.history.back(1)},openSomething:function(s,o,A,d){var f;if(!this.oNavContainer.getParent()){sap.ui.getCore().byId("shell").addContent(this.oNavContainer)}if(d){try{f=sap.ushell.Container.getService("URLParsing").parseShellHash(s)}catch(e){f=undefined}if(f===undefined){jQuery.sap.log.warning("Could not parse shell hash: "+s);f={}}f.sShellHash=s;f.sOldShellHash=o;f.sAppPart=A;f.oApplication=d;if(d.applicationType===sap.ushell.renderers.fiori2.Navigation.CATALOG.ID){if(M.getProperty("/personalization")){sap.ui.getCore().getEventBus().publish("showCatalog",f)}else{this.openDashboard();this.cleanHash();this.oLoadingDialog.closeLoadingScreen()}}else{try{jQuery.sap.require('sap.fiori.core-ext')}catch(g){jQuery.sap.log.warning("failed to load sap.fiori.core-ext!")}f.oMetadata=sap.ushell.services.AppConfiguration.getMetadata(d);sap.ui.getCore().getEventBus().publish("openApp",f)}}else{var h=M.getProperty("/currentState");if(h&&h.stateName==="catalogApp"){this.showCatalog()}else{this.openDashboard()}}},openDashboard:function(){var o=M.getProperty("/currentState")&&M.getProperty("/currentState").stateName==="catalog";this.switchViewState("home");this.oNavContainer.backToTop();sap.ushell.services.AppConfiguration.setCurrentApplication(null);this.setAppIcons(null);if(o){sap.ushell.utils.addBottomSpace()}try{sap.ushell.utils.handleTilesVisibility()}catch(e){}jQuery(document).off('keydown.dashboard');jQuery(document).off('keydown.catalog');jQuery(document).on('keydown.dashboard',sap.ushell.renderers.fiori2.AccessKeysHandler.dashboardKeydownHandler);var U=sap.ui.getCore().byId('shell');U.focusOnConfigBtn()},openApp:function(s,E,d){this.getView().showDemoPopover=false;jQuery.sap.log.warning("Triggering navigation to ",d);var A,o=d.oApplication,f=d.oMetadata||{},I=null,g=d.sShellHash.replace(/\W/g,"-"),O,h=f.title||"",j=f.icon||null,k=sap.ushell.Container.getService('Message');if(!C||!C.changeOpacity||C.changeOpacity!=='off'){setTimeout(function(){u.addAppUsage(d.sShellHash)},700)}if(o){try{if(o.applicationType==="NWBC"&&!(d&&d.contextRaw&&d.contextRaw==="navResCtx")&&this.history.getHistoryLength()>1){a=false;window.history.back(1);var t=d;var S=d;var l;S.params.additionalInformation=o.additionalInformation;S.params.url=o.url;S.params.applicationType=o.applicationType;S.target=t;t.contextRaw=S.contextRaw="navResCtx";var n=sap.ushell.Container.getService("ShellNavigation").hrefForExternal(S,true);if(n.skippedParams){l="#"+d.semanticObject+"-"+d.action}else{l=n.hash}this.openAppNewWindow(l);this.oLoadingDialog.closeLoadingScreen();return}if(!this.oNavContainer.getPage("application"+g)&&!this.oNavContainer.getPage("shellPage"+g)){jQuery.sap.require('sap.ushell.components.container.ApplicationContainer');A=new sap.ushell.components.container.ApplicationContainer("application"+g,o);var p=A.onAfterRendering;A.onAfterRendering=function(){if(p){p.apply(this,arguments)}setTimeout(function(){sap.ui.getCore().getEventBus().publish("launchpad","appOpened",o);jQuery.sap.log.info('app was opened')},0)};var q=A.exit;A.exit=function(){if(q){q.apply(this,arguments)}setTimeout(function(){sap.ui.getCore().getEventBus().publish("launchpad","appClosed",o);jQuery.sap.log.info('app was closed')},0)};sap.ushell.services.AppConfiguration.setCurrentApplication(o);this.oLoadingDialog.showAppInfo(h,j);if(!f.fullWidth&&o.applicationType!=="NWBC"){I=new sap.m.Shell("shellPage"+g,{logo:sap.ui.resource('sap.ui.core','themes/base/img/1x1.gif'),title:h,showLogout:false,app:A}).addStyleClass("sapUshellApplicationPage");if(!h){I.addStyleClass("sapUshellApplicationPageNoHdr")}}else{A.addStyleClass('sapMShellGlobalInnerBackground');I=A}this.oNavContainer.addPage(I)}else if(this.oNavContainer.getPage("application"+g)||this.oNavContainer.getPage("shellPage"+g)){I=this.oNavContainer.getPage("application"+g)||this.oNavContainer.getPage("shellPage"+g)}this.setAppIcons(f);if(o.applicationType[0]==="NWBC"||o.applicationType==="NWBC"){this.switchViewState("minimal");a=false;this.changeHash(d.semanticObject+"-"+d.action)}else{var r=M.getProperty("/currentState");if(r&&r.stateName==="catalog"){this.switchViewState("catalogApp")}else{var w="app";if(b.indexOf(C.appState)>=0){w=C.appState}this.switchViewState(w)}}if(this.history.backwards&&this.oNavContainer.getInitialPage()!==this.oNavContainer.getCurrentPage().getId()){this.oNavContainer.to(I,"slideBack")}else{this.oNavContainer.to(I,this.oNavContainer.getInitialPage()?"slide":"show")}setTimeout(function(){this.oLoadingDialog.closeLoadingScreen()}.bind(this),300)}catch(e){this.reportError(e.name,e.message,h);this.oNavContainer.removePage(this.oNavContainer.getCurrentPage()).destroy();O=this.oNavContainer.removeAllPages();this.oNavContainer.destroy();this.oNavContainer=this.getView().initNavContainer(this);jQuery.each(O,jQuery.proxy(function(i,v){if(!this.oNavContainer.getPage(v.getId())){this.oNavContainer.addPage(v)}if(v.getId()===this.oNavContainer.getInitialPage()){v.removeStyleClass("sapMNavItemHidden")}},this));this.navigateToHome();this.oLoadingDialog.closeLoadingScreen();k.error(sap.ushell.resources.i18n.getText("fail_to_start_app_runtime_err"))}}if(this.history.getHistoryLength()<1){this.oLoadingDialog.closeLoadingScreen()}},openAppNewWindow:function(U){window.open(U)},setAppIcons:function(o){var s=jQuery.sap.getModulePath("sap.ushell");var l=(o&&o.homeScreenIconPhone)||(s+'/themes/base/img/launchicons/57_iPhone_Desktop_Launch.png'),L=(o&&o["homeScreenIconPhone@2"])||(s+'/themes/base/img/launchicons/114_iPhone-Retina_Web_Clip.png'),d=(o&&o.homeScreenIconTablet)||(s+'/themes/base/img/launchicons/72_iPad_Desktop_Launch.png'),e=(o&&o["homeScreenIconTablet@2"])||(s+'/themes/base/img/launchicons/144_iPad_Retina_Web_Clip.png'),f=(o&&o.favIcon)||(s+'/themes/base/img/launchpad_favicon.ico'),t=(o&&o.title)||sap.ushell.resources.i18n.getText("homeBtn_tooltip"),g=this.getFavIconHref();if(sap.ui.Device.os.ios){jQuery.sap.setIcons({'phone':l,'phone@2':L,'tablet':d,'tablet@2':e,'favicon':f,'precomposed':true})}else if(g!==f){jQuery.sap.setIcons({'phone':'','phone@2':'','tablet':'','tablet@2':'','favicon':f,'precomposed':true})}window.document.title=t},getFavIconHref:function(){return jQuery('link').filter('[rel="shortcut icon"]').attr('href')||''},externalSearchTriggered:function(s,e,d){M.setProperty("/searchTerm",d.searchTerm);d.query=d.searchTerm},onAfterNavigate:function(e){var h=this.oNavContainer.getInitialPage(),f=e.getParameter("fromId");if(f!==h&&f!==this.catalogPageId){this.oNavContainer.removeAggregation("pages",f,true);sap.ui.getCore().byId(f).destroy()}this.oLoadingDialog.closeLoadingScreen()},onAfterRendering:function(){if(window.f2p){f2p.add(f2p.m.endHomePage)}},navigateToHome:function(e){if(!e||(e&&e.getParameter("id")==='homeBtn')){location.hash='';this.openDashboard()}else{sap.ushell.renderers.fiori2.Navigation.openCatalogByHash({groupContext:null})}},toggleSearch:function(i){M.setProperty("/searchAvailable",i)},toggleRtlMode:function(r){M.setProperty("/rtl",r)},togglePane:function(e){var s=e.getSource(),S=s.getSelected();if(!sap.ui.getCore().byId('groupList')){var g=this.getView().oDashboardManager.getGroupListView();if(sap.ui.Device.system.desktop){g.addStyleClass("sapUshellGroupListDesktopScrollbar")}this.getModel().setProperty('/states/home/paneContent',[g.getId()]);this.getModel().setProperty('/currentState/paneContent',[g.getId()])}if(e.getParameter("id")==="categoriesBtn"){s.getModel().setProperty("/currentState/showCurtainPane",!S)}else{s.getModel().setProperty("/currentState/showPane",!S);setTimeout(function(){var o=sap.ui.getCore().byId("shell");if(o){o.setFocusOnFirstGroupInList()}},1500)}setTimeout(function(){$("li.sapUshellOver").click()},400)},getActiveViews:function(){var d=this.getModel().getProperty("/currentState/curtainContent"),p=sap.ui.getCore().byId(d[0]),A=[];jQuery.each(p.getContent(),function(i,v){A.push(v.getId())});return A},getLastSearchScreen:function(){return M.getProperty("/lastSearchScreen")},saveSearchScreen:function(s){if(s==='historyScreen'||s==='searchResults'||s==='suggestions'){M.setProperty("/lastSearchScreen",s)}},switchViewState:function(s,S){var p=s[0]==="/"?s:"/states/"+s,o=M.getProperty(p),d=sap.ui.getCore().byId("shell"),e=M.getProperty("/currentState")||{};if(!d.getSearch()||o.search!==d.getSearch().getId()){d.setSearch(sap.ui.getCore().byId(o.search))}this.saveSearchScreen(s);if(!!S){M.setProperty("/lastState",e)}o=jQuery.extend({},e,o);M.setProperty("/currentState",o);if(s==="searchResults"){M.setProperty("/lastSearchScreen",'');if(window.location.href.indexOf("#Action-search")>-1){this.closeShellOverlay()}else{var f=sap.ui.getCore().getModel("searchModel");window.location.href="#Action-search&/searchTerm="+encodeURI(f.getProperty("/searchBoxTerm"))+"&dataSource="+encodeURI(JSON.stringify(f.getDataSourceJson()))}}else{if(!!o.showCurtain){this.openShellOverlay()}else{this.closeShellOverlay()}}},pressActionBtn:function(e){if(!sap.ui.Device.system.desktop){this.getModel().setProperty("/headerHiding",false)}var A=sap.ui.getCore().byId('headActions');if(!A){var l=new sap.ushell.ui.footerbar.LoginDetailsButton("loginDetails"),L=new sap.ushell.ui.footerbar.LogoutButton("logoutBtn"),o=new sap.ushell.ui.footerbar.AboutButton("aboutBtn");var h=new sap.ushell.ui.footerbar.HideGroupsButton("hideGroupsBtn");if(!this.getModel().getProperty('/enableHideGroups')){h.setVisible(false)}var d=new sap.ushell.ui.footerbar.ContactSupportButton("ContactSupportBtn",{visible:this.bContactSupportEnabled});A=new sap.m.ActionSheet("headActions",{placement:sap.m.PlacementType.Bottom,buttons:{path:"/currentState/actions",factory:function(i,f){return sap.ui.getCore().byId(f.getObject())}}});A.updateAggregation=this.getView().updateShellAggregation;A.setModel(this.getModel());this.getView().aDanglingControls.push(A,l,L,o,d,h)}A.openBy(e.getSource());A.attachAfterClose(A,function(){if(!sap.ui.Device.system.desktop){var f=sap.ui.getCore().byId('shell').getModel().getProperty("/currentState"),g=f.headerHiding;this.getModel().setProperty("/headerHiding",g)}})},loadCoreExt:function(){var A=jQuery.sap.isDeclared('sap.fiori.core',true)||jQuery.sap.isDeclared('sap.fiori.core-ext',true),l,p='';if(A){return}if(window.Worker){p=jQuery.sap.getModulePath('sap.ushell.loader','.js');l=new window.Worker(p);l.onmessage=function(E){if(E.data&&!E.data.error){try{window.eval(E.data);jQuery.sap.declare('sap.fiori.core-ext'+'')}catch(e){jQuery.sap.log.warning('failed to load sap.fiori.core-ext')}}else{jQuery.sap.log.warning('failed to load sap.fiori.core-ext')}l.terminate()};l.postMessage({action:'loadResource',url:window['sap-ui-debug']?'../fiori/core-ext-dbg.js':'../fiori/core-ext.js'})}else{setTimeout(function(){try{jQuery.sap.require('sap.fiori.core-ext')}catch(e){jQuery.sap.log.warning("failed to load sap.fiori.core-ext")}},0)}}})}())};if(!jQuery.sap.isDeclared('sap.ushell.renderers.fiori2.launchpad.DashboardManager')){(function(){"use strict";jQuery.sap.declare("sap.ushell.renderers.fiori2.launchpad.DashboardManager");jQuery.sap.require('sap.ui.thirdparty.jqueryui.jquery-ui-core');jQuery.sap.require('sap.ui.thirdparty.jqueryui.jquery-ui-widget');jQuery.sap.require('sap.ui.thirdparty.jqueryui.jquery-ui-mouse');jQuery.sap.require('sap.ui.thirdparty.jqueryui.jquery-ui-sortable');jQuery.sap.require('sap.ui.thirdparty.jqueryui.jquery-ui-draggable');jQuery.sap.require('sap.ui.thirdparty.jqueryui.jquery-ui-droppable');jQuery.sap.require('sap.ui.thirdparty.jqueryui.jquery-ui-effect');jQuery.sap.require('sap.ui.thirdparty.jqueryui.jquery-ui-effect-shake');var g=function(m,p){return p?sap.ushell.resources.i18n.getText(m,p):sap.ushell.resources.i18n.getText(m)};var a=function(c){var C=this.oModel.getProperty('/catalogTiles'),b=C.filter(function(t){return t.catalogId===c.id&&t.isTileIntentSupported===true});return b.length};sap.ui.base.EventProvider.extend("sap.ushell.renderers.fiori2.launchpad.DashboardManager",{metadata:{publicMethods:["getModel","getDashboardView","getGroupListView","loadPersonalizedGroups","attachEvent","detachEvent","attachEventOnce"]},constructor:function(i,s){if(sap.ushell.renderers.fiori2.launchpad.getDashboardManager&&sap.ushell.renderers.fiori2.launchpad.getDashboardManager()){return sap.ushell.renderers.fiori2.launchpad.getDashboardManager()}sap.ushell.renderers.fiori2.launchpad.getDashboardManager=jQuery.sap.getter(this.getInterface());this.oPageBuilderService=sap.ushell.Container.getService("LaunchPage");this.oModel=s.model;this.oConfig=s.config;this.oDashboardView=sap.ui.view('dashboard',{type:sap.ui.core.mvc.ViewType.JS,viewName:"sap.ushell.renderers.fiori2.launchpad.dashboard.DashboardContent",viewData:{config:this.oConfig}});this.oDashboardView.setWidth('');this.oDashboardView.setDisplayBlock(true);this.oSortableDeferred=$.Deferred();this.oSortableDeferred.resolve();this.aRequestQueue=[];this.bRequestRunning=false;this.registerEvents();this.oTileCatalogToGroupsMap={};this.tileViewUpdateQueue=[];this.tileViewUpdateTimeoutID=0},registerEvents:function(){var e=sap.ui.getCore().getEventBus();e.subscribe("launchpad","addBookmarkTile",this._createBookmark,this);e.subscribe("launchpad","loadDashboardGroups",this.loadPersonalizedGroups,this);e.subscribe("launchpad","createGroup",this._createGroup,this);e.subscribe("launchpad","deleteGroup",this._deleteGroup,this);e.subscribe("launchpad","resetGroup",this._resetGroup,this);e.subscribe("launchpad","changeGroupTitle",this._changeGroupTitle,this);e.subscribe("launchpad","moveGroup",this._moveGroup,this);e.subscribe("launchpad","deleteTile",this._deleteTile,this);e.subscribe("launchpad","moveTile",this._moveTile,this);e.subscribe("launchpad","sortableStart",this._sortableStart,this);e.subscribe("launchpad","sortableStop",this._sortableStop,this);e.subscribe("showCatalog",this.loadAllCatalogs,this);this.oDashboardView.addEventDelegate({onBeforeFirstShow:jQuery.proxy(function(b){try{this.loadPersonalizedGroups()}catch(c){console.log("DahsboardManager ; oDashboardView.addEventDelegate failed ; exception: "+c)}},this),onAfterHide:jQuery.proxy(function(b){try{sap.ushell.utils.setTilesNoVisibility()}catch(c){console.log("DahsboardManager ; Call to _sap.ushell.utils.setTilesNoVisibility failed ; exception: "+c)}},this)})},destroy:function(){var e=sap.ui.getCore().getEventBus();e.unsubscribe("launchpad","addBookmarkTile",this._createBookmark,this);e.unsubscribe("launchpad","loadDashboardGroups",this.loadPersonalizedGroups,this);e.unsubscribe("launchpad","createGroup",this._createGroup,this);e.unsubscribe("launchpad","deleteGroup",this._deleteGroup,this);e.unsubscribe("launchpad","resetGroup",this._resetGroup,this);e.unsubscribe("launchpad","changeGroupTitle",this._changeGroupTitle,this);e.unsubscribe("launchpad","moveGroup",this._moveGroup,this);e.unsubscribe("launchpad","deleteTile",this._deleteTile,this);e.unsubscribe("launchpad","moveTile",this._moveTile,this);e.unsubscribe("launchpad","sortableStart",this._sortableStart,this);e.unsubscribe("launchpad","sortableStop",this._sortableStop,this);e.unsubscribe("showCatalog",this.loadAllCatalogs,this);this.oDashboardView.destroy();sap.ushell.renderers.fiori2.launchpad.getDashboardManager=undefined},_refreshTiles:function(){var t=this,G=this.oModel.getProperty("/groups");jQuery.each(G,function(n,o){jQuery.each(o.tiles,function(n,T){t.oPageBuilderService.refreshTile(T.object)})})},_sortableStart:function(){this.oSortableDeferred=$.Deferred()},_createBookmark:function(c,e,d){var t=d.group?d.group.object:"",b=d.group?d.group.groupId:0,f;delete d.group;this._addRequest($.proxy(function(){var r=sap.ushell.Container.getService("Bookmark").addBookmark(d,t),R=sap.ushell.resources.i18n;r.always($.proxy(this._checkRequestQueue,this));r.done(function(T){if(!T){this.loadPersonalizedGroups();return}var n=this._getTileModel(T);f=this.oModel.getProperty("/groups/"+(this._getIndexOfGroup(b)||0));f.tiles.push(n);this.oModel.setProperty("/groups/"+this._getIndexOfGroup(b),f);if(sap.ushell.Container){sap.ushell.Container.getService('Message').info(R.getText('tile_created_msg'))}}.bind(this));r.fail(function(m){jQuery.sap.log.error("Failed to add bookmark",m,"sap.ushell.ui.footerbar.AddBookmarkButton");if(sap.ushell.Container){sap.ushell.Container.getService('Message').error(R.getText('fail_to_add_tile_msg'))}})},this))},_sortableStop:function(){this.oSortableDeferred.resolve()},_handleAfterSortable:function(f){return $.proxy(function(){var o=Array.prototype.slice.call(arguments);this.oSortableDeferred.done(function(){f.apply(null,o)})},this)},_addRequest:function(r){this.aRequestQueue.push(r);if(!this.bRequestRunning){this.bRequestRunning=true;this.aRequestQueue.shift()()}},_checkRequestQueue:function(){if(this.aRequestQueue.length===0){this.bRequestRunning=false}else{this.aRequestQueue.shift()()}},_requestFailed:function(){this.aRequestQueue=[];this.bRequestRunning=false},_createGroup:function(c,e,d){var t=this,G=this._getGroupModel(null),b=this.oModel.getProperty("/groups"),m=this.oModel;m.setProperty("/groupList-skipScrollToGroup",true);window.setTimeout(function(){m.setProperty("/groups/"+b.length,G)},500);window.setTimeout(function(){m.setProperty("/groupList-skipScrollToGroup",false)},1000)},_getIndexOfGroup:function(G){var n=null,b=this.oModel.getProperty("/groups");jQuery.each(b,function(c,o){if(o.groupId===G){n=c;return false}});return n},_getPathOfGroup:function(G){return"/groups/"+this._getIndexOfGroup(G)},_getPathOfTile:function(t){var G=this.oModel.getProperty("/groups"),n=null,b=null;jQuery.each(G,function(c,o){jQuery.each(o.tiles,function(d,T){if(T.uuid===t){n=c;b=d;return false}});if(n!==null){return false}});return n!==null?"/groups/"+n+"/tiles/"+b:null},_moveInArray:function(A,n,b){if(b>=A.length){var k=b-A.length;while((k--)+1){A.push(undefined)}}A.splice(b,0,A.splice(n,1)[0])},_updateGroupIndices:function(A){var k;for(k=0;k<A.length;k++){A[k].index=k}},_deleteGroup:function(c,e,d){var t=this,G=d.groupId,b=this.oModel.getProperty("/groups"),n=this._getIndexOfGroup(G),o=null,r,m,f,B;f=b.length-1===n?n-1:n;this._destroyGroupModel("/groups"+n);o=b.splice(n,1)[0].object;m=this.oModel;m.setProperty("/groupList-skipScrollToGroup",true);m.setProperty("/groups",b);this._updateGroupIndices(b);if(f>=0){B=sap.ui.getCore().getEventBus();window.setTimeout($.proxy(B.publish,B,"launchpad","scrollToGroup",{groupId:this.oModel.getProperty("/groups")[f].groupId}),200)}window.setTimeout(function(){m.setProperty("/groupList-skipScrollToGroup",false)},1000);this._addRequest($.proxy(function(){var h=sap.ushell.Container.getService("LaunchPage").getGroupTitle(o);try{r=this.oPageBuilderService.removeGroup(o)}catch(i){this._resetGroupsOnFailure("fail_to_delete_group_msg");return}r.done($.proxy(this._showLocalizedMessage("group_deleted_msg",[h])));r.fail(this._handleAfterSortable(t._resetGroupsOnFailureHelper("fail_to_delete_group_msg")));r.always($.proxy(this._checkRequestQueue,this))},this))},_resetGroup:function(c,e,d){var t=this,G=d.groupId,n=this._getIndexOfGroup(G),o=this.oModel.getProperty("/groups/"+n),r;this.oModel.setProperty("/groups/"+n+"/sortable",false);this._addRequest($.proxy(function(){try{r=this.oPageBuilderService.resetGroup(o.object)}catch(b){this._resetGroupsOnFailure("fail_to_reset_group_msg");return}r.done(this._handleAfterSortable($.proxy(function(G,o,R){var n=t._getIndexOfGroup(G);this._loadGroup(n,R||o.object);this._showLocalizedMessage("group_reset_msg",[o.title]);this.oModel.setProperty("/groups/"+n+"/sortable",true)},this,G,o)));r.fail(this._handleAfterSortable(t._resetGroupsOnFailureHelper("fail_to_reset_group_msg")));r.always($.proxy(this._checkRequestQueue,this))},this))},_moveGroup:function(c,e,d){var f=d.fromIndex,t=d.toIndex,G=this.oModel.getProperty("/groups"),m=this.oModel,r;f=this._adjustFromGroupIndex(f,G);var o=G[f],s=o.groupId;t=this._adjustToGroupIndex(t,G,s);this._moveInArray(G,f,t);this._updateGroupIndices(G);m.setProperty("/groupList-skipScrollToGroup",true);m.setProperty("/groups",G);window.setTimeout(function(){m.setProperty("/groupList-skipScrollToGroup",false)},1000);if(o.isDefaultGroup){that.toggleDefaultGroupVisibility(false)}this._addRequest($.proxy(function(){var o=this.oModel.getProperty(this._getPathOfGroup(s));try{r=this.oPageBuilderService.moveGroup(o.object,t)}catch(b){this._resetGroupsOnFailure("fail_to_move_group_msg");return}r.fail(this._handleAfterSortable(this._resetGroupsOnFailureHelper("fail_to_move_group_msg")));r.always($.proxy(this._checkRequestQueue,this))},this))},_adjustToGroupIndex:function(t,b,c){var v=0,I=false,i=0;for(i=0;i<b.length&&v<t;i++){if(b[i].isGroupVisible){if(b[i].groupId===c){I=true}else{v++}}}if(I){return i-1}return i},_adjustFromGroupIndex:function(b,c){var v=0;for(var i=0;i<c.length;i++){if(c[i].isGroupVisible){v++}if(v===b+1){return i}}return b},_changeGroupTitle:function(c,e,d){var n=d.newTitle,G=d.groupId,b=this._getIndexOfGroup(G),o=this.oModel.getProperty("/groups/"+b),r;this.oModel.setProperty("/groups/"+b+"/title",n);if(!o.object){this._addRequest($.proxy(function(){try{r=this.oPageBuilderService.addGroup(n)}catch(f){this._resetGroupsOnFailure("fail_to_create_group_msg");return}r.done(this._handleAfterSortable($.proxy(function(G,N){var b=this._getIndexOfGroup(G);this._loadGroup(b,N)},this,G)));r.fail(this._handleAfterSortable(this._resetGroupsOnFailureHelper("fail_to_create_group_msg")))},this))}else{this._addRequest($.proxy(function(){try{r=this.oPageBuilderService.setGroupTitle(o.object,n)}catch(f){this._resetGroupsOnFailure("fail_to_rename_group_msg");return}r.fail(this._handleAfterSortable($.proxy(function(G,O){var s=this._getPathOfGroup(G);this._showLocalizedError("fail_to_rename_group_msg");this.oModel.setProperty(s+"/title",O);this._requestFailed()},this,G)))},this))}r.always($.proxy(this._checkRequestQueue,this))},_createTile:function(d){var c=d.catalogTileContext,C=d.groupContext,G=this.oModel.getProperty(C.getPath()),s=G.groupId,r,b=jQuery.Deferred(),R={};var B=sap.ui.getCore().getEventBus();$.proxy(B.publish,B,"launchpad","addTile",{catalogTileContext:c,groupContext:C});if(C.getObject().isDefaultGroup){this.toggleDefaultGroupVisibility(true)}if(!c){jQuery.sap.log.warning("DashboardManager: Did not receive catalog tile object. Abort.",this);return}this._addRequest($.proxy(function(){try{r=this.oPageBuilderService.addTile(c.getProperty("src"),C.getProperty("object"))}catch(e){this._resetGroupsOnFailure("fail_to_add_tile_msg");return}var t=this;r.done(this._handleAfterSortable($.proxy(function(s,T){var f=this._getPathOfGroup(s);this._addTileToGroup(f,T);R={group:G,status:1,action:'add'};b.resolve(R)},this,s))).fail(function(){R={group:G,status:0,action:'add'};b.resolve(R)}).always(function(){t._checkRequestQueue()})},this));return b.promise()},_createGroupAndSaveTile:function(d){var c=d.catalogTileContext,n=d.newGroupName,r,b=jQuery.Deferred(),t=this,R={};if(sap.ushell.utils.validHash(n)&&c){var G=this._getGroupModel(null),e=this.oModel.getProperty("/groups"),B=sap.ui.getCore().getEventBus(),s=G.groupId;var i=e.length;this.oModel.setProperty("/groups/"+i,G);this.oModel.setProperty("/groups/"+i+"/title",n);if(!c){jQuery.sap.log.warning("DashboardManager: Did not receive catalog tile object. Abort.",this);return}this._addRequest($.proxy(function(){try{r=this.oPageBuilderService.addGroup(n)}catch(f){this._resetGroupsOnFailure("fail_to_create_group_msg");return}r.done(this._handleAfterSortable($.proxy(function(s,N){var h=this._getIndexOfGroup(s);this._loadGroup(h,N);var C=new sap.ui.model.Context(this.oModel,"/groups/"+h);var p=this._createTile({catalogTileContext:c,groupContext:C});p.done(function(j){R={group:j.group,status:1,action:'addTileToNewGroup'};b.resolve(R)}).fail(function(j){R={group:j.group,status:0,action:'addTileToNewGroup'};b.resolve(R)})},this,s)));r.fail(function(h){this._handleAfterSortable(this._resetGroupsOnFailureHelper("fail_to_create_group_msg"));R={group:h.group,status:0,action:'createNewGroup'};b.resolve(R)});r.always($.proxy(this._checkRequestQueue,this))},this))}return b.promise()},_deleteTile:function(c,e,d){var t=this,T=d.tileId,G=this.oModel.getProperty("/groups");jQuery.each(G,function(n,o){var f=false;jQuery.each(o.tiles,function(b,h){if(h.uuid===T){t._destroyTileModel("/groups/"+n+"/tiles/"+b);var i=o.tiles.splice(b,1)[0],r;t.oModel.setProperty("/groups/"+n+"/tiles",o.tiles);if(o.isDefaultGroup&&o.tiles.length==0){t.toggleDefaultGroupVisibility(false)}t._addRequest(function(){try{r=t.oPageBuilderService.removeTile(o.object,i.object)}catch(j){this._resetGroupsOnFailure("fail_to_remove_tile_msg");return}r.done(t._handleAfterSortable(function(){var s=sap.ushell.Container.getService("LaunchPage").getTileTitle(i.object);if(s){t._showLocalizedMessage("tile_deleted_msg",[s])}else{t._showLocalizedMessage("empty_tile_deleted_msg")}}.bind(i)));r.fail(t._handleAfterSortable(t._resetGroupsOnFailureHelper("fail_to_remove_tile_msg")));r.always($.proxy(t._checkRequestQueue,t))});sap.ushell.utils.handleTilesVisibility();f=true;return false}});if(f){return false}})},_sendDeleteTileRequest:function(G,t){var r,b=sap.ushell.Container.getService('LaunchPage');try{r=b.removeTile(G,t.object)}catch(e){jQuery.sap.log.error("_deleteCatalogTileFromGroup ; removeTile ; Exception occurred: "+e)}return r},_deleteCatalogTileFromGroup:function(d){var t=this,D=decodeURIComponent(d.tileId),G=d.groupIndex,o=this.oModel.getProperty("/groups/"+G),T=this.oModel.getProperty("/groups/"+G+"/tiles/"),s=sap.ushell.Container.getService("LaunchPage"),b=jQuery.Deferred(),c=[],e,i,t=this,f;f=o.tiles.filter(function(h){var e=s.getCatalogTileId(h.object);if(e!==D){return true}else{var p=jQuery.Deferred(),j=t._sendDeleteTileRequest(o.object,h);j.done((function(b){return function(){b.resolve({status:true})}})(p));j.fail((function(b){return function(){b.resolve({status:false})}})(p));c.push(p);return false}});o.tiles=f;jQuery.when.apply(jQuery,c).done(function(r){var S=true,i=0,p=c.length;for(i;i<p;i++){if(!r.status){S=false;break}}if(S){t.oModel.setProperty("/groups/"+G,o)}b.resolve({group:o,status:S,action:'remove'})});return b.promise()},_moveTile:function(c,e,d){var t=this,n=d.toIndex,N=d.toGroupId,T=d.sTileId,o,b,O,f,h,i,G=this.oModel.getProperty("/groups");jQuery.each(G,function(k,l){var F=false;jQuery.each(l.tiles,function(m,p){if(p.uuid===T){o=p;b=m;O=l;f=k;F=true;return false}});if(F){return false}});jQuery.each(G,function(k,l){if(l.groupId===N){h=l;i=k;if(O.isDefaultGroup&&f!=i&&O.tiles.length<=1){t.toggleDefaultGroupVisibility(false)}}});if(n&&n>h.tiles.length){n=h.tiles.length}if(O.groupId===N){if(n===null||n===undefined){O.tiles.splice(b,1);n=O.tiles.length;O.tiles.push(o)}else{n=this._adjustTileIndex(n,o,O);this._moveInArray(O.tiles,b,n)}this.oModel.setProperty("/groups/"+f+"/tiles",O.tiles)}else{O.tiles.splice(b,1);this.oModel.setProperty("/groups/"+f+"/tiles",O.tiles);if(n===null||n===undefined){n=h.tiles.length;h.tiles.push(o)}else{n=this._adjustTileIndex(n,o,h);h.tiles.splice(n,0,o)}this.oModel.setProperty("/groups/"+i+"/tiles",h.tiles)}sap.ushell.utils.handleTilesVisibility();var s=this.oModel.getProperty("/groups/"+f).object,j=this.oModel.getProperty("/groups/"+i).object,r;this._addRequest($.proxy(function(){try{r=this.oPageBuilderService.moveTile(o.object,b,n,s,j)}catch(k){this._resetGroupsOnFailure("fail_to_move_tile_msg");return}r.done(this._handleAfterSortable($.proxy(function(T,l){var m=this._getPathOfTile(T),p=this.oPageBuilderService;if(m){this.oModel.setProperty(m+"/object",l)}},this,T)));r.fail(this._handleAfterSortable(this._resetGroupsOnFailureHelper("fail_to_move_tile_msg")));r.always($.proxy(this._checkRequestQueue,this))},this))},_adjustTileIndex:function(n,t,b){var v=0,I=false,i=0;for(i=0;i<b.tiles.length&&v<n;i++){if(b.tiles[i].isTileIntentSupported){if(b.tiles[i]===t){I=true}else{v++}}}if(I){return i-1}return i},toggleDefaultGroupVisibility:function(v){var d=this.oDashboardView.oDashboardGroupsBox.getGroups()[0],G;if(sap.ui.getCore().byId('groupList')){G=sap.ui.getCore().byId('groupList').oGroupList.getItems()[0];if(G){G.setShow(v)}}if(d){d.setVisible(v)}},getModel:function(){return this.oModel},getDashboardView:function(){if(!sap.ui.getCore().byId('dashboard')){this.oDashboardView=sap.ui.jsview("dashboard","sap.ushell.renderers.fiori2.launchpad.dashboard.DashboardContent")}return this.oDashboardView},getGroupListView:function(){if(!sap.ui.getCore().byId('groupList')){this.oGroupListView=sap.ui.jsview("groupList","sap.ushell.renderers.fiori2.launchpad.group_list.GroupList")}return this.oGroupListView},loadAllCatalogs:function(c,e,d){if(!this.oModel.getProperty("/catalogs")||!sap.ushell.Container.getService("LaunchPage").isCatalogsValid()){var t=this;if(!this.oModel.getProperty("/groups")||this.oModel.getProperty("/groups").length===0){this.loadPersonalizedGroups()}this.numOfLoadedCatalogs=0;this._destroyAllGroupModels("/catalogs");this._destroyAllTileModels("/catalogTiles");this.oModel.setProperty("/catalogs",[]);this.oModel.setProperty("/catalogTiles",[]);sap.ushell.Container.getService("LaunchPage").getCatalogs().done(this.onDoneLoadingCatalogs.bind(this)).fail(t._showLocalizedErrorHelper("fail_to_load_catalog_msg")).progress(this.addCatalogToModel.bind(this))}var G=this.getModel().getProperty("/groups");if(G&&G.length!==0){this.mapCatalogTilesToGroups();this.updateCatalogTilesToGroupsMap()}},updateCatalogTilesToGroupsMap:function(){var c=this.getModel().getProperty("/catalogTiles"),t,i,b,d,G;var s=sap.ushell.Container.getService("LaunchPage");var e=this.getModel().getProperty("/catalogTiles");if(c){for(i=0;i<c.length;i++){t=c[i];b=encodeURIComponent(s.getCatalogTileId(t.src));d=this.getModel().getProperty("/catalogTiles/"+i+"/associatedGroups");G=this.oTileCatalogToGroupsMap[b];d=G?G:[];e[i].associatedGroups=d}}this.getModel().setProperty("/catalogTiles",e)},addCatalogToModel:function(c){var C=this.oModel.getProperty('/catalogs');var s=sap.ushell.Container.getService("LaunchPage");var b=s.getCatalogId(c);var d=false;C.forEach(function(e){if(e.id===b){d=true}});if(!d){var o={title:s.getCatalogTitle(c),id:s.getCatalogId(c),"static":false,tiles:[]};s.getCatalogTiles(c).done(function(t){if(!t.length){return}var e={catalog:o.title,id:o.id,index:this.numOfLoadedCatalogs};this.setCatalogTiles("/catalogTiles",true,e,t);o.numIntentSupportedTiles=a.call(this,o);C.push(o);this.oModel.setProperty('/catalogs',C);this.numOfLoadedCatalogs++}.bind(this)).fail(this._showLocalizedErrorHelper("fail_to_load_catalog_tiles_msg"))}},onDoneLoadingCatalogs:function(c){var s=sap.ushell.Container.getService("LaunchPage");var l=c.filter(function(o){return!s.getCatalogError(o)});if(l.length!==c.length){this._showLocalizedError("partialCatalogFail")}var C=this.oModel.getProperty('/catalogs');if(C[0]&&C[0].title===sap.ushell.resources.i18n.getText('catalogsLoading')){C.splice(0,1)}C.splice(0,0,{title:g("all"),"static":true,tiles:[],numIntentSupportedTiles:-1});this.oModel.setProperty('/catalogs',C);sap.ushell.utils.handleTilesVisibility()},setCatalogTiles:function(p,A,d,c){var s=sap.ushell.Container.getService("LaunchPage");this.oModel.setProperty(p,$.merge((A&&this.oModel.getProperty(p))||[],$.map(c,function(C,t){var b=encodeURIComponent(s.getCatalogTileId(C)),e=this.oTileCatalogToGroupsMap[b]||[];return{associatedGroups:e,src:C,catalog:d.catalog,catalogIndex:d.index*100000+t,catalogId:d.id,title:s.getCatalogTileTitle(C),keywords:(s.getCatalogTileKeywords(C)||[]).join(','),id:b,size:s.getCatalogTileSize(C),content:[s.getCatalogTileView(C)],isTileIntentSupported:s.isTileIntentSupported(C)}}.bind(this))))},mapCatalogTilesToGroups:function(){this.oTileCatalogToGroupsMap={};var G=this.oModel.getProperty("/groups"),s=sap.ushell.Container.getService("LaunchPage"),i=0,o,t,T,b,c,d;for(i=0;i<G.length;i++){o=G[i];T=o.tiles;if(T){for(t=0;t<T.length;++t){b=encodeURIComponent(s.getCatalogTileId(T[t].object));c=this.oTileCatalogToGroupsMap[b]||[];d=s.getGroupId(o.object);if(c.indexOf(d)===-1&&(typeof(o.isGroupVisible)==='undefined'||o.isGroupVisible)){c.push(d)}this.oTileCatalogToGroupsMap[b]=c}}}},_showLocalizedMessage:function(m,p,t){sap.ushell.Container.getService("Message").show(t||sap.ushell.services.Message.Type.INFO,g(m,p),p)},_showLocalizedError:function(m,p){this._showLocalizedMessage(m,p,sap.ushell.services.Message.Type.ERROR)},_showLocalizedErrorHelper:function(m,p){var t=this;return function(){t._showLocalizedError(m,p)}},_resetGroupsOnFailureHelper:function(m){var t=this;return function(G){t._showLocalizedError(m);setTimeout(function(){t.loadGroupsFromArray(G)})}},_resetGroupsOnFailure:function(m,p){this._requestFailed();this._showLocalizedError(m,p);this.loadPersonalizedGroups();this.oModel.updateBindings(true)},loadGroupsFromArray:function(G){var t=this;this.oPageBuilderService.getDefaultGroup().done(function(d){var i,k=1;t._loadGroup(0,d);for(i=0;i<G.length;++i){if(G[i]!==d){t._loadGroup(k,G[i]);k++}}for(i=G.length;i<t.oModel.getProperty("/groups/length");++i){t._destroyGroupModel("/groups/"+i)}t.oModel.setProperty("/groups/length",G.length);if(t.oModel.getProperty('/currentState/stateName')==="catalog"){t.mapCatalogTilesToGroups();t.updateCatalogTilesToGroupsMap()}}).fail(t._resetGroupsOnFailureHelper("fail_to_get_default_group_msg"))},_loadGroup:function(n,G){var t=this,s="/groups/"+n;this._destroyGroupModel(s);var o=this.oModel.getProperty(s+"/groupId"),N=this._getGroupModel(G,n===0);if(o){N.groupId=o}N.index=n;this.oModel.setProperty(s,N)},_getGroupModel:function(G,d){var s=this.oPageBuilderService,b=(G&&s.getGroupTiles(G))||[],m=[],i,c;if(sap.ui.getCore().byId("shell")&&sap.ui.getCore().byId("shell").getModel()){c=sap.ui.getCore().byId("shell").getModel().getProperty("/personalization")}for(i=0;i<b.length;++i){m.push(this._getTileModel(b[i]))}return{title:(d&&g("my_group"))||(G&&s.getGroupTitle(G))||"",object:G,groupId:jQuery.sap.uid(),tiles:m,isDefaultGroup:d||false,editMode:!G,removable:!G||s.isGroupRemovable(G),sortable:c,isGroupVisible:!G||s.isGroupVisible(G),isEnabled:!d}},_addTileToGroup:function(G,t){var T=G+"/tiles",n=this.oModel.getProperty(T).length;this.oModel.setProperty(T+"/"+n,this._getTileModel(t))},_updateModelWithTileView:function(t,T){var b=this;this.tileViewUpdateQueue.push({uuid:t,view:T});if(this.tileViewUpdateTimeoutID){clearTimeout(this.tileViewUpdateTimeoutID)}this.tileViewUpdateTimeoutID=setTimeout(function(){b.tileViewUpdateTimeoutID=undefined;b.oSortableDeferred.done(function(){b._updateModelWithTilesViews()})},50)},_updateModelWithTilesViews:function(){var G=this.oModel.getProperty("/groups"),t,T,u,s;if(!G){return}for(var i=0;i<G.length;i=i+1){t=G[i].tiles;for(var j=0;j<t.length;j=j+1){T=t[j];for(var q=0;q<this.tileViewUpdateQueue.length;q++){u=this.tileViewUpdateQueue[q];if(T.uuid==u.uuid){if(u.view){T.content[0].destroy();T.content=[u.view]}else{T.content[0].setState("Failed")}s=this.oPageBuilderService.getTileSize(T.object);T['long']=((s!==null)&&(s==="1x2"||s==="2x2"))||false;T.tall=((s!==null)&&(s==="2x1"||s==="2x2"))||false;break}}}}this.tileViewUpdateQueue=[];this.oModel.setProperty("/groups",G)},_getTileModel:function(t){var s=this.oPageBuilderService,S=s.getTileSize(t),T=jQuery.sap.uid(),o,u,b=this,d;;s.setTileVisible(t,false);d=s.getTileView(t);d.done(function(v){o=v;if(u){u.apply(b,[T,o])}});d.fail(function(){if(u){u.apply(b,[T])}else{o=new sap.ushell.ui.launchpad.TileState({state:"Failed"})}});if(!o){u=this._updateModelWithTileView;o=new sap.ushell.ui.launchpad.TileState({state:"Loading"})}return{"object":t,"uuid":T,"content":[o],"long":((S!==null)&&(S==="1x2"||S==="2x2"))||false,"tall":((S!==null)&&(S==="2x1"||S==="2x2"))||false,"target":s.getTileTarget(t)||"","debugInfo":s.getTileDebugInfo(t),"isTileIntentSupported":s.isTileIntentSupported(t),"rgba":""}},_destroyAllGroupModels:function(t){var G=(typeof t==="string")?this.oModel.getProperty(t):t,i;if(G){for(i=0;i<G.length;i=i+1){this._destroyGroupModel(G[i])}}},_destroyGroupModel:function(t){var G=(typeof t==="string")?this.oModel.getProperty(t):t,i;if(G){this._destroyAllTileModels(G.tiles)}},_destroyAllTileModels:function(t){var T=(typeof t==="string")?this.oModel.getProperty(t):t,i;if(T){for(i=0;i<T.length;i=i+1){this._destroyTileModel(T[i])}}},_destroyTileModel:function(t){var T=(typeof t==="string")?this.oModel.getProperty(t):t,i;if(T&&T.content){for(i=0;i<T.content.length;i=i+1){T.content[i].destroy()}}},loadPersonalizedGroups:function(){var t=this,G=this.oPageBuilderService.getGroups();G.done(function(b){t.loadGroupsFromArray(b)});G.fail(t._showLocalizedErrorHelper("fail_to_load_groups_msg"))}})}())};if(!jQuery.sap.isDeclared('sap.ushell.renderers.fiori2.launchpad.catalog.Catalog.view')){jQuery.sap.declare('sap.ushell.renderers.fiori2.launchpad.catalog.Catalog.view');
//Copyright (c) 2013 SAP AG, All Rights Reserved
(function(){"use strict";jQuery.sap.require('sap.ui.core.IconPool');sap.ui.jsview("sap.ushell.renderers.fiori2.launchpad.catalog.Catalog",{createContent:function(c){var t=sap.ushell.resources.i18n,a=this,V=undefined;function i(v){return!v}function b(L){return((L!==null)&&(L==="1x2"||L==="2x2"))||false}function d(s){return((s!==null)&&(s==="2x2"||s==="2x1"))||false}function f(v){if(sap.ui.Device.system.phone){return false}return i(v)}function g(v){return parseInt(v,10)||0}function h(G){var e=(G&&G.length>0)?"accept":"add";return sap.ui.core.IconPool.getIconURI(e)}function j(v){return(v&&v>0)?v+((v>1&&(" "+t.getText("tiles")))||(" "+t.getText("tile"))):t.getText("no_tiles")}var B=new sap.m.Button({icon:{path:"associatedGroups",formatter:h},tooltip:{parts:["i18n>addTileToGroup","i18n>addAssociatedTileToGroup","associatedGroups"],formatter:function(A,s,G){return G&&G.length?s:A}},press:[c.onTileFooterClick,c]}),T=new sap.ushell.ui.launchpad.Tile({afterRendering:[c.onTileAfterRendering,c],tileViews:{path:"content",factory:function(I,e){return e.getObject()}},footItems:[B],"long":{path:"size",formatter:b},"tall":{path:"size",formatter:d},index:{path:"id",formatter:g}}),k=new sap.ushell.ui.launchpad.TileContainer("catalogTiles",{showHeader:false,showPlaceholder:false,showGroupHeader:"{/showCatalogHeaders}",groupHeaderLevel:sap.m.HeaderLevel.H3,showNoData:true,tiles:{path:"/catalogTiles",template:T,sorter:new sap.ui.model.Sorter("catalogIndex",false,function(e){return(e&&e.getProperty("catalog"))||""})},afterRendering:function(e){var q=jQuery(e.getSource());if(this.getTiles().length||this.getModel().getProperty('/catalogTiles/length')){setTimeout(function(){sap.ui.getCore().byId("catalogSearch").setEnabled(true)});sap.ui.getCore().getEventBus().publish("launchpad","contentRendered");if(!sap.ui.Device.os.ios){sap.ui.getCore().getEventBus().publish("launchpad","contentRefresh")}}jQuery.sap.byId("catalogTilesPage").find("label").parent().attr("tabindex","0");jQuery.sap.byId("catalogTiles").removeAttr("tabindex",0)}});var l=new sap.m.Button('hiddenCatalogTabFocusHelper');l.addEventDelegate({onfocusin:function(){try{var s=sap.ui.getCore().byId('homeBtn').focus()}catch(e){}}});B.constructor.prototype.setIcon=function(v){this.setProperty("icon",v,true);if(v&&this._image&&this._image.setSrc){this._image.setSrc(v)}return this};var F=new sap.ui.model.Filter("numIntentSupportedTiles",sap.ui.model.FilterOperator.NE,0);var C=new sap.m.Select("catalogSelect",{name:"Browse",tooltip:"{i18n>catalogSelect_tooltip}",items:{path:"/catalogs",template:new sap.ui.core.ListItem({text:"{title}"}),filters:[F]},change:[c.onCategoryFilter,c]});var o=C.onAfterRendering;C.onAfterRendering=function(){o.apply(this,arguments);jQuery.sap.byId("catalogSelect").attr("tabindex",0)};var m=C._onAfterRenderingPopover;C._onAfterRenderingPopover=function(){if(this._oPopover){this._oPopover.setFollowOf(false)}if(m){m.apply(this,arguments)}};var n=new sap.m.SearchField("catalogSearch",{tooltip:"{i18n>catalogSearch_tooltip}",enabled:false,value:{path:"/catalogSearchFilter"},placeholder:"{i18n>search_catalog}",liveChange:[c.onLiveFilter,c]});var p=n.onAfterRendering;n.onAfterRendering=function(){p.apply(this,arguments);jQuery.sap.byId("catalogSearch").find("input").attr("tabindex",0)};var D=new sap.m.Page("catalogTilesPage",{showHeader:true,showFooter:false,showNavButton:true,title:"{i18n>tile_catalog}",content:[new sap.ushell.ui.launchpad.Panel({translucent:true,headerText:"",headerLevel:sap.m.HeaderLevel.H2,headerBar:new sap.m.Bar("catalogHeader",{translucent:true,tooltip:"{i18n>tile_catalog_header_tooltip}",contentLeft:[C],contentRight:[n]}).addStyleClass("sapUshellCatalogMain"),content:[k,l]})],navButtonPress:[c.onNavButtonPress,c]}).addStyleClass("sapUshellCatalog");return D},getControllerName:function(){return"sap.ushell.renderers.fiori2.launchpad.catalog.Catalog"}})}())};if(!jQuery.sap.isDeclared('sap.ushell.renderers.fiori2.launchpad.dashboard.DashboardContent.controller')){jQuery.sap.declare('sap.ushell.renderers.fiori2.launchpad.dashboard.DashboardContent.controller');
// Copyright (c) 2013 SAP AG, All Rights Reserved
(function(){"use strict";sap.ui.controller("sap.ushell.renderers.fiori2.launchpad.dashboard.DashboardContent",{onInit:function(){this.sViewId="#"+this.oView.getId();if(sap.ui.Device.browser.mobile){sap.ui.getCore().getEventBus().subscribe("launchpad","contentRefresh",this._webkitMobileRenderFix,this)}this.isDesktop=(sap.ui.Device.system.desktop&&(navigator.userAgent.toLowerCase().indexOf('tablet')<0))},onExit:function(){sap.ui.getCore().getEventBus().unsubscribe("launchpad","contentRefresh",this._webkitMobileRenderFix,this)},onAfterRendering:function(){var e=sap.ui.getCore().getEventBus();e.unsubscribe("launchpad","scrollToGroup",this._scrollToGroup,this);e.subscribe("launchpad","scrollToGroup",this._scrollToGroup,this);e.unsubscribe("grouplist","GroupListOver",this._handleGroupListOver,this);e.unsubscribe("grouplist","GroupListOut",this._handleGroupListOut,this);e.unsubscribe("grouplist","GroupListItemOver",this._handleGroupListItemOver,this);e.unsubscribe("grouplist","GroupListItemOut",this._handleGroupListItemOut,this);e.unsubscribe("grouplist","GroupListItemDrop",this._handleGroupListItemDrop,this);e.subscribe("grouplist","GroupListOver",this._handleGroupListOver,this);e.subscribe("grouplist","GroupListOut",this._handleGroupListOut,this);e.subscribe("grouplist","GroupListItemOver",this._handleGroupListItemOver,this);e.subscribe("grouplist","GroupListItemOut",this._handleGroupListItemOut,this);e.subscribe("grouplist","GroupListItemDrop",this._handleGroupListItemDrop,this);if(sap.ui.Device.os.android){e.unsubscribe("launchpad","changeGroupTitle",this._changeGroupTitleHandler,this);e.subscribe("launchpad","changeGroupTitle",this._changeGroupTitleHandler,this)}jQuery("#__area0").appendTo("#shellPage");var t;jQuery(window).bind("resize",function(){clearTimeout(t);t=setTimeout(this._resizeHandler.bind(this),300)}.bind(this));if(sap.ui.Device.system.desktop){jQuery("#dashboardPage-cont").scroll(sap.ushell.utils.handleTilesVisibility)}else{setTimeout(function(){this.oDashboardPage=sap.ui.getCore().byId("dashboardPage");this.oScroller=this.oDashboardPage.getScrollDelegate();if(this.oScroller&&this.oScroller._scroller){if(!this.oOriginalScrollMove){this.oOriginalScrollMove=this.oScroller._scroller.options.onScrollMove}var a=this;this.oScroller._scroller.options.onScrollMove=function(E){a.oOriginalScrollMove.apply(a.oScroller);sap.ushell.utils.handleTilesVisibility()}}else{jQuery("#dashboardPage-cont").scroll(sap.ushell.utils.handleTilesVisibility);jQuery("#dashboard").scroll(sap.ushell.utils.handleTilesVisibility)}}.bind(this),1500)}},_changeGroupTitleHandler:function(){this._forceBrowserRerenderElement(document.getElementById('groupList'))},_forceBrowserRerenderElement:function(e){var a=window.requestAnimationFrame||window.webkitRequestAnimationFrame;if(a){a(function(){var d=e.style.display;e.style.display='none';e.offsetHeight;e.style.display=d})}else{console.log('unsupported browser for animation frame')}},_webkitMobileRenderFix:function(){if(sap.ui.Device.browser.chrome||sap.ui.Device.os.ios||sap.ui.Device.os.android){this._forceBrowserRerenderElement(document.body)}},_resizeHandler:function(){this._addBottomSpace();sap.ushell.utils.handleTilesVisibility()},_addBottomSpace:function(){sap.ushell.utils.addBottomSpace()},_scrollToGroup:function(c,e,d){var g,t=this;if(d.group){g=d.group.getGroupId()}else{g=d.groupId}jQuery.each(this.oView.oDashboardGroupsBox.getGroups(),function(n,G){if(G.getGroupId()===g){var y;if(sap.ui.Device.system.desktop){if(n===0){sap.ui.getCore().byId("dashboardPage").scrollTo(0,500)}else{var j=jQuery("#dashboardPage-cont");var T=jQuery('#shell-hdr').height()+parseInt(jQuery('.sapUshellContainerTitle').css('margin-top'),10);y=jQuery.sap.byId(G.sId).offset().top+j.scrollTop()-T;sap.ui.getCore().byId("dashboardPage").scrollTo(y,500)}}else{y=-1*(document.getElementById('dashboardGroups').getBoundingClientRect().top)+document.getElementById(G.sId).getBoundingClientRect().top;jQuery('#dashboard').animate({scrollTop:y},500,t.fHandleScrollEnd)}if(d.group&&d.focus&&!d.group.getEditMode()){jQuery.sap.byId(G.sId).focus()}if(d.groupId||d.groupChanged){t._addBottomSpace()}jQuery('#groupList .sapUshellDefaultGroupItem, #groupList .sapUshellGroupListItem').removeClass('sapUshellOver').eq(n).addClass('sapUshellOver');sap.ushell.utils.handleTilesVisibility();return false}})},fHandleScrollEnd:function(){var e=sap.ui.getCore().getEventBus();e.publish("grouplist","ScrollAnimationEnd")},makeGroupSortable:function(j){var a=j.find('.sapUshellInner');if(a.hasClass("ui-sortable")){return}this._sortable(a)},_getTileTopOffset:function(t,a,d){var T=0+d;T+=t.closest(".sapUshellDashboardGroupsContainerItem").position().top;T+=a.top;return T},_sortable:function(j){var t=this,a=jQuery.sap.byId(this.oView.oDashboardGroupsBox.getId()),b=a.find(".sapUshellCloneArea");t.bActive=false;if(b.length<=0){b=jQuery("<div id='cloneArea' class='sapUshellCloneArea sapUshellDashboardGroupsContainerItem'></div>");a.append(b)}j.sortable({containment:"document",items:'>:not(.sapUshellPlusTile)',connectWith:".sapUshellInner.sapUshellTilesContainer-sortable",placeholder:"sapUshellTile-placeholder",tolerance:"pointer",helper:function(e,c){var d=c.clone();var f=d.find('a');if(f.length){var g=f.html();f.replaceWith(jQuery('<div>'+g+'</div>'))}d.find('[title]').removeAttr('title');d.attr("id",d.attr("id")+'-helperclone');d.addClass("sapUshellSortableHelperClone");d.css("font-size",c.css("font-size"));d.hide();setTimeout(function(){d.appendTo('body');d.show()},1);return d},revert:250,start:this._handleSortableStart.bind(this),change:this._handleSortableChange.bind(this),stop:this._handleSortableStop.bind(this)}).disableSelection();if(sap.ui.Device.system.phone){j.sortable('disable')}},_bindTileEvents:function(E){if(!sap.ui.Device.system.tablet){return}var t=this,T=E.getSource();var j=jQuery.sap.byId(T.sId);j.bind("mousedown",function(a){if(t.bActive===false){try{jQuery(".sapUshellInner.sapUshellTilesContainer-sortable").sortable('disable')}catch(e){jQuery.sap.log.warning('tile container sortable was not initialized. intializing again now.');jQuery(".sapUshellInner.sapUshellTilesContainer-sortable").each(function(){t._sortable(jQuery(this))})}var _=jQuery(this),b=a;clearTimeout(t.fdownTimer);t.fdownTimer=setTimeout(function(){t.bActive=true;jQuery(_).effect("shake",{times:1,distance:5,complete:function(){if(!t.bActive){return}var d=sap.ui.getCore().byId("dashboardPage"),s=d.getScrollDelegate();if(s&&s._scroller){s._scroller.disable()}jQuery(".sapUshellInner.sapUshellTilesContainer-sortable").sortable('enable');jQuery(this).trigger(b)}},50)},150)}});j.bind('mouseup',$.proxy(t,'_resetDraggingTimeout')).bind('mousemove',$.proxy(t,'_resetDraggingTimeout')).bind('scrollstart',$.proxy(t,'_resetDraggingTimeout')).bind('touchmove',$.proxy(t,'_resetDraggingTimeout')).bind('touchcancel',$.proxy(t,'_resetDraggingTimeout'))},_resetDraggingTimeout:function(){clearTimeout(this.fdownTimer);this.bActive=false;if(!sap.ui.Device.system.desktop){var d=sap.ui.getCore().byId("dashboardPage"),s=d.getScrollDelegate();if(s&&s._scroller){s._scroller.enable()}}},_handleSortableStart:function(e,u){this.sortableInfo={};this.sortableInfo.dashboardGroups=document.getElementById(this.oView.oDashboardGroupsBox.getId());this.sortableInfo.jqDashboardGroups=jQuery(this.sortableInfo.dashboardGroups);var j=this.sortableInfo.jqDashboardGroups.find(".sapUshellTile");if(sap.ui.Device.os.ios&&sap.ui.Device.system.tablet){j.find('a').removeAttr('href')}this.sortableInfo.originalTiles=j.not(".sapUshellSortableHelperClone").not(u.item);this.sortableInfo.cloneArea=this.sortableInfo.jqDashboardGroups.find("#cloneArea");this.sortableInfo.tilesFirstContainer=this.sortableInfo.jqDashboardGroups.find('.sapUshellTileContainer:visible:first');this.sortableInfo.containerLeftMargin=parseInt(this.sortableInfo.tilesFirstContainer.css("margin-left"));this.sortableInfo.jqDashboardPageCont=jQuery("#dashboardPage-cont");var a=sap.ui.getCore();a.getEventBus().publish("launchpad","sortableStart");var t=a.byId(u.item[0].id);if(t.getLong()){u.placeholder.addClass("sapUshellLong")}if(t.getTall()){u.placeholder.addClass("sapUshellTall")}u.item.click(function(E){E.preventDefault();E.stopPropagation()});this.oView.oDashboardDeleteArea.show();if(!this.isDesktop){return}var b=this,c=parseFloat(jQuery("#dashboardPage-scroll").offset().left),d=this.sortableInfo.jqDashboardGroups.offset().left;this.sortableInfo.cloneArea.css("left",d-c);var f=this.sortableInfo.jqDashboardPageCont.scrollTop();for(var i=0;i<this.sortableInfo.originalTiles.length;i++){var g=this.sortableInfo.originalTiles.eq(i),C=g.clone();var h=g[0];h.tilePosition=g.position();h.tileOffset=g.offset();C.attr("id",C.attr("id")+'-clone');C.css("font-size",g.css("font-size"));C.addClass("sapUshellClonedTile");g.data("clone",C);var T=parseInt(h.tilePosition.left)+this.sortableInfo.containerLeftMargin+"px",k=b._getTileTopOffset(g,h.tilePosition,f);C.css("left",T);C.css("top",k+"px");b.sortableInfo.cloneArea.append(C);g.css("visibility","hidden")}},_handleSortableStop:function(e,u){jQuery(".sapUshellSortableHelperClone").remove();this.oView.oDashboardDeleteArea.hide();var a=sap.ui.getCore(),t=a.byId(u.item[0].id),E=a.getEventBus();if(t){var o=t.getParent();if(!t.bDeletionFlag){if(t.getLong()){jQuery(".sapUshellTile-placeholder").removeClass("sapUshellLong")}var n=sap.ui.getCore().byId(u.item.parents(".sapUshellTileContainer").attr("id")),N=n.getGroupId(),b=u.item.index();o.removeTile(t,true);n.insertTile(t,b,true);E.publish("launchpad","moveTile",{sTileId:t.getUuid(),toGroupId:N,toIndex:b});u.item.parent().sortable('disable')}else if(t.bDeletionFlag){o.removeTile(t,true);t.bDeletionFlag=false;E.publish("launchpad","deleteTile",{tileId:t.getUuid()});t.destroy()}}if(sap.ui.Device.system.phone){that.bActive=false;jQuery(".sapUshellInner.sapUshellTilesContainer-sortable").sortable('disable')}if(this.isDesktop){var j=jQuery(".sapUshellTile").not(".sapUshellClonedTile");j.removeData("clone");j.removeClass("sapUshellExcludeMe");j.css("visibility","visible");var c=jQuery.sap.byId(this.oView.oDashboardGroupsBox.getId()),d=c.find("#cloneArea");d.empty()}delete this.sortableInfo;E.publish("launchpad","sortableStop")},_handleDrop:function(e,u){var j=jQuery(u);this.oView.oDashboardDeleteArea.hide();var n=sap.ui.getCore().byId(j.parents(".sapUshellTileContainer").attr("id")),N=n.getGroupId(),a=j.index(),b=sap.ui.getCore(),t=b.byId(j.attr('id')),o=t.getParent(),E=b.getEventBus(),d=jQuery(".sapUshellDeleteArea_dashboard_functional");if(d.data("tileOver")===true){o.removeTile(t,true);E.publish("launchpad","deleteTile",{tileId:t.getUuid()});t.destroy();d.data("tileOver",false)}else{o.removeTile(t,true);n.insertTile(t,a,true);E.publish("launchpad","moveTile",{sTileId:t.getUuid(),toGroupId:N,toIndex:a})}},_handleSortableChange:function(e,u,a){if(typeof a=="undefined"){a=true}if(u&&(u.placeholder.length>0)){var j=u.placeholder.parent();var b=j.children('.sapUshellPlusTile');if(b.length>0){b.detach();j.append(b)}}if(!this.isDesktop)return;var t=this;var o=this.sortableInfo.originalTiles;var d=this.sortableInfo.jqDashboardPageCont.scrollTop();for(var i=0;i<o.length;i++){var c=o.eq(i);var f=c[0];var g=c.position();var h=c.offset();if((h.left==f.tileOffset.left)&&(h.top==f.tileOffset.top)){continue}f.tilePosition=g;f.tileOffset=h;var C=c.data("clone");if(!C)continue;var k=f.tilePosition.left+this.sortableInfo.containerLeftMargin;var T=t._getTileTopOffset(c,f.tilePosition,d);if(a){C.stop(true,false).animate({left:k,top:T},{duration:250},{easing:"swing"})}else{C.css({left:k,top:T})}}},_handleGroupListOver:function(c,e,E){jQuery(".sapUshellSortableHelperClone").toggleClass("sapUshellOverGroupList");jQuery(".sapUshellTile-placeholder").hide()},_handleGroupListOut:function(c,e,E){jQuery(".sapUshellSortableHelperClone").toggleClass("sapUshellOverGroupList");jQuery(".sapUshellTile-placeholder").show();jQuery(".sapUshellGroupList").data("dropGroup",null);this._handleSortableChange(undefined,undefined,false)},_handleGroupListItemOver:function(c,e,E){jQuery(".sapUshellGroupList").data("dropGroup",E.getSource());var j=jQuery(".sapUshellTile-placeholder").not(".sapUshellPlaceholderClone").clone();j.addClass("sapUshellPlaceholderClone");j.attr("id","placeholder-clone_"+E.getSource().sId);var a;jQuery.each(this.oView.oDashboardGroupsBox.getGroups(),function(n,g){if(g.getGroupId()===E.getSource().getGroupId()){a=jQuery("#"+g.sId).find(".sapUshellTilesContainer-sortable");return false}});if(a.find(".sapUshellPlusTile").length>0){a.find(".sapUshellPlusTile").before(j);j.show()}else{a.append(j);j.show()}jQuery(".sapUshellTile-placeholder").not(".sapUshellPlaceholderClone").hide();this._handleSortableChange(undefined,undefined,false)},_handleGroupListItemOut:function(c,e,E){jQuery("#placeholder-clone_"+E.getSource().sId).remove();this._handleSortableChange(undefined,undefined,false)},_handleGroupListItemDrop:function(c,e,E){var t=E.getParameter("control"),o=t.getParent();o.removeTile(t,true);this._publishAsync("launchpad","moveTile",{sTileId:t.getUuid(),toGroupId:E.getSource().getGroupId(),toIndex:null});this._handleGroupListOut(c,e,E);this._handleGroupListItemOut(c,e,E);t.destroy()},_publishAsync:function(c,e,d){var b=sap.ui.getCore().getEventBus();window.setTimeout($.proxy(b.publish,b,c,e,d),1)}})}())};if(!jQuery.sap.isDeclared('sap.ushell.renderers.fiori2.launchpad.dashboard.DashboardContent.view')){jQuery.sap.declare('sap.ushell.renderers.fiori2.launchpad.dashboard.DashboardContent.view');
//Copyright (c) 2013 SAP AG, All Rights Reserved
(function(){"use strict";var _=$.ui.sortable.prototype._mouseStop;$.ui.sortable.prototype._mouseStop=function(e,n){if(!e){return}if(this.options.revert){var t=this,a=arguments,c=t.placeholder.offset(),d=$.isFunction(this.options.revert)?this.options.revert.apply(this.element[0],[e,t._uiHash(this)]):this.options.revert,r=sap.ui.getCore().getConfiguration().getRTL(),j=jQuery(this.helper),g=function(h){if(r){return 0}else{return(jQuery(document).width()-h.width()-10)}};self.reverting=true;if(jQuery(".sapUshellDeleteArea_dashboard_functional").data("tileOver")===true){var i=$.browser.msie,I=(i&&(parseInt($.browser.version,10)===10))?true:false,b=(!(navigator.userAgent.indexOf('Chrome')>-1))&&(navigator.userAgent.indexOf("Safari")>-1);if(!I&&(i||b)){$(this.helper).animate({top:(jQuery(document).height()-this.helper.height()-10)+"px",left:g(this.helper),opacity:0},!isNaN(d)?d:250,function(){setTimeout(function(){var T=jQuery(t.currentItem).attr('id'),o=sap.ui.getCore().byId(T);o.bDeletionFlag=true;jQuery(".sapUshellDeleteArea_dashboard_functional").data("tileOver",false);_.apply(t,a)},d)})}else{jQuery(this.helper).css({top:(jQuery(document).height()-this.helper.height()-10),left:g(this.helper),opacity:0,WebkitTransition:'top '+d+'ms ease-in-out, left '+d+'ms ease-in-out, opacity '+d+'ms ease-in-out, ',MozTransition:'top '+d+'ms ease-in-out, left '+d+'ms ease-in-out, opacity '+d+'ms ease-in-out, ',MsTransition:'top '+d+'ms ease-in-out, left '+d+'ms ease-in-out, opacity '+d+'ms ease-in-out, ',OTransition:'top '+d+'ms ease-in-out, left '+d+'ms ease-in-out, opacity '+d+'ms ease-in-out, ',transition:'top '+d+'ms ease-in-out, left '+d+'ms ease-in-out, opacity '+d+'ms ease-in-out'});setTimeout(function(){var T=jQuery(t.currentItem).attr('id'),o=sap.ui.getCore().byId(T);o.bDeletionFlag=true;jQuery(".sapUshellDeleteArea_dashboard_functional").data("tileOver",false);_.apply(t,a)},d)}}else{_.apply(t,a)}}else{this._clear(e,n)}return false};sap.ui.jsview("sap.ushell.renderers.fiori2.launchpad.dashboard.DashboardContent",{createContent:function(c){var t=this,E=sap.ui.getCore().getEventBus();this.oDashboardGroupsBox=this._getDashboardGroupsBox(c);this.oDashboardDeleteArea=this._getDashboardDeleteArea(c);this.oDashboardDeleteArea.attachEvent("tileOver",function(){jQuery(".sapUshellTile-placeholder").hide();jQuery(".sapUshellExcludeMe.sapUshellSortableHelperClone").hide();t.oController._handleSortableChange()});this.oDashboardDeleteArea.attachEvent("tileOut",function(){jQuery(".sapUshellTile-placeholder").show();jQuery(".sapUshellExcludeMe.sapUshellSortableHelperClone").show();t.oController._handleSortableChange()});var f=new sap.m.Button('firstHiddenDashboardTabFocusHelper');f.addEventDelegate({onfocusin:function(){try{var s=sap.ui.getCore().byId('shell').getModel().getData();if(s.currentState.showPane){var g=sap.ui.getCore().byId('groupListPage');var a=g.getFooter();jQuery(a.getDomRef()).find("[tabindex=0]").last().focus()}else{sap.ui.getCore().byId('actionsBtn').focus()}}catch(e){}}});var l=new sap.m.Button('lastHiddenDashboardTabFocusHelper');l.addEventDelegate({onfocusin:function(){try{var s=sap.ui.getCore().byId('configBtn').focus()}catch(e){}}});return[f,this.oDashboardGroupsBox,this.oDashboardDeleteArea,l]},_getDashboardDeleteArea:function(c){var d=new sap.ushell.ui.launchpad.DeleteArea({type:sap.ushell.ui.launchpad.DeleteAreaType.Dashboard,message:sap.ushell.resources.i18n.getText("deleteAreaMsgForTile"),icon:sap.ui.core.IconPool.getIconURI('delete')});return d},_getDashboardGroupsBox:function(c){var t=this;var T=this._getTileContainerTemplate(c),v=this.getViewData(),C;if(v){C=v.config}var a=function(){if(this.getGroups().length){if((sap.ui.Device.system.combi||!sap.ui.Device.system.desktop)&&this.getModel().getProperty("/personalization")){this.touchSupport=new sap.ushell.touchSupport({containerSelector:'#dashboardGroups',wrapperSelector:sap.ui.Device.system.combi?'#dashboardPage-cont':undefined,draggableSelector:".sapUshellTile[role='link'],.sapUshellPlusTile",draggableSelectorExclude:".sapUshellPlusTile",rootSelector:"#dashboardPage",placeHolderClass:"sapUshellTile-placeholder",cloneClass:"sapUshellTile-clone",touchStartCallback:t._handleTouchStart.bind(t),touchEndCallback:c._handleDrop.bind(c),touchDragCallback:t._handleTouchDrag.bind(t),dragAndScrollCallback:t._handleDelete.bind(t),moveTolerance:10,switchModeDelay:1000,debug:jQuery.sap.debug()}).enable()}sap.ui.getCore().getEventBus().publish("launchpad","contentRendered");sap.ui.getCore().getEventBus().publish("launchpad","contentRefresh");var l=sap.ui.getCore().byId("loadingDialog");l.closeLoadingScreen();c._addBottomSpace();if(!C||C.enableTilesOpacity!==false){sap.ushell.utils.handleTilesOpacity()}}try{sap.ushell.utils.handleTilesVisibility()}catch(e){}};var h=[];if(this.oViewData.config&&this.oViewData.config.enableHideGroups){h.push(new sap.ui.model.Filter("isGroupVisible",sap.ui.model.FilterOperator.EQ,true))}var g=new sap.ushell.ui.launchpad.DashboardGroupsContainer("dashboardGroups",{accessibilityLabel:sap.ushell.resources.i18n.getText("DashboardGroups_label"),groups:{path:"/groups",template:T,filters:h},afterRendering:a});return g},_getTileContainerTemplate:function(c){var f=new sap.ui.model.Filter("isTileIntentSupported",sap.ui.model.FilterOperator.EQ,true);var a=(sap.ui.Device.system.desktop&&!sap.ui.Device.system.combi)?[c._bindTileEvents,c]:[function(){}];var t=new sap.ushell.ui.launchpad.TileContainer({headerText:"{title}",tooltip:"{title}",groupId:"{groupId}",defaultGroup:"{isDefaultGroup}",showHeader:true,showPlaceholder:true,tiles:{path:"tiles",template:new sap.ushell.ui.launchpad.Tile({draggable:false,"long":"{long}","tall":"{tall}",uuid:"{uuid}",target:"{target}",rgba:"{rgba}",animationRendered:false,debugInfo:"{debugInfo}",tileViews:{path:"content",factory:function(i,C){return C.getObject()}},afterRendering:a}),filters:[f]},add:function(e){sap.ushell.renderers.fiori2.Navigation.openCatalogByHash({groupContext:e.getSource().getBindingContext()})},afterRendering:function(){if(this.getModel().getProperty("/personalization")&&sap.ui.Device.system.desktop){var j=jQuery('#'+this.getId());c.makeGroupSortable(j)}},removable:"{removable}",sortable:"{sortable}"});return t},_handleTouchStart:function(e,u){},_handleTouchDrag:function(e,u){jQuery(u).find("a").removeAttr('href');this.oDashboardDeleteArea.show();this.placeHolderElement=jQuery(".sapUshellTile-placeholder")},_handleDelete:function(e,t){if(this.oDashboardDeleteArea.isElementOverDeleteArea(t)){if(this.isOutsideDeleteArea){this.oDashboardDeleteArea.tileOver(true);this.oDashboardDeleteArea.adjustStyleOnOverIn(true,jQuery(t));this.isOutsideDeleteArea=false;this.placeHolderElement.hide()}}else{if(!this.isOutsideDeleteArea){this.oDashboardDeleteArea.tileOver(false);this.oDashboardDeleteArea.adjustStyleOnOverOut(true,jQuery(t));this.isOutsideDeleteArea=true;this.placeHolderElement.show()}}},getControllerName:function(){return"sap.ushell.renderers.fiori2.launchpad.dashboard.DashboardContent"}})}())};if(!jQuery.sap.isDeclared('sap.ushell.renderers.fiori2.launchpad.group_list.GroupList.view')){jQuery.sap.declare('sap.ushell.renderers.fiori2.launchpad.group_list.GroupList.view');(function(){"use strict";jQuery.sap.require('sap.ui.core.IconPool');var _=$.ui.sortable.prototype._mouseStop;$.ui.sortable.prototype._mouseStop=function(e,n){if(!e){return}if(this.options.revert){var t=this,a=arguments,c=t.placeholder.offset(),d=$.isFunction(this.options.revert)?this.options.revert.apply(this.element[0],[e,t._uiHash(this)]):this.options.revert,j=jQuery(this.helper);self.reverting=true;if(jQuery(".sapUshellDeleteArea_grouplist_functional").data("groupOver")===true){var g=sap.ui.getCore().byId(jQuery(t.currentItem).attr('id')),r=g.getRemovable(),o=function(){j.data("deleteMe",true);j.animate({top:(jQuery(document).height()-j.height()-10)+"px",left:"0px",opacity:0},!isNaN(d)?d:250,function(){e.scrollToGroup=false;t._clear(e);var E=sap.ui.getCore().getEventBus();E.publish("launchpad",r?"deleteGroup":"resetGroup",{groupId:g.getGroupId()});var C=sap.ui.getCore().byId('groupList').oController;C._getJqAllListItems().not(".sapUshellSortableHelperClone").not(".sapUshellClonedGrouplistItem").css("visibility","");jQuery(".sapUshellDeleteArea_grouplist_functional").data("groupOver",false)})};j.animate({opacity:'hide'});g.bDeletionFlag=true;o()}else if(jQuery(".sapUshellGroupList").data("dropGroup")){var b=jQuery.sap.byId(jQuery(".sapUshellGroupList").data("dropGroup").sId);j.animate({top:b.offset().top+16,left:b.offset().left+48,height:"0px",width:"0px",opacity:0},!isNaN(d)?d:250,function(){jQuery(".sapUshellGroupList").data("dropGroup",null);_.apply(t,a)})}else{_.apply(t,a)}}else{e.scrollToGroup=true;this._clear(e,n)}return false};sap.ui.jsview("sap.ushell.renderers.fiori2.launchpad.group_list.GroupList",{createContent:function(c){var t=this,o=this._getOpenCatalogItem(c),a=this._getAddGroupItem(c),g=this._getGroupListItemTemplate(c),n=undefined,s=sap.ui.getCore().byId("shell"),S=s&&s.getModel();this.oGrouplistDeleteArea=new sap.ushell.ui.launchpad.DeleteArea({type:sap.ushell.ui.launchpad.DeleteAreaType.GroupList,message:sap.ushell.resources.i18n.getText("deleteAreaMsgForGroup"),icon:sap.ui.core.IconPool.getIconURI('delete')});var h=[];if(S&&S.getProperty("/enableHideGroups")){h.push(new sap.ui.model.Filter("isGroupVisible",sap.ui.model.FilterOperator.EQ,true))}this.oGroupList=new sap.m.List("groupListItems",{items:{path:"/groups",template:g,filters:h}}).addStyleClass("sapUshellGroupItemList");jQuery.extend(this.oGroupList,{onsapskipforward:function(){},onsapskipback:function(){}});var C=function(e){var L=e.getSource().oList;if(L[L.length-1].editMode){var i=t.oGroupList.getItems();n=i[i.length-1].getId()}};this._handleTouchStart=function(e,u){var j=jQuery(u);j.attr('startPos',j.index())},this._handleDoubleTap=function(e,u){var i=sap.ui.getCore().byId(u.getAttribute('id'));if(i){i.ondblclick()}},this._handleTouchDrag=function(e,u){jQuery(this.getDomRef()).find(".sapUshellOver").removeClass('sapUshellOver');this.oGrouplistDeleteArea.show()},this.oGroupList.onBeforeRendering=function(){if(t.touchSupport){t.touchSupport.disable();t.touchSupport=null}},this._handleDelete=function(e,i){if(this.oGrouplistDeleteArea.isElementOverDeleteArea(i)){if(this.isOutsideDeleteArea){var G=sap.ui.getCore().byId(i.getAttribute('id'));this.oGrouplistDeleteArea.setDeleteAreaMessage(G);this.oGrouplistDeleteArea.groupOver(true);this.oGrouplistDeleteArea.adjustStyleOnOverIn(true,jQuery(i));this.isOutsideDeleteArea=false}}else{if(!this.isOutsideDeleteArea){this.oGrouplistDeleteArea.groupOver(false);this.oGrouplistDeleteArea.adjustStyleOnOverOut(true,jQuery(i));this.isOutsideDeleteArea=true}}},this.oGroupList.onAfterRendering=function(){c._updateGroupSelection();if(this.getModel().getProperty("/personalization")){if(!sap.ui.Device.system.desktop){t.touchSupport=new sap.ushell.touchSupport({containerSelector:"#groupListPage-scroll .sapUshellGroupItemList",draggableSelector:".sapUshellGroupLI:not(.sapUshellDefaultGroupItem)",rootSelector:"#groupList",wrapperSelector:"#groupListPage-scroll",touchStartCallback:t._handleTouchStart.bind(t),touchEndCallback:c._handleDrop.bind(c),touchDragCallback:t._handleTouchDrag.bind(t),dragAndScrollCallback:t._handleDelete.bind(t),doubleTapCallback:t._handleDoubleTap.bind(t),placeHolderClass:"sapUshellGroupListItem-placeholder",cloneClass:"sapUshellGroupListItem-clone",moveTolerance:1,switchModeDelay:1000,debug:jQuery.sap.debug()}).enable()}else{jQuery.proxy(c.makeSortable,c)()}}if(n){var j=jQuery.sap.byId(n);j.css('opacity',0).slideDown(300).animate({opacity:1},{queue:false,duration:300});n=undefined}this.getBinding("items").detachChange(C);this.getBinding("items").attachChange(C)};this.oGroupList.updateItems=sap.ushell.override.updateAggregatesFactory("items");var l=new sap.m.Button("lastHiddenSidebarTabFocusHelper");l.addEventDelegate({onfocusin:function(){try{if(!sap.ushell.renderers.fiori2.AccessKeysHandler.goToEdgeTile('first')){sap.ui.getCore().byId('actionsBtn').focus()}}catch(e){}}});var f=new sap.m.Button("firstHiddenSidebarTabFocusHelper");f.addEventDelegate({onfocusin:function(){try{var i=sap.ui.getCore().byId('actionsBtn');i.focus()}catch(e){}}});if(sap.ui.getCore().byId("shell")&&sap.ui.getCore().byId("shell").getModel()&&sap.ui.getCore().byId("shell").getModel().getProperty("/personalization")){this.oActionList=new sap.m.List({items:[a,o]});jQuery.extend(this.oActionList,{onsapskipforward:function(){},onsapskipback:function(){}});this.oActionList._navToTabChain=function(){};var b=this.oActionList.onAfterRendering;this.oActionList.onAfterRendering=function(e){b.call(this,e);var i=e.srcControl.getItems()[0]};var d=new sap.m.Bar({id:"groupListFooter",contentMiddle:[this.oActionList,l]});d.addStyleClass("sapUshellPersonalizationOn");this.groupListPage=new sap.m.Page({id:"groupListPage",showHeader:false,showFooter:true,content:[f,this.oGroupList],footer:d,enableScrolling:!!sap.ui.Device.system.desktop});this.groupListPage.addStyleClass("sapUshellPersonalizationOn")}else{this.groupListPage=new sap.m.Page({id:"groupListPage",showHeader:false,showFooter:false,content:[f,this.oGroupList]})}this.addStyleClass("sapUshellGroupList");return[this.groupListPage,this.oGrouplistDeleteArea]},_getOpenCatalogItem:function(){var o=function(){sap.ushell.renderers.fiori2.Navigation.openCatalogByHash({groupContext:null})},O=new sap.m.ActionListItem("openCatalogActionItem",{text:"{i18n>open_catalog}",tooltip:"{i18n>openCatalog_tooltip}",press:o});return O},_getGroupListItemTemplate:function(c){var o=function(e){if(this.getParent().getItems()[0]===this){this.setAllowEditMode(false);if(this.getDefaultGroup()){this.addStyleClass("sapUshellDefaultGroupItem")}}else{this.addStyleClass("sapUshellGroupListItem")}c._bindGroupListItemEvents(e);jQuery(this.getDomRef()).attr("tabindex","0")};return new sap.ushell.ui.launchpad.GroupListItem({index:"{index}",title:"{title}",tooltip:"{title}",defaultGroup:"{isDefaultGroup}",groupId:"{groupId}",editMode:"{editMode}",removable:"{removable}",numberOfTiles:"{tiles/length}",afterRendering:o,isGroupVisible:"{isGroupVisible}",press:[function(e){this._handleGroupListItemPress(e)},c],change:[c.onGroupTitleChange,c],over:[c._handleGroupListItemOver,c],out:[c._handleGroupListItemOut,c],drop:[c._handleGroupListItemDrop,c]})},_getAddGroupItem:function(c){var a=new sap.m.ActionListItem("addGroupActionItem",{text:"{i18n>add_group}",tooltip:"{i18n>add_group_tooltip}",press:[function(){c._handleGroupCreate.apply(c,arguments)},c]});return a},getControllerName:function(){return"sap.ushell.renderers.fiori2.launchpad.group_list.GroupList"}})}())};if(!jQuery.sap.isDeclared('sap.ushell.renderers.fiori2.search.HistoryScreen.view')){jQuery.sap.declare('sap.ushell.renderers.fiori2.search.HistoryScreen.view');(function(){"use strict";sap.ui.jsview("sap.ushell.renderers.fiori2.search.HistoryScreen",{createContent:function(c){var s=this;var S,l;if(sap.ui.getCore().getModel("searchModel").isNormalSearchEnable()){this.oRecentDataSources=new sap.ushell.renderers.fiori2.search.DataSourceList({dsPress:function(p){var d=p.getParameters().ds;s.getModel("searchModel").setDataSource(d,false);s.searchfield.focus()},showNoData:false,dataSources:"{/dataSources}"})}l=new sap.m.List({inset:false,showSeparators:sap.m.ListSeparators.Inner,visible:{path:"/searches/length",formatter:function(r){return(r!==0)}}}).addStyleClass("sapUshellHistoryScreenRecentSearches");l.bindAggregation("items","/searches",function(p,d){var S=new sap.m.StandardListItem({title:{parts:["sTerm","oDataSource/objectName/value","oDataSource"],formatter:function(t,o,D){if(o==="$$ALL$$"){return t}if(!D)return t;var b=D.label||D.objectName.label||D.objectName.value;return t+(b?", "+b:"")}},type:"Active"});S.data("sSearchTerm","{sTerm}");S.data("oDataSource","{oDataSource}");S.onAfterRendering=function(){$(this.getDomRef()).click(function(){s.getModel("searchModel").setDataSource(d.getObject().oDataSource,false);s.getModel("searchModel").setSearchTerm(d.getObject().sTerm,false);window.location.href="#Action-search&/searchTerm="+encodeURI(s.getModel("searchModel").getProperty("/searchBoxTerm"))+"&dataSource="+encodeURI(JSON.stringify(s.getModel("searchModel").getDataSourceJson()));if(s.viewSwitcher)s.viewSwitcher.switchViewState("searchResults")});$(this.getDomRef()).keyup(function(e){if(e.keyCode==13){this.click()}})};return S});this.searchLayout=new SearchLayout({bottomHeader:{parts:["/searches/length","i18n>recent_searches"],formatter:function(i,L){return i!==0?L:undefined}},bottomList:l,topHeader:{parts:["/dataSources/length","i18n>searchIn"],formatter:function(d,L){return d!==0?L:undefined}},topList:s.oRecentDataSources,searchBusy:true});var a="sfOverlay";if(s.getViewData()!==undefined&&s.getViewData().sf!==undefined)a=s.getViewData().sf;sap.ui.getCore().byId(a).addEventDelegate({onsapdown:function(e){s.oRecentDataSources.focus();e.preventDefault();e.stopPropagation()}});return this.searchLayout},dsRequestFinished:function(){this.searchLayout.setSearchBusy(false)},getControllerName:function(){return"sap.ushell.renderers.fiori2.search.HistoryScreen"}})}())};if(!jQuery.sap.isDeclared('sap.ushell.renderers.fiori2.search.Search.controller')){jQuery.sap.declare('sap.ushell.renderers.fiori2.search.Search.controller');
// Copyright (c) 2013 SAP AG, All Rights Reserved
(function(){"use strict";sap.ui.controller("sap.ushell.renderers.fiori2.search.Search",{onInit:function(){var s=this},onExit:function(){var s=this;sap.ui.getCore().getEventBus().unsubscribe("appSearchFinished",s.getView().appSearchFinished,s.getView());sap.ui.getCore().getEventBus().unsubscribe("searchFinished",s.getView().onSearchFinished,s.getView());sap.ui.getCore().getEventBus().unsubscribe("searchStarted",s.getView().onAllSearchStarted,s.getView());sap.ui.getCore().getEventBus().unsubscribe("allSearchFinished",s.getView().onAllSearchFinished,s.getView())},})}())};if(!jQuery.sap.isDeclared('sap.ushell.renderers.fiori2.search.Search.view')){jQuery.sap.declare('sap.ushell.renderers.fiori2.search.Search.view');(function(g){"use strict";sap.ui.jsview("sap.ushell.renderers.fiori2.search.Search",{createContent:function(c){var s=this;var l={growing:true,threshold:2,inset:false,showUnread:true,width:"auto",showNoData:false};sap.ui.getCore().getEventBus().subscribe("appSearchFinished",s.appSearchFinished,s);sap.ui.getCore().getEventBus().subscribe("searchFinished",s.onSearchFinished,s);sap.ui.getCore().getEventBus().subscribe("searchStarted",s.onAllSearchStarted,s);sap.ui.getCore().getEventBus().subscribe("allSearchFinished",s.onAllSearchFinished,s);s.resultList=new sap.m.List(l);s.resultList.setGrowingThreshold(2000);s.resultList.bindAggregation("items","/results",function(p,d){return s.assembleListItem(d)});s.appSearchResult=s.assembleAppSearch();s.resultListWithDetail=new SearchResultListWithDetail({resultList:s.resultList});if(sap.ui.getCore().getModel("searchModel").isNormalSearchEnable()){s.showBottomList=true}else{s.showBottomList=false}s.searchLayout=new SearchLayout({showMainHeader:true,searchTerm:sap.ushell.resources.i18n.getText(""),topHeader:'{i18n>apps}',topList:s.appSearchResult,bottomHeader:sap.ushell.resources.i18n.getText("business_objects"),bottomHeaderIsUnspecific:true,bottomList:s.resultListWithDetail,facets:s.facets,searchBusy:false,showBottomList:s.showBottomList});s.searchContainer=new sap.search.DivContainer({content:s.searchLayout,cssClass:'searchContainer'});return s.searchContainer},assembleAppSearch:function(){var s=this;var t=new sap.ushell.ui.launchpad.SearchResultApps({showNoData:false,growing:true,growingThreshold:2,growingTriggerText:{path:"i18n>showMore"},results:{path:"/tiles",template:new sap.ushell.ui.launchpad.SearchResultAppItem({icon:"{icon}",text:"{title}",targetUrl:"{url}"})}});this.oTilesContainer=t;var a=new sap.search.DivContainer({content:[t],cssClass:'appSearchResults'});return a},_assembleDataSourceFacetList:function(){var s=this;var c=function(){var i=new sap.m.FacetFilterItem({text:"{text}",key:"{id}",count:"{count}",selected:"{selected}"});i.data("dataSource","{dataSource}");return i};var j=new sap.ui.model.json.JSONModel({values:s.getModel().getDataSources()});var d=new sap.m.FacetFilterList({title:"All Categories",multiSelect:false,allCount:s.getModel().getProperty("/count"),items:{path:"/values",template:c()},listClose:function(){if(this.getSelectedItems()&&this.getSelectedItems().length>0){var n=this.getSelectedItems()[0].data("dataSource");s.getModel().setDataSource(n);s.getModel().resetAttributeFacets(false);s.getModel().resetFilterConditions()}}});d.setModel(j);return d},_assembleAttributeFacetList:function(f){var s=this;var c=function(){var i=new sap.m.FacetFilterItem({text:"{text}",count:"{count}",selected:"{selected}"});i.data("filterCondition","{filterCondition}");return i};var j=new sap.ui.model.json.JSONModel({values:f.items});var a=new sap.m.FacetFilterList({title:f.title,multiSelect:true,allCount:f.allCount,items:{path:"/values",template:c()},listClose:function(){if(this.getSelectedItems()){for(var i=0,l=this.getSelectedItems().length;i<l;i++){var b=this.getSelectedItems()[i].data("filterCondition");if(b.attribute&&b.operator&&b.value){s.getModel().addFilterCondition(b.attribute,b.operator,b.value,false)}else if(b.conditions){s.getModel().addFilterConditionGroup(b,false)}}s.getModel()._searchFireQuery()}}});a.data("facet",f);a.setModel(j);return a},assembleFacets:function(){var s=this;if(s.getModel()){var d=s._assembleDataSourceFacetList();var l=[d];for(var i=0,a=s.getModel().getProperty("/facets/attributes").length;i<a;i++){var f=s.getModel().getProperty("/facets/attributes")[i];var b=s._assembleAttributeFacetList(f);l.push(b)}var c=new sap.m.FacetFilter({lists:l,reset:function(){s.getModel().resetAttributeFacets(false);s.getModel().resetFilterConditions(false);s.getModel().resetDataSources(false);s.getModel().resetDataSource()}});if(s.searchLayout){s.searchLayout.setFacets(c)}return c}},assembleTitleItem:function(d){var i=new sap.m.CustomListItem();var t=new sap.m.Label({text:"{title}"});t.addStyleClass('bucketTitle');i.addStyleClass('bucketTitleContainer');i.addContent(new sap.m.HBox({items:[t]}));return i},assembleFooterItem:function(d){var s=this;s.footerItem=new SearchResultListItemFooter({text:"{i18n>showMore}",showMore:function(){var n=s.getModel().getSkip()+10;s.getModel().setSkip(n)}});return s.footerItem},assembleResultListItem:function(d,p){var s=this;var i=new SearchResultListItem({title:"{$$Name$$}",titleUrl:"{uri}",type:"{dataSourceName}",imageUrl:"{imageUrl}",data:d,visibleAttributes:3,navigate:function(){},previewOpen:function(){s.selectItem(i,d,p)},previewClose:function(){}});i.addEventDelegate({onAfterRendering:function(){$(this.getDomRef()).find(".searchResultListItem-main").bind('click',this.fireNavigate(this.getTitleUrl()));this.setSafeText($(this.getDomRef()).find(".searchResultListItem-title, .searchResultListItem-attribute-value, .searchResultListItem-type"))}},i);if(s.selectedPath===p){s.selectItem(i,d,p)}return i},selectItem:function(i,d,p){var s=this;if(i===s.selectedItem){return}s.selectedPath=p;s.getModel().setProperty("/detail/title",d?d.$$Name$$:undefined);s.getModel().setProperty("/detail/titleUrl",d?d.uri:undefined);s.getModel().setProperty("/detail/type",d?d.dataSourceName:undefined);s.getModel().setProperty("/detail/data",d);s.resultListWithDetail.setPreview(s.assembleDetail());if(i){i.setStatus("open")}if(s.selectedItem){s.selectedItem.setStatus("closed")}s.selectedItem=i},assembleDetail:function(){var s=this;var d=new SearchResultListItemDetail({headerLabel:"{i18n>more_information_on}",itemTitle:{path:"/detail/title"},itemTitleUrl:"{/detail/titleUrl}",itemType:"{/detail/type}",itemData:"{/detail/data}",firstDetailAttribute:4,maxDetailAttributes:8});d.addEventDelegate({onAfterRendering:function(){this.setSafeText($(this.getDomRef()).find(".searchResultListItemDetail-title, .searchResultListItemDetail-attribute-value"))}},d);return d},assembleListItem:function(d){var s=this;var D=d.getObject();if(D.type==='title'){return s.assembleTitleItem(D)}else if(D.type==='footer'){return s.assembleFooterItem(D)}else{return s.assembleResultListItem(D,d.getPath())}},onAllSearchStarted:function(){var s=this;if(s.getModel().getProperty("/isResultAppended")){s.footerItem.setShowSpinner(true);return}this.searchLayout.setEnableNoResults(false);s.searchLayout.setSearchBusy(true);if(s.selectedItem){s.selectedItem.setStatus("closed");if(s.resultListWithDetail.getPreview()){s.resultListWithDetail.getPreview().destroy()}}this.selectedPath=null;this.oTilesContainer.resetGrowing();s.searchLayout.setBottomList(s.resultListWithDetail)},onAllSearchFinished:function(){this.searchLayout.setSearchTerm(this.getModel().getSearchTerm());this.searchLayout.setEnableNoResults(true);this.searchLayout.setSearchBusy(false)},onSearchFinished:function(){var s=this;var S=this.getModel();if(s.getModel().getProperty("/isResultAppended")){s.footerItem.setShowSpinner(false);return}s.searchLayout.setSearchTerm(s.getModel().getSearchTerm());s.searchLayout.setBottomCount(s.getModel().getProperty("/count"));var d=S.getDataSource();var b=this.getModel().getProperty('/dataSourceName');if(!d||d.objectName.value.toLowerCase()==='$$all$$'){s.searchLayout.setBottomHeaderIsUnspecific(true);s.searchLayout.setBottomHeader(sap.ushell.resources.i18n.getText("business_objects"))}else{s.searchLayout.setBottomHeaderIsUnspecific(false);s.searchLayout.setBottomHeader(b)}var i=s.resultList.getItems();if(s.getModel().getProperty("/count")!==0&&!s.getModel().getProperty("/isResultAppended")){s.searchLayout.setBottomList(s.resultListWithDetail);var p='/results/0';s.selectItem(i[0],this.getModel().getProperty(p),p)}else{}sap.ui.getCore().getEventBus().publish("closeCurtain")},onSearchFailed:function(){var s=this;if(s.getModel().getProperty("/isResultAppended")){s.footerItem.setShowSpinner(false);return}s.searchLayout.setSearchBusy(false)},appSearchFinished:function(b,a,r){var s=this;var c=s.getModel().getSearchTerm();if(!r.totalResults||r.totalResults===0){s.appsFound=false;s.searchLayout.setTopCount(r.totalResults);s.searchLayout.setTopList(undefined)}else{s.appsFound=true;s.searchLayout.setTopCount(r.totalResults);s.searchLayout.setTopList(s.appSearchResult)}},getControllerName:function(){return"sap.ushell.renderers.fiori2.search.Search"}});sap.ui.core.Control.extend("sap.search.DivLayout",{metadata:{aggregations:{content:{singularName:"content",multiple:true}}},renderer:function(r,c){var C=c.getContent();for(var i=0;i<C.length;i++){r.renderControl(C[i])}}});sap.ui.core.Control.extend("sap.search.DivContainer",{metadata:{properties:{"cssClass":"string"},aggregations:{"content":{singularName:"content",multiple:true}},},renderer:function(r,c){r.write('<div');r.writeControlData(c);r.addClass(c.getCssClass());r.writeClasses();r.write('>');var C=c.getContent();for(var i=0;i<C.length;i++){r.renderControl(C[i])}r.write('</div>')}})}(window))};if(!jQuery.sap.isDeclared('sap.ushell.renderers.fiori2.search.SearchSuggestions.view')){jQuery.sap.declare('sap.ushell.renderers.fiori2.search.SearchSuggestions.view');
//Copyright (c) 2013 SAP AG, All Rights Reserved
(function(){"use strict";sap.ui.jsview("sap.ushell.renderers.fiori2.search.SearchSuggestions",{createContent:function(c){var s=this;var d=new sapUshellSuggestSection();var a=new sapUshellSuggestSection();var b=new sapUshellSuggestSection();s.suggestList=new sapUshellSuggestionList({sections:[d,a,b]});s.suggestList.addStyleClass('sapUshellSearchSuggestionList');var f="sfOverlay";if(s.getViewData().sf!==undefined)f=s.getViewData().sf;sap.ui.getCore().byId(f).addEventDelegate({onsapdown:function(e){s.suggestList.focus();e.preventDefault();e.stopPropagation()},onsapescape:function(e){c.closeSuggestions();e.preventDefault();e.stopPropagation()}});var g=function(){return new sap.m.GroupHeaderListItem({title:"{title}"}).addStyleClass('sapUshellSuggestHeader')};var h=function(){return new sap.m.CustomListItem({type:sap.m.ListType.Inactive,content:[new sap.m.Label({text:"{text}"}).addStyleClass('sapUshellSuggestEnter')]})};var o=function(l,m){var p=l.onAfterRendering;l.onAfterRendering=function(){if(p)p.apply(this,arguments);var q=$(this.getDomRef());q.keypress(function(e){if(e.which===13){m()}})}};var i=function(e,l){e.addEventDelegate({onclick:function(E){l(E);E.stopImmediatePropagation();E.stopPropagation()},ontouch:function(E){l(E);E.stopImmediatePropagation();E.stopPropagation()}})};var n=function(e,l){if(e)s.getModel().setSearchTerm(e,false);if(l)s.getModel().setDataSource(l,false);window.location.href="#Action-search&/searchTerm="+encodeURI(s.getModel().getProperty("/searchBoxTerm"))+"&dataSource="+encodeURI(JSON.stringify(s.getModel().getDataSourceJson()));if(s.viewSwitcher)s.viewSwitcher.switchViewState("searchResults")};var j=function(e,l){return{objectName:{value:e,label:l},packageName:{label:"",value:""},schemaName:{label:"",value:""}}};var k=function(e){s.getModel().setDataSource(e,false);s.getModel().setProperty("/searchBoxTerm","");s.getModel().doSuggestion()};d.bindAggregation("items","/dataSourceSection",function(p,D){if(D.getObject().isTitle)return g();var e=function(){var m=j(D.getObject().labelRaw,D.getObject().label);s.getModel().setDataSource(m,false);s.getModel().setProperty("/searchBoxTerm","");s.searchfield.focus()};var l=new sap.m.CustomListItem({type:sap.m.ListType.Active,content:[new sap.ushell.renderers.fiori2.search.DataSourcePill({dataSourceName:"{dataSourceLabel}",press:function(){e()}}).addStyleClass('sapUshellSuggestDataSource').addStyleClass('sapUshellSearchSuggestionNavItem')],press:function(){e()}}).addStyleClass('sapUshellSuggestListItem');o(l,function(){e()});return l});a.bindAggregation("items","/suggestSection",function(p,D){if(D.getObject().isTitle)return g();if(D.getObject().isFooter)return h();var l=new sap.m.Link({text:"{label}"}).addStyleClass('sapUshellSuggestText').addStyleClass('sapUshellSearchSuggestionNavItem');l.addEventDelegate({onAfterRendering:function(){s.bTagUnescaper(this.getDomRef())}},l);i(l,function(){n(D.getObject().labelRaw)});var e=new sap.ushell.renderers.fiori2.search.DataSourcePill({dataSourceName:"{dataSourceLabel}"}).addStyleClass('sapUshellSuggestDataSourceRight').addStyleClass('sapUshellSuggestDataSource').addStyleClass('sapUshellSearchSuggestionNavItem');var m=[l];if(D.getObject().dataSourceLabel)m.push(e);var q=new sap.m.CustomListItem({type:sap.m.ListType.Active,content:m}).addStyleClass('sapUshellSuggestListItem');i(q,function(){n(D.getObject().labelRaw,D.getObject().dataSource)});o(l,function(){n(D.getObject().labelRaw)});o(e,function(){n(D.getObject().labelRaw,D.getObject().dataSource)});return q});b.bindAggregation("items","/appSection",function(p,D){if(D.getObject().isTitle){return g()}var e=function(){if(D.getObject().targetURL){window.location=D.getObject().targetURL}else{jQuery.sap.require("sap.ca.ui.message.message");sap.ca.ui.message.showMessageBox({type:sap.ca.ui.message.Type.ERROR,message:sap.ushell.resources.i18n.getText("noappurl"),details:""})}};var l=new sap.m.Link({text:"{label}",press:e}).addStyleClass('sapUshellSuggestText').addStyleClass('sapUshellSearchSuggestionNavItem');var m=new sap.ui.core.Icon({src:D.getObject().icon}).addStyleClass('sapUshellSuggestIcon');var q=new sap.m.CustomListItem({type:sap.m.ListType.Active,content:[m,l],press:e}).addStyleClass('sapUshellSuggestListItem');l.addEventDelegate({onAfterRendering:function(){s.bTagUnescaper(this.getDomRef())}},l);o(q,e);return q});return s.suggestList},bTagUnescaper:function(d){var i=d.innerHTML;while(i.indexOf('&lt;b&gt;')+i.indexOf('&lt;/b&gt;')>=-1){i=i.replace('&lt;b&gt;','<b>');i=i.replace('&lt;/b&gt;','</b>')}d.innerHTML=i},focusSearchfield:function(e){sap.ui.getCore().byId("sfOverlay").focus()},onAfterRendering:function(){},hideSuggestions:function(){},showSuggestions:function(){this.$().slideDown(200);if(this.getParent()&&this.getParent().scrollTo){this.getParent().scrollTo(0)}else{this.$().parent().scrollTop(0)}},getControllerName:function(){return"sap.ushell.renderers.fiori2.search.SearchSuggestions"}})}())};if(!jQuery.sap.isDeclared('sap.ushell.services.Container')){
// Copyright (c) 2013 SAP AG, All Rights Reserved
(function(){"use strict";jQuery.sap.declare("sap.ushell.services.Container");var c,d="sap.ushell.Container.dirtyState.",p;sap.ushell.utils.testPublishAt(sap.ushell.services);function a(){close()}sap.ushell.utils.testPublishAt(sap.ushell.services);function r(){document.location="about:blank"}sap.ushell.utils.testPublishAt(sap.ushell.services);function g(){return localStorage}function b(P){if(p&&p[P]){return p[P]}return"sap.ushell.adapters."+P}function f(s){return(c.services&&c.services[s])||{}}function h(n,s,P){var A=f(n).adapter||{},e=A.module||b(s.getPlatform())+"."+n+"Adapter";jQuery.sap.require(e);return new(jQuery.sap.getObject(e))(s,P,{config:A.config||{}})}function C(A){var l=new sap.ui.base.EventProvider(),R="sap.ushell.Container."+A.getSystem().getPlatform()+".remoteSystem.",m={},G,s,L=g(),S=new sap.ushell.utils.Map(),j="sap.ushell.Container."+A.getSystem().getPlatform()+".sessionTermination",t=this;this.cancelLogon=function(){if(this.oFrameLogonManager){this.oFrameLogonManager.cancelLogon()}};this.createRenderer=function(e){var o,i,q,u;e=e||c.defaultRenderer;if(!e){throw new Error("Missing renderer name")}u=(c.renderers&&c.renderers[e])||{};i=u.module||(e.indexOf(".")<0?"sap.ushell.renderers."+e+".Renderer":e);jQuery.sap.require(i);if(u.componentData&&u.componentData.config){o={config:u.componentData.config}}q=new(jQuery.sap.getObject(i))({componentData:o});if(q instanceof sap.ui.core.UIComponent){q=new sap.ui.core.ComponentContainer({component:q,height:"100%",width:"100%"})}if(!(q instanceof sap.ui.core.Control)){throw new Error("Unsupported renderer type for name "+e)}return q};this.DirtyState={CLEAN:"CLEAN",DIRTY:"DIRTY",MAYBE_DIRTY:"MAYBE_DIRTY",PENDING:"PENDING",INITIAL:"INITIAL"};this.getGlobalDirty=function(){var i,D=new jQuery.Deferred(),u=jQuery.sap.uid(),o,P=0,q=this.DirtyState.CLEAN;function v(){if(P===0||q===t.DirtyState.DIRTY){D.resolve(q);jQuery.sap.log.debug("getGlobalDirty() Resolving: "+q,null,"sap.ushell.Container")}}function w(x){if(x.key.indexOf(d)===0&&x.newValue!==t.DirtyState.INITIAL&&x.newValue!==t.DirtyState.PENDING){jQuery.sap.log.debug("getGlobalDirty() Receiving event key: "+x.key+" value: "+x.newValue,null,"sap.ushell.Container");if(x.newValue===t.DirtyState.DIRTY||x.newValue===t.DirtyState.MAYBE_DIRTY){q=x.newValue}P-=1;v()}}if(sap.ui.Device.browser.msie){return D.resolve(this.DirtyState.MAYBE_DIRTY).promise()}try{L.setItem(u,"CHECK");L.removeItem(u)}catch(e){jQuery.sap.log.warning("Error calling localStorage.setItem(): "+e,null,"sap.ushell.Container");return D.resolve(this.DirtyState.MAYBE_DIRTY).promise()}if(G){throw new Error("getGlobalDirty already called!")}G=D;window.addEventListener('storage',w);D.always(function(){window.removeEventListener('storage',w);G=undefined});for(i=L.length-1;i>=0;i-=1){o=L.key(i);if(o.indexOf(d)===0){if(L.getItem(o)==='PENDING'){L.removeItem(o);jQuery.sap.log.debug("getGlobalDirty() Cleanup of unresolved 'PENDINGS':"+o,null,"sap.ushell.Container")}else{P+=1;sap.ushell.utils.localStorageSetItem(o,this.DirtyState.PENDING,true);jQuery.sap.log.debug("getGlobalDirty() Requesting status for: "+o,null,"sap.ushell.Container")}}}v();setTimeout(function(){if(D.state()!=="resolved"){D.resolve('MAYBE_DIRTY');jQuery.sap.log.debug("getGlobalDirty() Timeout reached, - resolved 'MAYBE_DIRTY'",null,"sap.ushell.Container")}},P*2000);return D.promise()};this.getLogonSystem=function(){return A.getSystem()};this.getUser=function(){return A.getUser()};this.getService=function(e,P){var o={},M,K,i,q,u,v,w;function x(y){var D=new jQuery.Deferred();if(!y){throw new Error("Missing system")}D.resolve(h(e,y,P));sap.ushell.Container.addRemoteSystem(y);return D.promise()}if(!e){throw new Error("Missing service name")}if(e.indexOf(".")>=0){throw new Error("Unsupported service name")}v=f(e);M=v.module||"sap.ushell.services."+e;K=M+"/"+(P||"");w={config:v.config||{}};if(!S.containsKey(K)){jQuery.sap.require(M);i=jQuery.sap.getObject(M);if(i.hasNoAdapter===true){q=new i(o,P,w)}else{u=h(e,A.getSystem(),P);o.createAdapter=x;q=new i(u,o,P,w)}S.put(K,q);return q}return S.get(K)};sap.ushell.utils.testPublishAt(t);function k(){var o,q,i,K;for(i=L.length-1;i>=0;i-=1){K=L.key(i);if(K.indexOf(R)===0){try{o=K.substring(R.length);q=JSON.parse(L.getItem(K));m[o]=new sap.ushell.System(q)}catch(e){L.removeItem(K)}}}return m}sap.ushell.utils.testPublishAt(t,"suppressOData");function n(){function e(E,i,F){jQuery.sap.log.warning(E,null,"sap.ushell.Container");if(F){setTimeout(F.bind(null,E),5000)}return{abort:function(){return}}}OData.read=function(o,i,F){return e("OData.read('"+(o&&o.Uri?o.requestUri:o)+"') disabled during logout processing",i,F)};OData.request=function(o,i,F){return e("OData.request('"+(o?o.requestUri:"")+"') disabled during logout processing",i,F)}}this.addRemoteSystem=function(o){var e=o.getAlias(),O=m[e];if(O){if(O.toString()===o.toString()){return}jQuery.sap.log.warning("Replacing "+O+" by "+o,null,"sap.ushell.Container")}else{jQuery.sap.log.debug("Added "+o,null,"sap.ushell.Container")}m[e]=o;sap.ushell.utils.localStorageSetItem(R+e,o)};this.addRemoteSystemForServiceUrl=function(e){var M,o={baseUrl:";o="};if(!e||e.charAt(0)!=='/'||e.indexOf('//')===0){return}M=/^[^?]*;o=([^\/;?]*)/.exec(e);if(M&&M.length>=2){o.alias=M[1]}e=e.replace(/;[^\/?]*/g,"");if(/^\/sap\/(bi|hana|hba)\//.test(e)){o.platform="hana";o.alias=o.alias||"hana"}else if(/^\/sap\/opu\//.test(e)){o.platform="abap"}if(o.alias&&o.platform){this.addRemoteSystem(new sap.ushell.System(o))}};this.attachLogoutEvent=function(F){l.attachEvent("Logout",F)};this.detachLogoutEvent=function(F,o){l.detachEvent("Logout",F)};this.logout=function(){var D=new jQuery.Deferred();function i(){A.logout(true).always(function(){L.removeItem(j);D.resolve()})}function o(){if(l.fireEvent("Logout",true)){i()}else{setTimeout(i,1000)}}function q(){var m,u=[];if(s){window.removeEventListener('storage',s)}sap.ushell.utils.localStorageSetItem(j,"pending");n();m=k();Object.keys(m).forEach(function(v){try{u.push(h("Container",m[v]).logout(false))}catch(e){jQuery.sap.log.warning("Could not create adapter for "+v,e.toString(),"sap.ushell.Container")}L.removeItem(R+v)});jQuery.when.apply(jQuery,u).done(o)}if(typeof A.addFurtherRemoteSystems==='function'){A.addFurtherRemoteSystems().always(q)}else{q()}return D.promise()};this.setLogonFrameProvider=function(o){if(this.oFrameLogonManager){this.oFrameLogonManager.setLogonFrameProvider(o)}};sap.ui.getCore().getEventBus().subscribe("sap.ushell.Container","addRemoteSystemForServiceUrl",function(e,E,D){t.addRemoteSystemForServiceUrl(D)});if(typeof A.logoutRedirect==='function'){s=function(o){function e(){a();r()}if(sap.ushell.Container!==t){return}if(o.key.indexOf(R)===0&&o.newValue&&o.newValue!==L.getItem(o.key)){sap.ushell.utils.localStorageSetItem(o.key,o.newValue)}if(o.key===j){if(o.newValue==="pending"){n();if(l.fireEvent("Logout",true)){e()}else{setTimeout(e,1000)}}}};window.addEventListener('storage',s)}}sap.ushell.bootstrap=function(P,A){var o;if(sap.ushell.Container!==undefined){throw new Error("Cannot initialize twice")}sap.ushell.Container=null;c=JSON.parse(JSON.stringify(window["sap-ushell-config"]||{}));p=A;if(typeof window["sap.ushell.bootstrap.callback"]==="function"){setTimeout(window["sap.ushell.bootstrap.callback"])}if(c.modulePaths){Object.keys(c.modulePaths).forEach(function(m){jQuery.sap.registerModulePath(m,c.modulePaths[m])})}o=h("Container",new sap.ushell.System({alias:"",platform:c.platform||P}));return o.load().done(function(){sap.ushell.Container=new C(o)})}}())};if(!jQuery.sap.isDeclared('sap.ushell.services.Personalization')){(function(){"use strict";jQuery.sap.declare("sap.ushell.services.Personalization");jQuery.sap.require('sap.ui.core.format.DateFormat');var c="sap.ushell.personalization#",i="ITEM#",v="VARIANTSET#",A="yyyyMMddHHmmss",d="ADMIN#",I="sap-ushell-container-scope",f="sap-ushell-container-storageUTCTimestamp",g="sap-ushell-container-expireUTCTimestamp";function h(C){return c+C}sap.ushell.services.Personalization=function(a){this._oAdapter=a;this._oContainerMap=new sap.ushell.utils.Map();this._oPendingOperationsMap=new sap.ushell.utils.Map()};sap.ushell.services.Personalization.prototype.SAVE_DEFERRED_DROPPED="Deferred save dropped (OK) - Data superseeded by subsequent save";sap.ushell.services.Personalization.prototype.getPersonalizer=function(p){return new sap.ushell.services.Personalizer(this,this._oAdapter,p)};sap.ushell.services.Personalization.prototype.getTransientPersonalizer=function(){return new sap.ushell.services.TransientPersonalizer()};function r(s){var C={validity:Infinity};C.validity=s&&s.validity;if(C.validity===null||C.validity===undefined||typeof C.validity!=="number"){C.validity=Infinity}if(!(typeof C.validity==="number"&&((C.validity>=0&&C.validity<1000)||C.validity===Infinity))){C.liftime=Infinity}return C}sap.ushell.services.Personalization.prototype.getContainer=function(C,s){var p="",o={},P={},D={},a,t=this;if(typeof C!=="string"){throw new sap.ushell.utils.Error("sContainerKey is not a string: sap.ushell.services.Personalization")}if(C.length>40){jQuery.sap.log.error("Personalization Service container key (\""+C+"\") should be less than 40 characters [current :"+C.length+"]")}s=r(s);p=h(C);D=new jQuery.Deferred();a=this._oAdapter;if(s&&s.validity===0){a=new sap.ushell.services.Personalization.WindowValidityPersistenceAdapter(this)}o=new sap.ushell.services.Personalization.ContextContainer(this,a,p,s);o.load().fail(function(){D.reject()}).done(function(){if(o._isExpired()){o.clear()}D.resolve(o)});return D.promise()};sap.ushell.services.Personalization.prototype.createEmptyContainer=function(C,s){var p=this.getContainer(C,s),D=new jQuery.Deferred();p.fail(function(){D.reject()}).done(function(o){o.clear();D.resolve(o)});return D.promise()};sap.ushell.services.Personalization.prototype.delContainer=function(C,s){var o={},D={},p,a,P="",t=this;s=r(s);P=h(C);D=new jQuery.Deferred();p=t._pendingContainerOperations_cancelAddNext(C,null);p.always(function(){t.getContainer(C,s).fail(function(){t._pendingContainerOperations_cancelAddNext(C,D);D.reject()}).done(function(o){var b=t._oAdapter;t._pendingContainerOperations_cancelAddNext(C,D);if(s.validity===0){b=new sap.ushell.services.Personalization.WindowValidityPersistenceAdapter(t)}b.delAdapterContainer(P).fail(function(){D.reject()}).done(function(){D.resolve()})})});return D.promise()};sap.ushell.services.Personalization.prototype._pendingContainerOperations_flushAddNext=function(C,D){var p,s;p=this._oPendingOperationsMap.get(C);if(!p){p=new jQuery.Deferred();p.resolve()}if(D!==null){this._oPendingOperationsMap.put(C,D)}if(!p||p.state()!=="pending"){return p}clearTimeout(p._sapTimeoutId);p._sapTimeoutId=undefined;if(typeof p._sapFnSave==="function"){s=p._sapFnSave;p._sapFnSave=undefined;s()}return p};sap.ushell.services.Personalization.prototype._pendingContainerOperations_cancelAddNext=function(C,D){var p,s;p=this._oPendingOperationsMap.get(C);if(!p){p=new jQuery.Deferred();p.resolve()}if(D!==null){this._oPendingOperationsMap.put(C,D)}if(!p||p.state()!=="pending"){return p}if(p._sapTimeoutId){clearTimeout(p._sapTimeoutId);p._sapTimeoutId=undefined;p.resolve(sap.ushell.services.Personalization.prototype.SAVE_DEFERRED_DROPPED)}return p};sap.ushell.services.Personalization.prototype.getPersonalizationContainer=function(C){var p="",o={},P={},D={},t=this;if(typeof C!=="string"){throw new sap.ushell.utils.Error("sContainerKey is not a string: sap.ushell.services.Personalization")}p=h(C);if(this._oContainerMap.containsKey(p)){return this._oContainerMap.get(p).promise()}D=new jQuery.Deferred();P=new sap.ushell.services.PersonalizationContainer(this._oAdapter,p);P.done(function(o){D.resolve(o)}).fail(function(o){D.reject(o)});this._oContainerMap.put(p,D);return D.promise()};sap.ushell.services.Personalization.prototype.delPersonalizationContainer=function(C){var o={},D={},p="",t=this;p=h(C);D=new jQuery.Deferred();this.getPersonalizationContainer(C).fail(function(){D.reject()}).done(function(o){t._oAdapter.delAdapterContainer(p).fail(function(){D.reject()}).done(function(){t._oContainerMap.remove(p);D.resolve()})});return D.promise()};sap.ushell.services.Personalizer=function(s,a,p){var C="sap.ushell.personalization#";this._sPersContainer="";this._sPersItem="";this._sPersVariant=null;this._oAdapter={};this._oService={};this._oService=s;this._oAdapter=a;if(!p||!p.container||!p.item||typeof p.container!=="string"||typeof p.item!=="string"){throw new sap.ushell.utils.Error("Invalid input for oPersId: sap.ushell.services.Personalization")}this._sPersContainer=p.container;this._sPersItem=p.item};sap.ushell.services.Personalizer.prototype._getContainer=function(p){if(!this._oGetContainerPromise){this._oGetContainerPromise=this._oService.getContainer(p)}return this._oGetContainerPromise};sap.ushell.services.Personalizer.prototype.getPersData=function(){var D={},t=this;D=new jQuery.Deferred();this._getContainer(this._sPersContainer).fail(function(){D.reject()}).done(function(C){D.resolve(C.getItemValue(t._sPersItem))});D.fail(function(){jQuery.sap.log.error("Fail to get Personalization data for Personalizer container: "+t._sPersContainer)});return D.promise()};sap.ushell.services.Personalizer.prototype.setPersData=function(V){var D={},t=this;D=new jQuery.Deferred();this._getContainer(this._sPersContainer).fail(function(){D.reject()}).done(function(C){C.setItemValue(t._sPersItem,V);C.save().fail(function(){D.reject()}).done(function(){D.resolve()})});D.fail(function(){jQuery.sap.log.error("Fail to set Personalization data for Personalizer container: "+t._sPersContainer)});return D.promise()};sap.ushell.services.Personalizer.prototype.delPersData=function(){var D={},t=this,m;D=new jQuery.Deferred();this._oService.getPersonalizationContainer(this._sPersContainer).fail(function(){D.reject()}).done(function(C){C.delItem(t._sPersItem);C.save().fail(function(){D.reject()}).done(function(){D.resolve()})});m=D.promise();m.fail(function(){jQuery.sap.log.error("Fail to delete Personalization data for Personalizer container: "+this._sPersContainer)});return m};sap.ushell.services.TransientPersonalizer=function(){this._oValue=undefined};sap.ushell.services.TransientPersonalizer.prototype.getPersData=function(){var D;D=new jQuery.Deferred();D.resolve(this._oValue);return D.promise()};sap.ushell.services.TransientPersonalizer.prototype.setPersData=function(V){var D;D=new jQuery.Deferred();this._oValue=V;D.resolve();return D.promise()};sap.ushell.services.TransientPersonalizer.prototype.delPersData=function(){var D;D=new jQuery.Deferred();this._oValue=undefined;D.resolve();return D.promise()};sap.ushell.services.TransientPersonalizer.prototype.setValue=function(V){this._oValue=V};sap.ushell.services.TransientPersonalizer.prototype.getValue=function(){return this._oValue};sap.ushell.services.PersonalizationContainer=function(a,C){this._sContainerKey=C;this._oAdapterContainer={};this._aLoadedVariantSetKeys=[];this._aLoadedItemKeys=[];var D={},t=this;this._init();D=new jQuery.Deferred();if(!this._sContainerKey||typeof this._sContainerKey!=="string"){throw new sap.ushell.utils.Error("Invalid container key: sap.ushell.services.Personalization")}this._oAdapterContainer=a.getAdapterContainer(this._sContainerKey);this.load().fail(function(){D.reject()}).done(function(){D.resolve(t)});return D.promise()};sap.ushell.services.PersonalizationContainer.prototype._init=function(){this._oVariantSetMap={};this._oItemMap={};this._aLoadedVariantSetKeys=[];this._aLoadedItemKeys=[];this._oVariantSetMap=new sap.ushell.utils.Map();this._oItemMap=new sap.ushell.utils.Map()};function j(o){if(o===undefined){return undefined}try{return JSON.parse(JSON.stringify(o))}catch(e){return undefined}}function k(o){if(o===undefined){return undefined}try{return JSON.parse(o)}catch(e){return undefined}}sap.ushell.services.PersonalizationContainer.prototype.load=function(){var D={},a=[],V=[],b=[],m=[],t=this;function e(b){var n=[],p=[],R=[];n=b.filter(function(s){return s.indexOf(i)!==0});if(n.length===0){return b}p=b.filter(function(s){return s.indexOf(i)===0});n.forEach(function(s){var o={},P="";P=i+s;o=j(t._oAdapterContainer.getItemValue(s));t._oAdapterContainer.setItemValue(P,o);t._oAdapterContainer.delItem(s);if(jQuery.inArray(P,p)===-1){p.push(P)}});return p}D=new jQuery.Deferred();if(!this._sContainerKey){throw new sap.ushell.utils.Error("Invalid container key: sap.ushell.services.Personalization")}this._init();this._oAdapterContainer.load().fail(function(){D.reject()}).done(function(){a=t._oAdapterContainer.getItemKeys().splice(0);V=a.filter(function(s){return s.indexOf(v)===0});V.forEach(function(s){var o={};o=new sap.ushell.services.PersonalizationContainerVariantSet(s,t._oAdapterContainer);t._oVariantSetMap.put(s,o)});b=a.filter(function(s){return s.indexOf(v)!==0});m=e(b);m.forEach(function(s){t._oItemMap.put(s,j(t._oAdapterContainer.getItemValue(s)))});t._aLoadedVariantSetKeys=t._oVariantSetMap.keys().splice(0);t._aLoadedItemKeys=t._oItemMap.keys().splice(0);D.resolve()});return D.promise()};sap.ushell.services.PersonalizationContainer.prototype.save=function(){var s,o;this._serializeVariantSets();this._serializeItems();s=new jQuery.Deferred();function S(){s.resolve()}function a(){s.reject()}try{o=this._oAdapterContainer.save();o.fail(a);o.done(S)}catch(e){s.reject()}return s.promise()};sap.ushell.services.PersonalizationContainer.prototype.getItemKeys=function(){return this._oItemMap.keys().map(function(e){return e.replace(i,"","")})};sap.ushell.services.PersonalizationContainer.prototype.getItemValue=function(s){if(typeof s!=="string"){return undefined}return this._oItemMap.get(i+s)};sap.ushell.services.PersonalizationContainer.prototype.containsItem=function(s){if(typeof s!=="string"){return undefined}return this._oItemMap.containsKey(i+s)};sap.ushell.services.PersonalizationContainer.prototype.setItemValue=function(s,o){if(typeof s!=="string"){throw new sap.ushell.utils.Error("Parameter value of sItemKey is not a string: sap.ushell.services.Personalization")}this._oItemMap.put(i+s,o)};sap.ushell.services.PersonalizationContainer.prototype.delItem=function(s){if(typeof s!=="string"){return undefined}if(this.containsItem(s)){this._oItemMap.remove(i+s)}};sap.ushell.services.PersonalizationContainer.prototype._serializeItems=function(){var a=[],D=[],t=this;a=this._oItemMap.keys();a.forEach(function(s){t._oAdapterContainer.setItemValue(s,j(t._oItemMap.get(s)))});D=this._aLoadedItemKeys.filter(function(s){return!(a.indexOf(s)>-1)});D.forEach(function(s){t._oAdapterContainer.delItem(s)})};sap.ushell.services.PersonalizationContainer.prototype.getVariantSetKeys=function(){var a=[],V=[],p=[],t=this;p=this._oVariantSetMap.keys();V=p.map(function(e){return e.replace(v,"","")});return V};sap.ushell.services.PersonalizationContainer.prototype.containsVariantSet=function(V){return this._oVariantSetMap.containsKey(v+V)};sap.ushell.services.PersonalizationContainer.prototype.getVariantSet=function(V){var p,o={},m={};p=v+V;o=this._oVariantSetMap.get(p);return o};sap.ushell.services.PersonalizationContainer.prototype.addVariantSet=function(V){var e={},o={},p="";if(this.containsVariantSet(V)){throw new sap.ushell.utils.Error("Container already contains a variant set with key '"+V+"': sap.ushell.services.Personalization")}p=v+V;e={currentVariant:null,variants:{}};this._oAdapterContainer.setItemValue(p,e);o=new sap.ushell.services.PersonalizationContainerVariantSet(p,this._oAdapterContainer);this._oVariantSetMap.put(p,o);return o};sap.ushell.services.PersonalizationContainer.prototype._serializeVariantSets=function(){var V=[],s="",D=[],t=this;V=this._oVariantSetMap.keys();V.forEach(function(s){var o={},a={};o=t._oVariantSetMap.get(s);a=o._serialize();t._oAdapterContainer.setItemValue(s,j(a))});D=this._aLoadedVariantSetKeys.filter(function(s){return!(V.indexOf(s)>-1)});D.forEach(function(s){t._oAdapterContainer.delItem(s)})};sap.ushell.services.PersonalizationContainer.prototype.delVariantSet=function(V){var p="";p=v+V;this._oVariantSetMap.remove(p);return this._oAdapterContainer.delItem(p)};sap.ushell.services.Personalization.ContextContainer=function(s,a,C,S){this._oService=s;this._sContainerKey=C;this._oAdapterContainer={};this._oScope=S||{validity:Infinity};this._aLoadedKeys=[];var D={},t=this;this.clear();if(!this._sContainerKey||typeof this._sContainerKey!=="string"){throw new sap.ushell.utils.Error("Invalid container key: sap.ushell.services.Personalization")}this._oAdapterContainer=a.getAdapterContainer(this._sContainerKey);return this};sap.ushell.services.Personalization.ContextContainer.prototype.getValidity=function(){return this._oScope.validity};sap.ushell.services.Personalization.ContextContainer.prototype.clear=function(){this._oItemMap={};this._aLoadedItemKeys=[];this._clear=true;this._oItemMap=new sap.ushell.utils.Map()};sap.ushell.services.Personalization.ContextContainer.prototype.load=function(){var D={},a=[],p,t=this;D=new jQuery.Deferred();if(!this._sContainerKey){throw new sap.ushell.utils.Error("Invalid container key: sap.ushell.services.Personalization")}this.clear();p=this._oService._pendingContainerOperations_flushAddNext(this._sContainerKey,D);p.always(function(){t._oAdapterContainer.load().fail(function(){D.reject()}).done(function(){t._copyFromAdapter();D.resolve()})});return D.promise()};sap.ushell.services.Personalization.ContextContainer.prototype._copyFromAdapter=function(){var t=this,a;a=t._oAdapterContainer.getItemKeys().splice(0);a.forEach(function(s){t._oItemMap.put(s,JSON.stringify(t._oAdapterContainer.getItemValue(s)))});this._aLoadedItemKeys=t._oItemMap.keys().splice(0)};sap.ushell.services.Personalization.ContextContainer.prototype._isExpired=function(){var t=this,F,T,s;if(this.getValidity()===Infinity||this.getValidity()===0){return false}T=this._getItemValueInternal(d,g);F=sap.ui.core.format.DateFormat.getDateInstance({pattern:A});s=F.format(this._getNow(),true);return T&&s>T};sap.ushell.services.Personalization.ContextContainer.prototype._getNow=function(){return new Date()};sap.ushell.services.Personalization.ContextContainer.prototype._copyToAdapterUpdatingValidity=function(){var a=[],D=[],t=this,n,F,T,s;if(this._clear){a=this._oAdapterContainer.getItemKeys().splice(0);a.forEach(function(b){t._oAdapterContainer.delItem(b)});this._clear=false}if(this.getValidity()===Infinity||this.getValidity()===0){this._delItemInternal(d,I);this._delItemInternal(d,g);this._delItemInternal(d,f)}else{F=sap.ui.core.format.DateFormat.getDateInstance({pattern:A});n=this._getNow();s=F.format(n,true);T=F.format(new Date(n.getTime()+this.getValidity()*60000),true);this._setItemValueInternal(d,I,this._oScope);this._setItemValueInternal(d,g,T);this._setItemValueInternal(d,f,s)}a=this._oItemMap.keys();a.forEach(function(b){t._oAdapterContainer.setItemValue(b,k(t._oItemMap.get(b)))});D=this._aLoadedItemKeys.filter(function(b){return!(a.indexOf(b)>-1)});D.forEach(function(b){t._oAdapterContainer.delItem(b)})};sap.ushell.services.Personalization.ContextContainer.prototype.save=function(){var s,o,p,t=this;this._copyToAdapterUpdatingValidity();s=new jQuery.Deferred();p=this._oService._pendingContainerOperations_cancelAddNext(this._sContainerKey,s);p.always(function(){try{o=t._oAdapterContainer.save().fail(function(){s.reject()}).done(function(){s.resolve()})}catch(e){s.reject()}});return s.promise()};sap.ushell.services.Personalization.ContextContainer.prototype.saveDeferred=function(n){var s,o,p,t=this;this._copyToAdapterUpdatingValidity();s=new jQuery.Deferred();p=this._oService._pendingContainerOperations_cancelAddNext(this._sContainerKey,s);function D(){p.always(function(){try{o=t._oAdapterContainer.save().fail(function(){s.reject()}).done(function(){s.resolve()})}catch(e){s.reject()}})}s._sapFnSave=D;s._sapTimeoutId=setTimeout(D,n);return s.promise()};sap.ushell.services.Personalization.ContextContainer.prototype.flush=function(){var s,o,p,t=this;this._copyToAdapterUpdatingValidity();s=new jQuery.Deferred();p=this._oService._pendingContainerOperations_flushAddNext(this._sContainerKey,s);p.fail(function(){s.reject()}).done(function(){s.resolve()});return s.promise()};sap.ushell.services.Personalization.ContextContainer.prototype.getItemKeys=function(){var F=this._oItemMap.keys().filter(function(s){return s.indexOf(i)===0});return F.map(function(e){return e.replace(i,"","")})};sap.ushell.services.Personalization.ContextContainer.prototype._getInternalKeys=function(){return this._oItemMap.keys().splice(0)};sap.ushell.services.Personalization.ContextContainer.prototype.getItemValue=function(s){return this._getItemValueInternal(i,s)};sap.ushell.services.Personalization.ContextContainer.prototype._getItemValueInternal=function(p,s){if(typeof s!=="string"||typeof p!=="string"){return undefined}return k(this._oItemMap.get(p+s))};sap.ushell.services.Personalization.ContextContainer.prototype.containsItem=function(s){if(typeof s!=="string"){return undefined}return this._oItemMap.containsKey(i+s)};sap.ushell.services.Personalization.ContextContainer.prototype.setItemValue=function(s,o){this._setItemValueInternal(i,s,o)};sap.ushell.services.Personalization.ContextContainer.prototype._setItemValueInternal=function(s,a,o){if(typeof a!=="string"||typeof s!=="string"){throw new sap.ushell.utils.Error("Parameter value of sItemKey or sItemValue is not a string: sap.ushell.services.Personalization")}if(a.length>40){jQuery.sap.log.error("Personalization Service item key/variant set name (\""+a+"\") should be less than 40 characters [current :"+a.length+"]")}this._oItemMap.put(s+a,JSON.stringify(o))};sap.ushell.services.Personalization.ContextContainer.prototype.delItem=function(s){this._delItemInternal(i,s)};sap.ushell.services.Personalization.ContextContainer.prototype._delItemInternal=function(p,s){if(typeof s!=="string"){return undefined}if(typeof p!=="string"){return undefined}this._oItemMap.remove(p+s)};sap.ushell.services.Personalization.VariantSetAdapter=function(C){this._oContextContainer=C};sap.ushell.services.Personalization.VariantSetAdapter.prototype.save=function(){return this._oContextContainer.save()};sap.ushell.services.Personalization.VariantSetAdapter.prototype.getVariantSetKeys=function(){var p=this._oContextContainer._getInternalKeys(),V=[];V=p.map(function(e){return e.replace(v,"","")});return V};sap.ushell.services.Personalization.VariantSetAdapter.prototype.containsVariantSet=function(V){return this.getVariantSetKeys().indexOf(V)>=0};sap.ushell.services.Personalization.VariantSetAdapter.prototype.getVariantSet=function(V){var o=this._oContextContainer._getItemValueInternal(v,V);if(!o){return undefined}return new sap.ushell.services.Personalization.VariantSet(V,this._oContextContainer)};sap.ushell.services.Personalization.VariantSetAdapter.prototype.addVariantSet=function(V){var e={},o={},p="";if(this.containsVariantSet(V)){throw new sap.ushell.utils.Error("Container already contains a variant set with key '"+V+"': sap.ushell.services.Personalization")}e={currentVariant:null,variants:{}};this._oContextContainer._setItemValueInternal(v,V,e);o=new sap.ushell.services.Personalization.VariantSet(V,this._oContextContainer);return o};sap.ushell.services.Personalization.VariantSetAdapter.prototype.delVariantSet=function(V){this._oContextContainer._delItemInternal(v,V)};sap.ushell.services.Personalization.VariantSet=function(V,C){var s,a,b,o=new sap.ushell.utils.Map(),e=new sap.ushell.utils.Map(),l,m,n;this._oContextContainer=C;this._sVariantSetKey=V;this._oVariantSetData=this._oContextContainer._getItemValueInternal(v,this._sVariantSetKey);if(Object.prototype.hasOwnProperty.call(this._oVariantSetData,"currentVariant")){b=this._oVariantSetData.currentVariant}else{throw new sap.ushell.utils.Error("Corrupt variant set data: sap.ushell.services.Personalization")}if(Object.prototype.hasOwnProperty.call(this._oVariantSetData,"variants")){for(s in this._oVariantSetData.variants){if(Object.prototype.hasOwnProperty.call(this._oVariantSetData.variants,s)){a=this._oVariantSetData.variants[s].name;l=this._oVariantSetData.variants[s].variantData;if(o.containsKey(a)){throw new sap.ushell.utils.Error("Variant name already exists: sap.ushell.services.Personalization")}else{o.put(a,s);m=new sap.ushell.services.PersonalizationContainerVariant(s,a,l);e.put(s,m)}}}}else{throw new sap.ushell.utils.Error("Corrupt variant set data: sap.ushell.services.Personalization")}return this};sap.ushell.services.Personalization.VariantSet.prototype._getVariantSet=function(){return this._oVariantSetData};sap.ushell.services.Personalization.VariantSet.prototype._serialize=function(){this._oContextContainer._setItemValueInternal(v,this._sVariantSetKey,this._oVariantSetData)};sap.ushell.services.Personalization.VariantSet.prototype.getCurrentVariantKey=function(){return this._getVariantSet().currentVariant};sap.ushell.services.Personalization.VariantSet.prototype.setCurrentVariantKey=function(V){this._getVariantSet().currentVariant=V;this._serialize()};sap.ushell.services.Personalization.VariantSet.prototype.getVariantKeys=function(){var V=new sap.ushell.utils.Map(),o=this._getVariantSet(this._sVariantSetKey),s;if(Object.prototype.hasOwnProperty.call(o,"variants")){for(s in o.variants){if(Object.prototype.hasOwnProperty.call(o.variants,s)){V.put(s,"dummy")}}}else{throw new sap.ushell.utils.Error("Corrupt variant set data: sap.ushell.services.Personalization")}return V.keys()};sap.ushell.services.Personalization.VariantSet.prototype.getVariantNamesAndKeys=function(){var V=new sap.ushell.utils.Map(),o=new sap.ushell.utils.Map(),a=this._getVariantSet(this._sVariantSetKey),s,b,e;if(Object.prototype.hasOwnProperty.call(a,"variants")){for(s in a.variants){if(Object.prototype.hasOwnProperty.call(a.variants,s)){b=a.variants[s].name;e=a.variants[s].variantData;if(V.containsKey(b)){throw new sap.ushell.utils.Error("Variant name already exists: sap.ushell.services.Personalization")}else{V.put(b,s)}o.put(s,"dummy")}}}else{throw new sap.ushell.utils.Error("Corrupt variant set data: sap.ushell.services.Personalization")}return V.entries};sap.ushell.services.Personalization.VariantSet.prototype.getVariant=function(V){if(typeof V!=="string"){return undefined}var o=this._getVariantSet(this._sVariantSetKey),s,a,b;if(Object.prototype.hasOwnProperty.call(o,"variants")&&Object.prototype.hasOwnProperty.call(o.variants,V)){s=o.variants[V].name;b=o.variants[V].variantData;a=new sap.ushell.services.Personalization.Variant(this,V,s,b);return a}return undefined};sap.ushell.services.Personalization.VariantSet.prototype.getVariantKeyByName=function(V){if(typeof V!=="string"){return undefined}var o=this._getVariantSet(this._sVariantSetKey),s;if(Object.prototype.hasOwnProperty.call(o,"variants")){for(s in o.variants){if(Object.prototype.hasOwnProperty.call(o.variants,s)){if(V===o.variants[s].name){return s}}}}else{throw new sap.ushell.utils.Error("Corrupt variant set data: sap.ushell.services.Personalization")}return undefined};sap.ushell.services.Personalization.VariantSet.prototype.containsVariant=function(V){var o=this._getVariantSet();if(typeof V!=="string"){return undefined}return Object.prototype.hasOwnProperty.call(o,"variants")&&Object.prototype.hasOwnProperty.call(o.variants,V)};sap.ushell.services.Personalization.VariantSet.prototype.addVariant=function(V){var K=[],m=0,s="",o={};K=this.getVariantKeys();m=parseInt(K.sort(function(a,b){return a-b}).reverse()[0],10);s=isNaN(m)?"0":(m+1).toString();if(K.indexOf(s)>=0){throw new sap.ushell.utils.Error("Variant key '"+s+"' already exists in variant set"+this._sVariantSetKey+"': sap.ushell.services.Personalization")}if(typeof V!=="string"){throw new sap.ushell.utils.Error("Parameter value of sVariantName is not a string: sap.ushell.services.Personalization")}if(this.getVariantKeyByName(V)!==undefined){throw new sap.ushell.utils.Error("Variant name '"+V+"' already exists in variant set '"+this._sVariantSetKey+"' (Old key: '"+this.getVariantKeyByName(V)+"' New key: '"+s+"') ': sap.ushell.services.Personalization")}o=new sap.ushell.services.Personalization.Variant(this,s,V);this._getVariantSet(this._sVariantSetKey).variants[s]={name:V,variantData:{}};this._serialize();return o};sap.ushell.services.Personalization.VariantSet.prototype.delVariant=function(V){var o;if(typeof V!=="string"){return undefined}o=this._getVariantSet();if(o&&o.variants){delete this._oVariantSetData.variants[V]}this._serialize()};sap.ushell.services.PersonalizationContainerVariantSet=function(V,a){var o,s,b,e,l,m;this._sVariantSetKey=V;this._oAdapterContainer=a;this._oVariantNameMap=new sap.ushell.utils.Map();this._oVariantMap=new sap.ushell.utils.Map();o=j(this._oAdapterContainer.getItemValue(V));if(o.hasOwnProperty("currentVariant")){this._sCurrentVariantKey=o.currentVariant}else{throw new sap.ushell.utils.Error("Corrupt variant set data: sap.ushell.services.Personalization")}if(o.hasOwnProperty("variants")){for(s in o.variants){if(o.variants.hasOwnProperty(s)){b=o.variants[s].name;e=o.variants[s].variantData;if(this._oVariantNameMap.containsKey(b)){throw new sap.ushell.utils.Error("Variant name already exists: sap.ushell.services.Personalization")}else{this._oVariantNameMap.put(b,s);l=new sap.ushell.services.PersonalizationContainerVariant(s,b,e);this._oVariantMap.put(s,l)}}}}else{throw new sap.ushell.utils.Error("Corrupt variant set data: sap.ushell.services.Personalization")}return this};sap.ushell.services.PersonalizationContainerVariantSet.prototype.getCurrentVariantKey=function(){return this._sCurrentVariantKey};sap.ushell.services.PersonalizationContainerVariantSet.prototype.setCurrentVariantKey=function(V){this._sCurrentVariantKey=V};sap.ushell.services.PersonalizationContainerVariantSet.prototype.getVariantKeys=function(){return this._oVariantMap.keys()};sap.ushell.services.PersonalizationContainerVariantSet.prototype.getVariantNamesAndKeys=function(){return JSON.parse(JSON.stringify(this._oVariantNameMap.entries))};sap.ushell.services.PersonalizationContainerVariantSet.prototype.getVariant=function(V){if(typeof V!=="string"){return undefined}return this._oVariantMap.get(V)};sap.ushell.services.PersonalizationContainerVariantSet.prototype.getVariantKeyByName=function(V){if(typeof V!=="string"){return undefined}return this._oVariantNameMap.get(V)};sap.ushell.services.PersonalizationContainerVariantSet.prototype.containsVariant=function(V){if(typeof V!=="string"){return undefined}return this._oVariantMap.containsKey(V)};sap.ushell.services.PersonalizationContainerVariantSet.prototype.addVariant=function(V){var K=[],m=0,s="",o={};K=this._oVariantMap.keys();m=parseInt(this._oVariantMap.keys().sort(function(a,b){return a-b}).reverse()[0],10);s=isNaN(m)?"0":(m+1).toString();if(this._oVariantMap.containsKey(s)){throw new sap.ushell.utils.Error("Variant key '"+s+"' already exists in variant set"+this._sVariantSetKey+"': sap.ushell.services.Personalization")}if(typeof V!=="string"){throw new sap.ushell.utils.Error("Parameter value of sVariantName is not a string: sap.ushell.services.Personalization")}if(this._oVariantNameMap.containsKey(V)){throw new sap.ushell.utils.Error("Variant name '"+V+"' already exists in variant set '"+this._sVariantSetKey+"' (Old key: '"+this._oVariantNameMap.get(V)+"' New key: '"+s+"') ': sap.ushell.services.Personalization")}o=new sap.ushell.services.PersonalizationContainerVariant(s,V);this._oVariantMap.put(s,o);this._oVariantNameMap.put(V,s);return o};sap.ushell.services.PersonalizationContainerVariantSet.prototype._serialize=function(){var V={},a=[],o={},b={},t=this;o.currentVariant=this._sCurrentVariantKey;a=this.getVariantKeys();a.forEach(function(s){var V={};V=t._oVariantMap.get(s);b[s]=V._serialize()});o.variants=b;return o};sap.ushell.services.PersonalizationContainerVariantSet.prototype.delVariant=function(V){var o=this._oVariantMap.get(V);if(o){this._oVariantNameMap.remove(o.getVariantName());this._oVariantMap.remove(V)}};sap.ushell.services.Personalization.Variant=function(V,s,a){if(typeof s!=="string"){throw new sap.ushell.utils.Error("Parameter value of sVariantKey is not a string: sap.ushell.services.Personalization")}if(typeof a!=="string"){throw new sap.ushell.utils.Error("Parameter value of sVariantName is not a string: sap.ushell.services.Personalization")}this._oVariantSet=V;this._sVariantKey=s;this._sVariantName=a};sap.ushell.services.Personalization.Variant.prototype.getVariantKey=function(){return this._sVariantKey};sap.ushell.services.Personalization.Variant.prototype.getVariantName=function(){return this._sVariantName};sap.ushell.services.Personalization.Variant.prototype.setVariantName=function(V){var o=this._oVariantSet._getVariantSet(),a;if(typeof V!=="string"){throw new sap.ushell.utils.Error("Parameter value of sVariantName is not a string: sap.ushell.services.Personalization")}if(this._oVariantSet.getVariantKeyByName(V)!==undefined){throw new sap.ushell.utils.Error("Variant with name '"+V+"' already exists in variant set '"+this._oVariantSet._sVariantSetKey+"': sap.ushell.services.Personalization")}if(Object.prototype.hasOwnProperty.call(o,"variants")&&Object.prototype.hasOwnProperty.call(o.variants,this._sVariantKey)){a=o.variants[this._sVariantKey];a.name=V;this._sVariantName=V;this._oVariantSet._serialize()}else{throw new sap.ushell.utils.Error("Variant does not longer exist")}};sap.ushell.services.Personalization.Variant.prototype.getItemValue=function(s){if(typeof s!=="string"){return undefined}var a=this._oVariantSet._getVariantSet().variants[this._sVariantKey].variantData;return Object.prototype.hasOwnProperty.call(a,s)&&j(a[s])};sap.ushell.services.Personalization.Variant.prototype.setItemValue=function(s,o){if(typeof s!=="string"){throw new sap.ushell.utils.Error("Parameter value of sItemKey is not a string: sap.ushell.services.Personalization")}var a,b=this._oVariantSet._getVariantSet().variants&&this._oVariantSet._getVariantSet().variants[this._sVariantKey];if(!b){throw new sap.ushell.utils.Error("Variant does not longer exist")}if(!b.variantData){b.variantData={}}a=b.variantData;a[s]=j(o);this._oVariantSet._serialize()};sap.ushell.services.Personalization.Variant.prototype.containsItem=function(s){if(typeof s!=="string"){return undefined}var a=this.oAccess.variantSet._getVariantSet().variants[this._sVariantKey].variantData;return Object.prototype.hasOwnProperty.call(a,s)};sap.ushell.services.Personalization.Variant.prototype.getItemKeys=function(){var a=this._oVariantSet._getVariantSet().variants[this._sVariantKey].variantData,s,o=[];for(s in a){if(Object.prototype.hasOwnProperty.call(a,s)){o.push(s)}}o.sort();return o};sap.ushell.services.Personalization.Variant.prototype.delItem=function(s){if(typeof s!=="string"){return undefined}var a=this.oVariantSet._getVariantSet().variants[this._sVariantKey].variantData;delete a[s];this.oVariantSet._serialize()};sap.ushell.services.PersonalizationContainerVariant=function(V,s,o){if(typeof V!=="string"){throw new sap.ushell.utils.Error("Parameter value of sVariantKey is not a string: sap.ushell.services.Personalization")}if(typeof s!=="string"){throw new sap.ushell.utils.Error("Parameter value of sVariantName is not a string: sap.ushell.services.Personalization")}if(o&&typeof o!=="object"){throw new sap.ushell.utils.Error("Parameter value of sVariantName is not a string: sap.ushell.services.Personalization")}this._oVariantKey=V;this._oVariantName=s;this._oItemMap=new sap.ushell.utils.Map();this._oItemMap.entries=o||{}};sap.ushell.services.PersonalizationContainerVariant.prototype.getVariantKey=function(){return this._oVariantKey};sap.ushell.services.PersonalizationContainerVariant.prototype.getVariantName=function(){return this._oVariantName};sap.ushell.services.PersonalizationContainerVariant.prototype.getItemValue=function(s){if(typeof s!=="string"){return undefined}return this._oItemMap.get(s)};sap.ushell.services.PersonalizationContainerVariant.prototype.setItemValue=function(s,o){if(typeof s!=="string"){throw new sap.ushell.utils.Error("Parameter value of sItemKey is not a string: sap.ushell.services.Personalization")}return this._oItemMap.put(s,o)};sap.ushell.services.PersonalizationContainerVariant.prototype.containsItem=function(s){if(typeof s!=="string"){return undefined}return this._oItemMap.containsKey(s)};sap.ushell.services.PersonalizationContainerVariant.prototype.getItemKeys=function(){return this._oItemMap.keys()};sap.ushell.services.PersonalizationContainerVariant.prototype.delItem=function(s){if(typeof s!=="string"){return undefined}return this._oItemMap.remove(s)};sap.ushell.services.PersonalizationContainerVariant.prototype._serialize=function(){var a=[],V={},o={},t=this;V.name=this.getVariantName();a=this._oItemMap.keys();a.forEach(function(s){o[s]=t.getItemValue(s)});V.variantData=o;return V};sap.ushell.services.Personalization.WindowValidityPersistenceAdapter=function(s){if(!sap.ushell.services.Personalization.WindowValidityPersistenceAdapter.prototype.data){sap.ushell.services.Personalization.WindowValidityPersistenceAdapter.prototype.data={}}};sap.ushell.services.Personalization.WindowValidityPersistenceAdapter.prototype.getAdapterContainer=function(C){return new sap.ushell.services.Personalization.WindowValidityPersistenceAdapterContainer(C)};sap.ushell.services.Personalization.WindowValidityPersistenceAdapter.prototype.delAdapterContainer=function(C){var D=new jQuery.Deferred();delete sap.ushell.services.Personalization.WindowValidityPersistenceAdapter.prototype.data[C];D.resolve();return D.promise()};sap.ushell.services.Personalization.WindowValidityPersistenceAdapterContainer=function(C){this._oItemMap=new sap.ushell.utils.Map();this._sContainerKey=C};sap.ushell.services.Personalization.WindowValidityPersistenceAdapterContainer.prototype.load=function(){var D=new jQuery.Deferred();this._oItemMap.entries=j(sap.ushell.services.Personalization.WindowValidityPersistenceAdapter.prototype.data[this._sContainerKey])||{};D.resolve();return D.promise()};sap.ushell.services.Personalization.WindowValidityPersistenceAdapterContainer.prototype.save=function(){var D=new jQuery.Deferred();sap.ushell.services.Personalization.WindowValidityPersistenceAdapter.prototype.data[this._sContainerKey]=j(this._oItemMap.entries);D.resolve();return D.promise()};sap.ushell.services.Personalization.WindowValidityPersistenceAdapterContainer.prototype.getItemKeys=function(){return this._oItemMap.keys()};sap.ushell.services.Personalization.WindowValidityPersistenceAdapterContainer.prototype.containsItem=function(s){this._oItemMap.containsKey(s)};sap.ushell.services.Personalization.WindowValidityPersistenceAdapterContainer.prototype.getItemValue=function(s){return this._oItemMap.get(s)};sap.ushell.services.Personalization.WindowValidityPersistenceAdapterContainer.prototype.setItemValue=function(s,o){this._oItemMap.put(s,o)};sap.ushell.services.Personalization.WindowValidityPersistenceAdapterContainer.prototype.delItem=function(s){this._oItemMap.remove(s)}}())};if(!jQuery.sap.isDeclared('sap.ushell.services.UserRecents')){(function(){"use strict";jQuery.sap.declare("sap.ushell.services.UserRecents");function R(m,E,c,l,s){var r=[],u=function(I,t){return r.some(function(o){var f;if(E(o.oItem,I)){o.oItem=I;o.iTimestamp=t;o.iCount=o.iCount+1;f=true}else{f=false}return f})},i=function(I,t){var n={oItem:I,iTimestamp:t,iCount:1};if(r.length===m){r.sort(c);r.pop()}r.push(n)};this.newItem=function(I){var t=+new Date(),A;l().done(function(L){r=L||[];A=u(I,t);if(!A){i(I,t)}s(r)})};this.getRecentItems=function(){var d=new jQuery.Deferred();l().done(function(L){L=L||[];L.sort(c);r=L.slice(0,m);d.resolve(jQuery.map(r,function(o){return o.oItem}))});return d.promise()}};function a(l,s){var A,t=this,m=30,d=false,n=[];this.init=function(){var p,c=this.getDayFromDateObj(this.getCurrentDate()),i=jQuery.Deferred();if(!d||c!=A.recentDay){p=l();p.done(function(b){d=true;A=b||{recentDay:null,recentAppsUsageMap:{}};t.calculateInitialUsage(c);i.resolve(A)});p.fail(function(){jQuery.sap.log.error("UShell-lib ; RecentAppsUsage ; Load data in Init failed");i.reject()})}else{i.resolve(A)}return i.promise()};this.calculateInitialUsage=function(c){var t=this;if(c!=A.recentDay){this.addNewDay();A.recentDay=c;setTimeout(function(){t.cleanUnusedHashes()},3000);this.saveAppsUsage(A)}};this.addAppUsage=function(h){if(!sap.ushell.utils.validHash(h)){return jQuery.Deferred().reject("Non valid hash").promise()}var p=this.init();p.done(function(){var b=A.recentAppsUsageMap[h]||[];if(b.length==0){b[0]=1}else{b[b.length-1]+=1}A.recentAppsUsageMap[h]=b;t.saveAppsUsage(A)});p.fail(function(){Query.sap.log.error("Ushell-lib ; addAppUsage ; Initialization falied!")});return p};this.getAppsUsage=function(){var r,p,t=this,D=jQuery.Deferred();p=t.init();p.done(function(){r=t.summarizeUsage();D.resolve(r)});p.fail(function(){D.reject("Not initialized yet")});return D.promise()};this.summarizeUsage=function(){var u={},h,b,c,f=true;for(h in A.recentAppsUsageMap){u[h]=this.getHashUsageSum(h);if(f){b=c=u[h];f=false}else{if(u[h]<c){c=u[h]}else if(u[h]>b){b=u[h]}}}return{usageMap:u,maxUsage:b,minUsage:c}};this.addNewDay=function(){var h,b;for(h in A.recentAppsUsageMap){b=A.recentAppsUsageMap[h];b[b.length]=0;if(b.length>m){b=b.shift()}}};this.cleanUnusedHashes=function(){var u,h;for(h in A.recentAppsUsageMap){u=t.getHashUsageSum(h);if(u==0){delete(A.recentAppsUsageMap[h])}}};this.getHashUsageSum=function(h){var b=0,c,f=A.recentAppsUsageMap[h],g=f.length;for(c=0;c<g;c++){b+=f[c]}return b};this.saveAppsUsage=function(o){var p=s(o);p.fail(function(){jQuery.sap.log.error("Ushell-lib ; saveAppsUsage ; Save action failed")});p.done(function(b){});return p};this.getCurrentDate=function(){return new Date()};this.getDayFromDateObj=function(b){return(b.getUTCFullYear()+"/"+(b.getUTCMonth()+1)+"/"+b.getUTCDate())}};sap.ushell.services.UserRecents=function(){var r,o,A,b,p,c,s,d,f,l,S,g="RecentApps",h="AppsUsage",i="RecentSearches",j="RecentDataSources",P="sap.ushell.services.UserRecents";this.noticeDataSource=function(D){if((D&&D.objectName&&D.objectName.value&&D.objectName.value.toLowerCase()==="$$all$$")||(D.objectName&&D.objectName.toLowerCase&&D.objectName.toLowerCase()==="$$all$$"))return;b.newItem(D);return b.getRecentItems()};this.getRecentDataSources=function(){return b.getRecentItems()};this.noticeSearch=function(m){r.newItem(m);return r.getRecentItems()};this.getRecentSearches=function(){return r.getRecentItems()};this.noticeApp=function(m){o.newItem(m);return o.getRecentItems()};this.getRecentApps=function(){return o.getRecentItems()};this.initAppsUsage=function(){A.init(new Date())};this.addAppUsage=function(m){var n=sap.ushell.utils.getBasicHash(m);A.addAppUsage(n)};this.getAppsUsage=function(){return A.getAppsUsage()};p=sap.ushell.Container.getService("Personalization");try{c=p.getPersonalizer({container:P,item:g});s=p.getPersonalizer({container:P,item:i});d=p.getPersonalizer({container:P,item:j});f=p.getPersonalizer({container:P,item:h})}catch(k){jQuery.sap.log.error("Personalization service does not work:");jQuery.sap.log.error(k.name+": "+k.message)}l=function(m){var n,D;try{n=m.getPersData()}catch(k){jQuery.sap.log.error("Personalization service does not work:");jQuery.sap.log.error(k.name+": "+k.message);D=new jQuery.Deferred();D.reject(k);n=D.promise()}return n};S=function(m,L){var n;try{n=m.setPersData(L)}catch(k){jQuery.sap.log.error("Personalization service does not work:");jQuery.sap.log.error(k.name+": "+k.message)}return n};r=new R(10,function(x,y){var m=false;if(x.oDataSource&&y.oDataSource){if(x.oDataSource.objectName&&y.oDataSource.objectName){m=((x.sTerm===y.sTerm)&&(x.oDataSource.objectName.value===y.oDataSource.objectName.value))}if(!x.oDataSource.objectName&&!y.oDataSource.objectName){m=(x.sTerm===y.sTerm)}}if(!x.oDataSource&&!y.oDataSource){m=(x.sTerm===y.sTerm)}return m},function(x,y){return y.iTimestamp-x.iTimestamp},l.bind(this,s),S.bind(this,s));b=new R(6,function(x,y){if(x.objectName&&y.objectName)return x.objectName.value===y.objectName.value;return false},function(x,y){return y.iTimestamp-x.iTimestamp},l.bind(this,d),S.bind(this,d));o=new R(6,function(x,y){return x.semanticObject===y.semanticObject&&x.action===y.action},function(x,y){return y.iTimestamp-x.iTimestamp},l.bind(this,c),S.bind(this,c));A=new a(l.bind(this,f),S.bind(this,f))};var e=sap.ui.getCore().getEventBus();sap.ushell.services.UserRecents.hasNoAdapter=true}())};if(!jQuery.sap.isDeclared('sap.ushell.ui.footerbar.LoginDetailsButton')){
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5) (c) Copyright 2009-2013 SAP AG. All rights reserved
 */
jQuery.sap.declare("sap.ushell.ui.footerbar.LoginDetailsButton");jQuery.sap.require('sap.m.Button');sap.m.Button.extend("sap.ushell.ui.footerbar.LoginDetailsButton",{metadata:{library:"sap.ushell"}});
// Copyright (c) 2013 SAP AG, All Rights Reserved
(function(){"use strict";jQuery.sap.require('sap.ui.layout.form.SimpleForm');jQuery.sap.require('sap.m.Label');jQuery.sap.require('sap.m.Text');jQuery.sap.require('sap.m.Input');jQuery.sap.require('sap.m.Dialog');jQuery.sap.require('sap.m.Button');jQuery.sap.declare("sap.ushell.ui.footerbar.LoginDetailsButton");sap.ushell.ui.footerbar.LoginDetailsButton.prototype.init=function(){this.setIcon('sap-icon://person-placeholder');this.setWidth('100%');this.setText(sap.ushell.resources.i18n.getText("userPreferences"));this.setTooltip(sap.ushell.resources.i18n.getText("userPreferences_tooltip"));this.attachPress(this.showLoginDetailsDialog);this.setEnabled();if(sap.m.Button.prototype.init){sap.m.Button.prototype.init.apply(this,arguments)}};sap.ushell.ui.footerbar.LoginDetailsButton.prototype.showLoginDetailsDialog=function(){var i=[],t,s,o,c,m=sap.ui.getCore().byId("shell").getModel(),T,a,g,l,b,d=this;try{this.userInfoService=sap.ushell.Container.getService("UserInfo");this.oUser=this.userInfoService.getUser()}catch(e){jQuery.sap.log.error("Getting UserInfo service failed");this.oUser=sap.ushell.Container.getUser()}this.translationBundle=sap.ushell.resources.i18n;T=this.oUser.isSetThemePermitted();a=this.oUser.getTheme();l=new sap.ui.core.Item({text:sap.ushell.resources.i18n.getText('themesLoading'),enabled:true});d.themeSelection=new sap.m.Select({id:"themesDropdown",enabled:!!m.getProperty("/setTheme"),visible:true,name:"Our Drop-Down",items:l});b=[new sap.m.Text("userName",{text:d.oUser.getFullName()||''})];if(d.oUser.getEmail()){b.push(new sap.m.Label(''));b.push(new sap.m.Text("userEmail",{text:d.oUser.getEmail()}))}b=b.concat(new sap.m.Label("selectedTheme",{required:true,text:" "+this.translationBundle.getText("theme")}),d.themeSelection,new sap.m.Label("serverNameLbl",{text:this.translationBundle.getText("serverFld")}),new sap.m.Text("serverNameTxt",{text:window.location.host}),new sap.m.Label("languageLbl",{text:this.translationBundle.getText("languageFld")}),new sap.m.Text("languageTxt",{text:d.oUser.getLanguage()||''}));s=new sap.ui.layout.form.SimpleForm({content:b});o=new sap.m.Button({id:"okButton",text:this.translationBundle.getText("okBtn"),press:d._dialogOkButtonHandler.bind(d),enabled:false});c=new sap.m.Button({id:"cancelButton",text:this.translationBundle.getText("cancelBtn"),press:function(){d.oDialog.close()}.bind(d)});d.oDialog=new sap.m.Dialog({id:"loginDetailsDialog",title:this.translationBundle.getText("userPreferences"),contentWidth:"300px",content:s,beginButton:o,endButton:c,afterClose:function(){d.themeSelection.destroy();d.oDialog.destroy();this.oUser.resetChangedProperties()}.bind(d)});d.oDialog.open();if(T){g=this.userInfoService.getThemeList();g.done(function(D){var f,h;t=D.options||[];for(f=0;f<t.length;f++){h=t[f].name;if(h){i[f]=new sap.ui.core.Item({id:t[f].id,text:h,enabled:true,key:h})}}if(t.length>1){i.sort(function(j,k){var n=j.getText().toLowerCase(),p=k.getText().toLowerCase();if(n<p){return-1}if(n>p){return 1}return 0})}o.setEnabled()});g.fail(function(){i[0]=new sap.ui.core.Item({id:a,text:a,enabled:true,key:a});bEnableThemeSelection=false});g.always(jQuery.proxy(this._setThemeSelection,this,i,a))}else{d.themeSelection.addItem(new sap.ui.core.Item({id:a,text:a,enabled:true,key:a}));d.themeSelection.setSelectedKey(a);d.themeSelection.setEnabled(false)}};sap.ushell.ui.footerbar.LoginDetailsButton.prototype._setThemeSelection=function(i,c){var a,b,C;if(i){this.themeSelection.removeAllItems();for(a=0;a<i.length;a++){this.themeSelection.addItem(i[a])}b=i.filter(function(t){return t.getId()===c});C=b.length?b[0].getText():{};if(C){this.themeSelection.setSelectedKey(C)}}};sap.ushell.ui.footerbar.LoginDetailsButton.prototype._restoreUserPreferencesProperties=function(e){var m,o=this.oUser.getChangedProperties().filter(function(C){return C.name==="THEME"})[0].oldValue;this.oUser.setTheme(o);m=sap.ushell.Container.getService("Message");m.error(this.translationBundle.getText("changeThemeFailed"));jQuery.sap.log.error(e)};sap.ushell.ui.footerbar.LoginDetailsButton.prototype._dialogOkButtonHandler=function(){this.oDialog.close();var c=this.oUser.getTheme(),u,m;if(this.themeSelection.getSelectedItemId()!==c){this.oUser.setTheme(this.themeSelection.getSelectedItemId());u=this.userInfoService.updateUserPreferences(this.oUser);u.done(function(){m=this.translationBundle.getText("savedChanges");jQuery.sap.require("sap.m.MessageToast");sap.m.MessageToast.show(m,{duration:3000,width:"15em",my:"center bottom",at:"center bottom",of:window,offset:"0 -50",collision:"fit fit"});this.oUser.resetChangedProperties()}.bind(this));u.fail(function(e){this._restoreUserPreferencesProperties(e)}.bind(this))}};sap.ushell.ui.footerbar.LoginDetailsButton.prototype.setEnabled=function(e){if(!sap.ushell.Container){if(this.getEnabled()){jQuery.sap.log.warning("Disabling 'Login Details' button: unified shell container not initialized",null,"sap.ushell.ui.footerbar.LoginDetailsButton")}e=false}sap.m.Button.prototype.setEnabled.call(this,e)}}())};if(!jQuery.sap.isDeclared('sap.ushell.ui.launchpad.HeaderTile')){
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5) (c) Copyright 2009-2013 SAP AG. All rights reserved
 */
jQuery.sap.declare("sap.ushell.ui.launchpad.HeaderTile");sap.ushell.ui.launchpad.Tile.extend("sap.ushell.ui.launchpad.HeaderTile",{metadata:{library:"sap.ushell",properties:{"headerLevel":{type:"sap.m.HeaderLevel",group:"Appearance",defaultValue:sap.m.HeaderLevel.H3},"headerText":{type:"string",group:"Appearance",defaultValue:null}}}})
// Copyright (c) 2013 SAP AG, All Rights Reserved
};if(!jQuery.sap.isDeclared('sap.ushell.ui.launchpad.PlusTile')){
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5) (c) Copyright 2009-2013 SAP AG. All rights reserved
 */
jQuery.sap.declare("sap.ushell.ui.launchpad.PlusTile");sap.ushell.ui.launchpad.Tile.extend("sap.ushell.ui.launchpad.PlusTile",{metadata:{library:"sap.ushell",properties:{"groupId":{type:"string",group:"Misc",defaultValue:''}},events:{"press":{}}}});sap.ushell.ui.launchpad.PlusTile.M_EVENTS={'press':'press'};
// Copyright (c) 2013 SAP AG, All Rights Reserved
(function(){"use strict";sap.ushell.ui.launchpad.PlusTile.prototype.init=function(){this.oIcon=new sap.ui.core.Icon({src:'sys-cancel',tooltip:sap.ushell.resources.i18n.getText("open_catalog")})};sap.ushell.ui.launchpad.PlusTile.prototype.exit=function(){if(this.oIcon){this.oIcon.destroy()}};sap.ushell.ui.launchpad.PlusTile.prototype.onclick=function(){this.firePress()};sap.ushell.ui.launchpad.PlusTile.prototype.onsapspace=function(){this.firePress()};sap.ushell.ui.launchpad.PlusTile.prototype.onsapenter=function(){this.firePress()};sap.ushell.ui.launchpad.PlusTile.prototype.setGroupId=function(v){this.setProperty("groupId",v,true);return this}}())};if(!jQuery.sap.isDeclared('sap.ushell.ui.tile.DynamicTile')){
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5) (c) Copyright 2009-2013 SAP AG. All rights reserved
 */
jQuery.sap.declare("sap.ushell.ui.tile.DynamicTile");sap.ushell.ui.tile.TileBase.extend("sap.ushell.ui.tile.DynamicTile",{metadata:{library:"sap.ushell",properties:{"numberValue":{type:"string",group:"Data",defaultValue:'0.0'},"numberState":{type:"sap.ushell.ui.tile.State",group:"Appearance",defaultValue:sap.ushell.ui.tile.State.Neutral},"numberUnit":{type:"string",group:"Data",defaultValue:null},"numberDigits":{type:"int",group:"Appearance",defaultValue:0},"stateArrow":{type:"sap.ushell.ui.tile.StateArrow",group:"Appearance",defaultValue:sap.ushell.ui.tile.StateArrow.None},"numberFactor":{type:"string",group:"Data",defaultValue:null}}}})
// Copyright (c) 2013 SAP AG, All Rights Reserved
};if(!jQuery.sap.isDeclared('sap.ushell.ui.tile.DynamicTileRenderer')){(function(){"use strict";jQuery.sap.declare("sap.ushell.ui.tile.DynamicTileRenderer");jQuery.sap.require('sap.ushell.ui.tile.State');jQuery.sap.require('sap.ui.core.format.NumberFormat');sap.ushell.ui.tile.DynamicTileRenderer=sap.ui.core.Renderer.extend(sap.ushell.ui.tile.TileBaseRenderer);var t=sap.ushell.resources.i18n;sap.ushell.ui.tile.DynamicTileRenderer.renderPart=function(r,c){r.write("<div");r.addClass("sapUshellDynamicTile");r.writeClasses();r.write(">");r.write("<div");r.addClass("sapUshellDynamicTileData");r.addClass((c.getNumberState()?"sapUshellDynamicTileData"+c.getNumberState():"sapUshellDynamicTileData"+sap.ushell.ui.tile.State.Neutral));r.writeClasses();r.write(">");r.write("<div class='sapUshellDynamicTileIndication'>");if(c.getStateArrow()){r.write("<div");r.addClass("sapUshellDynamicTileStateArrow");r.addClass("sapUshellDynamicTileData"+c.getStateArrow());r.writeClasses();r.write(">");r.write("</div>")}r.write('<br><div');r.addClass("sapUshellDynamicTileNumberFactor");r.writeClasses();r.writeAccessibilityState(c,{label:t.getText("TileUnits_lable")+c.getNumberFactor()});r.write('>');r.writeEscaped(c.getNumberFactor());r.write('</div>');r.write("</div>");var n=c.getNumberValue(),a;if(typeof n==="string"&&isNaN(parseFloat(n))){a=n}else{var N=sap.ui.core.format.NumberFormat.getFloatInstance({maxFractionDigits:c.getNumberDigits()});a=N.format(c.getNumberValue())}r.write('<div');r.addClass("sapUshellDynamicTileNumber");r.writeClasses();if(a&&a!==""){r.writeAccessibilityState(c,{label:t.getText("TileValue_lable")+a});r.write('>');r.writeEscaped(a)}else{r.write('>');r.writeEscaped(c.getNumberValue())}r.write('</div>');r.write("</div>");r.write("</div>")};sap.ushell.ui.tile.DynamicTileRenderer.getInfoPrefix=function(c){return c.getNumberUnit()}}())};if(!jQuery.sap.isDeclared('sap.ushell.ui.tile.ImageTile')){
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5) (c) Copyright 2009-2013 SAP AG. All rights reserved
 */
jQuery.sap.declare("sap.ushell.ui.tile.ImageTile");sap.ushell.ui.tile.TileBase.extend("sap.ushell.ui.tile.ImageTile",{metadata:{library:"sap.ushell",properties:{"imageSource":{type:"string",group:"Appearance",defaultValue:null}}}})
// Copyright (c) 2013 SAP AG, All Rights Reserved
};if(!jQuery.sap.isDeclared('sap.ushell.ui.tile.ImageTileRenderer')){(function(){"use strict";jQuery.sap.declare("sap.ushell.ui.tile.ImageTileRenderer");sap.ushell.ui.tile.ImageTileRenderer=sap.ui.core.Renderer.extend(sap.ushell.ui.tile.TileBaseRenderer);sap.ushell.ui.tile.ImageTileRenderer.renderPart=function(r,c){r.write("<img");r.addClass("sapUshellImageTile");r.writeClasses();r.writeAttributeEscaped("src",c.getImageSource());r.write("/>")}}())};if(!jQuery.sap.isDeclared('sap.ushell.ui.tile.StaticTile')){
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5) (c) Copyright 2009-2013 SAP AG. All rights reserved
 */
jQuery.sap.declare("sap.ushell.ui.tile.StaticTile");sap.ushell.ui.tile.TileBase.extend("sap.ushell.ui.tile.StaticTile",{metadata:{library:"sap.ushell"}})
// Copyright (c) 2013 SAP AG, All Rights Reserved
};if(!jQuery.sap.isDeclared('sap.ushell.ui.tile.StaticTileRenderer')){(function(){"use strict";jQuery.sap.declare("sap.ushell.ui.tile.StaticTileRenderer");sap.ushell.ui.tile.StaticTileRenderer=sap.ui.core.Renderer.extend(sap.ushell.ui.tile.TileBaseRenderer);sap.ushell.ui.tile.StaticTileRenderer.renderPart=function(r,c){r.write("<span");r.addClass("sapUshellStaticTile");r.writeClasses();r.write(">");r.write("</span>")}}())};if(!jQuery.sap.isDeclared('sap.ushell.renderers.fiori2.Shell.view')){jQuery.sap.declare('sap.ushell.renderers.fiori2.Shell.view');
//Copyright (c) 2013 SAP AG, All Rights Reserved
(function(){"use strict";sap.ui.jsview("sap.ushell.renderers.fiori2.Shell",{createContent:function(c){var s=this;var v=this.getViewData()||{},C=v.config||{},S=(C.appState==="embedded")?true:false,b=(C.appState==="headerless")?true:false,p=function(e,k,H){return e?H:k},f=function(I,e){return sap.ui.getCore().byId(e.getObject())},l=new sap.ushell.ui.launchpad.LoadingDialog({id:"loadingDialog",title:null,text:"",showCancelButton:false}),o=new sap.ui.unified.ShellHeadItem({id:"configBtn",tooltip:"{i18n>showGrpsBtn_tooltip}",icon:sap.ui.core.IconPool.getIconURI("menu2"),selected:{path:"/currentState/showPane"},press:[c.togglePane,c]}),h=new sap.ui.unified.ShellHeadItem({id:"homeBtn",title:"{i18n>homeBtn_tooltip}",tooltip:"{i18n>homeBtn_tooltip}",icon:sap.ui.core.IconPool.getIconURI("home"),press:[c.navigateToHome,c]}),B=new sap.ui.unified.ShellHeadItem({id:"backBtn",title:"{i18n>backBtn_tooltip}",tooltip:"{i18n>backBtn_tooltip}",icon:{parts:["/rtl"],formatter:function(r){return r?sap.ui.core.IconPool.getIconURI("feeder-arrow"):sap.ui.core.IconPool.getIconURI("nav-back")}},press:[c.navigateToHome,c]});o.addEventDelegate({onsaptabprevious:function(E){try{if(!sap.ushell.renderers.fiori2.AccessKeysHandler.goToEdgeTile('last')){sap.ui.getCore().byId('actionsBtn').focus()}E.preventDefault()}catch(e){}}});h.addEventDelegate({onsaptabprevious:function(E){try{if(!sap.ushell.renderers.fiori2.AccessKeysHandler.goToEdgeTile('last')){jQuery(document).find(".sapUshellNoFilteredItems").focus()}E.preventDefault()}catch(e){}}});var a,A;if(S){A=new sap.ui.unified.ShellHeadItem({id:"standardActionsBtn",tooltip:"{i18n>headerActionsTooltip}",icon:sap.ui.core.IconPool.getIconURI("account"),press:[c.pressActionBtn,c]})}else if(!b){a=new sap.ui.unified.ShellHeadUserItem({id:"actionsBtn",username:sap.ushell.Container.getUser().getFullName(),tooltip:"{i18n>headerActionsTooltip}",image:sap.ui.core.IconPool.getIconURI("account"),press:[c.pressActionBtn,c]});a.addEventDelegate({onsaptabnext:function(E){try{var k=sap.ui.getCore().byId('shell'),D=k.getModel().getData();if(D.currentState.stateName==="home"){if(D.currentState.showPane){var m=sap.ui.getCore().byId('groupListPage');var n=m.getContent()[1];var q=n.getItems()[0];if(q){q.focus()}else{sap.ui.getCore().byId('addGroupActionItem').focus()}}else{if(!sap.ushell.renderers.fiori2.AccessKeysHandler.goToEdgeTile('first')){sap.ui.getCore().byId('configBtn').focus()}else{u.setFocusOnFirstGroupOnPage()}}E.preventDefault()}}catch(e){}}});var i=sap.ushell.Container.getUser().getImage();if(i){jQuery.ajax({url:i,headers:{'Cache-Control':'no-cache, no-store, must-revalidate','Pragma':'no-cache','Expires':'0'},success:function(){a.setImage(i)},error:function(){jQuery.sap.log.error("Could not load user image from: "+i,"","sap.ushell.renderers.fiori2.Shell.view")}})}}var u=new sap.ui.unified.Shell({id:"shell",fullHeightContent:true,showPane:{path:"/currentState/showPane"},headItems:{path:"/currentState/headItems",factory:f},headEndItems:{path:"/currentState/headEndItems",factory:f},user:a,paneContent:{path:"/currentState/paneContent",factory:f},headerHiding:{path:"/currentState/headerHiding"},headerVisible:{path:"/currentState/headerVisible"}});u._setStrongBackground(true);if(sap.ui.Device.os.android){o.addEventDelegate({onclick:function(e){e.preventDefault()}})}u.focusOnConfigBtn=function(){jQuery.sap.delayedCall(0,this,function(){if(!b){var C=sap.ui.getCore().byId('configBtn');if(C){C.focus()}}})};u.oldInvalidate=u.invalidate;u.invalidate=function(){this.oldInvalidate.apply(this,arguments)};u.setFocusOnFirstGroupOnPage=function(){var D=sap.ui.getCore().byId('dashboardGroups'),n=jQuery(D.getDomRef()).find(".sapUshellTileContainer:first");if(n[0]){n.focus()}else{sap.ui.getCore().byId('addGroupActionItem').focus()}};u.setFocusOnFirstGroupInList=function(){var e=sap.ui.getCore().byId('groupList'),n=jQuery(e.getDomRef()).find("li:first");if(n[0]){n.focus()}};this.oDashboardManager=new sap.ushell.renderers.fiori2.launchpad.DashboardManager("dashboardMgr",{model:c.getModel(),config:C});var d=this.pageFactory("dashboardPage",this.oDashboardManager.getDashboardView(),!sap.ui.Device.system.desktop),g=this.pageFactory("shellPage",u,true);this.initNavContainer(c);if(S){u.setIcon(sap.ui.resource('sap.ui.core','themes/base/img/1x1.gif'))}else{this.initShellBarLogo(u)}this.setDisplayBlock(true);this.aDanglingControls=[sap.ui.getCore().byId('navContainer'),g,d,B,l,h,o];u.updateAggregation=this.updateShellAggregation;var j=(C.enableSearch!==false);c.getModel().setProperty("/searchAvailable",j);if(j){s.oSearchField=new sap.ui.unified.ShellHeadItem({id:"sf",tooltip:"{i18n>searchbox_tooltip}",icon:sap.ui.core.IconPool.getIconURI("search"),visible:{path:"/searchAvailable"},press:function(e){if(!s.oHeadSearchBox){s.initHeadSearchBox();s.openHeadSearchBox(e,true)}else{if(!s.oHeadSearchBox.getVisible()){s.openHeadSearchBox(e,false)}else{if(s.oHeadSearchInput.getValue()===""){s.closeHeadSearchBox(e)}else{s.handleHash(s.getModel("searchModelInHead"));s.oHeadSearchInput.destroySuggestionRows();s.closeHeadSearchBox(e)}}}}});s.aDanglingControls.push(s.oSearchField)}this.logonIFrameReference=null;return new sap.m.App({pages:g})},_getIconURI:function(i){var r=null;if(i){var m=/url[\s]*\('?"?([^\'")]*)'?"?\)/.exec(i);if(m){r=m[1]}}return r},initShellBarLogo:function(u){jQuery.sap.require("sap.ui.core.theming.Parameters");var i=sap.ui.core.theming.Parameters.get("sapUiGlobalLogo");if(i){i=this._getIconURI(i);if(!i){u.setIcon(sap.ui.resource("sap.ui.core","mimes/logo/sap_50x26.png"))}}var t=this;sap.ui.getCore().attachThemeChanged(function(){var n=sap.ui.core.theming.Parameters.get("sapUiGlobalLogo");if(n){n=t._getIconURI(n);if(n){u.setIcon(n)}}})},initHeadSearchBox:function(){var s=this;var S;s.oHeadSearchBox=sap.ui.getCore().byId("headSearchBox");if(!s.oHeadSearchBox){s.oHeadSearchBox=new sap.m.Toolbar({id:"headSearchBox"}).addStyleClass('sapUshellHeadSearchBox')}S=sap.ui.getCore().byId('shell');S.setSearch(s.oHeadSearchBox);s.oHeadSearchSelect=sap.ui.getCore().byId("headSearchSelect");if(!s.oHeadSearchSelect){s.oHeadSearchSelect=new sap.m.Select({id:"headSearchSelect",name:"headSearchSelect",autoAdjustWidth:true,items:{path:"searchModelInHead>/connectors",template:new sap.ui.core.Item({key:"{searchModelInHead>labelRaw}",text:"{searchModelInHead>label}"})}}).addStyleClass('sapUshellContainerSearchSelect')}s.oHeadSearchInput=sap.ui.getCore().byId("headSearchInput");if(!s.oHeadSearchInput){s.oHeadSearchInput=new sap.m.Input({id:"headSearchInput",type:"Text",showValueStateMessage:false,showTableSuggestionValueHelp:false,showSuggestion:true,filterSuggests:false,suggestionColumns:[new sap.m.Column({})],liveChange:function(e){s.inputLiveChange(e)},suggest:function(e){s.handleSuggest(e)},suggestionItemSelected:function(e){if(s.changeTimer){window.clearTimeout(s.changeTimer);s.changeTimer=null}s.selectSuggest(e)},change:function(e){s.changeTimer=window.setTimeout(function(){var a=s.getModel("searchModelInHead");s.handleHash(a);s.oHeadSearchInput.destroySuggestionRows();s.closeHeadSearchBox(event);s.changeTimer=null},100)}})}s.oHeadSearchBox.addContent(s.oHeadSearchSelect);s.oHeadSearchBox.addContent(s.oHeadSearchInput);s.oHeadSearchBox.addEventDelegate({onAfterRendering:function(e){jQuery('#headSearchBox').parent().parent().parent().addClass('headSearchDivContainer');jQuery('#headSearchBox').parent().parent().addClass('headSearchDiv')}},s.oHeadSearchBox)},openHeadSearchBox:function(e,f){var s=this;var S=sap.ui.getCore().byId('shell');var a=S.getSearch();if(!a){S.setSearch(s.oHeadSearchBox);f=true}var b=sap.ui.getCore().getModel("searchModel");if(!b){b=new sap.ushell.renderers.fiori2.search.SearchModel();b.setSizeLimit(200);sap.ui.getCore().setModel(b,"searchModel");b.searchInit()}else{}b.setSkip(0,false);s.setModel(sap.ushell.resources.i18nModel,"i18n");var c=s.getModel("searchModelInHead");if(!c){c=new sap.ushell.renderers.fiori2.search.SearchModel();c.setSizeLimit(200);s.setModel(c,"searchModelInHead");c.searchInit();s.createHeadSearchBoxViews(c)}else{}var j;if(c.getProperty('/isNormalSearchEnable')){j=c.createAllDataSource()}else{j=c.createAppDataSource()}c.setProperty("/dataSource",j);if(c.getProperty('/isNormalSearchEnable')){s.oHeadSearchSelect.setSelectedKey("$$ALL$$")}else{s.oHeadSearchSelect.setSelectedKey("$$APP$$")}c.setProperty("/searchBoxTerm","");s.oHeadSearchInput.setValue("");s.oHeadSearchInput.setPlaceholder(sap.ushell.resources.i18n.getText("search"));s.oHeadSearchBox.setVisible(true);s.oHeadSearchBox.addEventDelegate({onAfterRendering:function(E){if(f){jQuery('.headSearchDiv').css("maxWidth","38rem")}else{jQuery('.headSearchDiv').css("maxWidth","0rem");jQuery('.headSearchDiv').animate({'maxWidth':'38rem'},100)}}},s.oHeadSearchBox)},closeHeadSearchBox:function(){var s=this;jQuery('.headSearchDiv').animate({'maxWidth':'38rem'},{duration:100,complete:function(){s.oHeadSearchBox.setVisible(false)}})},createHeadSearchBoxViews:function(s){var a=this;a.oHeadSearchSelect.attachChange(function(e){var b=a.oHeadSearchSelect.getSelectedItem();var j={};if(b.getKey()==="$$ALL$$"){j=s.createAllDataSource()}else if(b.getKey()==="$$APP$$"){j=s.createAppDataSource()}else{j=s.sina.createDataSource({objectName:{label:b.getText(),value:b.getKey()},packageName:{label:"",value:""},schemaName:{label:"",value:""},label:""})}s.setProperty("/dataSource",j);if(b.getKey()!=="$$ALL$$"){a.oHeadSearchInput.setPlaceholder(sap.ushell.resources.i18n.getText("searchIn")+": "+b.getText())}else{a.oHeadSearchInput.setPlaceholder(sap.ushell.resources.i18n.getText("search"))}},this);a.oHeadSearchInput.addEventDelegate({onAfterRendering:function(e){e.srcControl.focus()},},a.oHeadSearchInput);a.oHeadSearchInput.bindAggregation("suggestionRows","searchModelInHead>/mixedSection",function(p,d){var l=new sap.m.Label({text:"{searchModelInHead>mixedLabel}"}).addStyleClass('sapUshellSuggestText').addStyleClass('sapUshellSearchSuggestionNavItem');l.addEventDelegate({onAfterRendering:function(){a.bTagUnescaper(this.getDomRef())}},l);l.data("labelRaw","{searchModelInHead>labelRaw}");l.data("targetURL","{searchModelInHead>targetURL}");l.data("dataSource","{searchModelInHead>dataSource}");l.data("suggestType","{searchModelInHead>suggestType}");var i=new sap.ui.core.Icon({src:"{searchModelInHead>icon}"}).addStyleClass('sapUshellSuggestIcon');var b=new sap.m.Label({text:{path:"searchModelInHead>icon",formatter:function(v){if(v){return"<i>"+sap.ushell.resources.i18n.getText("label_app")+"</i>"}return""}}}).addStyleClass('sapUshellSuggestText').addStyleClass('sapUshellSearchSuggestionNavItem');b.addEventDelegate({onAfterRendering:function(){a.bTagUnescaper(this.getDomRef())}},b);var c=new sap.m.CustomListItem({type:sap.m.ListType.Active,content:[b,i,l]});c.getText=function(){return l.data("labelRaw")};if(!a.oHeadSearchInput.getValue())return null;return new sap.m.ColumnListItem({cells:[c],type:"Active"})})},bTagUnescaper:function(d){var i=d.innerHTML;while(i.indexOf('&lt;b&gt;')+i.indexOf('&lt;/b&gt;')>=-1){i=i.replace('&lt;b&gt;','<b>');i=i.replace('&lt;/b&gt;','</b>')}while(i.indexOf('&lt;i&gt;')+i.indexOf('&lt;/i&gt;')>=-1){i=i.replace('&lt;i&gt;','<i>');i=i.replace('&lt;/i&gt;','</i>')}d.innerHTML=i},handleHash:function(s){var a=this;if(a.oHeadSearchInput.getValue()==="")return;var h="#Action-search&/searchTerm="+encodeURIComponent(a.oHeadSearchInput.getValue())+"&dataSource="+encodeURIComponent(JSON.stringify(s.getDataSourceJson()));if(window.location.hash===h){return}else{window.location.href=h;s.setProperty("/searchBoxTerm",a.oHeadSearchInput.getValue())}},inputLiveChange:function(e){var s=this.getModel("searchModelInHead");if(!this.oHeadSearchInput.getValue()){s.setProperty("/appSection",[]);s.setProperty("/suggestSection",[]);s.setProperty("/mixedSection",[])}},handleSuggest:function(e){this.oHeadSearchInput.destroySuggestionItems();var s=this.oHeadSearchInput.getValue();var a=this.getModel("searchModelInHead");a.setProperty("/searchBoxTerm",s);a.doSuggestion()},selectSuggest:function(e){var s=this.getModel("searchModelInHead");var a=e.getParameter("selectedRow").getCells()[0].getContent()[2].data("suggestType");var b=e.getParameter("selectedRow").getCells()[0].getContent()[2].data("labelRaw");var d=e.getParameter("selectedRow").getCells()[0].getContent()[2].data("dataSource");var t=e.getParameter("selectedRow").getCells()[0].getContent()[2].data("targetURL");if(a==="dataSourceSuggest"){s.setProperty("/searchBoxTerm","");this.oHeadSearchInput.setValue("");this.oHeadSearchSelect.setSelectedKey(b);var c=this.oHeadSearchSelect.getSelectedItem();var j={};if(c.getKey()==="$$ALL$$"){j=s.createAllDataSource()}else if(c.getKey()==="$$APP$$"){j=s.createAppDataSource()}else{j=s.sina.createDataSource({objectName:{label:c.getText(),value:c.getKey()},packageName:{label:"",value:""},schemaName:{label:"",value:""},label:""})}s.setProperty("/dataSource",j);if(c.getKey()!=="$$ALL$$"){this.oHeadSearchInput.setPlaceholder(sap.ushell.resources.i18n.getText("searchIn")+": "+c.getText())}else{this.oHeadSearchInput.setPlaceholder(sap.ushell.resources.i18n.getText("search"))}return}var h;if(t){h=t}else{s.setSearchTerm(b,false);s.setDataSource(d,false);h="#Action-search&/searchTerm="+encodeURIComponent(s.getProperty("/searchBoxTerm"))+"&dataSource="+encodeURIComponent(JSON.stringify(s.getDataSourceJson()))}if(window.location.hash!==h){if(h.charAt(0)==='#')window.location.href=h;else window.open(h);this.closeHeadSearchBox(event)}},initNavContainer:function(c){var d=sap.ui.getCore().byId("dashboardPage"),n=new sap.m.NavContainer({id:"navContainer",pages:[d],initialPage:d,afterNavigate:jQuery.proxy(c.onAfterNavigate,c)});n.addCustomTransition("slideBack",sap.m.NavContainer.transitions.slide.back,sap.m.NavContainer.transitions.slide.back);return n},updateShellAggregation:function(n){var b=this.mBindingInfos[n],a=this.getMetadata().getJSONKeys()[n],c;jQuery.each(this[a._sGetter](),jQuery.proxy(function(i,v){this[a._sRemoveMutator](v)},this));jQuery.each(b.binding.getContexts(),jQuery.proxy(function(i,v){c=b.factory(this.getId()+"-"+i,v)?b.factory(this.getId()+"-"+i,v).setBindingContext(v,b.model):"";this[a._sMutator](c)},this))},disableBouncing:function(p){p.onBeforeRendering=function(){sap.m.Page.prototype.onBeforeRendering.apply(p);var s=this._oScroller,o=s.onAfterRendering;s.onAfterRendering=function(){o.apply(s);if(s._scroller){s._scroller.options.bounce=false}}};return p},getControllerName:function(){return"sap.ushell.renderers.fiori2.Shell"},pageFactory:function(i,c,d){var p=new sap.m.Page({id:i,showHeader:false,showFooter:false,content:c,enableScrolling:!!sap.ui.Device.system.desktop}),e=["onAfterHide","onAfterShow","onBeforeFirstShow","onBeforeHide","onBeforeShow"],D={};jQuery.each(e,function(I,E){D[E]=jQuery.proxy(function(a){jQuery.each(this.getContent(),function(I,c){c._handleEvent(a)})},p)});p.addEventDelegate(D);if(d&&sap.ui.Device.system.desktop){this.disableBouncing(p)}return p},onAfterRendering:function(){if(window.f2p){jQuery.sap.require("sap.ushell.components.perf.monitor");window.f2pMonitor.init(sap.ui.getCore().byId("navContainer"))}},createIFrameDialog:function(){jQuery.sap.require("sap.ushell.ui.footerbar.ContactSupportButton");var d=null;var l=this.logonIFrameReference;var _=function(){if(l){l.remove()}return $('<iframe id="SAMLDialogFrame" src="" frameborder="0"></iframe>')};var a=function(){d.addStyleClass('samlDialogHidden');$('#sap-ui-blocklayer-popup').addClass('samlDialogHidden')};this.destroyIFrameDialog();var c=new sap.m.Button({text:sap.ushell.resources.i18n.getText("samlCloseBtn"),press:function(){sap.ushell.Container.cancelLogon()}});var b=new sap.ushell.ui.footerbar.ContactSupportButton();b.setWidth('150px');b.setIcon('');var h=new sap.ui.core.HTML("SAMLDialogFrame");this.logonIFrameReference=_();h.setContent(this.logonIFrameReference.prop('outerHTML'));d=new sap.m.Dialog({id:"SAMLDialog",title:sap.ushell.resources.i18n.getText("samlDialogTitle"),contentWidth:"50%",contentHeight:"50%",leftButton:b,rightButton:c});d.addContent(h);d.open();a();this.logonIFrameReference=$('#SAMLDialogFrame');return this.logonIFrameReference[0]},destroyIFrameDialog:function(){var d=sap.ui.getCore().byId('SAMLDialog');if(d){d.destroy()}this.logonIFrameReference=null},showIFrameDialog:function(){var d=sap.ui.getCore().byId('SAMLDialog');if(d){d.removeStyleClass('samlDialogHidden');$('#sap-ui-blocklayer-popup').removeClass('samlDialogHidden')}}})}())};if(!jQuery.sap.isDeclared('sap.ushell.renderers.fiori2.search.HistoryScreen.controller')){jQuery.sap.declare('sap.ushell.renderers.fiori2.search.HistoryScreen.controller');
// Copyright (c) 2013 SAP AG, All Rights Reserved
(function(){"use strict";sap.ui.controller("sap.ushell.renderers.fiori2.search.HistoryScreen",{onInit:function(){var s=this;this.oLaunchPageService=sap.ushell.Container.getService("LaunchPage");this.oUserRecentsService=sap.ushell.Container.getService("UserRecents");this.oSearchService=sap.ushell.Container.getService("Search");this.oCurrentSearch=null;var t=this,e=sap.ui.getCore().getEventBus(),r=new sap.ui.model.json.JSONModel();r.setProperty("/apps",[]);r.setProperty("/searches",[]);r.setProperty("/dataSources",[]);this.getView().setModel(r);e.subscribe("search",this.newSearchInvoked,this);e.subscribe("searchDataSourceChange",this.newSearchCategory,this);e.subscribe("closeCurtain",this.saveSearch,this);e.subscribe("openApp",this.appOpened,this);e.subscribe("openHistoryScreen",this.updateView,this)},onExit:function(){if(this.oCurrentSearch){this.oUserRecentsService.noticeSearch(this.oCurrentSearch)}var e=sap.ui.getCore().getEventBus();e.unsubscribe("search",this.newSearchInvoked,this);e.unsubscribe("searchDataSourceChange",this.newSearchCategory,this);e.unsubscribe("closeCurtain",this.saveSearch,this);e.unsubscribe("openApp",this.appOpened,this);e.unsubscribe("openHistoryScreen",this.updateView,this)},updateView:function(c,e,d){var s=this;var m=this.getView().getModel();var r=function(a){return a.replace(/<b>/g,"").replace(/<\/b>/g,"")};this.oUserRecentsService.getRecentSearches().done(function(R){for(var i=0;i<R.length;i++){var S=R[i];if(S&&S.oDataSource&&S.oDataSource.objectName){S.oDataSource.objectName.label=r(S.oDataSource.objectName.label)}}R=R.filter(function(a){if(a&&a.sTerm&&a.sTerm!=="")return true;else return false});m.setProperty("/searches",R)});$.when(this.oUserRecentsService.getRecentDataSources()).done(function(R){if(!R)R=[];for(var i=0;i<R.length;i++){var D=R[i];if(D&&D.objectName){D.objectName.label=r(D.objectName.label)}}var f=function(a){for(var i=0;i<R.length;i++){var b=R[i];if(b.objectName.value===a.objectName.value)return true}return false};if(R.length>=6){R.length=6}else{R.sort(function(a,b){var l=a.label||a.objectName.label;var g=b.label||b.objectName.label;if(l<g)return-1;if(l>g)return 1;return 0})}m.setProperty("/dataSources",R);s.getView().dsRequestFinished()})},newSearchInvoked:function(c,e,d){var s=this;if(d.dataSource){this.oCurrentSearch={sTerm:d.searchTerm,oDataSource:d.dataSource}}else{this.oCurrentSearch={sTerm:d.searchTerm,oDataSource:this.getView().getModel("search").getDataSource()}}},newSearchCategory:function(c,e,d){if(this.oCurrentSearch){this.oCurrentSearch.oObjectName=d}},saveSearch:function(c,e,d){if(this.oCurrentSearch){var s=this.getView().getModel("searchModel");if(s&&s.perspective&&s.perspective.getSearchResultSet&&s.perspective.getSearchResultSet().totalcount>0){this.oUserRecentsService.noticeSearch(this.oCurrentSearch);this.oCurrentSearch=null}}},searchAgain:function(d){},appOpened:function(c,e,d){var t=this,n={},r;this.saveSearch(c,e,d);if(!d.semanticObject||!d.action||!d.oMetadata||!d.oMetadata.title||d.oMetadata.libraryName==="factSheet"){return}n.semanticObject=d.semanticObject;n.action=d.action;n.sTargetHash=d.sShellHash;n.title=d.oMetadata.title;n.icon=d.oMetadata.icon;n.url=d.sShellHash+(d.sAppPart||"");this.oUserRecentsService.noticeApp(n)}})}())};
