//Copyright (c) 2013 SAP AG, All Rights Reserved
(function(g){"use strict";sap.m.Link.extend("sap.ushell.renderers.fiori2.search.DataSourcePill",{metadata:{properties:{dataSourceName:"string",},events:{press:{}}},renderer:function(r,c){r.write('<div tabindex=0');r.writeControlData(c);r.addClass("sapUshellDataSourcePill");r.addClass("sapUshellDataSourceListPill");r.writeClasses();r.write(">");r.write('<div class="sapUiUfdShellSearchBoxPillDsName">'+c.getDataSourceName()+'</div>');r.write("</div>")},onclick:function(e){this.firePress()},onkeyup:function(e){if(event.keyCode==13){this.firePress()}}});sap.ui.core.Control.extend("sap.ushell.renderers.fiori2.search.DataSourceList",{metadata:{properties:{"dataSources":{type:"object[]"}},events:{dsPress:{}}},renderer:function(r,c){r.write("<div");r.writeControlData(c);r.addClass("sapUshellDataSourceList");r.writeClasses();r.write('>');var d=sap.ui.Device.media.getCurrentRange(sap.ushell.renderers.fiori2.search.DataSourceList.RANGESET);var n=sap.ushell.renderers.fiori2.search.DataSourceList._columns[d.name];var a=[];for(var i=0;i<n;i++){var h;if(i===0){h="Left"}else if(i===n-1){h="Left"}else{h="Left"}a.push(new sap.m.Column({hAlign:h}))}var b=c.getDataSources();if(b&&b.length!==0){$.each(b,function(i,v){var e=v.label||v.objectName.label||v.objectName.value;if(!e||e==="")e=v.objectName.value;var p=new sap.ushell.renderers.fiori2.search.DataSourcePill({dataSourceName:e,press:function(){c.fireDsPress({ds:v})}}).addStyleClass("sapUshellDataSourcePill");r.renderControl(p)})}r.write("</div>")},_handleMediaChange:function(){this.rerender()},});sap.ushell.renderers.fiori2.search.DataSourceList.RANGESET="DataSourceLayoutRangeSet";sap.ushell.renderers.fiori2.search.DataSourceList._columns={Phone:1,Tablet:2,Desktop:3};sap.ushell.renderers.fiori2.search.DataSourceList.prototype.init=function(){sap.ui.Device.media.initRangeSet(sap.ushell.renderers.fiori2.search.DataSourceList.RANGESET,[500,1024],"px",["Phone","Tablet","Desktop"]);sap.ui.Device.media.attachHandler(this._handleMediaChange,this,sap.ushell.renderers.fiori2.search.DataSourceList.RANGESET)}}(window));
