jQuery.sap.declare("sap.suite.ui.smartbusiness.drilldown.lib.Navigation");sap.suite=sap.suite||{};sap.suite.smartbusiness=sap.suite.smartbusiness||{};sap.suite.smartbusiness.navigation=(function(){var a={};var _={};function b(s,c,d){var e="/GetLinksForSemanticObject?semanticObject='"+s+"'";var f="";if(d&&Object.keys(d).length){var f="";for(var k in d){f+=k+"="+d[k]+"&"}f=encodeURIComponent(f.substring(0,f.length-1));f="&businessParams='"+f+"'"}else if(c&&c.length){for(var i=0;i<c.length;i++){f+=c[i]+"=1&"}f=encodeURIComponent(f.replace(/&$/g,""));f="&businessParams='"+f+"'"}return e+f}return{getLinksBySemanticObject:function(p){var t=this;var d=new sap.ui.model.odata.ODataModel("/sap/opu/odata/UI2/INTEROP",true);var s=b(p.semanticObject,p.dimensions,p.businessParam);var c=d.read(s,null,null,true,function(e){p.success.call(p.context||null,e.results)},function(){jQuery.sap.log.error("Error fetching getLinksBySemanticObject : "+p.semanticObject);p.success.call(p.context||null,[])},!!p.async);return c},getLinksByContext:function(p){var o=[];if(p.viewId&&_[p.viewId]){p.success.call(p.context||null,_[p.viewId])}else{var s=[p.semanticObject],l=[];p.dimensions=p.dimensions||[];s=s.concat(p.dimensions);var c=s.length;if(c){for(var i=0;i<s.length;i++){var d=this.getLinksBySemanticObject({async:true,semanticObject:s[i],dimensions:p.dimensions,success:function(e){l=l.concat(e);if(--c==0){_[p.viewId]=l;p.success.call(p.context||null,l)}},error:function(){if(--c==0){_[p.viewId]=l;p.success.call(p.context||null,l)}}});o.push(d)}}else{p.success.call(p.context||null,[])}}return o}}})();
