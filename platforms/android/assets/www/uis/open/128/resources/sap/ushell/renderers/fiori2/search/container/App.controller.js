// Copyright (c) 2013 SAP AG, All Rights Reserved
jQuery.sap.require("sap.m.MessageToast");sap.ui.controller("sap.ushell.renderers.fiori2.search.container.App",{onInit:function(){this.oShellNavigation=sap.ushell.Container.getService("ShellNavigation");this.oShellNavigation.hashChanger.attachEvent("hashChanged",this.hashChanged)},hashChanged:function(e){var v=sap.ui.getCore().byId("searchContainerApp");var s=sap.ui.getCore().getModel("searchModel");var u=sap.ushell.Container.getService("URLParsing");var p=u.parseParameters("?"+e.getParameter("newHash").replace(/#/g,'%23'));if(!p.searchTerm)return;var a=decodeURIComponent(p.searchTerm[0]);s.setSearchTerm(a,false);var d;if(p.dataSource){var b=JSON.parse(decodeURIComponent(p.dataSource[0]));d=s.sina.createDataSource(b);s.setDataSource(d,false)}else{s.resetDataSource(false)}v.oSearchResults.searchLayout.setShowBottomList(s.getProperty("/isNormalSearchEnable"));if(!s.getProperty("/isNormalSearchEnable"))v.oSearchResults.searchLayout.setBottomCount(0);v.oSearchSelect.setSelectedKey(s.getProperty("/dataSourceLabelRaw"));v.oSearchInput.setValue(s.getProperty('/searchBoxTerm'));var h=sap.ui.getCore().byId("headSearchBox");if(h!==undefined){if(h.getVisible()){h.setVisible(false)}}s._searchFireQuery()},onExit:function(){this.oShellNavigation.hashChanger.detachEvent("hashChanged",this.hashChanged)},});
