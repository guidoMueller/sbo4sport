/*!
 * SAP APF Analysis Path Framework
 * 
 * (c) Copyright 2012-2014 SAP AG. All rights reserved
 */
sap.ui.controller("sap.apf.ui.reuse.controller.step",{setActiveStep:function(i){var o=this.oCoreApi.getActiveStep();var a=this.oCoreApi.getSteps().indexOf(o);if(a===i){return}var b=this.oCoreApi.getSteps()[i];this.oCoreApi.setActiveStep(b);this.oUiApi.getAnalysisPath().getController().drawMainChart();var s=this.oUiApi.getAnalysisPath().getCarousel().stepViews[i];s.toggleActiveStep()},bindEvts:function(){var s=this;var c=this.oUiApi.getAnalysisPath().getCarousel();var a=this.getView().oVChartTiltleLayout;a.attachBrowserEvent('click',function(){var b=c.stepViews.indexOf(s.getView());s.setActiveStep(b)})},onAfterRendering:function(){this.bindEvts()},onInit:function(){this.oCoreApi=this.getView().getViewData().oCoreApi;this.oUiApi=this.getView().getViewData().uiApi;this.isSwitched=false},drawThumbnailContent:function(d){var v=this.getView();var i=this.oUiApi.getAnalysisPath().getCarousel().stepViews.indexOf(v);if(this.representationInstance!==undefined){if(this.representationInstance!==this.oCoreApi.getSteps()[i].getSelectedRepresentation().type){this.isSwitched=true}}this.representationInstance=this.oCoreApi.getSteps()[i].getSelectedRepresentation().type;if(this.oCoreApi.getSteps()[i].getSelectedRepresentation().toggleInstance!==undefined){this.bToggleInstanceExists=true}if(this.isSwitched===true||d===undefined||d===true||this.bToggleInstanceExists===true){this.isSwitched=false;v.oThumbnailChartLayout.removeAllItems();var s=this.oCoreApi.getSteps()[i];var c;if(s.getSelectedRepresentation().bIsAlternateView){if(s.getSelectedRepresentation().toggleInstance!==undefined){var a=s.getSelectedRepresentation().getData();var m=s.getSelectedRepresentation().getMetaData();s.getSelectedRepresentation().toggleInstance.setData(a,m);c=s.getSelectedRepresentation().toggleInstance.getThumbnailContent()}else{s.getSelectedRepresentation().toggleInstance=this.oUiApi.getStepContainer().getController().createAlternateRepresentation(i);c=s.getSelectedRepresentation().toggleInstance.getThumbnailContent()}}else{c=s.getSelectedRepresentation().getThumbnailContent()}var o=new sap.m.VBox({}).addStyleClass("overlayThumbnailWrapper");v.oThumbnailChartLayout.addItem(c);v.oThumbnailChartLayout.addItem(o);v.oThumbnailChartLayout.rerender();v.oThumbnailChartLayout.setBusy(false)}else{v.oThumbnailChartLayout.setBusy(false)}}});
