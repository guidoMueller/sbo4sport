/*!
 * SAP APF Analysis Path Framework
 * 
 * (c) Copyright 2012-2014 SAP AG. All rights reserved
 */
sap.ui.controller("sap.apf.ui.reuse.controller.deleteAnalysisPath",{onInit:function(){var s=this;this.oCoreApi=this.getView().getViewData().oInject.oCoreApi;this.oUiApi=this.getView().getViewData().oInject.uiApi;this.oSerializationMediator=this.getView().getViewData().oInject.oSerializationMediator;this.contentWidth=jQuery(window).height()*0.6+"px";this.contentHeight=jQuery(window).height()*0.6+"px";this.stdDialog=new sap.m.Dialog({title:s.oCoreApi.getTextNotHtmlEncoded("select-analysis-path"),contentWidth:s.contentWidth,contentHeight:s.contentHeight,content:this.getView().getContent()[0],leftButton:new sap.m.Button({text:s.oCoreApi.getTextNotHtmlEncoded("cancel"),press:function(){s.stdDialog.close();s.oUiApi.getLayoutView().setBusy(false)}})})},openPathGalleryWithDelete:function(){this.stdDialog.open()},getGuidForPath:function(p,v){var i;for(i=0;i<v.length;i++){var d=v[i];if(d.AnalysisPathName===p){return d.guid}}},deleteSavedPath:function(p,i){var s=this;var g=i.guid;var a=p;var m;var c=s.oUiApi.getAnalysisPath().oSavedPathName.getTitle();s.oSerializationMediator.deletePath(g,function(r,b,d){if(d===undefined&&(typeof r==="object")){i.list.removeItem(i.item);s.oCoreApi.readPaths(function(r,b,d){if(d===undefined&&(typeof r==="object")){var n=r.paths.length;if(n===0){jQuery(".pathText").removeClass("pathTextDontShow");jQuery(".pathText").addClass("pathTextShow")}}else{m=s.oCoreApi.createMessageObject({code:"6005",aParameters:[a]});m.setPrevious(d);s.oCoreApi.putMessage(m)}})}else{m=s.oCoreApi.createMessageObject({code:"6009",aParameters:["delete",a]});m.setPrevious(d);s.oCoreApi.putMessage(m)}});if(c===a){s.oUiApi.getAnalysisPath().getToolbar().getController().resetAnalysisPath()}}});
