/*!
 * SAP APF Analysis Path Framework
 * 
 * (c) Copyright 2012-2014 SAP AG. All rights reserved
 */
jQuery.sap.declare("sap.apf.core.instance");jQuery.sap.require('sap.apf.utils.utils');jQuery.sap.require("sap.apf.core.utils.uriGenerator");jQuery.sap.require("sap.apf.core.annotation");jQuery.sap.require("sap.apf.core.metadata");jQuery.sap.require("sap.apf.core.metadataFacade");jQuery.sap.require("sap.apf.core.metadataProperty");jQuery.sap.require("sap.apf.core.ajax");jQuery.sap.require("sap.apf.core.odataRequest");jQuery.sap.require("sap.apf.core.messageHandler");jQuery.sap.require("sap.apf.core.entityTypeMetadata");jQuery.sap.require("sap.apf.core.metadataFactory");jQuery.sap.require("sap.apf.core.textResourceHandler");jQuery.sap.require("sap.apf.core.configurationFactory");jQuery.sap.require("sap.apf.core.path");jQuery.sap.require("sap.apf.core.sessionHandler");jQuery.sap.require("sap.apf.core.resourcePathHandler");jQuery.sap.require("sap.apf.core.persistence");jQuery.sap.require("sap.apf.core.readRequest");jQuery.sap.require("sap.apf.core.readRequestByRequiredFilter");
sap.apf.core.Instance=function(m){'use strict';var t=this;var r;var I={messageHandler:m,coreApi:t};var R;var M;var T;var c;var p;var s;var P;this.ajax=function(S){return sap.apf.core.ajax(S)};this.odataRequest=function(a,S,e,b){sap.apf.core.odataRequestWrapper(m,a,S,e,b)};this.getMessageHandler=function(){return m};this.putMessage=function(a){return m.putMessage(a)};this.check=function(e,a,C){return m.check(e,a,C)};this.createMessageObject=function(C){return m.createMessageObject(C)};this.activateOnErrorHandling=function(O){m.activateOnErrorHandling(O)};this.setCallbackForMessageHandling=function(C){m.setMessageCallback(C)};this.setApplicationCallbackForMessageHandling=function(C){m.setApplicationMessageCallback(C)};this.getLogMessages=function(){return m.getLogMessages()};this.checkForTimeout=function(S){var a=sap.apf.core.utils.checkForTimeout(S);if(a){m.putMessage(a)}return a};this.getUriGenerator=function(){return sap.apf.core.utils.uriGenerator};this.getMetadata=function(a){return M.getMetadata(a)};this.getMetadataFacade=function(){return M.getMetadataFacade()};this.getEntityTypeMetadata=function(a,e){return M.getEntityTypeMetadata(a,e)};this.loadApplicationConfig=function(f){R.loadConfigFromFilePath(f)};this.getApplicationConfigProperties=function(){return R.getConfigurationProperties()};this.getResourceLocation=function(a){return R.getResourceLocation(a)};this.getPersistenceConfiguration=function(){return R.getPersistenceConfiguration()};this.getApplicationConfigurationURL=function(){return R.getApplicationConfigurationURL()};this.getCategories=function(){return c.getCategories()};this.existsConfiguration=function(i){return c.existsConfiguration(i)};this.getStepTemplates=function(){return c.getStepTemplates()};this.getFacetFilterConfigurations=function(){return c.getFacetFilterConfigurations()};this.createStep=function(S,f,a){var b;m.check(S!==undefined&&typeof S==="string"&&S.length!==0,"sStepID is  unknown or undefined");b=c.createStep(S);d();p.addStep(b,f);return b;function d(){var e,i;if(b&&a&&typeof a==='string'){e=b.getRepresentationInfo();for(i=0;i<e.length;i++){if(e[i].representationId===a){b.setSelectedRepresentation(e[i].representationId);break}}}}};this.getSteps=function(){return p.getSteps()};this.getInitialStep=function(){return p.getInitialStep()};this.moveStepToPosition=function(S,n,f){p.moveStepToPosition(S,n,f)};this.updatePath=function(S,C){p.update(S,C)};this.removeStep=function(S,f){p.removeStep(S,f)};this.resetPath=function(b){if(b){r=jQuery.extend(true,{},p)}p=new sap.apf.core.Path(I)};this.restoreOriginalPath=function(){if(r){p=r}};this.stepIsActive=function(S){return p.stepIsActive(S)};this.serializePath=function(){return p.serialize()};this.deserializePath=function(S){p.deserialize(S)};this.getTextNotHtmlEncoded=function(l,a){return T.getTextNotHtmlEncoded(l,a)};this.getTextHtmlEncoded=function(l,a){return T.getTextHtmlEncoded(l,a)};this.getMessageText=function(C,a){return T.getMessageText(C,a)};this.getXsrfToken=function(S){return s.getXsrfToken(S)};this.setContext=function(C){s.setContext(C)};this.getContext=function(){return s.getContext()};this.getLogicalSystem=function(){return s.getLogicalSystem()};this.createReadRequest=function(){var a=c.createRequest(arguments[0]);if(typeof arguments[0]==='string'){var b=c.getConfigurationById(arguments[0])}else{b=arguments[0]}return new sap.apf.core.ReadRequest(I,a,b.service,b.entityType)};this.createReadRequestByRequiredFilter=function(){var a=c.createRequest(arguments[0]);if(typeof arguments[0]==='string'){var b=c.getConfigurationById(arguments[0])}else{b=arguments[0]}return new sap.apf.core.ReadRequestByRequiredFilter(I,a,b.service,b.entityType)};this.loadMessageConfiguration=function(a,b){m.loadConfig(a,b)};this.loadAnalyticalConfiguration=function(C){c.loadConfig(C)};this.savePath=function(a,b,d,e){var f;var n;var C;var E;if(typeof a==='string'&&typeof b==='string'&&typeof d==='function'){f=a;n=b;C=d;E=e;P.modifyPath(f,n,C,E)}else if(typeof a==='string'&&typeof b==='function'){n=a;C=b;E=d;P.createPath(n,C,E)}else{m.putMessage(sap.apf.core.createMessageObject({code:"5027",aParameters:[a,b,d]}))}};this.readPaths=function(C){P.readPaths(C)};this.openPath=function(a,C,n){return P.openPath(a,C,n)};this.deletePath=function(a,C){P.deletePath(a,C)};this.createFilter=function(){return new sap.apf.utils.Filter(m)};this.getActiveStep=function(){return p.getActiveSteps()[0]};this.setActiveStep=function(S){p.makeStepActive(S);var a=p.getActiveSteps();var i;for(i=0;i<a.length;++i){p.makeStepInactive(a[i])}return p.makeStepActive(S)};R=new sap.apf.core.ResourcePathHandler(I);T=new sap.apf.core.TextResourceHandler(I);m.setTextResourceHandler(T);c=new sap.apf.core.ConfigurationFactory(I);var o={entityTypeMetadata:sap.apf.core.EntityTypeMetadata,hashtable:sap.apf.utils.Hashtable,metadata:sap.apf.core.Metadata,metadataFacade:sap.apf.core.MetadataFacade,metadataProperty:sap.apf.core.MetadataProperty,messageHandler:I.messageHandler,coreApi:t,datajs:OData,annotation:sap.apf.core.annotation,configurationFactory:c};M=new sap.apf.core.MetadataFactory(o);p=new sap.apf.core.Path(I);s=new sap.apf.core.SessionHandler(I);P=new sap.apf.core.Persistence(I)};
